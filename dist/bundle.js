/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e,t,n={507:(e,t)=>{"use strict";function n(e,t,n){if(n>e.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return e.slice(t,n)}function r(e){if(0===e[0])throw new Error("invalid RLP: extra zeros");return a(function(e){let t="";for(let n=0;n<e.length;n++)t+=o[e[n]];return t}(e))}function i(e,t){if(e<56)return Uint8Array.from([e+t]);const n=u(e),r=u(t+55+n.length/2);return Uint8Array.from(l(r+n))}function s(e){let t,i,o,a,l;const c=[],u=e[0];if(u<=127)return{data:e.slice(0,1),remainder:e.slice(1)};if(u<=183){if(t=u-127,o=128===u?Uint8Array.from([]):n(e,1,t),2===t&&o[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:o,remainder:e.slice(t)}}if(u<=191){if(i=u-182,e.length-1<i)throw new Error("invalid RLP: not enough bytes for string length");if(t=r(n(e,1,i)),t<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return o=n(e,i,t+i),{data:o,remainder:e.slice(t+i)}}if(u<=247){for(t=u-191,a=n(e,1,t);a.length;)l=s(a),c.push(l.data),a=l.remainder;return{data:c,remainder:e.slice(t)}}{if(i=u-246,t=r(n(e,1,i)),t<56)throw new Error("invalid RLP: encoded list too short");const o=i+t;if(o>e.length)throw new Error("invalid RLP: total length is larger than the data");for(a=n(e,i,o);a.length;)l=s(a),c.push(l.data),a=l.remainder;return{data:c,remainder:e.slice(o)}}}t.yH=void 0;const o=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function a(e){const t=Number.parseInt(e,16);if(Number.isNaN(t))throw new Error("Invalid byte sequence");return t}function l(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++){const r=2*n;t[n]=a(e.slice(r,r+2))}return t}function c(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.length}return n}function u(e){if(e<0)throw new Error("Invalid integer as argument, must be unsigned!");const t=e.toString(16);return t.length%2?`0${t}`:t}function d(e){return e.length>=2&&"0"===e[0]&&"x"===e[1]}function h(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)return d(e)?l((n="string"!=typeof(r=e)?r:d(r)?r.slice(2):r).length%2?`0${n}`:n):(t=e,(new TextEncoder).encode(t));var t,n,r;if("number"==typeof e||"bigint"==typeof e)return e?l(u(e)):Uint8Array.from([]);if(null==e)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof e)}t.yH={encode:function e(t){if(Array.isArray(t)){const n=[];let r=0;for(let i=0;i<t.length;i++){const s=e(t[i]);n.push(s),r+=s.length}return c(i(r,192),...n)}const n=h(t);return 1===n.length&&n[0]<128?n:c(i(n.length,128),n)},decode:function(e,t=!1){if(null==e||0===e.length)return Uint8Array.from([]);const n=s(h(e));if(t)return n;if(0!==n.remainder.length)throw new Error("invalid RLP: remainder must be zero");return n.data}}},606:(e,t)=>{var n;n=function(e){e.version="1.2.2";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}(),n=function(e){var t=0,n=0,r=0,i="undefined"!=typeof Int32Array?new Int32Array(4096):new Array(4096);for(r=0;256!=r;++r)i[r]=e[r];for(r=0;256!=r;++r)for(n=e[r],t=256+r;t<4096;t+=256)n=i[t]=n>>>8^e[255&n];var s=[];for(r=1;16!=r;++r)s[r-1]="undefined"!=typeof Int32Array?i.subarray(256*r,256*r+256):i.slice(256*r,256*r+256);return s}(t),r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=n[7],d=n[8],h=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14];e.table=t,e.bstr=function(e,n){for(var r=-1^n,i=0,s=e.length;i<s;)r=r>>>8^t[255&(r^e.charCodeAt(i++))];return~r},e.buf=function(e,n){for(var y=-1^n,b=e.length-15,_=0;_<b;)y=v[e[_++]^255&y]^g[e[_++]^y>>8&255]^m[e[_++]^y>>16&255]^p[e[_++]^y>>>24]^f[e[_++]]^h[e[_++]]^d[e[_++]]^u[e[_++]]^c[e[_++]]^l[e[_++]]^a[e[_++]]^o[e[_++]]^s[e[_++]]^i[e[_++]]^r[e[_++]]^t[e[_++]];for(b+=15;_<b;)y=y>>>8^t[255&(y^e[_++])];return~y},e.str=function(e,n){for(var r=-1^n,i=0,s=e.length,o=0,a=0;i<s;)(o=e.charCodeAt(i++))<128?r=r>>>8^t[255&(r^o)]:o<2048?r=(r=r>>>8^t[255&(r^(192|o>>6&31))])>>>8^t[255&(r^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(i++),r=(r=(r=(r=r>>>8^t[255&(r^(240|o>>8&7))])>>>8^t[255&(r^(128|o>>2&63))])>>>8^t[255&(r^(128|a>>6&15|(3&o)<<4))])>>>8^t[255&(r^(128|63&a))]):r=(r=(r=r>>>8^t[255&(r^(224|o>>12&15))])>>>8^t[255&(r^(128|o>>6&63))])>>>8^t[255&(r^(128|63&o))];return~r}},"undefined"==typeof DO_NOT_EXPORT_CRC?n(t):n({})},98:(e,t,n)=>{var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n.g&&n.g,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==n&&n,r="URLSearchParams"in n,i="Symbol"in n&&"iterator"in Symbol,s="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in n,a="ArrayBuffer"in n;if(a)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function m(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=m(t);return t.readAsArrayBuffer(e),n}function v(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:s&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&s&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=v(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=v(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(g)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,n=m(t=new FileReader),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=u(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},f.prototype.delete=function(e){delete this.map[u(e)]},f.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},f.prototype.set=function(e,t){this.map[u(e)]=d(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),h(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),h(e)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(r=(n=t.method||this.method||"GET").toUpperCase(),b.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function x(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},y.call(_.prototype),y.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];w.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,r){return new Promise((function(i,o){var l=new _(e,r);if(l.signal&&l.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function u(){c.abort()}c.onload=function(){var e,t,n={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}})),t)};n.url="responseURL"in c?c.responseURL:n.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout((function(){i(new w(r,n))}),0)},c.onerror=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},c.ontimeout=function(){setTimeout((function(){o(new TypeError("Network request failed"))}),0)},c.onabort=function(){setTimeout((function(){o(new t.DOMException("Aborted","AbortError"))}),0)},c.open(l.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(l.url),!0),"include"===l.credentials?c.withCredentials=!0:"omit"===l.credentials&&(c.withCredentials=!1),"responseType"in c&&(s?c.responseType="blob":a&&l.headers.get("Content-Type")&&-1!==l.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!r||"object"!=typeof r.headers||r.headers instanceof f?l.headers.forEach((function(e,t){c.setRequestHeader(t,e)})):Object.getOwnPropertyNames(r.headers).forEach((function(e){c.setRequestHeader(e,d(r.headers[e]))})),l.signal&&(l.signal.addEventListener("abort",u),c.onreadystatechange=function(){4===c.readyState&&l.signal.removeEventListener("abort",u)}),c.send(void 0===l._bodyInit?null:l._bodyInit)}))}S.polyfill=!0,n.fetch||(n.fetch=S,n.Headers=f,n.Request=_,n.Response=w),t.Headers=f,t.Request=_,t.Response=w,t.fetch=S}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=r.fetch?r:i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},316:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([e.id,'body{margin:0;padding:0;background:#141414}#renderZone,.render--zone,.renderBkg,.content{position:fixed;top:0;left:0;z-index:2;width:98vw;height:98vh;background:rgba(0,0,0,0)}.renderBkg{z-index:2;width:200vw;background-size:100%;transform:translateX(0);transition-property:transform;transition-duration:1s;transition-timing-function:ease-in-out}.content{z-index:3}.Menu{position:fixed;top:100px;left:100px;min-width:100px;z-index:24;background:rgba(73,32,161,.7)}.MenuInner{padding:0 20px 20px}.menuItem{color:#e5e5e5;text-transform:uppercase;margin-top:20px;cursor:pointer;transition-property:all;transition-duration:.4s;transition-timing-function:linear}.menuItem:hover{transform:scale(1.1)}.hidden{display:none}.rightMenu{position:fixed;z-index:999;top:300px;right:50px;width:200px;height:200px;border-radius:20px;background:rgba(165,57,201,.7)}.rmInner{color:#fff;padding:20px;font-size:28px;font-weight:700}.selectBtnCtnr{position:fixed;z-index:999;top:150px;left:100px;padding:20px;color:#fff}.selectBtn{padding:20px;border-radius:100px}.selectBtn.selected{border:1px solid #fff}.pageCtnr{position:absolute;width:100vw;top:0;left:0;z-index:5;color:aqua}.header{display:flex;justify-content:space-between}.mainMenu{display:flex;font-weight:500;margin-top:-10px}.mainMenu .mainMenuItem{margin:20px;padding-bottom:4px}.mainMenu .mainMenuItem a{color:#fff;text-decoration:none}.mainMenu .mainMenuItem a:hover,.mainMenu .mainMenuItem a:focus{color:aqua}.mainMenu .mainMenuItem.active{border-bottom:3px solid aqua}.ActionBtn{min-width:40px;max-width:180px;text-transform:uppercase;padding:10px 30px;border-radius:40px;border:2px solid aqua;cursor:pointer;text-align:center}.ActionBtn:hover,.ActionBtn:focus{color:#141414;background:aqua}@media(max-width: 852px){.vorpalPage{padding:4px}._pc{display:none}}@media(min-width: 853px){.vorpalPage{padding:40px}._mobile{display:none}.authSection{width:14%}}body{font-family:"Inter";font-weight:400}a,div{transition:all .3s ease-in-out}._hidden{display:none !important}',""]);const a=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&o[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},81:e=>{"use strict";e.exports=function(e){return e[1]}},187:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,s),r(n)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,s,o,c;if(a(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),void 0===o)o=s[t]=n,++e._eventsCount;else if("function"==typeof o?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=l(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){r.once&&e.removeEventListener(t,i),n(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=p(l,c);for(n=0;n<c;++n)r(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,d(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,d(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,s,o;if(a(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){o=n[s].listener,i=s;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,s=Object.keys(n);for(r=0;r<s.length;++r)"removeListener"!==(i=s[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},448:(e,t,n)=>{"use strict";var r=n(294),i=n(840);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),M=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function N(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=O&&e[O]||e["@@iterator"])?e:null}var D,B=Object.assign;function U(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function z(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function H(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return z(e.type,!1);case 11:return z(e.type.render,!1);case 1:return z(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case A:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return G(e(t))}catch(e){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Z(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Z(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function se(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,Se=null;function Ae(e){if(e=bi(e)){if("function"!=typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Te(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Me(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ce(e,t){return e(t)}function Pe(){}var Re=!1;function Ie(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ce(e,t,n)}finally{Re=!1,(null!==Ee||null!==Se)&&(Pe(),Me())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(s(231,t,typeof n));return n}var ke=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){ke=!1}function Ne(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}var De=!1,Be=null,Ue=!1,Fe=null,ze={onError:function(e){De=!0,Be=e}};function He(e,t,n,r,i,s,o,a,l){De=!1,Be=null,Ne.apply(ze,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function je(e){if(Ge(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return je(i),e;if(o===r)return je(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ze=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Qe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null,ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2,ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!=(s&=o)&&(r=dt(s))}else 0!=(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!=(4194240&s)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0==(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var xt,wt,Et,St,At,Tt=!1,Mt=[],Ct=null,Pt=null,Rt=null,It=new Map,Lt=new Map,kt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Dt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&null!==(t=bi(t))&&wt(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=yi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function zt(){Tt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Pt&&Ut(Pt)&&(Pt=null),null!==Rt&&Ut(Rt)&&(Rt=null),It.forEach(Ft),Lt.forEach(Ft)}function Ht(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Gt(e){function t(t){return Ht(t,e)}if(0<Mt.length){Ht(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ht(Ct,e),null!==Pt&&Ht(Pt,e),null!==Rt&&Ht(Rt,e),It.forEach(t),Lt.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Bt(n),null===n.blockedOn&&kt.shift()}var Vt=_.ReactCurrentBatchConfig,jt=!0;function Wt(e,t,n,r){var i=bt,s=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,n,r)}finally{bt=i,Vt.transition=s}}function qt(e,t,n,r){var i=bt,s=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,n,r)}finally{bt=i,Vt.transition=s}}function Xt(e,t,n,r){if(jt){var i=Yt(e,t,n,r);if(null===i)jr(e,t,r,Zt,n),Nt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Dt(Ct,e,t,n,r,i),!0;case"dragenter":return Pt=Dt(Pt,e,t,n,r,i),!0;case"mouseover":return Rt=Dt(Rt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return It.set(s,Dt(It.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Lt.set(s,Dt(Lt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Nt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&jr(e,t,r,Zt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else jr(e,t,r,null,n)}}var Zt=null;function Yt(e,t,n,r){if(Zt=null,null!==(e=yi(e=xe(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=B({},cn,{view:0,detail:0}),hn=sn(dn),fn=B({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(B({},fn,{dataTransfer:0})),gn=sn(B({},dn,{relatedTarget:0})),vn=sn(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(yn),_n=sn(B({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function An(){return Sn}var Tn=B({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=sn(Tn),Cn=sn(B({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(B({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Rn=sn(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=B({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=sn(In),kn=[9,13,27,32],On=u&&"CompositionEvent"in window,Nn=null;u&&"documentMode"in document&&(Nn=document.documentMode);var Dn=u&&"TextEvent"in window&&!Nn,Bn=u&&(!On||Nn&&8<Nn&&11>=Nn),Un=String.fromCharCode(32),Fn=!1;function zn(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hn(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1,Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){Te(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Zn(e){Ur(e,0)}function Yn(e){if(X(_i(e)))return e}function Kn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"==typeof er.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Xn=qn=null)}function nr(e){if("value"===e.propertyName&&Yn(Xn)){var t=[];Wn(t,Xn,e,xe(e)),Ie(Zn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Xn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Xn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function lr(e,t){if(ar(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Z((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Z(r)||(r="selectionStart"in(r=gr)&&fr(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Sr={};function Ar(e){if(Er[e])return Er[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Ar("animationend"),Mr=Ar("animationiteration"),Cr=Ar("animationstart"),Pr=Ar("transitionend"),Rr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Rr.set(e,t),l(t,[e])}for(var kr=0;kr<Ir.length;kr++){var Or=Ir[kr];Lr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Lr(Tr,"onAnimationEnd"),Lr(Mr,"onAnimationIteration"),Lr(Cr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(He.apply(this,arguments),De){if(!De)throw Error(s(198));var u=Be;De=!1,Be=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Br(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Br(i,a,c),s=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Hr="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Hr]){e[Hr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Hr]||(t[Hr]=!0,zr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Kt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Xt}n=i.bind(null,t,n,e),i=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,i){var s=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Ie((function(){var r=s,i=xe(n),o=[];e:{var a=Rr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Tr:case Mr:case Cr:l=vn;break;case Pr:l=Rn;break;case"scroll":l=hn;break;case"wheel":l=Ln;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&null!=(m=Le(p,h))&&u.push(Wr(p,m,f))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:_i(l),f=null==c?a:_i(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Xr(f))p++;for(f=0,m=h;m;m=Xr(m))f++;for(;0<p-f;)u=Xr(u),p--;for(;0<f-p;)h=Xr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xr(u),h=Xr(h)}u=null}else u=null;null!==l&&Zr(o,a,l,u,!1),null!==c&&null!==d&&Zr(o,d,c,u,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Kn;else if(jn(a))if(Qn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?_i(r):window,e){case"focusin":(jn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gn&&(y=en()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Gn=!0)),0<(v=qr(r,b)).length&&(b=new _n(b,e,null,n,i),o.push({event:b,listeners:v}),(y||null!==(y=Hn(n)))&&(b.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Hn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),$t=Jt=Qt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=qr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y)}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Le(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Le(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Zr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Le(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Le(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Qr(e){return("string"==typeof e?e:""+e).replace(Yr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(s(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,si="function"==typeof Promise?Promise:void 0,oi="function"==typeof queueMicrotask?queueMicrotask:void 0!==si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var wi=[],Ei=-1;function Si(e){return{current:e}}function Ai(e){0>Ei||(e.current=wi[Ei],wi[Ei]=null,Ei--)}function Ti(e,t){Ei++,wi[Ei]=e.current,e.current=t}var Mi={},Ci=Si(Mi),Pi=Si(!1),Ri=Mi;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Li(e){return null!=e.childContextTypes}function ki(){Ai(Pi),Ai(Ci)}function Oi(e,t,n){if(Ci.current!==Mi)throw Error(s(168));Ti(Ci,t),Ti(Pi,n)}function Ni(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,V(e)||"Unknown",i));return B({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,Ri=Ci.current,Ti(Ci,e),Ti(Pi,Pi.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ni(e,t,Ri),r.__reactInternalMemoizedMergedChildContext=e,Ai(Pi),Ai(Ci),Ti(Ci,e)):Ai(Pi),Ti(Pi,n)}var Ui=null,Fi=!1,zi=!1;function Hi(e){null===Ui?Ui=[e]:Ui.push(e)}function Gi(){if(!zi&&null!==Ui){zi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Fi=!1}catch(t){throw null!==Ui&&(Ui=Ui.slice(e+1)),Xe($e,Gi),t}finally{bt=t,zi=!1}}return null}var Vi=[],ji=0,Wi=null,qi=0,Xi=[],Zi=0,Yi=null,Ki=1,Qi="";function Ji(e,t){Vi[ji++]=qi,Vi[ji++]=Wi,Wi=e,qi=t}function $i(e,t,n){Xi[Zi++]=Ki,Xi[Zi++]=Qi,Xi[Zi++]=Yi,Yi=e;var r=Ki;e=Qi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ki=1<<32-ot(t)+i|n<<i|r,Qi=s+e}else Ki=1<<s|n<<i|r,Qi=e}function es(e){null!==e.return&&(Ji(e,1),$i(e,1,0))}function ts(e){for(;e===Wi;)Wi=Vi[--ji],Vi[ji]=null,qi=Vi[--ji],Vi[ji]=null;for(;e===Yi;)Yi=Xi[--Zi],Xi[Zi]=null,Qi=Xi[--Zi],Xi[Zi]=null,Ki=Xi[--Zi],Xi[Zi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ki,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=_.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Si(null),ys=null,bs=null,_s=null;function xs(){_s=bs=ys=null}function ws(e){var t=vs.current;Ai(vs),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){ys=e,_s=bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(_a=!0),e.firstContext=null)}function As(e){var t=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:t,next:null},null===bs){if(null===ys)throw Error(s(308));bs=e,ys.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var Ts=null;function Ms(e){null===Ts?Ts=[e]:Ts.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ms(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ps(e,r)}function Ps(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Rs=!1;function Is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ks(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Pl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ps(e,n)}return null===(i=r.interleaved)?(t.next=t,Ms(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ps(e,n)}function Ns(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ds(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Rs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&(a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l)}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"==typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(h="function"==typeof(p=m.payload)?p.call(f,d,h):p))break e;d=B({},d,h);break e;case 2:Rs=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Bl|=o,e.lanes=o,e.memoizedState=d}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(s(191,i));i.call(r)}}}var Fs=(new r.Component).refs;function zs(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Hs={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=ks(r,i);s.payload=t,null!=n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ns(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=ks(r,i);s.tag=1,s.payload=t,null!=n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ns(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=ks(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ns(t,e,r))}};function Gs(e,t,n,r,i,s,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!(t.prototype&&t.prototype.isPureReactComponent&&lr(n,r)&&lr(i,s))}function Vs(e,t,n){var r=!1,i=Mi,s=t.contextType;return"object"==typeof s&&null!==s?s=As(s):(i=Li(t)?Ri:Ci.current,s=(r=null!=(r=t.contextTypes))?Ii(e,i):Mi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Hs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function js(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Hs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fs,Is(e);var s=t.contextType;"object"==typeof s&&null!==s?i.context=As(s):(s=Li(t)?Ri:Ci.current,i.context=Ii(e,s)),i.state=e.memoizedState,"function"==typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Hs.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function qs(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Fs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===L&&Zs(s)===t.type)?((r=i(t,n.props)).ref=qs(e,t,n),r.return=e,r):((r=Nc(n.type,n.key,n.props,null,e.mode,r)).ref=qs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Dc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=qs(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||N(t))return(t=Dc(t,e.mode,n,null)).return=e,t;Xs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case L:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||N(n))return null!==i?null:d(e,t,n,r,null);Xs(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||N(r))return d(t,e=e.get(n)||null,r,i,null);Xs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),is&&Ji(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Ji(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}function g(i,a,l,c){var u=N(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=f(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=v}if(y.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return is&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}return function e(r,s,o,l){if("object"==typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"==typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"==typeof c&&null!==c&&c.$$typeof===L&&Zs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=qs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Dc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Nc(o.type,o.key,o.props,null,r.mode,l)).ref=qs(r,s,o),l.return=r,r=l)}return a(r);case w:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(o,r.mode,l)).return=r,r=s}return a(r);case L:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(N(o))return g(r,s,o,l);Xs(r,o)}return"string"==typeof o&&""!==o||"number"==typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var Ks=Ys(!0),Qs=Ys(!1),Js={},$s=Si(Js),eo=Si(Js),to=Si(Js);function no(e){if(e===Js)throw Error(s(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti($s,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai($s),Ti($s,t)}function io(){Ai($s),Ai(eo),Ai(to)}function so(e){no(to.current);var t=no($s.current),n=le(t,e.type);t!==n&&(Ti(eo,e),Ti($s,n))}function oo(e){eo.current===e&&(Ai($s),Ai(eo))}var ao=Si(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,bo=!1,_o=0,xo=0;function wo(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bo){o=0;do{if(bo=!1,_o=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(bo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function Ao(){var e=0!==_o;return _o=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function Mo(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"==typeof t?t(e):t}function Po(e){var t=Mo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((po&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,mo.lanes|=d,Bl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Bl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ro(e){var t=Mo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function Lo(e,t){var n=mo,r=Mo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,_a=!0),r=r.queue,jo(No.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Fo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(s(349));0!=(30&po)||ko(n,t,i)}return i}function ko(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&Bo(e)}function No(e,t,n){return n((function(){Do(t)&&Bo(e)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(e){return!0}}function Bo(e){var t=Ps(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=To();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return Mo().memoizedState}function Ho(e,t,n,r){var i=To();mo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Go(e,t,n,r){var i=Mo();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Fo(t,n,s,r))}mo.flags|=e,i.memoizedState=Fo(1|t,n,s,r)}function Vo(e,t){return Ho(8390656,8,e,t)}function jo(e,t){return Go(2048,8,e,t)}function Wo(e,t){return Go(4,2,e,t)}function qo(e,t){return Go(4,4,e,t)}function Xo(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Zo(e,t,n){return n=null!=n?n.concat([e]):null,Go(4,4,Xo.bind(null,t,e),n)}function Yo(){}function Ko(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qo(e,t){var n=Mo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0==(21&po)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Bl|=n,e.baseState=!0),t)}function $o(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function ea(){return Mo().memoizedState}function ta(e,t,n){var r=nc(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e)?ia(t,n):null!==(n=Cs(e,t,n,r))&&(rc(n,e,r,tc()),sa(n,t,r))}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,Ms(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Cs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:As,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},aa={readContext:As,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:As,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ho(4194308,4,Xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ho(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ho(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=To();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Rl)throw Error(s(349));0!=(30&po)||ko(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(No.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Rl.identifierPrefix;if(is){var n=Qi;t=":"+t+"R"+(n=(Ki&~(1<<32-ot(Ki)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:As,useCallback:Ko,useContext:As,useEffect:jo,useImperativeHandle:Zo,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Qo,useReducer:Po,useRef:zo,useState:function(){return Po(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Mo(),go.memoizedState,e)},useTransition:function(){return[Po(Co)[0],Mo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Lo,useId:ea,unstable_isNewReconciler:!1},ca={readContext:As,useCallback:Ko,useContext:As,useEffect:jo,useImperativeHandle:Zo,useInsertionEffect:Wo,useLayoutEffect:qo,useMemo:Qo,useReducer:Ro,useRef:zo,useState:function(){return Ro(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=Mo();return null===go?t.memoizedState=e:Jo(t,go.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],Mo().memoizedState]},useMutableSource:Io,useSyncExternalStore:Lo,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var fa="function"==typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=ks(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,ql=r),ha(0,t)},n}function ma(e,t,n){(n=ks(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"==typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!=typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ks(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=_.ReactCurrentOwner,_a=!1;function xa(e,t,n,r){t.child=null===e?Qs(t,null,n,r):Ks(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var s=t.ref;return Ss(t,i),r=So(e,t,n,r,s,i),n=Ao(),null===e||_a?(is&&n&&es(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!=typeof s||kc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,r,i))}if(s=e.child,0==(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=s,0==(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!=(131072&e.flags)&&(_a=!0)}}return Ma(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ol,kl),kl|=n;else{if(0==(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ol,kl),kl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ol,kl),kl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ol,kl),kl|=r;return xa(e,t,i,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ma(e,t,n,r,i){var s=Li(n)?Ri:Ci.current;return s=Ii(t,s),Ss(t,i),n=So(e,t,n,r,s,i),r=Ao(),null===e||_a?(is&&r&&es(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(Li(n)){var s=!0;Di(t)}else s=!1;if(Ss(t,i),null===t.stateNode)ja(e,t),Vs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;c="object"==typeof c&&null!==c?As(c):Ii(t,c=Li(n)?Ri:Ci.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==r||l!==c)&&js(t,o,r,c),Rs=!1;var h=t.memoizedState;o.state=h,Bs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Pi.current||Rs?("function"==typeof u&&(zs(t,n,u,r),l=t.memoizedState),(a=Rs||Gs(t,n,a,r,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ls(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,d=t.pendingProps,h=o.context,l="object"==typeof(l=n.contextType)&&null!==l?As(l):Ii(t,l=Li(n)?Ri:Ci.current);var f=n.getDerivedStateFromProps;(u="function"==typeof f||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||h!==l)&&js(t,o,r,l),Rs=!1,h=t.memoizedState,o.state=h,Bs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Pi.current||Rs?("function"==typeof f&&(zs(t,n,f,r),p=t.memoizedState),(c=Rs||Gs(t,n,c,r,h,p,l)||!1)?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,s,i)}function Pa(e,t,n,r,i,s){Ta(e,t);var o=0!=(128&t.flags);if(!r&&!o)return i&&Bi(t,n,!1),Wa(e,t,s);r=t.stateNode,ba.current=t;var a=o&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ks(t,e.child,null,s),t.child=Ks(t,null,a,s)):xa(e,t,a,s),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ia(e,t,n,r,i){return fs(),ps(i),t.flags|=256,xa(e,t,n,r),t.child}var La,ka,Oa,Na,Da={dehydrated:null,treeContext:null,retryLane:0};function Ba(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!=(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0==(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bc(l,i,0,null),e=Dc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ba(n),t.memoizedState=Da,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Bc({mode:"visible",children:r.children},i,0,null),(o=Dc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!=(1&t.mode)&&Ks(t,e.child,null,a),t.child.memoizedState=Ba(a),t.memoizedState=Da,o);if(0==(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=da(o=Error(s(419)),r,void 0))}if(l=0!=(a&e.childLanes),_a||l){if(null!==(r=Rl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ps(e,i),rc(r,e,i,-1))}return gc(),za(e,t,a,r=da(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Xi[Zi++]=Ki,Xi[Zi++]=Qi,Xi[Zi++]=Yi,Ki=e.id,Qi=e.overflow,Yi=t),(t=Fa(t,r.children)).flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0==(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ba(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fa(e,t){return(t=Bc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),Ks(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Ga(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Va(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(xa(e,t,r.children,n),0!=(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(ao,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Bl|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Za(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xa(t),null;case 1:case 17:return Li(t.type)&&ki(),Xa(t),null;case 3:return r=t.stateNode,io(),Ai(Pi),Ai(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),ka(e,t),Xa(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Xa(t),null}if(e=no($s.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!=(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Nr.length;i++)Fr(Nr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":K(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"==typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"==typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":q(r),$(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,La(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Nr.length;i++)Fr(Nr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":K(e,r),i=Y(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xa(t),null;case 6:if(e&&null!=t.stateNode)Na(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no($s.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!=(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Xa(t),null;case 13:if(Ai(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!=(1&t.mode)&&0==(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xa(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ao.current)?0===Nl&&(Nl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Xa(t),null);case 4:return io(),ka(e,t),null===e&&Gr(t.stateNode.containerInfo),Xa(t),null;case 10:return ws(t.type._context),Xa(t),null;case 19:if(Ai(ao),null===(o=t.memoizedState))return Xa(t),null;if(r=0!=(128&t.flags),null===(l=o.rendering))if(r)qa(o,!1);else{if(0!==Nl||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vl&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Xa(t),null}else 2*Qe()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=ao.current,Ti(ao,r?1&n|2:1&n),t):(Xa(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&kl)&&(Xa(t),6&t.subtreeFlags&&(t.flags|=8192)):Xa(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Li(t.type)&&ki(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ai(Pi),Ai(Ci),uo(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ai(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(ao),null;case 4:return io(),null;case 10:return ws(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ka=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($s.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!=typeof c&&"number"!=typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Na=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ka=!1,Qa=!1,Ja="function"==typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Ac(e,t,n)}else n.current=null}function tl(e,t,n){try{n()}catch(n){Ac(e,t,n)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"==typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Qa||el(n,t);case 6:var r=dl,i=hl;dl=null,fl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!=(2&s)||0!=(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Qa&&(el(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Ac(n,t,e)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Qa=(r=Qa)||null!==n.memoizedState,fl(e,t,n),Qa=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(o,a,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(e){Ac(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(t){Ac(e,e.return,t)}try{rl(5,e,e.return)}catch(t){Ac(e,e.return,t)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(t){Ac(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&Q(i,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":J(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(t){Ac(e,e.return,t)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(t){Ac(e,e.return,t)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(t){Ac(e,e.return,t)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Gl=Qe())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qa=(u=Qa)||d,gl(t,e),Qa=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!=(1&e.mode))for($a=e,d=e.child;null!==d;){for(h=$a=d;null!==$a;){switch(p=(f=$a).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"==typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Ac(r,n,e)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,$a=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=null!=(c=h.memoizedProps.style)&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(t){Ac(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(t){Ac(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(t){Ac(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){$a=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!=(1&e.mode);null!==$a;){var i=$a,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ka;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ka;var c=Qa;if(Ka=o,(Qa=l)&&!c)for($a=i;null!==$a;)l=(o=$a).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,$a=l):El(i);for(;null!==s;)$a=s,_l(s,t,n),s=s.sibling;$a=i,Ka=a,Qa=c}xl(e)}else 0!=(8772&i.subtreeFlags)&&null!==s?(s.return=i,$a=s):xl(e)}}function xl(e){for(;null!==$a;){var t=$a;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Gt(h)}}}break;default:throw Error(s(163))}Qa||512&t.flags&&sl(t)}catch(e){Ac(t,t.return,e)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function wl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(e){Ac(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Ac(t,i,e)}}var s=t.return;try{sl(t)}catch(e){Ac(t,s,e)}break;case 5:var o=t.return;try{sl(t)}catch(e){Ac(t,o,e)}}}catch(e){Ac(t,t.return,e)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,Al=Math.ceil,Tl=_.ReactCurrentDispatcher,Ml=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Pl=0,Rl=null,Il=null,Ll=0,kl=0,Ol=Si(0),Nl=0,Dl=null,Bl=0,Ul=0,Fl=0,zl=null,Hl=null,Gl=0,Vl=1/0,jl=null,Wl=!1,ql=null,Xl=null,Zl=!1,Yl=null,Kl=0,Ql=0,Jl=null,$l=-1,ec=0;function tc(){return 0!=(6&Pl)?Qe():-1!==$l?$l:$l=Qe()}function nc(e){return 0==(1&e.mode)?1:0!=(2&Pl)&&0!==Ll?Ll&-Ll:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rc(e,t,n,r){if(50<Ql)throw Ql=0,Jl=null,Error(s(185));vt(e,n,r),0!=(2&Pl)&&e===Rl||(e===Rl&&(0==(2&Pl)&&(Ul|=n),4===Nl&&lc(e,Ll)),ic(e,r),1===n&&0===Pl&&0==(1&t.mode)&&(Vl=Qe()+500,Fi&&Gi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!=(a&n)&&0==(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Rl?Ll:0);if(0===r)null!==n&&Ze(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ze(n),1===t)0===e.tag?function(e){Fi=!0,Hi(e)}(cc.bind(null,e)):Hi(cc.bind(null,e)),oi((function(){0==(6&Pl)&&Gi()})),n=null;else{switch(_t(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if($l=-1,ec=0,0!=(6&Pl))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Rl?Ll:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Pl;Pl|=2;var o=mc();for(Rl===e&&Ll===t||(jl=null,Vl=Qe()+500,fc(e,t));;)try{bc();break}catch(t){pc(e,t)}xs(),Tl.current=o,Pl=i,null!==Il?t=0:(Rl=null,Ll=0,t=Nl)}if(0!==t){if(2===t&&0!==(i=pt(e))&&(r=i,t=oc(e,i)),1===t)throw n=Dl,fc(e,0),lc(e,r),ic(e,Qe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&0!==(o=pt(e))&&(r=o,t=oc(e,o)),1===t))throw n=Dl,fc(e,0),lc(e,r),ic(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Hl,jl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Gl+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Hl,jl),t);break}wc(e,Hl,jl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Hl,jl),r);break}wc(e,Hl,jl);break;default:throw Error(s(329))}}}return ic(e,Qe()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Hl,Hl=n,null!==t&&ac(t)),e}function ac(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function lc(e,t){for(t&=~Fl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!=(6&Pl))throw Error(s(327));Ec();var t=ht(e,0);if(0==(1&t))return ic(e,Qe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Dl,fc(e,0),lc(e,t),ic(e,Qe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Hl,jl),ic(e,Qe()),null}function uc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Vl=Qe()+500,Fi&&Gi())}}function dc(e){null!==Yl&&0===Yl.tag&&0==(6&Pl)&&Ec();var t=Pl;Pl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0==(6&(Pl=t))&&Gi()}}function hc(){kl=Ol.current,Ai(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&ki();break;case 3:io(),Ai(Pi),Ai(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ai(ao);break;case 10:ws(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Rl=e,Il=e=Oc(e.current,null),Ll=kl=t,Nl=0,Dl=null,Fl=Ul=Bl=0,Hl=zl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}Ts=null}return e}function pc(e,t){for(;;){var n=Il;try{if(xs(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,bo=!1,_o=0,Ml.current=null,null===n||null===n.return){Nl=1,Dl=t,Il=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"==typeof c&&"function"==typeof c.then){var u=c,d=l,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0==(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0==(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Nl&&(Nl=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ds(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,b=o.stateNode;if(0==(128&o.flags)&&("function"==typeof y.getDerivedStateFromError||null!==b&&"function"==typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ds(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}xc(n)}catch(e){t=e,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Tl.current;return Tl.current=oa,null===e?oa:e}function gc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Rl||0==(268435455&Bl)&&0==(268435455&Ul)||lc(Rl,Ll)}function vc(e,t){var n=Pl;Pl|=2;var r=mc();for(Rl===e&&Ll===t||(jl=null,fc(e,t));;)try{yc();break}catch(t){pc(e,t)}if(xs(),Pl=n,Tl.current=r,null!==Il)throw Error(s(261));return Rl=null,Ll=0,Nl}function yc(){for(;null!==Il;)_c(Il)}function bc(){for(;null!==Il&&!Ye();)_c(Il)}function _c(e){var t=Sl(e.alternate,e,kl);e.memoizedProps=e.pendingProps,null===t?xc(e):Il=t,Ml.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Za(n,t,kl)))return void(Il=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Nl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Nl&&(Nl=5)}function wc(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Yl);if(0!=(6&Pl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Rl&&(Il=Rl=null,Ll=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Zl||(Zl=!0,Rc(tt,(function(){return Ec(),null}))),o=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=bt;bt=1;var l=Pl;Pl|=4,Ml.current=null,function(e,t){if(ei=jt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(e){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},jt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(e){Ac(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),jt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Ke(),Pl=l,bt=a,Cl.transition=o}else e.current=n;if(Zl&&(Zl=!1,Yl=e,Kl=i),0===(o=e.pendingLanes)&&(Xl=null),function(e){if(st&&"function"==typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),ic(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=ql,ql=null,e;0!=(1&Kl)&&0!==e.tag&&Ec(),0!=(1&(o=e.pendingLanes))?e===Jl?Ql++:(Ql=0,Jl=e):Ql=0,Gi()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function Ec(){if(null!==Yl){var e=_t(Kl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Kl=0,0!=(6&Pl))throw Error(s(331));var i=Pl;for(Pl|=4,$a=e.current;null!==$a;){var o=$a,a=o.child;if(0!=(16&$a.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var d=$a;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var h=d.child;if(null!==h)h.return=d,$a=h;else for(;null!==$a;){var f=(d=$a).sibling,p=d.return;if(ol(d),d===u){$a=null;break}if(null!==f){f.return=p,$a=f;break}$a=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$a=o}}if(0!=(2064&o.subtreeFlags)&&null!==a)a.return=o,$a=a;else e:for(;null!==$a;){if(0!=(2048&(o=$a).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,$a=y;break e}$a=o.return}}var b=e.current;for($a=b;null!==$a;){var _=(a=$a).child;if(0!=(2064&a.subtreeFlags)&&null!==_)_.return=a,$a=_;else e:for(a=b;null!==$a;){if(0!=(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(e){Ac(l,l.return,e)}if(l===a){$a=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,$a=x;break e}$a=l.return}}if(Pl=i,Gi(),st&&"function"==typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ac(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Ll&n)===n&&(4===Nl||3===Nl&&(130023424&Ll)===Ll&&500>Qe()-Gl?fc(e,0):Fl|=n),ic(e,t)}function Mc(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ps(e,t))&&(vt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Mc(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Mc(e,n)}function Rc(e,t){return Xe(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Ic(e,t,n,r)}function kc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)kc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case E:return Dc(n.children,i,o,t);case S:a=8,i|=8;break;case A:return(e=Lc(12,n,t,2|i)).elementType=A,e.lanes=o,e;case P:return(e=Lc(13,n,t,i)).elementType=P,e.lanes=o,e;case R:return(e=Lc(19,n,t,i)).elementType=R,e.lanes=o,e;case k:return Bc(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case M:a=9;break e;case C:a=11;break e;case I:a=14;break e;case L:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Dc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function Bc(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Lc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(s),e}function Gc(e){if(!e)return Mi;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Li(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Li(n))return Ni(e,n,t)}return t}function Vc(e,t,n,r,i,s,o,a,l){return(e=Hc(n,r,!0,e,0,s,0,a,l)).context=Gc(null),n=e.current,(s=ks(r=tc(),i=nc(n))).callback=null!=t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function jc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=Gc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ks(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ns(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)_a=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fs();break;case 5:so(t);break;case 1:Li(t.type)&&Di(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(ao,1&ao.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Ua(e,t,n):(Ti(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ti(ao,1&ao.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Va(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Wa(e,t,n)}(e,t,n);_a=0!=(131072&e.flags)}else _a=!1,is&&0!=(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ja(e,t),e=t.pendingProps;var i=Ii(t,Ci.current);Ss(t,n),i=So(null,t,r,e,i,n);var o=Ao();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Li(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Is(t),i.updater=Hs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Pa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return kc(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===I)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ma(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ma(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Ra(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ls(e,t),Bs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ia(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Qs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),Ta(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ks(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Ti(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Pi.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ks(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Es(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ss(t,n),r=r(i=As(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),ja(e,t),t.tag=1,Li(r)?(e=!0,Di(t)):e=!1,Ss(t,n),Vs(t,r,i),Ws(t,r,i,n),Pa(null,t,r,!0,e,n);case 19:return Va(e,t,n);case 22:return Aa(e,t,n)}throw Error(s(156,t.tag))};var Zc="function"==typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"==typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}jc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"==typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=Vc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,Gr(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[pi]=l.current,Gr(8===e.nodeType?e.parentNode:e),dc((function(){jc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));jc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){jc(null,e,null,null)})),t[pi]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kt.length&&0!==t&&t<kt[n].priority;n++);kt.splice(n,0,e),0===n&&Bt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Qe()),0==(6&Pl)&&(Vl=Qe()+500,Gi()))}break;case 13:dc((function(){var t=Ps(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Xc(e,1)}},wt=function(e){if(13===e.tag){var t=Ps(e,134217728);null!==t&&rc(t,e,134217728,tc()),Xc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Ps(e,t);null!==n&&rc(n,e,t,tc()),Xc(e,t)}},St=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));X(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Pe=dc;var tu={usingClientEntryPoint:!1,Events:[bi,_i,xi,Te,Me,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",i=Zc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Zc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},745:(e,t,n)=>{"use strict";var r=n(935);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},935:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(448)},408:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator,p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function T(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,x(o)?(i="",null!=e&&(i=e.replace(M,"$&/")+"/"),P(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(M,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=P(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},k={transition:null},O={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:k,ReactCurrentOwner:E};t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.2.0"},294:(e,t,n)=>{"use strict";e.exports=n(408)},53:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"==typeof setTimeout?setTimeout:null,y="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,k(w);else{var t=r(u);null!==t&&O(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(T),T=-1),p=!0;var s=f;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var o=h.callback;if("function"==typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof a?h.callback=a:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(x,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,A=null,T=-1,M=5,C=-1;function P(){return!(t.unstable_now()-C<M)}function R(){if(null!==A){var e=t.unstable_now();C=e;var n=!0;try{n=A(!0,e)}finally{n?E():(S=!1,A=null)}}else S=!1}if("function"==typeof b)E=function(){b(R)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,L=I.port2;I.port1.onmessage=R,E=function(){L.postMessage(null)}}else E=function(){v(R,0)};function k(e){A=e,S||(S=!0,E())}function O(e,n){T=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,k(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch(s="object"==typeof s&&null!==s&&"number"==typeof(s=s.delay)&&0<s?o+s:o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(T),T=-1):g=!0,O(x,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,k(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},840:(e,t,n)=>{"use strict";e.exports=n(53)},889:function(e,t,n){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,s,o,a=1,l={},c=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?n=function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),n=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},n=function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,n=function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):n=function(e){setTimeout(f,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return l[a]=i,n(a),a++},d.clearImmediate=h}function h(e){delete l[e]}function f(e){if(c)setTimeout(f,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(undefined,n)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===n.g?this:n.g:self)},379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var s={},o=[],a=0;a<e.length;a++){var l=e[a],c=r.base?l[0]+r.base:l[0],u=s[c]||0,d="".concat(c," ").concat(u);s[c]=u+1;var h=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(f);else{var p=i(f,r);r.byIndex=a,t.splice(a,0,{identifier:d,updater:p,references:1})}o.push(d)}return o}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var s=r(e=e||[],i=i||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=n(s[o]);t[a].references--}for(var l=r(e,i),c=0;c<s.length;c++){var u=n(s[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}s=l}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},771:(e,t,n)=>{"use strict";var r=n(294),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,l=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var d=o(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=l((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,u]);var f=s(e,d[0],d[1]);return a((function(){h.hasValue=!0,h.value=f}),[f]),c(f),f}},103:(e,t,n)=>{"use strict";e.exports=n(771)}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={id:e,exports:{}};return n[e].call(s.exports,s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var s=Object.create(null);i.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(s,o),s},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nc=void 0,(()=>{"use strict";var e={};i.r(e),i.d(e,{abiSchemaToJsonSchema:()=>bE,codePointToInt:()=>EE,ethAbiToJsonSchema:()=>_E,fetchArrayElement:()=>xE,hexToNumber:()=>SE,hexToUint8Array:()=>CE,numberToHex:()=>AE,padLeft:()=>TE,parseBaseType:()=>vE,transformJsonDataToAbiFormat:()=>wE,uint8ArrayToHexString:()=>ME});var t={};i.r(t),i.d(t,{isBatchRequest:()=>ZA,isBatchResponse:()=>VA,isResponseRpcError:()=>DA,isResponseWithError:()=>UA,isResponseWithNotification:()=>FA,isResponseWithResult:()=>BA,isSubscriptionResult:()=>zA,isValidResponse:()=>GA,setRequestIdStart:()=>WA,toBatchPayload:()=>XA,toPayload:()=>qA,validateResponse:()=>HA});var n={};i.r(n),i.d(n,{ChunkResponseParser:()=>JA,Eip1193Provider:()=>eT,EventEmitter:()=>US,SocketProvider:()=>rT,Web3DeferredPromise:()=>QA,asciiToHex:()=>SS,bytesToHex:()=>uS,bytesToUint8Array:()=>lS,checkAddressCheckSum:()=>HS,compareBlockNumbers:()=>YS,convert:()=>hA,convertScalarValue:()=>dA,encodePacked:()=>wA,ethUnitMap:()=>aS,format:()=>fA,fromAscii:()=>AS,fromDecimal:()=>mS,fromTwosComplement:()=>sA,fromUtf8:()=>yS,fromWei:()=>IS,getStorageSlotNumForLongString:()=>AA,hexToAscii:()=>TS,hexToBytes:()=>dS,hexToNumber:()=>hS,hexToNumberString:()=>gS,hexToString:()=>ES,hexToUtf8:()=>_S,isAddress:()=>GS,isBatchRequest:()=>ZA,isBatchResponse:()=>VA,isBloom:()=>VS,isContractAddressInBloom:()=>qS,isContractInitOptions:()=>KS,isDataFormat:()=>cA,isHex:()=>zS,isHexStrict:()=>FS,isInBloom:()=>jS,isNullish:()=>QS,isPromise:()=>PA,isResponseRpcError:()=>DA,isResponseWithError:()=>UA,isResponseWithNotification:()=>FA,isResponseWithResult:()=>BA,isSubscriptionResult:()=>zA,isTopic:()=>XS,isTopicInBloom:()=>ZS,isUserEthereumAddressInBloom:()=>WS,isValidResponse:()=>GA,jsonRpc:()=>t,keccak256:()=>vA,keccak256Wrapper:()=>vA,leftPad:()=>rA,mergeDeep:()=>$S,numberToHex:()=>pS,padLeft:()=>eA,padRight:()=>tA,pollTillDefined:()=>LA,pollTillDefinedAndReturnIntervalId:()=>IA,processSolidityEncodePackedArgs:()=>xA,randomBytes:()=>TA,randomHex:()=>MA,rejectIfConditionAtInterval:()=>OA,rejectIfTimeout:()=>kA,rightPad:()=>nA,setRequestIdStart:()=>WA,sha3:()=>mA,sha3Raw:()=>gA,soliditySha3:()=>EA,soliditySha3Raw:()=>SA,stringToHex:()=>bS,toAscii:()=>MS,toBatchPayload:()=>XA,toBigInt:()=>RS,toBool:()=>OS,toChecksumAddress:()=>kS,toDecimal:()=>fS,toHex:()=>CS,toNumber:()=>PS,toPayload:()=>qA,toTwosComplement:()=>iA,toUtf8:()=>xS,toWei:()=>LS,uint8ArrayConcat:()=>oA,uint8ArrayEquals:()=>aA,utf8ToBytes:()=>wS,utf8ToHex:()=>vS,uuidV4:()=>NA,validateResponse:()=>HA,waitWithTimeout:()=>RA});var r={};i.r(r),i.d(r,{dQ:()=>gM,ci:()=>aM,bytesToNumberBE:()=>uM,ty:()=>dM,eV:()=>mM,n$:()=>bM,ql:()=>pM,hexToBytes:()=>cM,tL:()=>hM,S5:()=>fM,FF:()=>xM});var s={};i.r(s),i.d(s,{secp256k1:()=>JM});var o=i(294),a=i(745);const l="160",c=1,u=2,d=3,h=100,f=0,p=1,m=2,g=0,v=1,y=2,b=3,_=4,x=5,w=6,E="attached",S=301,A=302,T=303,M=306,C=1e3,P=1001,R=1002,I=1003,L=1004,k=1005,O=1006,N=1008,D=1009,B=1012,U=1014,F=1015,z=1016,H=1020,G=1023,V=1026,j=1027,W=33776,q=33777,X=33778,Z=33779,Y=36492,K=2300,Q=2301,J=2302,$=3001,ee="",te="srgb",ne="srgb-linear",re="display-p3",ie="display-p3-linear",se="linear",oe="srgb",ae="rec709",le="p3",ce=7680,ue=35044,de="300 es",he=1035,fe=2e3,pe=2001;class me{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const ge=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const ve=Math.PI/180,ye=180/Math.PI;function be(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(ge[255&e]+ge[e>>8&255]+ge[e>>16&255]+ge[e>>24&255]+"-"+ge[255&t]+ge[t>>8&255]+"-"+ge[t>>16&15|64]+ge[t>>24&255]+"-"+ge[63&n|128]+ge[n>>8&255]+"-"+ge[n>>16&255]+ge[n>>24&255]+ge[255&r]+ge[r>>8&255]+ge[r>>16&255]+ge[r>>24&255]).toLowerCase()}function _e(e,t,n){return Math.max(t,Math.min(n,e))}function xe(e,t){return(e%t+t)%t}function we(e,t,n){return(1-n)*e+n*t}function Ee(e){return 0==(e&e-1)&&0!==e}function Se(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Ae(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Te(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Me=ve,Ce=function(e){return e*ve},Pe=function(e){return e*ye};class Re{constructor(e=0,t=0){Re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(_e(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ie{constructor(e,t,n,r,i,s,o,a,l){Ie.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,s,o,a,l)}set(e,t,n,r,i,s,o,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[3],a=n[6],l=n[1],c=n[4],u=n[7],d=n[2],h=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=s*p+o*v+a*_,i[3]=s*m+o*y+a*x,i[6]=s*g+o*b+a*w,i[1]=l*p+c*v+u*_,i[4]=l*m+c*y+u*x,i[7]=l*g+c*b+u*w,i[2]=d*p+h*v+f*_,i[5]=d*m+h*y+f*x,i[8]=d*g+h*b+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8];return t*s*c-t*o*l-n*i*c+n*o*a+r*i*l-r*s*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=c*s-o*l,d=o*a-c*i,h=l*i-s*a,f=t*u+n*d+r*h;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(o*n-r*s)*p,e[3]=d*p,e[4]=(c*t-r*a)*p,e[5]=(r*i-o*t)*p,e[6]=h*p,e[7]=(n*a-l*t)*p,e[8]=(s*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,o){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*s+l*o)+s+e,-r*l,r*a,-r*(-l*s+a*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(Le.makeScale(e,t)),this}rotate(e){return this.premultiply(Le.makeRotation(-e)),this}translate(e,t){return this.premultiply(Le.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Le=new Ie;function ke(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function Oe(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Ne(){const e=Oe("canvas");return e.style.display="block",e}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const De={};function Be(e){e in De||(De[e]=!0,console.warn(e))}const Ue=(new Ie).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Fe=(new Ie).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ze={[ne]:{transfer:se,primaries:ae,toReference:e=>e,fromReference:e=>e},[te]:{transfer:oe,primaries:ae,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[ie]:{transfer:se,primaries:le,toReference:e=>e.applyMatrix3(Fe),fromReference:e=>e.applyMatrix3(Ue)},[re]:{transfer:oe,primaries:le,toReference:e=>e.convertSRGBToLinear().applyMatrix3(Fe),fromReference:e=>e.applyMatrix3(Ue).convertLinearToSRGB()}},He=new Set([ne,ie]),Ge={enabled:!0,_workingColorSpace:ne,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!He.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=ze[t].toReference;return(0,ze[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return ze[e].primaries},getTransfer:function(e){return e===ee?se:ze[e].transfer}};function Ve(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function je(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let We;class qe{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===We&&(We=Oe("canvas")),We.width=e.width,We.height=e.height;const n=We.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=We}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Oe("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*Ve(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*Ve(t[e]/255)):t[e]=Ve(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Xe=0;class Ze{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Xe++}),this.uuid=be(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(Ye(r[t].image)):e.push(Ye(r[t]))}else e=Ye(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function Ye(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?qe.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ke=0;class Qe extends me{constructor(e=Qe.DEFAULT_IMAGE,t=Qe.DEFAULT_MAPPING,n=1001,r=1001,i=1006,s=1008,o=1023,a=1009,l=Qe.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ke++}),this.uuid=be(),this.name="",this.source=new Ze(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=l,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Re(0,0),this.repeat=new Re(1,1),this.center=new Re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ie,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(Be("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===$?te:ee),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case C:e.x=e.x-Math.floor(e.x);break;case P:e.x=e.x<0?0:1;break;case R:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case C:e.y=e.y-Math.floor(e.y);break;case P:e.y=e.y<0?0:1;break;case R:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Be("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===te?$:3e3}set encoding(e){Be("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===$?te:ee}}Qe.DEFAULT_IMAGE=null,Qe.DEFAULT_MAPPING=300,Qe.DEFAULT_ANISOTROPY=1;class Je{constructor(e=0,t=0,n=0,r=1){Je.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,o=.1,a=e.elements,l=a[0],c=a[4],u=a[8],d=a[1],h=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(c-d)<s&&Math.abs(u-p)<s&&Math.abs(f-m)<s){if(Math.abs(c+d)<o&&Math.abs(u+p)<o&&Math.abs(f+m)<o&&Math.abs(l+h+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(h+1)/2,v=(g+1)/2,y=(c+d)/4,b=(u+p)/4,_=(f+m)/4;return e>a&&e>v?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):a>v?a<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=_/r):v<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(d-c)*(d-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(d-c)/v,this.w=Math.acos((l+h+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class $e extends me{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Je(0,0,e,t),this.scissorTest=!1,this.viewport=new Je(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(Be("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===$?te:ee),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:O,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new Qe(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ze(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class et extends $e{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class tt extends Qe{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=I,this.minFilter=I,this.wrapR=P,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class nt extends Qe{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=I,this.minFilter=I,this.wrapR=P,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rt{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,o){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const d=i[s+0],h=i[s+1],f=i[s+2],p=i[s+3];if(0===o)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===o)return e[t+0]=d,e[t+1]=h,e[t+2]=f,void(e[t+3]=p);if(u!==p||a!==d||l!==h||c!==f){let e=1-o;const t=a*d+l*h+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,o=Math.sin(o*s)/i}const i=o*n;if(a=a*e+d*i,l=l*e+h*i,c=c*e+f*i,u=u*e+p*i,e===1-o){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,s){const o=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[s],d=i[s+1],h=i[s+2],f=i[s+3];return e[t]=o*f+c*u+a*h-l*d,e[t+1]=a*f+c*d+l*u-o*h,e[t+2]=l*f+c*h+o*d-a*u,e[t+3]=c*f-o*u-a*d-l*h,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,i=e._z,s=e._order,o=Math.cos,a=Math.sin,l=o(n/2),c=o(r/2),u=o(i/2),d=a(n/2),h=a(r/2),f=a(i/2);switch(s){case"XYZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"YXZ":this._x=d*c*u+l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"ZXY":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u-d*h*f;break;case"ZYX":this._x=d*c*u-l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u+d*h*f;break;case"YZX":this._x=d*c*u+l*h*f,this._y=l*h*u+d*c*f,this._z=l*c*f-d*h*u,this._w=l*c*u-d*h*f;break;case"XZY":this._x=d*c*u-l*h*f,this._y=l*h*u-d*c*f,this._z=l*c*f+d*h*u,this._w=l*c*u+d*h*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],u=t[10],d=n+o+u;if(d>0){const e=.5/Math.sqrt(d+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-l)*e,this._z=(s-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(c-a)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+l)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-l)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(s-r)/e,this._x=(i+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_e(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+s*o+r*l-i*a,this._y=r*c+s*a+i*o-n*l,this._z=i*c+s*l+n*a-r*o,this._w=s*c-n*o-r*a-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),u=Math.sin((1-t)*c)/l,d=Math.sin(t*c)/l;return this._w=s*u+this._w*d,this._x=n*u+this._x*d,this._y=r*u+this._y*d,this._z=i*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class it{constructor(e=0,t=0,n=0){it.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ot.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ot.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,a=e.w,l=2*(s*r-o*n),c=2*(o*t-i*r),u=2*(i*n-s*t);return this.x=t+a*l+s*u-o*c,this.y=n+a*c+o*l-i*u,this.z=r+a*u+i*c-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,a=t.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return st.copy(this).projectOnVector(e),this.sub(st)}reflect(e){return this.sub(st.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(_e(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const st=new it,ot=new rt;class at{constructor(e=new it(1/0,1/0,1/0),t=new it(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(ct.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(ct.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ct.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,ct):ct.fromBufferAttribute(r,t),ct.applyMatrix4(e.matrixWorld),this.expandByPoint(ct);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),ut.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),ut.copy(n.boundingBox)),ut.applyMatrix4(e.matrixWorld),this.union(ut)}const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ct),ct.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(vt),yt.subVectors(this.max,vt),dt.subVectors(e.a,vt),ht.subVectors(e.b,vt),ft.subVectors(e.c,vt),pt.subVectors(ht,dt),mt.subVectors(ft,ht),gt.subVectors(dt,ft);let t=[0,-pt.z,pt.y,0,-mt.z,mt.y,0,-gt.z,gt.y,pt.z,0,-pt.x,mt.z,0,-mt.x,gt.z,0,-gt.x,-pt.y,pt.x,0,-mt.y,mt.x,0,-gt.y,gt.x,0];return!!xt(t,dt,ht,ft,yt)&&(t=[1,0,0,0,1,0,0,0,1],!!xt(t,dt,ht,ft,yt)&&(bt.crossVectors(pt,mt),t=[bt.x,bt.y,bt.z],xt(t,dt,ht,ft,yt)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ct).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ct).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(lt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),lt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),lt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),lt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),lt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),lt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),lt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),lt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(lt)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const lt=[new it,new it,new it,new it,new it,new it,new it,new it],ct=new it,ut=new at,dt=new it,ht=new it,ft=new it,pt=new it,mt=new it,gt=new it,vt=new it,yt=new it,bt=new it,_t=new it;function xt(e,t,n,r,i){for(let s=0,o=e.length-3;s<=o;s+=3){_t.fromArray(e,s);const o=i.x*Math.abs(_t.x)+i.y*Math.abs(_t.y)+i.z*Math.abs(_t.z),a=t.dot(_t),l=n.dot(_t),c=r.dot(_t);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>o)return!1}return!0}const wt=new at,Et=new it,St=new it;class At{constructor(e=new it,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):wt.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Et.subVectors(e,this.center);const t=Et.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Et,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(St.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Et.copy(e.center).add(St)),this.expandByPoint(Et.copy(e.center).sub(St))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Tt=new it,Mt=new it,Ct=new it,Pt=new it,Rt=new it,It=new it,Lt=new it;class kt{constructor(e=new it,t=new it(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tt)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tt.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tt.copy(this.origin).addScaledVector(this.direction,t),Tt.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){Mt.copy(e).add(t).multiplyScalar(.5),Ct.copy(t).sub(e).normalize(),Pt.copy(this.origin).sub(Mt);const i=.5*e.distanceTo(t),s=-this.direction.dot(Ct),o=Pt.dot(this.direction),a=-Pt.dot(Ct),l=Pt.lengthSq(),c=Math.abs(1-s*s);let u,d,h,f;if(c>0)if(u=s*a-o,d=s*o-a,f=i*c,u>=0)if(d>=-f)if(d<=f){const e=1/c;u*=e,d*=e,h=u*(u+s*d+2*o)+d*(s*u+d+2*a)+l}else d=i,u=Math.max(0,-(s*d+o)),h=-u*u+d*(d+2*a)+l;else d=-i,u=Math.max(0,-(s*d+o)),h=-u*u+d*(d+2*a)+l;else d<=-f?(u=Math.max(0,-(-s*i+o)),d=u>0?-i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l):d<=f?(u=0,d=Math.min(Math.max(-i,-a),i),h=d*(d+2*a)+l):(u=Math.max(0,-(s*i+o)),d=u>0?i:Math.min(Math.max(-i,-a),i),h=-u*u+d*(d+2*a)+l);else d=s>0?-i:i,u=Math.max(0,-(s*d+o)),h=-u*u+d*(d+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Mt).addScaledVector(Ct,d),h}intersectSphere(e,t){Tt.subVectors(e.center,this.origin);const n=Tt.dot(this.direction),r=Tt.dot(Tt)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),o=n-s,a=n+s;return a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,o,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,d=this.origin;return l>=0?(n=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(n=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),c>=0?(i=(e.min.y-d.y)*c,s=(e.max.y-d.y)*c):(i=(e.max.y-d.y)*c,s=(e.min.y-d.y)*c),n>s||i>r?null:((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),u>=0?(o=(e.min.z-d.z)*u,a=(e.max.z-d.z)*u):(o=(e.max.z-d.z)*u,a=(e.min.z-d.z)*u),n>a||o>r?null:((o>n||n!=n)&&(n=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Tt)}intersectTriangle(e,t,n,r,i){Rt.subVectors(t,e),It.subVectors(n,e),Lt.crossVectors(Rt,It);let s,o=this.direction.dot(Lt);if(o>0){if(r)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}Pt.subVectors(this.origin,e);const a=s*this.direction.dot(It.crossVectors(Pt,It));if(a<0)return null;const l=s*this.direction.dot(Rt.cross(Pt));if(l<0)return null;if(a+l>o)return null;const c=-s*Pt.dot(Lt);return c<0?null:this.at(c/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ot{constructor(e,t,n,r,i,s,o,a,l,c,u,d,h,f,p,m){Ot.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,s,o,a,l,c,u,d,h,f,p,m)}set(e,t,n,r,i,s,o,a,l,c,u,d,h,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=d,g[3]=h,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ot).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Nt.setFromMatrixColumn(e,0).length(),i=1/Nt.setFromMatrixColumn(e,1).length(),s=1/Nt.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=s*c,n=s*u,r=o*c,i=o*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-o*a,t[2]=i-e*l,t[6]=r+n*l,t[10]=s*a}else if("YXZ"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=s*a}else if("ZXY"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e-i*o,t[4]=-s*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=s*c,t[9]=i-e*o,t[2]=-s*l,t[6]=o,t[10]=s*a}else if("ZYX"===e.order){const e=s*c,n=s*u,r=o*c,i=o*u;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=a*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=o*a,t[10]=s*a}else if("YZX"===e.order){const e=s*a,n=s*l,r=o*a,i=o*l;t[0]=a*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=s*c,t[9]=-o*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=s*a,n=s*l,r=o*a,i=o*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=s*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Bt,e,Ut)}lookAt(e,t,n){const r=this.elements;return Ht.subVectors(e,t),0===Ht.lengthSq()&&(Ht.z=1),Ht.normalize(),Ft.crossVectors(n,Ht),0===Ft.lengthSq()&&(1===Math.abs(n.z)?Ht.x+=1e-4:Ht.z+=1e-4,Ht.normalize(),Ft.crossVectors(n,Ht)),Ft.normalize(),zt.crossVectors(Ht,Ft),r[0]=Ft.x,r[4]=zt.x,r[8]=Ht.x,r[1]=Ft.y,r[5]=zt.y,r[9]=Ht.y,r[2]=Ft.z,r[6]=zt.z,r[10]=Ht.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],a=n[8],l=n[12],c=n[1],u=n[5],d=n[9],h=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],E=r[8],S=r[12],A=r[1],T=r[5],M=r[9],C=r[13],P=r[2],R=r[6],I=r[10],L=r[14],k=r[3],O=r[7],N=r[11],D=r[15];return i[0]=s*x+o*A+a*P+l*k,i[4]=s*w+o*T+a*R+l*O,i[8]=s*E+o*M+a*I+l*N,i[12]=s*S+o*C+a*L+l*D,i[1]=c*x+u*A+d*P+h*k,i[5]=c*w+u*T+d*R+h*O,i[9]=c*E+u*M+d*I+h*N,i[13]=c*S+u*C+d*L+h*D,i[2]=f*x+p*A+m*P+g*k,i[6]=f*w+p*T+m*R+g*O,i[10]=f*E+p*M+m*I+g*N,i[14]=f*S+p*C+m*L+g*D,i[3]=v*x+y*A+b*P+_*k,i[7]=v*w+y*T+b*R+_*O,i[11]=v*E+y*M+b*I+_*N,i[15]=v*S+y*C+b*L+_*D,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],a=e[9],l=e[13],c=e[2],u=e[6],d=e[10],h=e[14];return e[3]*(+i*a*u-r*l*u-i*o*d+n*l*d+r*o*h-n*a*h)+e[7]*(+t*a*h-t*l*d+i*s*d-r*s*h+r*l*c-i*a*c)+e[11]*(+t*l*u-t*o*h-i*s*u+n*s*h+i*o*c-n*l*c)+e[15]*(-r*o*c-t*a*u+t*o*d+r*s*u-n*s*d+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*d*l+p*a*h-o*m*h-u*a*g+o*d*g,y=f*d*l-c*m*l-f*a*h+s*m*h+c*a*g-s*d*g,b=c*p*l-f*u*l+f*o*h-s*p*h-c*o*g+s*u*g,_=f*u*a-c*p*a-f*o*d+s*p*d+c*o*m-s*u*m,x=t*v+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=v*w,e[1]=(p*d*i-u*m*i-p*r*h+n*m*h+u*r*g-n*d*g)*w,e[2]=(o*m*i-p*a*i+p*r*l-n*m*l-o*r*g+n*a*g)*w,e[3]=(u*a*i-o*d*i-u*r*l+n*d*l+o*r*h-n*a*h)*w,e[4]=y*w,e[5]=(c*m*i-f*d*i+f*r*h-t*m*h-c*r*g+t*d*g)*w,e[6]=(f*a*i-s*m*i-f*r*l+t*m*l+s*r*g-t*a*g)*w,e[7]=(s*d*i-c*a*i+c*r*l-t*d*l-s*r*h+t*a*h)*w,e[8]=b*w,e[9]=(f*u*i-c*p*i-f*n*h+t*p*h+c*n*g-t*u*g)*w,e[10]=(s*p*i-f*o*i+f*n*l-t*p*l-s*n*g+t*o*g)*w,e[11]=(c*o*i-s*u*i-c*n*l+t*u*l+s*n*h-t*o*h)*w,e[12]=_*w,e[13]=(c*p*r-f*u*r+f*n*d-t*p*d-c*n*m+t*u*m)*w,e[14]=(f*o*r-s*p*r-f*n*a+t*p*a+s*n*m-t*o*m)*w,e[15]=(s*u*r-c*o*r+c*n*a-t*u*a-s*n*d+t*o*d)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,a=e.z,l=i*s,c=i*o;return this.set(l*s+n,l*o-r*a,l*a+r*o,0,l*o+r*a,c*o+n,c*a-r*s,0,l*a-r*o,c*a+r*s,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,o=t._z,a=t._w,l=i+i,c=s+s,u=o+o,d=i*l,h=i*c,f=i*u,p=s*c,m=s*u,g=o*u,v=a*l,y=a*c,b=a*u,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+g))*_,r[1]=(h+b)*_,r[2]=(f-y)*_,r[3]=0,r[4]=(h-b)*x,r[5]=(1-(d+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(d+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Nt.set(r[0],r[1],r[2]).length();const s=Nt.set(r[4],r[5],r[6]).length(),o=Nt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Dt.copy(this);const a=1/i,l=1/s,c=1/o;return Dt.elements[0]*=a,Dt.elements[1]*=a,Dt.elements[2]*=a,Dt.elements[4]*=l,Dt.elements[5]*=l,Dt.elements[6]*=l,Dt.elements[8]*=c,Dt.elements[9]*=c,Dt.elements[10]*=c,t.setFromRotationMatrix(Dt),n.x=i,n.y=s,n.z=o,this}makePerspective(e,t,n,r,i,s,o=2e3){const a=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),d=(n+r)/(n-r);let h,f;if(o===fe)h=-(s+i)/(s-i),f=-2*s*i/(s-i);else{if(o!==pe)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);h=-s/(s-i),f=-s*i/(s-i)}return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=d,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,s,o=2e3){const a=this.elements,l=1/(t-e),c=1/(n-r),u=1/(s-i),d=(t+e)*l,h=(n+r)*c;let f,p;if(o===fe)f=(s+i)*u,p=-2*u;else{if(o!==pe)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);f=i*u,p=-1*u}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-d,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=p,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Nt=new it,Dt=new Ot,Bt=new it(0,0,0),Ut=new it(1,1,1),Ft=new it,zt=new it,Ht=new it,Gt=new Ot,Vt=new rt;class jt{constructor(e=0,t=0,n=0,r=jt.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],o=r[8],a=r[1],l=r[5],c=r[9],u=r[2],d=r[6],h=r[10];switch(t){case"XYZ":this._y=Math.asin(_e(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_e(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,h),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(_e(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-_e(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(d,h),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(_e(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,h));break;case"XZY":this._z=Math.asin(-_e(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return Gt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Gt,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Vt.setFromEuler(this),this.setFromQuaternion(Vt,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}jt.DEFAULT_ORDER="XYZ";class Wt{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let qt=0;const Xt=new it,Zt=new rt,Yt=new Ot,Kt=new it,Qt=new it,Jt=new it,$t=new rt,en=new it(1,0,0),tn=new it(0,1,0),nn=new it(0,0,1),rn={type:"added"},sn={type:"removed"};class on extends me{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qt++}),this.uuid=be(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=on.DEFAULT_UP.clone();const e=new it,t=new jt,n=new rt,r=new it(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Ot},normalMatrix:{value:new Ie}}),this.matrix=new Ot,this.matrixWorld=new Ot,this.matrixAutoUpdate=on.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=on.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Wt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zt.setFromAxisAngle(e,t),this.quaternion.multiply(Zt),this}rotateOnWorldAxis(e,t){return Zt.setFromAxisAngle(e,t),this.quaternion.premultiply(Zt),this}rotateX(e){return this.rotateOnAxis(en,e)}rotateY(e){return this.rotateOnAxis(tn,e)}rotateZ(e){return this.rotateOnAxis(nn,e)}translateOnAxis(e,t){return Xt.copy(e).applyQuaternion(this.quaternion),this.position.add(Xt.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(en,e)}translateY(e){return this.translateOnAxis(tn,e)}translateZ(e){return this.translateOnAxis(nn,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Yt.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Kt.copy(e):Kt.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Qt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Yt.lookAt(Qt,Kt,this.up):Yt.lookAt(Kt,Qt,this.up),this.quaternion.setFromRotationMatrix(Yt),r&&(Yt.extractRotation(r.matrixWorld),Zt.setFromRotationMatrix(Yt),this.quaternion.premultiply(Zt.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(rn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(sn)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Yt.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Yt.multiply(e.parent.matrixWorld)),e.applyMatrix4(Yt),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qt,e,Jt),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qt,$t,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),o=s(e.images),a=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}on.DEFAULT_UP=new it(0,1,0),on.DEFAULT_MATRIX_AUTO_UPDATE=!0,on.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const an=new it,ln=new it,cn=new it,un=new it,dn=new it,hn=new it,fn=new it,pn=new it,mn=new it,gn=new it;let vn=!1;class yn{constructor(e=new it,t=new it,n=new it){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),an.subVectors(e,t),r.cross(an);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){an.subVectors(r,t),ln.subVectors(n,t),cn.subVectors(e,t);const s=an.dot(an),o=an.dot(ln),a=an.dot(cn),l=ln.dot(ln),c=ln.dot(cn),u=s*l-o*o;if(0===u)return i.set(0,0,0),null;const d=1/u,h=(l*a-o*c)*d,f=(s*c-o*a)*d;return i.set(1-h-f,f,h)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,un)&&un.x>=0&&un.y>=0&&un.x+un.y<=1}static getUV(e,t,n,r,i,s,o,a){return!1===vn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vn=!0),this.getInterpolation(e,t,n,r,i,s,o,a)}static getInterpolation(e,t,n,r,i,s,o,a){return null===this.getBarycoord(e,t,n,r,un)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(i,un.x),a.addScaledVector(s,un.y),a.addScaledVector(o,un.z),a)}static isFrontFacing(e,t,n,r){return an.subVectors(n,t),ln.subVectors(e,t),an.cross(ln).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return an.subVectors(this.c,this.b),ln.subVectors(this.a,this.b),.5*an.cross(ln).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yn.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yn.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===vn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),vn=!0),yn.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return yn.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return yn.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yn.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,o;dn.subVectors(r,n),hn.subVectors(i,n),pn.subVectors(e,n);const a=dn.dot(pn),l=hn.dot(pn);if(a<=0&&l<=0)return t.copy(n);mn.subVectors(e,r);const c=dn.dot(mn),u=hn.dot(mn);if(c>=0&&u<=c)return t.copy(r);const d=a*u-c*l;if(d<=0&&a>=0&&c<=0)return s=a/(a-c),t.copy(n).addScaledVector(dn,s);gn.subVectors(e,i);const h=dn.dot(gn),f=hn.dot(gn);if(f>=0&&h<=f)return t.copy(i);const p=h*l-a*f;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(n).addScaledVector(hn,o);const m=c*f-h*u;if(m<=0&&u-c>=0&&h-f>=0)return fn.subVectors(i,r),o=(u-c)/(u-c+(h-f)),t.copy(r).addScaledVector(fn,o);const g=1/(m+p+d);return s=p*g,o=d*g,t.copy(n).addScaledVector(dn,s).addScaledVector(hn,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_n={h:0,s:0,l:0},xn={h:0,s:0,l:0};function wn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class En{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=te){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Ge.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Ge.workingColorSpace){return this.r=e,this.g=t,this.b=n,Ge.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Ge.workingColorSpace){if(e=xe(e,1),t=_e(t,0,1),n=_e(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=wn(i,r,e+1/3),this.g=wn(i,r,e),this.b=wn(i,r,e-1/3)}return Ge.toWorkingColorSpace(this,r),this}setStyle(e,t=te){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=te){const n=bn[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ve(e.r),this.g=Ve(e.g),this.b=Ve(e.b),this}copyLinearToSRGB(e){return this.r=je(e.r),this.g=je(e.g),this.b=je(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=te){return Ge.fromWorkingColorSpace(Sn.copy(this),e),65536*Math.round(_e(255*Sn.r,0,255))+256*Math.round(_e(255*Sn.g,0,255))+Math.round(_e(255*Sn.b,0,255))}getHexString(e=te){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ge.workingColorSpace){Ge.fromWorkingColorSpace(Sn.copy(this),t);const n=Sn.r,r=Sn.g,i=Sn.b,s=Math.max(n,r,i),o=Math.min(n,r,i);let a,l;const c=(o+s)/2;if(o===s)a=0,l=0;else{const e=s-o;switch(l=c<=.5?e/(s+o):e/(2-s-o),s){case n:a=(r-i)/e+(r<i?6:0);break;case r:a=(i-n)/e+2;break;case i:a=(n-r)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e,t=Ge.workingColorSpace){return Ge.fromWorkingColorSpace(Sn.copy(this),t),e.r=Sn.r,e.g=Sn.g,e.b=Sn.b,e}getStyle(e=te){Ge.fromWorkingColorSpace(Sn.copy(this),e);const t=Sn.r,n=Sn.g,r=Sn.b;return e!==te?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(_n),this.setHSL(_n.h+e,_n.s+t,_n.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_n),e.getHSL(xn);const n=we(_n.h,xn.h,t),r=we(_n.s,xn.s,t),i=we(_n.l,xn.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Sn=new En;En.NAMES=bn;let An=0;class Tn extends me{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:An++}),this.uuid=be(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=h,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new En(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ce,this.stencilZFail=ce,this.stencilZPass=ce,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==h&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ce&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ce&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ce&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Mn extends Tn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new En(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Cn=Pn();function Pn(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;0==(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,s[e]=t|n}for(let e=1024;e<2048;++e)s[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=1199570944,o[32]=2147483648;for(let e=33;e<63;++e)o[e]=2147483648+(e-32<<23);o[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(a[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}const Rn={toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=_e(e,-65504,65504),Cn.floatView[0]=e;const t=Cn.uint32View[0],n=t>>23&511;return Cn.baseTable[n]+((8388607&t)>>Cn.shiftTable[n])},fromHalfFloat:function(e){const t=e>>10;return Cn.uint32View[0]=Cn.mantissaTable[Cn.offsetTable[t]+(1023&e)]+Cn.exponentTable[t],Cn.floatView[0]}},In=new it,Ln=new Re;class kn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=ue,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=F,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Ln.fromBufferAttribute(this,t),Ln.applyMatrix3(e),this.setXY(t,Ln.x,Ln.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)In.fromBufferAttribute(this,t),In.applyMatrix3(e),this.setXYZ(t,In.x,In.y,In.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)In.fromBufferAttribute(this,t),In.applyMatrix4(e),this.setXYZ(t,In.x,In.y,In.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)In.fromBufferAttribute(this,t),In.applyNormalMatrix(e),this.setXYZ(t,In.x,In.y,In.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)In.fromBufferAttribute(this,t),In.transformDirection(e),this.setXYZ(t,In.x,In.y,In.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Ae(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Te(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ae(t,this.array)),t}setX(e,t){return this.normalized&&(t=Te(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ae(t,this.array)),t}setY(e,t){return this.normalized&&(t=Te(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ae(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Te(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ae(t,this.array)),t}setW(e,t){return this.normalized&&(t=Te(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Te(t,this.array),n=Te(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Te(t,this.array),n=Te(n,this.array),r=Te(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Te(t,this.array),n=Te(n,this.array),r=Te(r,this.array),i=Te(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==ue&&(e.usage=this.usage),e}}class On extends kn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Nn extends kn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Dn extends kn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Bn=0;const Un=new Ot,Fn=new on,zn=new it,Hn=new at,Gn=new at,Vn=new it;class jn extends me{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Bn++}),this.uuid=be(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ke(e)?Nn:On)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Ie).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Un.makeRotationFromQuaternion(e),this.applyMatrix4(Un),this}rotateX(e){return Un.makeRotationX(e),this.applyMatrix4(Un),this}rotateY(e){return Un.makeRotationY(e),this.applyMatrix4(Un),this}rotateZ(e){return Un.makeRotationZ(e),this.applyMatrix4(Un),this}translate(e,t,n){return Un.makeTranslation(e,t,n),this.applyMatrix4(Un),this}scale(e,t,n){return Un.makeScale(e,t,n),this.applyMatrix4(Un),this}lookAt(e){return Fn.lookAt(e),Fn.updateMatrix(),this.applyMatrix4(Fn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zn).negate(),this.translate(zn.x,zn.y,zn.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Dn(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new at);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new it(-1/0,-1/0,-1/0),new it(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Hn.setFromBufferAttribute(n),this.morphTargetsRelative?(Vn.addVectors(this.boundingBox.min,Hn.min),this.boundingBox.expandByPoint(Vn),Vn.addVectors(this.boundingBox.max,Hn.max),this.boundingBox.expandByPoint(Vn)):(this.boundingBox.expandByPoint(Hn.min),this.boundingBox.expandByPoint(Hn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new At);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new it,1/0);if(e){const n=this.boundingSphere.center;if(Hn.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Gn.setFromBufferAttribute(n),this.morphTargetsRelative?(Vn.addVectors(Hn.min,Gn.min),Hn.expandByPoint(Vn),Vn.addVectors(Hn.max,Gn.max),Hn.expandByPoint(Vn)):(Hn.expandByPoint(Gn.min),Hn.expandByPoint(Gn.max))}Hn.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Vn.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Vn));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],o=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)Vn.fromBufferAttribute(s,t),o&&(zn.fromBufferAttribute(e,t),Vn.add(zn)),r=Math.max(r,n.distanceToSquared(Vn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,s=t.uv.array,o=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new kn(new Float32Array(4*o),4));const a=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<o;e++)l[e]=new it,c[e]=new it;const u=new it,d=new it,h=new it,f=new Re,p=new Re,m=new Re,g=new it,v=new it;function y(e,t,n){u.fromArray(r,3*e),d.fromArray(r,3*t),h.fromArray(r,3*n),f.fromArray(s,2*e),p.fromArray(s,2*t),m.fromArray(s,2*n),d.sub(u),h.sub(u),p.sub(f),m.sub(f);const i=1/(p.x*m.y-m.x*p.y);isFinite(i)&&(g.copy(d).multiplyScalar(m.y).addScaledVector(h,-p.y).multiplyScalar(i),v.copy(h).multiplyScalar(p.x).addScaledVector(d,-m.x).multiplyScalar(i),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const _=new it,x=new it,w=new it,E=new it;function S(e){w.fromArray(i,3*e),E.copy(w);const t=l[e];_.copy(t),_.sub(w.multiplyScalar(w.dot(t))).normalize(),x.crossVectors(E,t);const n=x.dot(c[e])<0?-1:1;a[4*e]=_.x,a[4*e+1]=_.y,a[4*e+2]=_.z,a[4*e+3]=n}for(let e=0,t=b.length;e<t;++e){const t=b[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)S(n[e+0]),S(n[e+1]),S(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new kn(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new it,i=new it,s=new it,o=new it,a=new it,l=new it,c=new it,u=new it;if(e)for(let d=0,h=e.count;d<h;d+=3){const h=e.getX(d+0),f=e.getX(d+1),p=e.getX(d+2);r.fromBufferAttribute(t,h),i.fromBufferAttribute(t,f),s.fromBufferAttribute(t,p),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),o.fromBufferAttribute(n,h),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),o.add(c),a.add(c),l.add(c),n.setXYZ(h,o.x,o.y,o.z),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Vn.fromBufferAttribute(e,t),Vn.normalize(),e.setXYZ(t,Vn.x,Vn.y,Vn.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let o=0,a=0;for(let i=0,l=t.length;i<l;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)s[a++]=n[o++]}return new kn(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new jn,n=this.index.array,r=this.attributes;for(const i in r){const s=e(r[i],n);t.setAttribute(i,s)}const i=this.morphAttributes;for(const r in i){const s=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);s.push(r)}t.morphAttributes[r]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];s.push(r.toJSON(e.data))}s.length>0&&(r[t]=s,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Wn=new Ot,qn=new kt,Xn=new At,Zn=new it,Yn=new it,Kn=new it,Qn=new it,Jn=new it,$n=new it,er=new Re,tr=new Re,nr=new Re,rr=new it,ir=new it,sr=new it,or=new it,ar=new it;class lr extends on{constructor(e=new jn,t=new Mn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(i&&o){$n.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=o[n],a=i[n];0!==r&&(Jn.fromBufferAttribute(a,e),s?$n.addScaledVector(Jn,r):$n.addScaledVector(Jn.sub(t),r))}t.add($n)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Xn.copy(n.boundingSphere),Xn.applyMatrix4(i),qn.copy(e.ray).recast(e.near),!1===Xn.containsPoint(qn.origin)){if(null===qn.intersectSphere(Xn,Zn))return;if(qn.origin.distanceToSquared(Zn)>(e.far-e.near)**2)return}Wn.copy(i).invert(),qn.copy(e.ray).applyMatrix4(Wn),null!==n.boundingBox&&!1===qn.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,qn)}}_computeIntersections(e,t,n){let r;const i=this.geometry,s=this.material,o=i.index,a=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,d=i.groups,h=i.drawRange;if(null!==o)if(Array.isArray(s))for(let i=0,a=d.length;i<a;i++){const a=d[i],f=s[a.materialIndex];for(let i=Math.max(a.start,h.start),s=Math.min(o.count,Math.min(a.start+a.count,h.start+h.count));i<s;i+=3)r=cr(this,f,e,n,l,c,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=a.materialIndex,t.push(r))}else for(let i=Math.max(0,h.start),a=Math.min(o.count,h.start+h.count);i<a;i+=3)r=cr(this,s,e,n,l,c,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r));else if(void 0!==a)if(Array.isArray(s))for(let i=0,o=d.length;i<o;i++){const o=d[i],f=s[o.materialIndex];for(let i=Math.max(o.start,h.start),s=Math.min(a.count,Math.min(o.start+o.count,h.start+h.count));i<s;i+=3)r=cr(this,f,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}else for(let i=Math.max(0,h.start),o=Math.min(a.count,h.start+h.count);i<o;i+=3)r=cr(this,s,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}function cr(e,t,n,r,i,s,o,a,l,c){e.getVertexPosition(a,Yn),e.getVertexPosition(l,Kn),e.getVertexPosition(c,Qn);const u=function(e,t,n,r,i,s,o,a){let l;if(l=1===t.side?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,0===t.side,a),null===l)return null;ar.copy(a),ar.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(ar);return c<n.near||c>n.far?null:{distance:c,point:ar.clone(),object:e}}(e,t,n,r,Yn,Kn,Qn,or);if(u){i&&(er.fromBufferAttribute(i,a),tr.fromBufferAttribute(i,l),nr.fromBufferAttribute(i,c),u.uv=yn.getInterpolation(or,Yn,Kn,Qn,er,tr,nr,new Re)),s&&(er.fromBufferAttribute(s,a),tr.fromBufferAttribute(s,l),nr.fromBufferAttribute(s,c),u.uv1=yn.getInterpolation(or,Yn,Kn,Qn,er,tr,nr,new Re),u.uv2=u.uv1),o&&(rr.fromBufferAttribute(o,a),ir.fromBufferAttribute(o,l),sr.fromBufferAttribute(o,c),u.normal=yn.getInterpolation(or,Yn,Kn,Qn,rr,ir,sr,new it),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a,b:l,c,normal:new it,materialIndex:0};yn.getNormal(Yn,Kn,Qn,e.normal),u.face=e}return u}class ur extends jn{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const o=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const a=[],l=[],c=[],u=[];let d=0,h=0;function f(e,t,n,r,i,s,f,p,m,g,v){const y=s/m,b=f/g,_=s/2,x=f/2,w=p/2,E=m+1,S=g+1;let A=0,T=0;const M=new it;for(let s=0;s<S;s++){const o=s*b-x;for(let a=0;a<E;a++){const d=a*y-_;M[e]=d*r,M[t]=o*i,M[n]=w,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=p>0?1:-1,c.push(M.x,M.y,M.z),u.push(a/m),u.push(1-s/g),A+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=d+t+E*e,r=d+t+E*(e+1),i=d+(t+1)+E*(e+1),s=d+(t+1)+E*e;a.push(n,r,s),a.push(r,i,s),T+=6}o.addGroup(h,T,v),h+=T,d+=A}f("z","y","x",-1,-1,n,t,e,s,i,0),f("z","y","x",1,-1,n,t,-e,s,i,1),f("x","z","y",1,1,e,n,t,r,s,2),f("x","z","y",1,-1,e,n,-t,r,s,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new Dn(l,3)),this.setAttribute("normal",new Dn(c,3)),this.setAttribute("uv",new Dn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ur(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function dr(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function hr(e){const t={};for(let n=0;n<e.length;n++){const r=dr(e[n]);for(const e in r)t[e]=r[e]}return t}function fr(e){return null===e.getRenderTarget()?e.outputColorSpace:Ge.workingColorSpace}const pr={clone:dr,merge:hr};class mr extends Tn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=dr(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class gr extends on{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ot,this.projectionMatrix=new Ot,this.projectionMatrixInverse=new Ot,this.coordinateSystem=fe}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class vr extends gr{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ye*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*ve*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ye*Math.atan(Math.tan(.5*ve*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*ve*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,o=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/o,r*=s.width/e,n*=s.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const yr=-90;class br extends on{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new vr(yr,1,e,t);r.layers=this.layers,this.add(r);const i=new vr(yr,1,e,t);i.layers=this.layers,this.add(i);const s=new vr(yr,1,e,t);s.layers=this.layers,this.add(s);const o=new vr(yr,1,e,t);o.layers=this.layers,this.add(o);const a=new vr(yr,1,e,t);a.layers=this.layers,this.add(a);const l=new vr(yr,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,s,o,a]=t;for(const e of t)this.remove(e);if(e===fe)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==pe)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,c]=this.children,u=e.getRenderTarget(),d=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,s),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,a),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,d,h),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class _r extends Qe{constructor(e,t,n,r,i,s,o,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:S,n,r,i,s,o,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class xr extends et{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(Be("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===$?te:ee),this.texture=new _r(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:O}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new ur(5,5,5),o=new mr({name:"CubemapFromEquirect",uniforms:dr(n),vertexShader:r,fragmentShader:i,side:1,blending:0});o.uniforms.tEquirect.value=t;const a=new lr(s,o),l=t.minFilter;return t.minFilter===N&&(t.minFilter=O),new br(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const wr=new it,Er=new it,Sr=new Ie;class Ar{constructor(e=new it(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=wr.subVectors(n,t).cross(Er.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(wr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Sr.getNormalMatrix(e),r=this.coplanarPoint(wr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Tr=new At,Mr=new it;class Cr{constructor(e=new Ar,t=new Ar,n=new Ar,r=new Ar,i=new Ar,s=new Ar){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=2e3){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],c=r[5],u=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(n[0].setComponents(a-i,d-l,m-h,b-g).normalize(),n[1].setComponents(a+i,d+l,m+h,b+g).normalize(),n[2].setComponents(a+s,d+c,m+f,b+v).normalize(),n[3].setComponents(a-s,d-c,m-f,b-v).normalize(),n[4].setComponents(a-o,d-u,m-p,b-y).normalize(),t===fe)n[5].setComponents(a+o,d+u,m+p,b+y).normalize();else{if(t!==pe)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,u,p,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Tr.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Tr.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Tr)}intersectsSprite(e){return Tr.center.set(0,0,0),Tr.radius=.7071067811865476,Tr.applyMatrix4(e.matrixWorld),this.intersectsSphere(Tr)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Mr.x=r.normal.x>0?e.max.x:e.min.x,Mr.y=r.normal.y>0?e.max.y:e.min.y,Mr.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Mr)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Pr(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Rr(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=r.get(t);if(void 0===s)r.set(t,function(t,r){const i=t.array,s=t.usage,o=i.byteLength,a=e.createBuffer();let l;if(e.bindBuffer(r,a),e.bufferData(r,i,s),t.onUploadCallback(),i instanceof Float32Array)l=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)l=e.SHORT;else if(i instanceof Uint32Array)l=e.UNSIGNED_INT;else if(i instanceof Int32Array)l=e.INT;else if(i instanceof Int8Array)l=e.BYTE;else if(i instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);l=e.UNSIGNED_BYTE}return{buffer:a,type:l,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:o}}(t,i));else if(s.version<t.version){if(s.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,r,i){const s=r.array,o=r._updateRange,a=r.updateRanges;if(e.bindBuffer(i,t),-1===o.count&&0===a.length&&e.bufferSubData(i,0,s),0!==a.length){for(let t=0,r=a.length;t<r;t++){const r=a[t];n?e.bufferSubData(i,r.start*s.BYTES_PER_ELEMENT,s,r.start,r.count):e.bufferSubData(i,r.start*s.BYTES_PER_ELEMENT,s.subarray(r.start,r.start+r.count))}r.clearUpdateRanges()}-1!==o.count&&(n?e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s,o.offset,o.count):e.bufferSubData(i,o.offset*s.BYTES_PER_ELEMENT,s.subarray(o.offset,o.offset+o.count)),o.count=-1),r.onUploadCallback()}(s.buffer,t,i),s.version=t.version}}}}class Ir extends jn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,o=Math.floor(n),a=Math.floor(r),l=o+1,c=a+1,u=e/o,d=t/a,h=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*d-s;for(let n=0;n<l;n++){const r=n*u-i;f.push(r,-t,0),p.push(0,0,1),m.push(n/o),m.push(1-e/a)}}for(let e=0;e<a;e++)for(let t=0;t<o;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),s=t+1+l*e;h.push(n,r,s),h.push(r,i,s)}this.setIndex(h),this.setAttribute("position",new Dn(f,3)),this.setAttribute("normal",new Dn(p,3)),this.setAttribute("uv",new Dn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ir(e.width,e.height,e.widthSegments,e.heightSegments)}}const Lr={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},kr={common:{diffuse:{value:new En(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ie},alphaMap:{value:null},alphaMapTransform:{value:new Ie},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ie}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ie}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ie}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ie},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ie},normalScale:{value:new Re(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ie},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ie}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ie}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ie}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new En(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new En(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ie},alphaTest:{value:0},uvTransform:{value:new Ie}},sprite:{diffuse:{value:new En(16777215)},opacity:{value:1},center:{value:new Re(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ie},alphaMap:{value:null},alphaMapTransform:{value:new Ie},alphaTest:{value:0}}},Or={basic:{uniforms:hr([kr.common,kr.specularmap,kr.envmap,kr.aomap,kr.lightmap,kr.fog]),vertexShader:Lr.meshbasic_vert,fragmentShader:Lr.meshbasic_frag},lambert:{uniforms:hr([kr.common,kr.specularmap,kr.envmap,kr.aomap,kr.lightmap,kr.emissivemap,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.fog,kr.lights,{emissive:{value:new En(0)}}]),vertexShader:Lr.meshlambert_vert,fragmentShader:Lr.meshlambert_frag},phong:{uniforms:hr([kr.common,kr.specularmap,kr.envmap,kr.aomap,kr.lightmap,kr.emissivemap,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.fog,kr.lights,{emissive:{value:new En(0)},specular:{value:new En(1118481)},shininess:{value:30}}]),vertexShader:Lr.meshphong_vert,fragmentShader:Lr.meshphong_frag},standard:{uniforms:hr([kr.common,kr.envmap,kr.aomap,kr.lightmap,kr.emissivemap,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.roughnessmap,kr.metalnessmap,kr.fog,kr.lights,{emissive:{value:new En(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lr.meshphysical_vert,fragmentShader:Lr.meshphysical_frag},toon:{uniforms:hr([kr.common,kr.aomap,kr.lightmap,kr.emissivemap,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.gradientmap,kr.fog,kr.lights,{emissive:{value:new En(0)}}]),vertexShader:Lr.meshtoon_vert,fragmentShader:Lr.meshtoon_frag},matcap:{uniforms:hr([kr.common,kr.bumpmap,kr.normalmap,kr.displacementmap,kr.fog,{matcap:{value:null}}]),vertexShader:Lr.meshmatcap_vert,fragmentShader:Lr.meshmatcap_frag},points:{uniforms:hr([kr.points,kr.fog]),vertexShader:Lr.points_vert,fragmentShader:Lr.points_frag},dashed:{uniforms:hr([kr.common,kr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lr.linedashed_vert,fragmentShader:Lr.linedashed_frag},depth:{uniforms:hr([kr.common,kr.displacementmap]),vertexShader:Lr.depth_vert,fragmentShader:Lr.depth_frag},normal:{uniforms:hr([kr.common,kr.bumpmap,kr.normalmap,kr.displacementmap,{opacity:{value:1}}]),vertexShader:Lr.meshnormal_vert,fragmentShader:Lr.meshnormal_frag},sprite:{uniforms:hr([kr.sprite,kr.fog]),vertexShader:Lr.sprite_vert,fragmentShader:Lr.sprite_frag},background:{uniforms:{uvTransform:{value:new Ie},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Lr.background_vert,fragmentShader:Lr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Lr.backgroundCube_vert,fragmentShader:Lr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Lr.cube_vert,fragmentShader:Lr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lr.equirect_vert,fragmentShader:Lr.equirect_frag},distanceRGBA:{uniforms:hr([kr.common,kr.displacementmap,{referencePosition:{value:new it},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lr.distanceRGBA_vert,fragmentShader:Lr.distanceRGBA_frag},shadow:{uniforms:hr([kr.lights,kr.fog,{color:{value:new En(0)},opacity:{value:1}}]),vertexShader:Lr.shadow_vert,fragmentShader:Lr.shadow_frag}};Or.physical={uniforms:hr([Or.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ie},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ie},clearcoatNormalScale:{value:new Re(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ie},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ie},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ie},sheen:{value:0},sheenColor:{value:new En(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ie},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ie},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ie},transmissionSamplerSize:{value:new Re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ie},attenuationDistance:{value:0},attenuationColor:{value:new En(0)},specularColor:{value:new En(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ie},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ie},anisotropyVector:{value:new Re},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ie}}]),vertexShader:Lr.meshphysical_vert,fragmentShader:Lr.meshphysical_frag};const Nr={r:0,b:0,g:0};function Dr(e,t,n,r,i,s,o){const a=new En(0);let l,c,u=!0===s?0:1,d=null,h=0,f=null;function p(t,n){t.getRGB(Nr,fr(e)),r.buffers.color.setClear(Nr.r,Nr.g,Nr.b,n,o)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),u=t,p(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,p(a,u)},render:function(s,m){let g=!1,v=!0===m.isScene?m.background:null;v&&v.isTexture&&(v=(m.backgroundBlurriness>0?n:t).get(v)),null===v?p(a,u):v&&v.isColor&&(p(v,1),g=!0);const y=e.xr.getEnvironmentBlendMode();"additive"===y?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===y&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===M)?(void 0===c&&(c=new lr(new ur(1,1,1),new mr({name:"BackgroundCubeMaterial",uniforms:dr(Or.backgroundCube.uniforms),vertexShader:Or.backgroundCube.vertexShader,fragmentShader:Or.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=Ge.getTransfer(v.colorSpace)!==oe,d===v&&h===v.version&&f===e.toneMapping||(c.material.needsUpdate=!0,d=v,h=v.version,f=e.toneMapping),c.layers.enableAll(),s.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new lr(new Ir(2,2),new mr({name:"BackgroundMaterial",uniforms:dr(Or.background.uniforms),vertexShader:Or.background.vertexShader,fragmentShader:Or.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=Ge.getTransfer(v.colorSpace)!==oe,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),d===v&&h===v.version&&f===e.toneMapping||(l.material.needsUpdate=!0,d=v,h=v.version,f=e.toneMapping),l.layers.enableAll(),s.unshift(l,l.geometry,l.material,0,0,null))}}}function Br(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==s,a={},l=f(null);let c=l,u=!1;function d(t){return r.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const s=c.newAttributes,o=c.enabledAttributes,a=c.attributeDivisors;s[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),a[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i)}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,r,i,s,o,a){!0===a?e.vertexAttribIPointer(t,n,r,s,o):e.vertexAttribPointer(t,n,r,i,s,o)}function b(){_(),u=!0,c!==l&&(c=l,d(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,h,b,_){let x=!1;if(o){const t=function(t,n,i){const o=!0===i.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[o];return void 0===u&&(u=f(r.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[o]=u),u}(b,h,l);c!==t&&(c=t,d(c.object)),x=function(e,t,n,r){const i=c.attributes,s=t.attributes;let o=0;const a=n.getAttributes();for(const t in a)if(a[t].location>=0){const n=i[t];let r=s[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;o++}return c.attributesNum!==o||c.index!==r}(i,b,h,_),x&&function(e,t,n,r){const i={},s=t.attributes;let o=0;const a=n.getAttributes();for(const t in a)if(a[t].location>=0){let n=s[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,o++}c.attributes=i,c.attributesNum=o,c.index=r}(i,b,h,_)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===h.id&&c.wireframe===e||(c.geometry=b.id,c.program=h.id,c.wireframe=e,x=!0)}null!==_&&n.update(_,e.ELEMENT_ARRAY_BUFFER),(x||u)&&(u=!1,function(i,s,o,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=a.attributes,c=o.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const s=c[t];if(s.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,l=o.itemSize,c=n.get(o);if(void 0===c)continue;const u=c.buffer,d=c.type,h=c.bytesPerElement,f=!0===r.isWebGL2&&(d===e.INT||d===e.UNSIGNED_INT||1013===o.gpuType);if(o.isInterleavedBufferAttribute){const n=o.data,r=n.stride,c=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<s.locationSize;e++)g(s.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<s.locationSize;e++)m(s.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<s.locationSize;e++)y(s.location+e,l/s.locationSize,d,t,r*h,(c+l/s.locationSize*e)*h,f)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<s.locationSize;e++)g(s.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<s.locationSize;e++)m(s.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<s.locationSize;e++)y(s.location+e,l/s.locationSize,d,t,l*h,l/s.locationSize*e*h,f)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(s.location,n);break;case 3:e.vertexAttrib3fv(s.location,n);break;case 4:e.vertexAttrib4fv(s.location,n);break;default:e.vertexAttrib1fv(s.location,n)}}}}v()}(i,l,h,b),null!==_&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function Ur(e,t,n,r){const i=r.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,r){e.drawArrays(s,t,r),n.update(r,s,1)},this.renderInstances=function(r,o,a){if(0===a)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,r,o,a),n.update(o,s,a)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const o=t.get("WEBGL_multi_draw");if(null===o)for(let t=0;t<i;t++)this.render(e[t],r[t]);else{o.multiDrawArraysWEBGL(s,e,0,r,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,s,1)}}}function Fr(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let o=void 0!==n.precision?n.precision:"highp";const a=i(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=d>0,b=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:d,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:s?e.getParameter(e.MAX_SAMPLES):0}}function zr(e){const t=this;let n=null,r=0,i=!1,s=!1;const o=new Ar,a=new Ie,l={value:null,needsUpdate:!1};function c(e,n,r,i){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==i||null===c){const t=r+4*s,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==s;++t,n+=4)o.copy(e[t]).applyMatrix4(i,a),o.normal.toArray(c,n),c[n+3]=o.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(o,a,u){const d=o.clippingPlanes,h=o.clipIntersection,f=o.clipShadows,p=e.get(o);if(!i||null===d||0===d.length||s&&!f)s?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=s?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=c(d,a,t,u);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=e}}}function Hr(e){let t=new WeakMap;function n(e,t){return t===T?e.mapping=S:304===t&&(e.mapping=A),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping;if(s===T||304===s){if(t.has(i))return n(t.get(i).texture,i.mapping);{const s=i.image;if(s&&s.height>0){const o=new xr(s.height/2);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class Gr extends gr{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,o=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,o-=t*this.view.offsetY,a=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,o,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Vr=[.125,.215,.35,.446,.526,.582],jr=new Gr,Wr=new En;let qr=null,Xr=0,Zr=0;const Yr=(1+Math.sqrt(5))/2,Kr=1/Yr,Qr=[new it(1,1,1),new it(-1,1,1),new it(1,1,-1),new it(-1,1,-1),new it(0,Yr,Kr),new it(0,Yr,-Kr),new it(Kr,0,Yr),new it(-Kr,0,Yr),new it(Yr,Kr,0),new it(-Yr,Kr,0)];class Jr{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){qr=this._renderer.getRenderTarget(),Xr=this._renderer.getActiveCubeFace(),Zr=this._renderer.getActiveMipmapLevel(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ni(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=ti(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(qr,Xr,Zr),e.scissorTest=!1,ei(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===S||e.mapping===A?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),qr=this._renderer.getRenderTarget(),Xr=this._renderer.getActiveCubeFace(),Zr=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:O,minFilter:O,generateMipmaps:!1,type:z,format:G,colorSpace:ne,depthBuffer:!1},r=$r(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=$r(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const s=e-4+1+Vr.length;for(let o=0;o<s;o++){const s=Math.pow(2,i);n.push(s);let a=1/s;o>e-4?a=Vr[o-e+4-1]:0===o&&(a=0),r.push(a);const l=1/(s-2),c=-l,u=1+l,d=[c,c,u,c,u,u,c,c,u,u,c,u],h=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*h),y=new Float32Array(m*f*h),b=new Float32Array(g*f*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(d,m*f*e);const i=[e,e,e,e,e,e];b.set(i,g*f*e)}const _=new jn;_.setAttribute("position",new kn(v,p)),_.setAttribute("uv",new kn(y,m)),_.setAttribute("faceIndex",new kn(b,g)),t.push(_),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new it(0,1,0);return new mr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new lr(this._lodPlanes[0],e);this._renderer.compile(t,jr)}_sceneToCubeUV(e,t,n,r){const i=new vr(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(Wr),a.toneMapping=g,a.autoClear=!1;const u=new Mn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new lr(new ur,u);let h=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,h=!0):(u.color.copy(Wr),h=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,s[t],0),i.lookAt(o[t],0,0)):1===n?(i.up.set(0,0,s[t]),i.lookAt(0,o[t],0)):(i.up.set(0,s[t],0),i.lookAt(0,0,o[t]));const l=this._cubeSize;ei(r,n*l,t>2?l:0,l,l),a.setRenderTarget(r),h&&a.render(d,i),a.render(e,i)}d.geometry.dispose(),d.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===S||e.mapping===A;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ni()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ti());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new lr(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const o=this._cubeSize;ei(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(s,jr)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=Qr[(t-1)%Qr.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,o){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new lr(this._lodPlanes[r],l),u=l.uniforms,d=this._sizeLods[n]-1,h=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,f=i/h,p=isFinite(i)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<p&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===s,o&&(u.poleAxis.value=o);const{_lodMax:v}=this;u.dTheta.value=h,u.mipInt.value=v-n;const y=this._sizeLods[r];ei(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(t),a.render(c,jr)}}function $r(e,t,n){const r=new et(e,t,n);return r.texture.mapping=M,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ei(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ti(){return new mr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ni(){return new mr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ri(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping,o=s===T||304===s,a=s===S||s===A;if(o||a){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new Jr(e)),r=o?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const s=i.image;if(o&&s&&s.height>0||a&&s&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(s)){null===n&&(n=new Jr(e));const s=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,s),i.addEventListener("dispose",r),s.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ii(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function si(e,t,n,r){const i={},s=new WeakMap;function o(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const e in a.attributes)t.remove(a.attributes[e]);for(const e in a.morphAttributes){const n=a.morphAttributes[e];for(let e=0,r=n.length;e<r;e++)t.remove(n[e])}a.removeEventListener("dispose",o),delete i[a.id];const l=s.get(a);l&&(t.remove(l),s.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{if(void 0===i)return;{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const a=new(ke(n)?Nn:On)(n,1);a.version=o;const l=s.get(e);l&&t.remove(l),s.set(e,a)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const n in i){const r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return s.get(e)}}}function oi(e,t,n,r){const i=r.isWebGL2;let s,o,a;this.setMode=function(e){s=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(s,r,o,t*a),n.update(r,s,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,d;if(i)u=e,d="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),d="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[d](s,l,o,r*a,c),n.update(l,s,c)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<i;t++)this.render(e[t]/a,r[t]);else{l.multiDrawElementsWEBGL(s,r,0,o,e,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,s,1)}}}function ai(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function li(e,t){return e[0]-t[0]}function ci(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ui(e,t,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new Je,a=[];for(let e=0;e<8;e++)a[e]=[e,0];return{update:function(l,c,u){const d=l.morphTargetInfluences;if(!0===t.isWebGL2){const h=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==h?h.length:0;let p=s.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,b=void 0!==c.morphAttributes.color,_=c.morphAttributes.position||[],x=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let E=0;!0===v&&(E=1),!0===y&&(E=2),!0===b&&(E=3);let S=c.attributes.position.count*E,A=1;S>t.maxTextureSize&&(A=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);const T=new Float32Array(S*A*4*f),M=new tt(T,S,A,f);M.type=F,M.needsUpdate=!0;const C=4*E;for(let R=0;R<f;R++){const I=_[R],L=x[R],k=w[R],O=S*A*4*R;for(let N=0;N<I.count;N++){const D=N*C;!0===v&&(o.fromBufferAttribute(I,N),T[O+D+0]=o.x,T[O+D+1]=o.y,T[O+D+2]=o.z,T[O+D+3]=0),!0===y&&(o.fromBufferAttribute(L,N),T[O+D+4]=o.x,T[O+D+5]=o.y,T[O+D+6]=o.z,T[O+D+7]=0),!0===b&&(o.fromBufferAttribute(k,N),T[O+D+8]=o.x,T[O+D+9]=o.y,T[O+D+10]=o.z,T[O+D+11]=4===k.itemSize?o.w:1)}}function P(){M.dispose(),s.delete(c),c.removeEventListener("dispose",P)}p={count:f,texture:M,size:new Re(S,A)},s.set(c,p),c.addEventListener("dispose",P)}let m=0;for(let B=0;B<d.length;B++)m+=d[B];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",d),u.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{const U=void 0===d?0:d.length;let z=r[c.id];if(void 0===z||z.length!==U){z=[];for(let W=0;W<U;W++)z[W]=[W,0];r[c.id]=z}for(let q=0;q<U;q++){const X=z[q];X[0]=q,X[1]=d[q]}z.sort(ci);for(let Z=0;Z<8;Z++)Z<U&&z[Z][1]?(a[Z][0]=z[Z][0],a[Z][1]=z[Z][1]):(a[Z][0]=Number.MAX_SAFE_INTEGER,a[Z][1]=0);a.sort(li);const H=c.morphAttributes.position,G=c.morphAttributes.normal;let V=0;for(let Y=0;Y<8;Y++){const K=a[Y],Q=K[0],J=K[1];Q!==Number.MAX_SAFE_INTEGER&&J?(H&&c.getAttribute("morphTarget"+Y)!==H[Q]&&c.setAttribute("morphTarget"+Y,H[Q]),G&&c.getAttribute("morphNormal"+Y)!==G[Q]&&c.setAttribute("morphNormal"+Y,G[Q]),i[Y]=J,V+=J):(H&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),G&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),i[Y]=0)}const j=c.morphTargetsRelative?1:1-V;u.getUniforms().setValue(e,"morphTargetBaseInfluence",j),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function di(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const a=r.render.frame,l=o.geometry,c=t.get(o,l);if(i.get(c)!==a&&(t.update(c),i.set(c,a)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",s)&&o.addEventListener("dispose",s),i.get(o)!==a&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,a))),o.isSkinnedMesh){const e=o.skeleton;i.get(e)!==a&&(e.update(),i.set(e,a))}return c},dispose:function(){i=new WeakMap}}}class hi extends Qe{constructor(e,t,n,r,i,s,o,a,l,c){if((c=void 0!==c?c:V)!==V&&c!==j)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===V&&(n=U),void 0===n&&c===j&&(n=H),super(null,r,i,s,o,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:I,this.minFilter=void 0!==a?a:I,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const fi=new Qe,pi=new hi(1,1);pi.compareFunction=515;const mi=new tt,gi=new nt,vi=new _r,yi=[],bi=[],_i=new Float32Array(16),xi=new Float32Array(9),wi=new Float32Array(4);function Ei(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=yi[i];if(void 0===s&&(s=new Float32Array(i),yi[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function Si(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ai(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Ti(e,t){let n=bi[t];void 0===n&&(n=new Int32Array(t),bi[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Mi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ci(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Si(n,t))return;e.uniform2fv(this.addr,t),Ai(n,t)}}function Pi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Si(n,t))return;e.uniform3fv(this.addr,t),Ai(n,t)}}function Ri(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Si(n,t))return;e.uniform4fv(this.addr,t),Ai(n,t)}}function Ii(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Si(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ai(n,t)}else{if(Si(n,r))return;wi.set(r),e.uniformMatrix2fv(this.addr,!1,wi),Ai(n,r)}}function Li(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Si(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ai(n,t)}else{if(Si(n,r))return;xi.set(r),e.uniformMatrix3fv(this.addr,!1,xi),Ai(n,r)}}function ki(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Si(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ai(n,t)}else{if(Si(n,r))return;_i.set(r),e.uniformMatrix4fv(this.addr,!1,_i),Ai(n,r)}}function Oi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ni(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Si(n,t))return;e.uniform2iv(this.addr,t),Ai(n,t)}}function Di(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Si(n,t))return;e.uniform3iv(this.addr,t),Ai(n,t)}}function Bi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Si(n,t))return;e.uniform4iv(this.addr,t),Ai(n,t)}}function Ui(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Fi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Si(n,t))return;e.uniform2uiv(this.addr,t),Ai(n,t)}}function zi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Si(n,t))return;e.uniform3uiv(this.addr,t),Ai(n,t)}}function Hi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Si(n,t))return;e.uniform4uiv(this.addr,t),Ai(n,t)}}function Gi(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);const s=this.type===e.SAMPLER_2D_SHADOW?pi:fi;n.setTexture2D(t||s,i)}function Vi(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||gi,i)}function ji(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||vi,i)}function Wi(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||mi,i)}function qi(e,t){e.uniform1fv(this.addr,t)}function Xi(e,t){const n=Ei(t,this.size,2);e.uniform2fv(this.addr,n)}function Zi(e,t){const n=Ei(t,this.size,3);e.uniform3fv(this.addr,n)}function Yi(e,t){const n=Ei(t,this.size,4);e.uniform4fv(this.addr,n)}function Ki(e,t){const n=Ei(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Qi(e,t){const n=Ei(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ji(e,t){const n=Ei(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function $i(e,t){e.uniform1iv(this.addr,t)}function es(e,t){e.uniform2iv(this.addr,t)}function ts(e,t){e.uniform3iv(this.addr,t)}function ns(e,t){e.uniform4iv(this.addr,t)}function rs(e,t){e.uniform1uiv(this.addr,t)}function is(e,t){e.uniform2uiv(this.addr,t)}function ss(e,t){e.uniform3uiv(this.addr,t)}function os(e,t){e.uniform4uiv(this.addr,t)}function as(e,t,n){const r=this.cache,i=t.length,s=Ti(n,i);Si(r,s)||(e.uniform1iv(this.addr,s),Ai(r,s));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||fi,s[e])}function ls(e,t,n){const r=this.cache,i=t.length,s=Ti(n,i);Si(r,s)||(e.uniform1iv(this.addr,s),Ai(r,s));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||gi,s[e])}function cs(e,t,n){const r=this.cache,i=t.length,s=Ti(n,i);Si(r,s)||(e.uniform1iv(this.addr,s),Ai(r,s));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||vi,s[e])}function us(e,t,n){const r=this.cache,i=t.length,s=Ti(n,i);Si(r,s)||(e.uniform1iv(this.addr,s),Ai(r,s));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||mi,s[e])}class ds{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return Mi;case 35664:return Ci;case 35665:return Pi;case 35666:return Ri;case 35674:return Ii;case 35675:return Li;case 35676:return ki;case 5124:case 35670:return Oi;case 35667:case 35671:return Ni;case 35668:case 35672:return Di;case 35669:case 35673:return Bi;case 5125:return Ui;case 36294:return Fi;case 36295:return zi;case 36296:return Hi;case 35678:case 36198:case 36298:case 36306:case 35682:return Gi;case 35679:case 36299:case 36307:return Vi;case 35680:case 36300:case 36308:case 36293:return ji;case 36289:case 36303:case 36311:case 36292:return Wi}}(t.type)}}class hs{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return qi;case 35664:return Xi;case 35665:return Zi;case 35666:return Yi;case 35674:return Ki;case 35675:return Qi;case 35676:return Ji;case 5124:case 35670:return $i;case 35667:case 35671:return es;case 35668:case 35672:return ts;case 35669:case 35673:return ns;case 5125:return rs;case 36294:return is;case 36295:return ss;case 36296:return os;case 35678:case 36198:case 36298:case 36306:case 35682:return as;case 35679:case 36299:case 36307:return ls;case 35680:case 36300:case 36308:case 36293:return cs;case 36289:case 36303:case 36311:case 36292:return us}}(t.type)}}class fs{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}}}const ps=/(\w+)(\])?(\[|\.)?/g;function ms(e,t){e.seq.push(t),e.map[t.id]=t}function gs(e,t,n){const r=e.name,i=r.length;for(ps.lastIndex=0;;){const s=ps.exec(r),o=ps.lastIndex;let a=s[1];const l="]"===s[2],c=s[3];if(l&&(a|=0),void 0===c||"["===c&&o+2===i){ms(n,void 0===c?new ds(a,e,t):new hs(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new fs(a),ms(n,e)),n=e}}}class vs{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);gs(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function ys(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}const bs=37297;let _s=0;function xs(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const r=parseInt(s[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let e=i;e<s;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function ws(e,t){const n=function(e){const t=Ge.getPrimaries(Ge.workingColorSpace),n=Ge.getPrimaries(e);let r;switch(t===n?r="":t===le&&n===ae?r="LinearDisplayP3ToLinearSRGB":t===ae&&n===le&&(r="LinearSRGBToLinearDisplayP3"),e){case ne:case ie:return[r,"LinearTransferOETF"];case te:case re:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[r,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Es(e,t){let n;switch(t){case v:n="Linear";break;case y:n="Reinhard";break;case b:n="OptimizedCineon";break;case _:n="ACESFilmic";break;case w:n="AgX";break;case x:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ss(e){return""!==e}function As(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ts(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Ms=/^[ \t]*#include +<([\w\d./]+)>/gm;function Cs(e){return e.replace(Ms,Rs)}const Ps=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Rs(e,t){let n=Lr[t];if(void 0===n){const e=Ps.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=Lr[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return Cs(n)}const Is=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ls(e){return e.replace(Is,ks)}function ks(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Os(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ns(e,t,n,r){const i=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===c?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===u?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===d&&(t="SHADOWMAP_TYPE_VSM"),t}(n),h=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case S:case A:t="ENVMAP_TYPE_CUBE";break;case M:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),v=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===A&&(t="ENVMAP_MODE_REFRACTION"),t}(n),y=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case f:t="ENVMAP_BLENDING_MULTIPLY";break;case p:t="ENVMAP_BLENDING_MIX";break;case m:t="ENVMAP_BLENDING_ADD"}return t}(n),b=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),_=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ss).join("\n")}(n),x=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Ss).join("\n")}(n),w=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),E=i.createProgram();let T,C,P=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(T=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w].filter(Ss).join("\n"),T.length>0&&(T+="\n"),C=[_,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w].filter(Ss).join("\n"),C.length>0&&(C+="\n")):(T=[Os(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ss).join("\n"),C=[_,Os(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,w,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+v:"",n.envMap?"#define "+y:"",b?"#define CUBEUV_TEXEL_WIDTH "+b.texelWidth:"",b?"#define CUBEUV_TEXEL_HEIGHT "+b.texelHeight:"",b?"#define CUBEUV_MAX_MIP "+b.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==g?"#define TONE_MAPPING":"",n.toneMapping!==g?Lr.tonemapping_pars_fragment:"",n.toneMapping!==g?Es("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Lr.colorspace_pars_fragment,ws("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ss).join("\n")),o=Cs(o),o=As(o,n),o=Ts(o,n),a=Cs(a),a=As(a,n),a=Ts(a,n),o=Ls(o),a=Ls(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(P="#version 300 es\n",T=[x,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+T,C=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===de?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===de?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+C);const R=P+T+o,I=P+C+a,L=ys(i,i.VERTEX_SHADER,R),k=ys(i,i.FRAGMENT_SHADER,I);function O(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(E).trim(),r=i.getShaderInfoLog(L).trim(),s=i.getShaderInfoLog(k).trim();let o=!0,a=!0;if(!1===i.getProgramParameter(E,i.LINK_STATUS))if(o=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(i,E,L,k);else{const e=xs(i,L,"vertex"),t=xs(i,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+t)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==s||(a=!1);a&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:T},fragmentShader:{log:s,prefix:C}})}i.deleteShader(L),i.deleteShader(k),N=new vs(i,E),D=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:o}}return n}(i,E)}let N,D;i.attachShader(E,L),i.attachShader(E,k),void 0!==n.index0AttributeName?i.bindAttribLocation(E,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E),this.getUniforms=function(){return void 0===N&&O(this),N},this.getAttributes=function(){return void 0===D&&O(this),D};let B=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===B&&(B=i.getProgramParameter(E,bs)),B},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=_s++,this.cacheKey=t,this.usedTimes=1,this.program=E,this.vertexShader=L,this.fragmentShader=k,this}let Ds=0;class Bs{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(i)&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Us(e),t.set(e,n)),n}}class Us{constructor(e){this.id=Ds++,this.code=e,this.usedTimes=0}}function Fs(e,t,n,r,i,s,o){const a=new Wt,l=new Bs,c=[],u=i.isWebGL2,d=i.logarithmicDepthBuffer,h=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return 0===e?"uv":`uv${e}`}return{getParameters:function(s,a,c,v,y){const b=v.fog,_=y.geometry,x=s.isMeshStandardMaterial?v.environment:null,w=(s.isMeshStandardMaterial?n:t).get(s.envMap||x),E=w&&w.mapping===M?w.image.height:null,S=p[s.type];null!==s.precision&&(f=i.getMaxPrecision(s.precision),f!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",f,"instead."));const A=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,T=void 0!==A?A.length:0;let C,P,R,I,L=0;if(void 0!==_.morphAttributes.position&&(L=1),void 0!==_.morphAttributes.normal&&(L=2),void 0!==_.morphAttributes.color&&(L=3),S){const e=Or[S];C=e.vertexShader,P=e.fragmentShader}else C=s.vertexShader,P=s.fragmentShader,l.update(s),R=l.getVertexShaderID(s),I=l.getFragmentShaderID(s);const k=e.getRenderTarget(),O=!0===y.isInstancedMesh,N=!0===y.isBatchedMesh,D=!!s.map,B=!!s.matcap,U=!!w,F=!!s.aoMap,z=!!s.lightMap,H=!!s.bumpMap,G=!!s.normalMap,V=!!s.displacementMap,j=!!s.emissiveMap,W=!!s.metalnessMap,q=!!s.roughnessMap,X=s.anisotropy>0,Z=s.clearcoat>0,Y=s.iridescence>0,K=s.sheen>0,Q=s.transmission>0,J=X&&!!s.anisotropyMap,$=Z&&!!s.clearcoatMap,ee=Z&&!!s.clearcoatNormalMap,te=Z&&!!s.clearcoatRoughnessMap,re=Y&&!!s.iridescenceMap,ie=Y&&!!s.iridescenceThicknessMap,se=K&&!!s.sheenColorMap,ae=K&&!!s.sheenRoughnessMap,le=!!s.specularMap,ce=!!s.specularColorMap,ue=!!s.specularIntensityMap,de=Q&&!!s.transmissionMap,he=Q&&!!s.thicknessMap,fe=!!s.gradientMap,pe=!!s.alphaMap,me=s.alphaTest>0,ge=!!s.alphaHash,ve=!!s.extensions,ye=!!_.attributes.uv1,be=!!_.attributes.uv2,_e=!!_.attributes.uv3;let xe=g;return s.toneMapped&&(null!==k&&!0!==k.isXRRenderTarget||(xe=e.toneMapping)),{isWebGL2:u,shaderID:S,shaderType:s.type,shaderName:s.name,vertexShader:C,fragmentShader:P,defines:s.defines,customVertexShaderID:R,customFragmentShaderID:I,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:f,batching:N,instancing:O,instancingColor:O&&null!==y.instanceColor,supportsVertexTextures:h,outputColorSpace:null===k?e.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:ne,map:D,matcap:B,envMap:U,envMapMode:U&&w.mapping,envMapCubeUVHeight:E,aoMap:F,lightMap:z,bumpMap:H,normalMap:G,displacementMap:h&&V,emissiveMap:j,normalMapObjectSpace:G&&1===s.normalMapType,normalMapTangentSpace:G&&0===s.normalMapType,metalnessMap:W,roughnessMap:q,anisotropy:X,anisotropyMap:J,clearcoat:Z,clearcoatMap:$,clearcoatNormalMap:ee,clearcoatRoughnessMap:te,iridescence:Y,iridescenceMap:re,iridescenceThicknessMap:ie,sheen:K,sheenColorMap:se,sheenRoughnessMap:ae,specularMap:le,specularColorMap:ce,specularIntensityMap:ue,transmission:Q,transmissionMap:de,thicknessMap:he,gradientMap:fe,opaque:!1===s.transparent&&1===s.blending,alphaMap:pe,alphaTest:me,alphaHash:ge,combine:s.combine,mapUv:D&&m(s.map.channel),aoMapUv:F&&m(s.aoMap.channel),lightMapUv:z&&m(s.lightMap.channel),bumpMapUv:H&&m(s.bumpMap.channel),normalMapUv:G&&m(s.normalMap.channel),displacementMapUv:V&&m(s.displacementMap.channel),emissiveMapUv:j&&m(s.emissiveMap.channel),metalnessMapUv:W&&m(s.metalnessMap.channel),roughnessMapUv:q&&m(s.roughnessMap.channel),anisotropyMapUv:J&&m(s.anisotropyMap.channel),clearcoatMapUv:$&&m(s.clearcoatMap.channel),clearcoatNormalMapUv:ee&&m(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:te&&m(s.clearcoatRoughnessMap.channel),iridescenceMapUv:re&&m(s.iridescenceMap.channel),iridescenceThicknessMapUv:ie&&m(s.iridescenceThicknessMap.channel),sheenColorMapUv:se&&m(s.sheenColorMap.channel),sheenRoughnessMapUv:ae&&m(s.sheenRoughnessMap.channel),specularMapUv:le&&m(s.specularMap.channel),specularColorMapUv:ce&&m(s.specularColorMap.channel),specularIntensityMapUv:ue&&m(s.specularIntensityMap.channel),transmissionMapUv:de&&m(s.transmissionMap.channel),thicknessMapUv:he&&m(s.thicknessMap.channel),alphaMapUv:pe&&m(s.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(G||X),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,vertexUv1s:ye,vertexUv2s:be,vertexUv3s:_e,pointsUvs:!0===y.isPoints&&!!_.attributes.uv&&(D||pe),fog:!!b,useFog:!0===s.fog,fogExp2:b&&b.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:T,morphTextureStride:L,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:xe,useLegacyLights:e._useLegacyLights,decodeVideoTexture:D&&!0===s.map.isVideoTexture&&Ge.getTransfer(s.map.colorSpace)===oe,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:ve&&!0===s.extensions.derivatives,extensionFragDepth:ve&&!0===s.extensions.fragDepth,extensionDrawBuffers:ve&&!0===s.extensions.drawBuffers,extensionShaderTextureLOD:ve&&!0===s.extensions.shaderTextureLOD,extensionClipCullDistance:ve&&s.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.isWebGL2&&a.enable(0),t.supportsVertexTextures&&a.enable(1),t.instancing&&a.enable(2),t.instancingColor&&a.enable(3),t.matcap&&a.enable(4),t.envMap&&a.enable(5),t.normalMapObjectSpace&&a.enable(6),t.normalMapTangentSpace&&a.enable(7),t.clearcoat&&a.enable(8),t.iridescence&&a.enable(9),t.alphaTest&&a.enable(10),t.vertexColors&&a.enable(11),t.vertexAlphas&&a.enable(12),t.vertexUv1s&&a.enable(13),t.vertexUv2s&&a.enable(14),t.vertexUv3s&&a.enable(15),t.vertexTangents&&a.enable(16),t.anisotropy&&a.enable(17),t.alphaHash&&a.enable(18),t.batching&&a.enable(19),e.push(a.mask),a.disableAll(),t.fog&&a.enable(0),t.useFog&&a.enable(1),t.flatShading&&a.enable(2),t.logarithmicDepthBuffer&&a.enable(3),t.skinning&&a.enable(4),t.morphTargets&&a.enable(5),t.morphNormals&&a.enable(6),t.morphColors&&a.enable(7),t.premultipliedAlpha&&a.enable(8),t.shadowMapEnabled&&a.enable(9),t.useLegacyLights&&a.enable(10),t.doubleSided&&a.enable(11),t.flipSided&&a.enable(12),t.useDepthPacking&&a.enable(13),t.dithering&&a.enable(14),t.transmission&&a.enable(15),t.sheen&&a.enable(16),t.opaque&&a.enable(17),t.pointsUvs&&a.enable(18),t.decodeVideoTexture&&a.enable(19),e.push(a.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=Or[t];n=pr.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Ns(e,n,t,s),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function zs(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Hs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Gs(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Vs(){const e=[];let t=0;const n=[],r=[],i=[];function s(n,r,i,s,o,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=o,l.group=a),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,a,l,c){const u=s(e,t,o,a,l,c);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(e,t,o,a,l,c){const u=s(e,t,o,a,l,c);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Hs),r.length>1&&r.sort(t||Gs),i.length>1&&i.sort(t||Gs)}}}function js(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Vs,e.set(t,[i])):n>=r.length?(i=new Vs,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Ws(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new it,color:new En};break;case"SpotLight":n={position:new it,direction:new it,color:new En,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new it,color:new En,distance:0,decay:0};break;case"HemisphereLight":n={direction:new it,skyColor:new En,groundColor:new En};break;case"RectAreaLight":n={color:new En,position:new it,halfWidth:new it,halfHeight:new it}}return e[t.id]=n,n}}}let qs=0;function Xs(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Zs(e,t){const n=new Ws,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)i.probe.push(new it);const s=new it,o=new Ot,a=new Ot;return{setup:function(s,o){let a=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,d=0,h=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0,_=0;s.sort(Xs);const x=!0===o?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],o=t.color,w=t.intensity,E=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=o.r*w*x,l+=o.g*w*x,c+=o.b*w*x;else if(t.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);_++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(o).multiplyScalar(w*x),e.distance=E,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[h]=e;const s=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,s.updateMatrices(t),t.castShadow&&b++),i.spotLightMatrix[h]=s.matrix,t.castShadow){const e=r.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,i.spotShadow[h]=e,i.spotShadowMap[h]=S,v++}h++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(o).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[d]=n,i.pointShadowMap[d]=S,i.pointShadowMatrix[d]=t.shadow.matrix,g++}i.point[d]=e,d++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*x),e.groundColor.copy(t.groundColor).multiplyScalar(w*x),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=kr.LTC_FLOAT_1,i.rectAreaLTC2=kr.LTC_FLOAT_2):(i.rectAreaLTC1=kr.LTC_HALF_1,i.rectAreaLTC2=kr.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=kr.LTC_FLOAT_1,i.rectAreaLTC2=kr.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=kr.LTC_HALF_1,i.rectAreaLTC2=kr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const w=i.hash;w.directionalLength===u&&w.pointLength===d&&w.spotLength===h&&w.rectAreaLength===f&&w.hemiLength===p&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y&&w.numLightProbes===_||(i.directional.length=u,i.spot.length=h,i.rectArea.length=f,i.point.length=d,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=_,w.directionalLength=u,w.pointLength=d,w.spotLength=h,w.rectAreaLength=f,w.hemiLength=p,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,w.numLightProbes=_,i.version=qs++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const d=t.matrixWorldInverse;for(let t=0,h=e.length;t<h;t++){const h=e[t];if(h.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(h.matrixWorld),s.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),n++}else if(h.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),e.direction.setFromMatrixPosition(h.matrixWorld),s.setFromMatrixPosition(h.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(d),l++}else if(h.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),a.identity(),o.copy(h.matrixWorld),o.premultiply(d),a.extractRotation(o),e.halfWidth.set(.5*h.width,0,0),e.halfHeight.set(0,.5*h.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(h.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(h.matrixWorld),e.position.applyMatrix4(d),r++}else if(h.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(h.matrixWorld),e.direction.transformDirection(d),u++}}},state:i}}function Ys(e,t){const n=new Zs(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Ks(e,t){let n=new WeakMap;return{get:function(r,i=0){const s=n.get(r);let o;return void 0===s?(o=new Ys(e,t),n.set(r,[o])):i>=s.length?(o=new Ys(e,t),s.push(o)):o=s[i],o},dispose:function(){n=new WeakMap}}}class Qs extends Tn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Js extends Tn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function $s(e,t,n){let r=new Cr;const i=new Re,s=new Re,o=new Je,a=new Qs({depthPacking:3201}),l=new Js,u={},h=n.maxTextureSize,f={0:1,1:0,2:2},p=new mr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Re},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new jn;g.setAttribute("position",new kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new lr(g,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c;let b=this.type;function _(n,r){const s=t.update(v);p.defines.VSM_SAMPLES!==n.blurSamples&&(p.defines.VSM_SAMPLES=n.blurSamples,m.defines.VSM_SAMPLES=n.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new et(i.x,i.y)),p.uniforms.shadow_pass.value=n.map.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,s,p,v,null),m.uniforms.shadow_pass.value=n.mapPass.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,s,m,v,null)}function x(t,n,r,i){let s=null;const o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)s=o;else if(s=!0===r.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=s.uuid,t=n.uuid;let r=u[e];void 0===r&&(r={},u[e]=r);let i=r[t];void 0===i&&(i=s.clone(),r[t]=i,n.addEventListener("dispose",E)),s=i}return s.visible=n.visible,s.wireframe=n.wireframe,s.side=i===d?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:f[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===r.isPointLight&&!0===s.isMeshDistanceMaterial&&(e.properties.get(s).light=r),s}function w(n,i,s,o,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===d)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],d=l[u.materialIndex];if(d&&d.visible){const t=x(n,d,o,a);n.onBeforeShadow(e,n,i,s,r,t,u),e.renderBufferDirect(s,null,r,t,n,u),n.onAfterShadow(e,n,i,s,r,t,u)}}}else if(l.visible){const t=x(n,l,o,a);n.onBeforeShadow(e,n,i,s,r,t,null),e.renderBufferDirect(s,null,r,t,n,null),n.onAfterShadow(e,n,i,s,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)w(l[e],i,s,o,a)}function E(e){e.target.removeEventListener("dispose",E);for(const t in u){const n=u[t],r=e.target.uuid;r in n&&(n[r].dispose(),delete n[r])}}this.render=function(t,n,a){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);const p=b!==d&&this.type===d,m=b===d&&this.type!==d;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;i.copy(u.mapSize);const g=u.getFrameExtents();if(i.multiply(g),s.copy(u.mapSize),(i.x>h||i.y>h)&&(i.x>h&&(s.x=Math.floor(h/g.x),i.x=s.x*g.x,u.mapSize.x=s.x),i.y>h&&(s.y=Math.floor(h/g.y),i.y=s.y*g.y,u.mapSize.y=s.y)),null===u.map||!0===p||!0===m){const e=this.type!==d?{minFilter:I,magFilter:I}:{};null!==u.map&&u.map.dispose(),u.map=new et(i.x,i.y,e),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}e.setRenderTarget(u.map),e.clear();const v=u.getViewportCount();for(let e=0;e<v;e++){const t=u.getViewport(e);o.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),f.viewport(o),u.updateMatrices(c,e),r=u.getFrustum(),w(n,a,u.camera,c,this.type)}!0!==u.isPointLightShadow&&this.type===d&&_(u,a),u.needsUpdate=!1}b=this.type,y.needsUpdate=!1,e.setRenderTarget(l,c,u)}}function eo(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new Je;let r=null;const i=new Je(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,o,a){!0===a&&(t*=o,r*=o,s*=o),n.set(t,r,s,o),!1===i.equals(n)&&(e.clearColor(t,r,s,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?V(e.DEPTH_TEST):j(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){let t=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null;return{setTest:function(n){t||(n?V(e.STENCIL_TEST):j(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&s===o||(e.stencilFunc(t,n,o),r=t,i=n,s=o)},setOp:function(t,n,r){o===t&&a===n&&l===r||(e.stencilOp(t,n,r),o=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,o=null,a=null,l=null,c=null}}},a=new WeakMap,l=new WeakMap;let c={},u={},d=new WeakMap,f=[],p=null,m=!1,g=null,v=null,y=null,b=null,_=null,x=null,w=null,E=new En(0,0,0),S=0,A=!1,T=null,M=null,C=null,P=null,R=null;const I=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let L=!1,k=0;const O=e.getParameter(e.VERSION);-1!==O.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(O)[1]),L=k>=1):-1!==O.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),L=k>=2);let N=null,D={};const B=e.getParameter(e.SCISSOR_BOX),U=e.getParameter(e.VIEWPORT),F=(new Je).fromArray(B),z=(new Je).fromArray(U);function H(t,n,i,s){const o=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let a=0;a<i;a++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage3D(n,0,e.RGBA,1,1,s,0,e.RGBA,e.UNSIGNED_BYTE,o);return a}const G={};function V(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function j(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}G[e.TEXTURE_2D]=H(e.TEXTURE_2D,e.TEXTURE_2D,1),G[e.TEXTURE_CUBE_MAP]=H(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(G[e.TEXTURE_2D_ARRAY]=H(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),G[e.TEXTURE_3D]=H(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),V(e.DEPTH_TEST),s.setFunc(3),Z(!1),Y(1),V(e.CULL_FACE),X(0);const W={[h]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(r)W[103]=e.MIN,W[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(W[103]=e.MIN_EXT,W[104]=e.MAX_EXT)}const q={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function X(t,n,r,i,s,o,a,l,c,u){if(0!==t){if(!1===m&&(V(e.BLEND),m=!0),5===t)s=s||n,o=o||r,a=a||i,n===v&&s===_||(e.blendEquationSeparate(W[n],W[s]),v=n,_=s),r===y&&i===b&&o===x&&a===w||(e.blendFuncSeparate(q[r],q[i],q[o],q[a]),y=r,b=i,x=o,w=a),!1!==l.equals(E)&&c===S||(e.blendColor(l.r,l.g,l.b,c),E.copy(l),S=c),g=t,A=!1;else if(t!==g||u!==A){if(v===h&&_===h||(e.blendEquation(e.FUNC_ADD),v=h,_=h),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}y=null,b=null,x=null,w=null,E.set(0,0,0),S=0,g=t,A=u}}else!0===m&&(j(e.BLEND),m=!1)}function Z(t){T!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),T=t)}function Y(t){0!==t?(V(e.CULL_FACE),t!==M&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):j(e.CULL_FACE),M=t}function K(t,n,r){t?(V(e.POLYGON_OFFSET_FILL),P===n&&R===r||(e.polygonOffset(n,r),P=n,R=r)):j(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:s,stencil:o},enable:V,disable:j,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let s=f,o=!1;if(r)if(s=d.get(i),void 0===s&&(s=[],d.set(i,s)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(s.length!==t.length||s[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)s[n]=e.COLOR_ATTACHMENT0+n;s.length=t.length,o=!0}}else s[0]!==e.COLOR_ATTACHMENT0&&(s[0]=e.COLOR_ATTACHMENT0,o=!0);else s[0]!==e.BACK&&(s[0]=e.BACK,o=!0);o&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:X,setMaterial:function(t,n){2===t.side?j(e.CULL_FACE):V(e.CULL_FACE);let r=1===t.side;n&&(r=!r),Z(r),1===t.blending&&!1===t.transparent?X(0):X(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),i.setMask(t.colorWrite);const a=t.stencilWrite;o.setTest(a),a&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),K(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?V(e.SAMPLE_ALPHA_TO_COVERAGE):j(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Z,setCullFace:Y,setLineWidth:function(t){t!==C&&(L&&e.lineWidth(t),C=t)},setPolygonOffset:K,setScissorTest:function(t){t?V(e.SCISSOR_TEST):j(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+I-1),N!==t&&(e.activeTexture(t),N=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===N?e.TEXTURE0+I-1:N);let i=D[r];void 0===i&&(i={type:void 0,texture:void 0},D[r]=i),i.type===t&&i.texture===n||(N!==r&&(e.activeTexture(r),N=r),e.bindTexture(t,n||G[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=D[N];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);a.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},N=null,D={},u={},d=new WeakMap,f=[],p=null,m=!1,g=null,v=null,y=null,b=null,_=null,x=null,w=null,E=new En(0,0,0),S=0,A=!1,T=null,M=null,C=null,P=null,R=null,F.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),i.reset(),s.reset(),o.reset()}}}function to(e,t,n,r,i,s,o){const a=i.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let d;const h=new WeakMap;let f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function p(e,t){return f?new OffscreenCanvas(e,t):Oe("canvas")}function m(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?Se:Math.floor,s=r(i*e.width),o=r(i*e.height);void 0===d&&(d=p(s,o));const a=n?p(s,o):d;return a.width=s,a.height=o,a.getContext("2d").drawImage(e,0,0,s,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function g(e){return Ee(e.width)&&Ee(e.height)}function v(e,t){return e.generateMipmaps&&t&&e.minFilter!==I&&e.minFilter!==O}function y(t){e.generateMipmap(t)}function b(n,r,i,s,o=!1){if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;if(r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(l=e.R8UI),i===e.UNSIGNED_SHORT&&(l=e.R16UI),i===e.UNSIGNED_INT&&(l=e.R32UI),i===e.BYTE&&(l=e.R8I),i===e.SHORT&&(l=e.R16I),i===e.INT&&(l=e.R32I)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA){const t=o?se:Ge.getTransfer(s);i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=t===oe?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function _(e,t,n){return!0===v(e,n)||e.isFramebufferTexture&&e.minFilter!==I&&e.minFilter!==O?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function x(t){return t===I||t===L||t===k?e.NEAREST:e.LINEAR}function w(e){const t=e.target;t.removeEventListener("dispose",w),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=h.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&S(e),0===Object.keys(i).length&&h.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function E(t){const n=t.target;n.removeEventListener("dispose",E),function(t){const n=t.texture,i=r.get(t),s=r.get(n);if(void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(i.__webglFramebuffer[t]))for(let n=0;n<i.__webglFramebuffer[t].length;n++)e.deleteFramebuffer(i.__webglFramebuffer[t][n]);else e.deleteFramebuffer(i.__webglFramebuffer[t]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function S(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete h.get(i)[n.__cacheKey],o.memory.textures--}let A=0;function T(t,i){const s=r.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void Y(s,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,s.__webglTexture,e.TEXTURE0+i)}const M={[C]:e.REPEAT,[P]:e.CLAMP_TO_EDGE,[R]:e.MIRRORED_REPEAT},W={[I]:e.NEAREST,[L]:e.NEAREST_MIPMAP_NEAREST,[k]:e.NEAREST_MIPMAP_LINEAR,[O]:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,[N]:e.LINEAR_MIPMAP_LINEAR},q={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function X(n,s,o){if(o?(e.texParameteri(n,e.TEXTURE_WRAP_S,M[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,M[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,M[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,W[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,W[s.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),s.wrapS===P&&s.wrapT===P||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,x(s.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,x(s.minFilter)),s.minFilter!==I&&s.minFilter!==O&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),s.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,q[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){const o=t.get("EXT_texture_filter_anisotropic");if(s.magFilter===I)return;if(s.minFilter!==k&&s.minFilter!==N)return;if(s.type===F&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&s.type===z&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||r.get(s).__currentAnisotropy)&&(e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy)}}function Z(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",w));const i=n.source;let s=h.get(i);void 0===s&&(s={},h.set(i,s));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(a!==t.__cacheKey){void 0===s[a]&&(s[a]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),s[a].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&S(n)),t.__cacheKey=a,t.__webglTexture=s[a].texture}return r}function Y(t,o,l){let c=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(c=e.TEXTURE_3D);const u=Z(t,o),d=o.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const h=r.get(d);if(d.version!==h.__version||!0===u){n.activeTexture(e.TEXTURE0+l);const t=Ge.getPrimaries(Ge.workingColorSpace),r=o.colorSpace===ee?null:Ge.getPrimaries(o.colorSpace),f=o.colorSpace===ee||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);const p=function(e){return!a&&(e.wrapS!==P||e.wrapT!==P||e.minFilter!==I&&e.minFilter!==O)}(o)&&!1===g(o.image);let x=m(o.image,p,!1,i.maxTextureSize);x=re(o,x);const w=g(x)||a,E=s.convert(o.format,o.colorSpace);let S,A=s.convert(o.type),T=b(o.internalFormat,E,A,o.colorSpace,o.isVideoTexture);X(c,o,w);const M=o.mipmaps,C=a&&!0!==o.isVideoTexture&&36196!==T,R=void 0===h.__version||!0===u,L=_(o,x,w);if(o.isDepthTexture)T=e.DEPTH_COMPONENT,a?T=o.type===F?e.DEPTH_COMPONENT32F:o.type===U?e.DEPTH_COMPONENT24:o.type===H?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:o.type===F&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),o.format===V&&T===e.DEPTH_COMPONENT&&o.type!==B&&o.type!==U&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),o.type=U,A=s.convert(o.type)),o.format===j&&T===e.DEPTH_COMPONENT&&(T=e.DEPTH_STENCIL,o.type!==H&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),o.type=H,A=s.convert(o.type))),R&&(C?n.texStorage2D(e.TEXTURE_2D,1,T,x.width,x.height):n.texImage2D(e.TEXTURE_2D,0,T,x.width,x.height,0,E,A,null));else if(o.isDataTexture)if(M.length>0&&w){C&&R&&n.texStorage2D(e.TEXTURE_2D,L,T,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)S=M[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,A,S.data):n.texImage2D(e.TEXTURE_2D,t,T,S.width,S.height,0,E,A,S.data);o.generateMipmaps=!1}else C?(R&&n.texStorage2D(e.TEXTURE_2D,L,T,x.width,x.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,x.width,x.height,E,A,x.data)):n.texImage2D(e.TEXTURE_2D,0,T,x.width,x.height,0,E,A,x.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){C&&R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,L,T,M[0].width,M[0].height,x.depth);for(let t=0,r=M.length;t<r;t++)S=M[t],o.format!==G?null!==E?C?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,x.depth,E,S.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,T,S.width,S.height,x.depth,0,S.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,x.depth,E,A,S.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,T,S.width,S.height,x.depth,0,E,A,S.data)}else{C&&R&&n.texStorage2D(e.TEXTURE_2D,L,T,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)S=M[t],o.format!==G?null!==E?C?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,S.data):n.compressedTexImage2D(e.TEXTURE_2D,t,T,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,A,S.data):n.texImage2D(e.TEXTURE_2D,t,T,S.width,S.height,0,E,A,S.data)}else if(o.isDataArrayTexture)C?(R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,L,T,x.width,x.height,x.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,x.width,x.height,x.depth,E,A,x.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,T,x.width,x.height,x.depth,0,E,A,x.data);else if(o.isData3DTexture)C?(R&&n.texStorage3D(e.TEXTURE_3D,L,T,x.width,x.height,x.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,x.width,x.height,x.depth,E,A,x.data)):n.texImage3D(e.TEXTURE_3D,0,T,x.width,x.height,x.depth,0,E,A,x.data);else if(o.isFramebufferTexture){if(R)if(C)n.texStorage2D(e.TEXTURE_2D,L,T,x.width,x.height);else{let t=x.width,r=x.height;for(let i=0;i<L;i++)n.texImage2D(e.TEXTURE_2D,i,T,t,r,0,E,A,null),t>>=1,r>>=1}}else if(M.length>0&&w){C&&R&&n.texStorage2D(e.TEXTURE_2D,L,T,M[0].width,M[0].height);for(let t=0,r=M.length;t<r;t++)S=M[t],C?n.texSubImage2D(e.TEXTURE_2D,t,0,0,E,A,S):n.texImage2D(e.TEXTURE_2D,t,T,E,A,S);o.generateMipmaps=!1}else C?(R&&n.texStorage2D(e.TEXTURE_2D,L,T,x.width,x.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,E,A,x)):n.texImage2D(e.TEXTURE_2D,0,T,E,A,x);v(o,w)&&y(c),h.__version=d.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function K(t,i,o,a,c,u){const d=s.convert(o.format,o.colorSpace),h=s.convert(o.type),f=b(o.internalFormat,d,h,o.colorSpace);if(!r.get(i).__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,f,t,r,i.depth,0,d,h,null):n.texImage2D(c,u,f,t,r,0,d,h,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),te(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,c,r.get(o).__webglTexture,0,$(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,c,r.get(o).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function Q(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=!0===a?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(r||te(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===F?i=e.DEPTH_COMPONENT32F:t.type===U&&(i=e.DEPTH_COMPONENT24));const r=$(n);te(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=$(n);r&&!1===te(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):te(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const o=t[i],a=s.convert(o.format,o.colorSpace),c=s.convert(o.type),u=b(o.internalFormat,a,c,o.colorSpace),d=$(n);r&&!1===te(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,d,u,n.width,n.height):te(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,d,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function J(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,o=$(i);if(i.depthTexture.format===V)te(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==j)throw new Error("Unknown depthTexture format");te(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),Q(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),Q(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function $(e){return Math.min(i.maxSamples,e.samples)}function te(e){const n=r.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function re(e,n){const r=e.colorSpace,i=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===he||r!==ne&&r!==ee&&(Ge.getTransfer(r)===oe?!1===a?!0===t.has("EXT_sRGB")&&i===G?(e.format=he,e.minFilter=O,e.generateMipmaps=!1):n=qe.sRGBToLinear(n):i===G&&s===D||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){const e=A;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),A+=1,e},this.resetTextureUnits=function(){A=0},this.setTexture2D=T,this.setTexture2DArray=function(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?Y(s,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?Y(s,t,i):n.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,o){const l=r.get(t);t.version>0&&l.__version!==t.version?function(t,o,l){if(6!==o.image.length)return;const c=Z(t,o),u=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const d=r.get(u);if(u.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=Ge.getPrimaries(Ge.workingColorSpace),r=o.colorSpace===ee?null:Ge.getPrimaries(o.colorSpace),h=o.colorSpace===ee||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const f=o.isCompressedTexture||o.image[0].isCompressedTexture,p=o.image[0]&&o.image[0].isDataTexture,x=[];for(let e=0;e<6;e++)x[e]=f||p?p?o.image[e].image:o.image[e]:m(o.image[e],!1,!0,i.maxCubemapSize),x[e]=re(o,x[e]);const w=x[0],E=g(w)||a,S=s.convert(o.format,o.colorSpace),A=s.convert(o.type),T=b(o.internalFormat,S,A,o.colorSpace),M=a&&!0!==o.isVideoTexture,C=void 0===d.__version||!0===c;let P,R=_(o,w,E);if(X(e.TEXTURE_CUBE_MAP,o,E),f){M&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,R,T,w.width,w.height);for(let t=0;t<6;t++){P=x[t].mipmaps;for(let r=0;r<P.length;r++){const i=P[r];o.format!==G?null!==S?M?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,S,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,T,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,S,A,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,T,i.width,i.height,0,S,A,i.data)}}}else{P=o.mipmaps,M&&C&&(P.length>0&&R++,n.texStorage2D(e.TEXTURE_CUBE_MAP,R,T,x[0].width,x[0].height));for(let t=0;t<6;t++)if(p){M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,x[t].width,x[t].height,S,A,x[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,x[t].width,x[t].height,0,S,A,x[t].data);for(let r=0;r<P.length;r++){const i=P[r].image[t].image;M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,S,A,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,T,i.width,i.height,0,S,A,i.data)}}else{M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,S,A,x[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,T,S,A,x[t]);for(let r=0;r<P.length;r++){const i=P[r];M?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,S,A,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,T,S,A,i.image[t])}}}v(o,E)&&y(e.TEXTURE_CUBE_MAP),d.__version=u.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(l,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,i){const s=r.get(t);void 0!==n&&K(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&J(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",E),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,o.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,h=!0===t.isWebGLMultipleRenderTargets,f=g(t)||a;if(d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(a&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(a&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(h)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===te(t)){const r=h?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const o=s.convert(i.format,i.colorSpace),a=s.convert(i.type),l=b(i.internalFormat,o,a,i.colorSpace,!0===t.isXRRenderTarget),u=$(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),Q(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),X(e.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)if(a&&l.mipmaps&&l.mipmaps.length>0)for(let r=0;r<l.mipmaps.length;r++)K(c.__webglFramebuffer[n][r],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else K(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);v(l,f)&&y(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){const i=t.texture;for(let s=0,o=i.length;s<o;s++){const o=i[s],a=r.get(o);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),X(e.TEXTURE_2D,o,f),K(c.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+s,e.TEXTURE_2D,0),v(o,f)&&y(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),X(r,l,f),a&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)K(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,r,n);else K(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r,0);v(l,f)&&y(r),n.unbindTexture()}t.depthBuffer&&J(t)},this.updateRenderTargetMipmap=function(t){const i=g(t)||a,s=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=s.length;o<a;o++){const a=s[o];if(v(a,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=r.get(a).__webglTexture;n.bindTexture(i,s),y(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(a&&t.samples>0&&!1===te(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,o=t.height;let a=e.COLOR_BUFFER_BIT;const l=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,d=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,d.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(u);const f=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;if(!1===f&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,d.__webglColorRenderbuffer[n]),!0===f&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,o,0,0,s,o,a,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,d.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,d.__webglColorRenderbuffer[t]);const s=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,d.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=K,this.useMultisampledRTT=te}function no(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=""){let s;const o=Ge.getTransfer(i);if(n===D)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===B)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(n===U)return e.UNSIGNED_INT;if(n===F)return e.FLOAT;if(n===z)return r?e.HALF_FLOAT:(s=t.get("OES_texture_half_float"),null!==s?s.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===G)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===V)return e.DEPTH_COMPONENT;if(n===j)return e.DEPTH_STENCIL;if(n===he)return s=t.get("EXT_sRGB"),null!==s?s.SRGB_ALPHA_EXT:null;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===W||n===q||n===X||n===Z)if(o===oe){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===W)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===q)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===X)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Z)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===W)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===q)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===X)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Z)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(35840===n)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(37492===n)return o===oe?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(37496===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(37808===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return o===oe?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Y||36494===n||36495===n){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Y)return o===oe?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===Y)return s.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===H?r?e.UNSIGNED_INT_24_8:(s=t.get("WEBGL_depth_texture"),null!==s?s.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class ro extends vr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class io extends on{constructor(){super(),this.isGroup=!0,this.type="Group"}}const so={type:"move"};class oo{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new io,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new io,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new it,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new it),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new io,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new it,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new it),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const o=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],o=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&o>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&o<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(so)))}return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new io;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class ao extends me{constructor(e,t){super();const n=this;let r=null,i=1,s=null,o="local-floor",a=1,l=null,c=null,u=null,d=null,h=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],y=[],b=new Re;let _=null;const x=new vr;x.layers.enable(1),x.viewport=new Je;const w=new vr;w.layers.enable(2),w.viewport=new Je;const E=[x,w],S=new ro;S.layers.enable(1),S.layers.enable(2);let A=null,T=null;function M(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function C(){r.removeEventListener("select",M),r.removeEventListener("selectstart",M),r.removeEventListener("selectend",M),r.removeEventListener("squeeze",M),r.removeEventListener("squeezestart",M),r.removeEventListener("squeezeend",M),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",P);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}A=null,T=null,e.setRenderTarget(m),h=null,d=null,u=null,r=null,g=null,O.stop(),n.isPresenting=!1,e.setPixelRatio(_),e.setSize(b.width,b.height,!1),n.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,v[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const i=v[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new oo,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new oo,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new oo,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==d?d:h},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",M),r.addEventListener("selectstart",M),r.addEventListener("selectend",M),r.addEventListener("squeeze",M),r.addEventListener("squeezestart",M),r.addEventListener("squeezeend",M),r.addEventListener("end",C),r.addEventListener("inputsourceschange",P),!0!==p.xrCompatible&&await t.makeXRCompatible(),_=e.getPixelRatio(),e.getSize(b),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:i};h=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:h}),e.setPixelRatio(1),e.setSize(h.framebufferWidth,h.framebufferHeight,!1),g=new et(h.framebufferWidth,h.framebufferHeight,{format:G,type:D,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let n=null,s=null,o=null;p.depth&&(o=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=p.stencil?j:V,s=p.stencil?H:U);const a={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:i};u=new XRWebGLBinding(r,t),d=u.createProjectionLayer(a),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),g=new et(d.textureWidth,d.textureHeight,{format:G,type:D,depthTexture:new hi(d.textureWidth,d.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(a),l=null,s=await r.requestReferenceSpace(o),O.setContext(r),O.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const R=new it,I=new it;function L(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;S.near=w.near=x.near=e.near,S.far=w.far=x.far=e.far,A===S.near&&T===S.far||(r.updateRenderState({depthNear:S.near,depthFar:S.far}),A=S.near,T=S.far);const t=e.parent,n=S.cameras;L(S,t);for(let e=0;e<n.length;e++)L(n[e],t);2===n.length?function(e,t,n){R.setFromMatrixPosition(t.matrixWorld),I.setFromMatrixPosition(n.matrixWorld);const r=R.distanceTo(I),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,o=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],d=(s[8]+1)/s[0],h=o*u,f=o*d,p=r/(-u+d),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+p,v=a+p,y=h-m,b=f+(r-m),_=l*a/v*g,x=c*a/v*g;e.projectionMatrix.makePerspective(y,b,_,x,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(S,x,w):S.projectionMatrix.copy(x.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*ye*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,S,t)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==d||null!==h)return a},this.setFoveation=function(e){a=e,null!==d&&(d.fixedFoveation=e),null!==h&&void 0!==h.fixedFoveation&&(h.fixedFoveation=e)};let k=null;const O=new Pr;O.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||s),f=r,null!==c){const t=c.views;null!==h&&(e.setRenderTargetFramebuffer(g,h.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let s=null;if(null!==h)s=h.getViewport(i);else{const t=u.getViewSubImage(d,i);s=t.viewport,0===r&&(e.setRenderTargetTextures(g,t.colorTexture,d.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let o=E[r];void 0===o&&(o=new vr,o.layers.enable(r),o.viewport=new Je,E[r]=o),o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(i.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(s.x,s.y,s.width,s.height),0===r&&(S.matrix.copy(o.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(o)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,r,l||s)}k&&k(t,r),r.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:r}),f=null})),this.setAnimationLoop=function(e){k=e},this.dispose=function(){}}}function lo(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,1===i.side&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),1===i.side&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const s=t.get(i).envMap;if(s&&(r.envMap.value=s,r.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,fr(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,s,o,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform)),e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));t.get(r).envMap&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform))),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,a)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,s,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform)),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function co(e,t,n,r){let i={},s={},o=[];const a=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,r){const i=e.value,s=t+"_"+n;if(void 0===r[s])return r[s]="number"==typeof i||"boolean"==typeof i?i:i.clone(),!0;{const e=r[s];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[s]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,d){let h=i[n.id];void 0===h&&(function(e){const t=e.uniforms;let n=0;for(let e=0,r=t.length;e<r;e++){const r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=r.length;e<t;e++){const t=r[e],i=Array.isArray(t.value)?t.value:[t.value];for(let e=0,r=i.length;e<r;e++){const r=c(i[e]),s=n%16;0!==s&&16-s<r.boundary&&(n+=16-s),t.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=r.storage}}}const r=n%16;r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),h=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,s=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,s),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=h,n.addEventListener("dispose",u));const f=d.program;r.updateUBOMapping(n,f);const p=t.render.frame;s[n.id]!==p&&(function(t){const n=i[t.id],r=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){const i=n[r];if(!0===l(i,t,r,s)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let s=0;s<n.length;s++){const o=n[s],a=c(o);"number"==typeof o||"boolean"==typeof o?(i.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),s[n.id]=p)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},s={}}}}class uo{constructor(e={}){const{canvas:t=Ne(),context:n=null,depth:r=!0,stencil:i=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==n?n.getContextAttributes().alpha:s;const f=new Uint32Array(4),p=new Int32Array(4);let m=null,v=null;const y=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=te,this._useLegacyLights=!1,this.toneMapping=g,this.toneMappingExposure=1;const _=this;let x=!1,w=0,E=0,S=null,A=-1,T=null;const M=new Je,C=new Je;let P=null;const R=new En(0);let I=0,L=t.width,k=t.height,O=1,V=null,j=null;const W=new Je(0,0,L,k),q=new Je(0,0,L,k);let X=!1;const Z=new Cr;let Y=!1,K=!1,Q=null;const J=new Ot,$=new Re,ee=new it,re={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ie(){return null===S?O:1}let se,oe,ae,le,ce,ue,de,he,fe,pe,me,ge,ve,ye,be,_e,xe,we,Ee,Ae,Te,Me,Ce,Pe,Ie=n;function Le(e,n){for(let r=0;r<e.length;r++){const i=e[r],s=t.getContext(i,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:o,premultipliedAlpha:a,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${l}`),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",Be,!1),t.addEventListener("webglcontextcreationerror",Ue,!1),null===Ie){const t=["webgl2","webgl","experimental-webgl"];if(!0===_.isWebGL1Renderer&&t.shift(),Ie=Le(t,e),null===Ie)throw Le(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!=typeof WebGLRenderingContext&&Ie instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===Ie.getShaderPrecisionFormat&&(Ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function ke(){se=new ii(Ie),oe=new Fr(Ie,se,e),se.init(oe),Me=new no(Ie,se,oe),ae=new eo(Ie,se,oe),le=new ai(Ie),ce=new zs,ue=new to(Ie,se,ae,ce,oe,Me,le),de=new Hr(_),he=new ri(_),fe=new Rr(Ie,oe),Ce=new Br(Ie,se,fe,oe),pe=new si(Ie,fe,le,Ce),me=new di(Ie,pe,fe,le),Ee=new ui(Ie,oe,ue),_e=new zr(ce),ge=new Fs(_,de,he,se,oe,Ce,_e),ve=new lo(_,ce),ye=new js,be=new Ks(se,oe),we=new Dr(_,de,he,ae,me,h,a),xe=new $s(_,me,oe),Pe=new co(Ie,le,oe,ae),Ae=new Ur(Ie,se,le,oe),Te=new oi(Ie,se,le,oe),le.programs=ge.programs,_.capabilities=oe,_.extensions=se,_.properties=ce,_.renderLists=ye,_.shadowMap=xe,_.state=ae,_.info=le}ke();const Oe=new ao(_,Ie);function De(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const e=le.autoReset,t=xe.enabled,n=xe.autoUpdate,r=xe.needsUpdate,i=xe.type;ke(),le.autoReset=e,xe.enabled=t,xe.autoUpdate=n,xe.needsUpdate=r,xe.type=i}function Ue(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Fe(e){const t=e.target;t.removeEventListener("dispose",Fe),function(e){(function(e){const t=ce.get(e).programs;void 0!==t&&(t.forEach((function(e){ge.releaseProgram(e)})),e.isShaderMaterial&&ge.releaseShaderCache(e))})(e),ce.remove(e)}(t)}function ze(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Ye(e,t,n),e.side=0,e.needsUpdate=!0,Ye(e,t,n),e.side=2):Ye(e,t,n)}this.xr=Oe,this.getContext=function(){return Ie},this.getContextAttributes=function(){return Ie.getContextAttributes()},this.forceContextLoss=function(){const e=se.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=se.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(L,k,!1))},this.getSize=function(e){return e.set(L,k)},this.setSize=function(e,n,r=!0){Oe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,k=n,t.width=Math.floor(e*O),t.height=Math.floor(n*O),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(L*O,k*O).floor()},this.setDrawingBufferSize=function(e,n,r){L=e,k=n,O=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(M)},this.getViewport=function(e){return e.copy(W)},this.setViewport=function(e,t,n,r){e.isVector4?W.set(e.x,e.y,e.z,e.w):W.set(e,t,n,r),ae.viewport(M.copy(W).multiplyScalar(O).floor())},this.getScissor=function(e){return e.copy(q)},this.setScissor=function(e,t,n,r){e.isVector4?q.set(e.x,e.y,e.z,e.w):q.set(e,t,n,r),ae.scissor(C.copy(q).multiplyScalar(O).floor())},this.getScissorTest=function(){return X},this.setScissorTest=function(e){ae.setScissorTest(X=e)},this.setOpaqueSort=function(e){V=e},this.setTransparentSort=function(e){j=e},this.getClearColor=function(e){return e.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==S){const t=S.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=S.texture.type,t=e===D||e===U||e===B||e===H||1017===e||1018===e,n=we.getClearColor(),r=we.getClearAlpha(),i=n.r,s=n.g,o=n.b;t?(f[0]=i,f[1]=s,f[2]=o,f[3]=r,Ie.clearBufferuiv(Ie.COLOR,0,f)):(p[0]=i,p[1]=s,p[2]=o,p[3]=r,Ie.clearBufferiv(Ie.COLOR,0,p))}else r|=Ie.COLOR_BUFFER_BIT}t&&(r|=Ie.DEPTH_BUFFER_BIT),n&&(r|=Ie.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ie.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",Be,!1),t.removeEventListener("webglcontextcreationerror",Ue,!1),ye.dispose(),be.dispose(),ce.dispose(),de.dispose(),he.dispose(),me.dispose(),Ce.dispose(),Pe.dispose(),ge.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",Ge),Oe.removeEventListener("sessionend",Ve),Q&&(Q.dispose(),Q=null),je.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=re);const o=i.isMesh&&i.matrixWorld.determinant()<0,a=function(e,t,n,r,i){!0!==t.isScene&&(t=re),ue.resetTextureUnits();const s=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=null===S?_.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:ne,l=(r.isMeshStandardMaterial?he:de).get(r.envMap||o),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),d=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let p=g;r.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(p=_.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==m?m.length:0,b=ce.get(r),x=v.state.lights;if(!0===Y&&(!0===K||e!==T)){const t=e===T&&r.id===A;_e.setState(r,e,t)}let w=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==x.state.version||b.outputColorSpace!==a||i.isBatchedMesh&&!1===b.batching?w=!0:i.isBatchedMesh||!0!==b.batching?i.isInstancedMesh&&!1===b.instancing?w=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?w=!0:i.isSkinnedMesh||!0!==b.skinning?i.isInstancedMesh&&!0===b.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===b.instancingColor&&null!==i.instanceColor||b.envMap!==l||!0===r.fog&&b.fog!==s?w=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===_e.numPlanes&&b.numIntersection===_e.numIntersection?(b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==d||b.morphNormals!==h||b.morphColors!==f||b.toneMapping!==p||!0===oe.isWebGL2&&b.morphTargetsCount!==y)&&(w=!0):w=!0:w=!0:w=!0:w=!0:(w=!0,b.__version=r.version);let E=b.currentProgram;!0===w&&(E=Ye(r,t,i));let M=!1,C=!1,P=!1;const R=E.getUniforms(),I=b.uniforms;if(ae.useProgram(E.program)&&(M=!0,C=!0,P=!0),r.id!==A&&(A=r.id,C=!0),M||T!==e){R.setValue(Ie,"projectionMatrix",e.projectionMatrix),R.setValue(Ie,"viewMatrix",e.matrixWorldInverse);const t=R.map.cameraPosition;void 0!==t&&t.setValue(Ie,ee.setFromMatrixPosition(e.matrixWorld)),oe.logarithmicDepthBuffer&&R.setValue(Ie,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(Ie,"isOrthographic",!0===e.isOrthographicCamera),T!==e&&(T=e,C=!0,P=!0)}if(i.isSkinnedMesh){R.setOptional(Ie,i,"bindMatrix"),R.setOptional(Ie,i,"bindMatrixInverse");const e=i.skeleton;e&&(oe.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(Ie,"boneTexture",e.boneTexture,ue)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}i.isBatchedMesh&&(R.setOptional(Ie,i,"batchingTexture"),R.setValue(Ie,"batchingTexture",i._matricesTexture,ue));const L=n.morphAttributes;var N,D;if((void 0!==L.position||void 0!==L.normal||void 0!==L.color&&!0===oe.isWebGL2)&&Ee.update(i,n,E),(C||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,R.setValue(Ie,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(I.envMap.value=l,I.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),C&&(R.setValue(Ie,"toneMappingExposure",_.toneMappingExposure),b.needsLights&&(D=P,(N=I).ambientLightColor.needsUpdate=D,N.lightProbe.needsUpdate=D,N.directionalLights.needsUpdate=D,N.directionalLightShadows.needsUpdate=D,N.pointLights.needsUpdate=D,N.pointLightShadows.needsUpdate=D,N.spotLights.needsUpdate=D,N.spotLightShadows.needsUpdate=D,N.rectAreaLights.needsUpdate=D,N.hemisphereLights.needsUpdate=D),s&&!0===r.fog&&ve.refreshFogUniforms(I,s),ve.refreshMaterialUniforms(I,r,O,k,Q),vs.upload(Ie,Ke(b),I,ue)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(vs.upload(Ie,Ke(b),I,ue),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&R.setValue(Ie,"center",i.center),R.setValue(Ie,"modelViewMatrix",i.modelViewMatrix),R.setValue(Ie,"normalMatrix",i.normalMatrix),R.setValue(Ie,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(oe.isWebGL2){const n=e[t];Pe.update(n,E),Pe.bind(n,E)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return E}(e,t,n,r,i);ae.setMaterial(r,o);let l=n.index,c=1;if(!0===r.wireframe){if(l=pe.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,d=n.attributes.position;let h=u.start*c,f=(u.start+u.count)*c;null!==s&&(h=Math.max(h,s.start*c),f=Math.min(f,(s.start+s.count)*c)),null!==l?(h=Math.max(h,0),f=Math.min(f,l.count)):null!=d&&(h=Math.max(h,0),f=Math.min(f,d.count));const p=f-h;if(p<0||p===1/0)return;let m;Ce.setup(i,r,a,n,l);let y=Ae;if(null!==l&&(m=fe.get(l),y=Te,y.setIndex(m)),i.isMesh)!0===r.wireframe?(ae.setLineWidth(r.wireframeLinewidth*ie()),y.setMode(Ie.LINES)):y.setMode(Ie.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),ae.setLineWidth(e*ie()),i.isLineSegments?y.setMode(Ie.LINES):i.isLineLoop?y.setMode(Ie.LINE_LOOP):y.setMode(Ie.LINE_STRIP)}else i.isPoints?y.setMode(Ie.POINTS):i.isSprite&&y.setMode(Ie.TRIANGLES);if(i.isBatchedMesh)y.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)y.renderInstances(h,p,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);y.renderInstances(h,p,t)}else y.render(h,p)},this.compile=function(e,t,n=null){null===n&&(n=e),v=be.get(n),v.init(),b.push(v),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(v.pushLight(e),e.castShadow&&v.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(v.pushLight(e),e.castShadow&&v.pushShadow(e))})),v.setupLights(_._useLegacyLights);const r=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const s=t[i];ze(s,n,e),r.add(s)}else ze(t,n,e),r.add(t)})),b.pop(),v=null,r},this.compileAsync=function(e,t,n=null){const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){ce.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==se.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let He=null;function Ge(){je.stop()}function Ve(){je.start()}const je=new Pr;function We(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)v.pushLight(e),e.castShadow&&v.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Z.intersectsSprite(e)){r&&ee.setFromMatrixPosition(e.matrixWorld).applyMatrix4(J);const t=me.update(e),i=e.material;i.visible&&m.push(e,t,i,n,ee.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||Z.intersectsObject(e))){const t=me.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),ee.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),ee.copy(t.boundingSphere.center)),ee.applyMatrix4(e.matrixWorld).applyMatrix4(J)),Array.isArray(i)){const r=t.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=i[o.materialIndex];a&&a.visible&&m.push(e,t,a,n,ee.z,o)}}else i.visible&&m.push(e,t,i,n,ee.z,null)}const i=e.children;for(let e=0,s=i.length;e<s;e++)We(i[e],t,n,r)}function qe(e,t,n,r){const i=e.opaque,s=e.transmissive,o=e.transparent;v.setupLightsView(n),!0===Y&&_e.setGlobalState(_.clippingPlanes,n),s.length>0&&function(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;const i=oe.isWebGL2;null===Q&&(Q=new et(1,1,{generateMipmaps:!0,type:se.has("EXT_color_buffer_half_float")?z:D,minFilter:N,samples:i?4:0})),_.getDrawingBufferSize($),i?Q.setSize($.x,$.y):Q.setSize(Se($.x),Se($.y));const s=_.getRenderTarget();_.setRenderTarget(Q),_.getClearColor(R),I=_.getClearAlpha(),I<1&&_.setClearColor(16777215,.5),_.clear();const o=_.toneMapping;_.toneMapping=g,Xe(e,n,r),ue.updateMultisampleRenderTarget(Q),ue.updateRenderTargetMipmap(Q);let a=!1;for(let e=0,i=t.length;e<i;e++){const i=t[e],s=i.object,o=i.geometry,l=i.material,c=i.group;if(2===l.side&&s.layers.test(r.layers)){const e=l.side;l.side=1,l.needsUpdate=!0,Ze(s,n,r,o,l,c),l.side=e,l.needsUpdate=!0,a=!0}}!0===a&&(ue.updateMultisampleRenderTarget(Q),ue.updateRenderTargetMipmap(Q)),_.setRenderTarget(s),_.setClearColor(R,I),_.toneMapping=o}(i,s,t,n),r&&ae.viewport(M.copy(r)),i.length>0&&Xe(i,t,n),s.length>0&&Xe(s,t,n),o.length>0&&Xe(o,t,n),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function Xe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],o=s.object,a=s.geometry,l=null===r?s.material:r,c=s.group;o.layers.test(n.layers)&&Ze(o,t,n,a,l,c)}}function Ze(e,t,n,r,i,s){e.onBeforeRender(_,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(_,t,n,r,e,s),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=1,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,s),i.side=0,i.needsUpdate=!0,_.renderBufferDirect(n,t,r,i,e,s),i.side=2):_.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(_,t,n,r,i,s)}function Ye(e,t,n){!0!==t.isScene&&(t=re);const r=ce.get(e),i=v.state.lights,s=v.state.shadowsArray,o=i.state.version,a=ge.getParameters(e,i.state,s,t,n),l=ge.getProgramCacheKey(a);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?he:de).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Fe),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Qe(e,a),u}else a.uniforms=ge.getUniforms(e),e.onBuild(n,a,_),e.onBeforeCompile(a,_),u=ge.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const d=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(d.clippingPlanes=_e.uniform),Qe(e,a),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.ltc_1.value=i.state.rectAreaLTC1,d.ltc_2.value=i.state.rectAreaLTC2,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotLightMatrix.value=i.state.spotLightMatrix,d.spotLightMap.value=i.state.spotLightMap,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Ke(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=vs.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Qe(e,t){const n=ce.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}je.setAnimationLoop((function(e){He&&He(e)})),"undefined"!=typeof self&&je.setContext(self),this.setAnimationLoop=function(e){He=e,Oe.setAnimationLoop(e),null===e?je.stop():je.start()},Oe.addEventListener("sessionstart",Ge),Oe.addEventListener("sessionend",Ve),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Oe.enabled&&!0===Oe.isPresenting&&(!0===Oe.cameraAutoUpdate&&Oe.updateCamera(t),t=Oe.getCamera()),!0===e.isScene&&e.onBeforeRender(_,e,t,S),v=be.get(e,b.length),v.init(),b.push(v),J.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Z.setFromProjectionMatrix(J),K=this.localClippingEnabled,Y=_e.init(this.clippingPlanes,K),m=ye.get(e,y.length),m.init(),y.push(m),We(e,t,0,_.sortObjects),m.finish(),!0===_.sortObjects&&m.sort(V,j),this.info.render.frame++,!0===Y&&_e.beginShadows();const n=v.state.shadowsArray;if(xe.render(n,e,t),!0===Y&&_e.endShadows(),!0===this.info.autoReset&&this.info.reset(),we.render(m,e),v.setupLights(_._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];qe(m,e,r,r.viewport)}}else qe(m,e,t);null!==S&&(ue.updateMultisampleRenderTarget(S),ue.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(_,e,t),Ce.resetDefaultState(),A=-1,T=null,b.pop(),v=b.length>0?b[b.length-1]:null,y.pop(),m=y.length>0?y[y.length-1]:null},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){ce.get(e.texture).__webglTexture=t,ce.get(e.depthTexture).__webglTexture=n;const r=ce.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===se.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=ce.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,w=t,E=n;let r=!0,i=null,s=!1,o=!1;if(e){const a=ce.get(e);void 0!==a.__useDefaultFramebuffer?(ae.bindFramebuffer(Ie.FRAMEBUFFER,null),r=!1):void 0===a.__webglFramebuffer?ue.setupRenderTarget(e):a.__hasExternalTextures&&ue.rebindTextures(e,ce.get(e.texture).__webglTexture,ce.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(o=!0);const c=ce.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],s=!0):i=oe.isWebGL2&&e.samples>0&&!1===ue.useMultisampledRTT(e)?ce.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,M.copy(e.viewport),C.copy(e.scissor),P=e.scissorTest}else M.copy(W).multiplyScalar(O).floor(),C.copy(q).multiplyScalar(O).floor(),P=X;if(ae.bindFramebuffer(Ie.FRAMEBUFFER,i)&&oe.drawBuffers&&r&&ae.drawBuffers(e,i),ae.viewport(M),ae.scissor(C),ae.setScissorTest(P),s){const r=ce.get(e.texture);Ie.framebufferTexture2D(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,Ie.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=ce.get(e.texture),i=t||0;Ie.framebufferTextureLayer(Ie.FRAMEBUFFER,Ie.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}A=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=ce.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){ae.bindFramebuffer(Ie.FRAMEBUFFER,a);try{const o=e.texture,a=o.format,l=o.type;if(a!==G&&Me.convert(a)!==Ie.getParameter(Ie.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===z&&(se.has("EXT_color_buffer_half_float")||oe.isWebGL2&&se.has("EXT_color_buffer_float"));if(!(l===D||Me.convert(l)===Ie.getParameter(Ie.IMPLEMENTATION_COLOR_READ_TYPE)||l===F&&(oe.isWebGL2||se.has("OES_texture_float")||se.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&Ie.readPixels(t,n,r,i,Me.convert(a),Me.convert(l),s)}finally{const e=null!==S?ce.get(S).__webglFramebuffer:null;ae.bindFramebuffer(Ie.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),s=Math.floor(t.image.height*r);ue.setTexture2D(t,0),Ie.copyTexSubImage2D(Ie.TEXTURE_2D,n,0,0,e.x,e.y,i,s),ae.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,s=t.image.height,o=Me.convert(n.format),a=Me.convert(n.type);ue.setTexture2D(n,0),Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,n.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?Ie.texSubImage2D(Ie.TEXTURE_2D,r,e.x,e.y,i,s,o,a,t.image.data):t.isCompressedTexture?Ie.compressedTexSubImage2D(Ie.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):Ie.texSubImage2D(Ie.TEXTURE_2D,r,e.x,e.y,o,a,t.image),0===r&&n.generateMipmaps&&Ie.generateMipmap(Ie.TEXTURE_2D),ae.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(_.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,o=e.max.y-e.min.y+1,a=e.max.z-e.min.z+1,l=Me.convert(r.format),c=Me.convert(r.type);let u;if(r.isData3DTexture)ue.setTexture3D(r,0),u=Ie.TEXTURE_3D;else{if(!r.isDataArrayTexture&&!r.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ue.setTexture2DArray(r,0),u=Ie.TEXTURE_2D_ARRAY}Ie.pixelStorei(Ie.UNPACK_FLIP_Y_WEBGL,r.flipY),Ie.pixelStorei(Ie.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),Ie.pixelStorei(Ie.UNPACK_ALIGNMENT,r.unpackAlignment);const d=Ie.getParameter(Ie.UNPACK_ROW_LENGTH),h=Ie.getParameter(Ie.UNPACK_IMAGE_HEIGHT),f=Ie.getParameter(Ie.UNPACK_SKIP_PIXELS),p=Ie.getParameter(Ie.UNPACK_SKIP_ROWS),m=Ie.getParameter(Ie.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[i]:n.image;Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,g.width),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,g.height),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,e.min.x),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,e.min.y),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?Ie.texSubImage3D(u,i,t.x,t.y,t.z,s,o,a,l,c,g.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ie.compressedTexSubImage3D(u,i,t.x,t.y,t.z,s,o,a,l,g.data)):Ie.texSubImage3D(u,i,t.x,t.y,t.z,s,o,a,l,c,g),Ie.pixelStorei(Ie.UNPACK_ROW_LENGTH,d),Ie.pixelStorei(Ie.UNPACK_IMAGE_HEIGHT,h),Ie.pixelStorei(Ie.UNPACK_SKIP_PIXELS,f),Ie.pixelStorei(Ie.UNPACK_SKIP_ROWS,p),Ie.pixelStorei(Ie.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&Ie.generateMipmap(u),ae.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?ue.setTextureCube(e,0):e.isData3DTexture?ue.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ue.setTexture2DArray(e,0):ue.setTexture2D(e,0),ae.unbindTexture()},this.resetState=function(){w=0,E=0,S=null,ae.reset(),Ce.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return fe}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===re?"display-p3":"srgb",t.unpackColorSpace=Ge.workingColorSpace===ie?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===te?$:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===$?te:ne}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class extends uo{}).prototype.isWebGL1Renderer=!0;class ho{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=ue,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=be()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=be()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=be()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fo=new it;class po{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)fo.fromBufferAttribute(this,t),fo.applyMatrix4(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)fo.fromBufferAttribute(this,t),fo.applyNormalMatrix(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)fo.fromBufferAttribute(this,t),fo.transformDirection(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}setX(e,t){return this.normalized&&(t=Te(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Te(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Te(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Te(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ae(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ae(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ae(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ae(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Te(t,this.array),n=Te(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Te(t,this.array),n=Te(n,this.array),r=Te(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Te(t,this.array),n=Te(n,this.array),r=Te(r,this.array),i=Te(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new kn(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new po(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class mo extends Tn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new En(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let go;const vo=new it,yo=new it,bo=new it,_o=new Re,xo=new Re,wo=new Ot,Eo=new it,So=new it,Ao=new it,To=new Re,Mo=new Re,Co=new Re;function Po(e,t,n,r,i,s){_o.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(xo.x=s*_o.x-i*_o.y,xo.y=i*_o.x+s*_o.y):xo.copy(_o),e.copy(t),e.x+=xo.x,e.y+=xo.y,e.applyMatrix4(wo)}const Ro=new it,Io=new Je,Lo=new Je,ko=new it,Oo=new Ot,No=new it,Do=new At,Bo=new Ot,Uo=new kt;class Fo extends lr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=E,this.bindMatrix=new Ot,this.bindMatrixInverse=new Ot,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new at),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,No),this.boundingBox.expandByPoint(No)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new At),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,No),this.boundingSphere.expandByPoint(No)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Do.copy(this.boundingSphere),Do.applyMatrix4(r),!1!==e.ray.intersectsSphere(Do)&&(Bo.copy(r).invert(),Uo.copy(e.ray).applyMatrix4(Bo),null!==this.boundingBox&&!1===Uo.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Uo)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Je,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===E?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Io.fromBufferAttribute(r.attributes.skinIndex,e),Lo.fromBufferAttribute(r.attributes.skinWeight,e),Ro.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Lo.getComponent(e);if(0!==r){const i=Io.getComponent(e);Oo.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(ko.copy(Ro).applyMatrix4(Oo),r)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class zo extends on{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ho extends Qe{constructor(e=null,t=1,n=1,r,i,s,o,a,l=1003,c=1003,u,d){super(null,s,o,a,l,c,r,i,u,d),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Go=new Ot,Vo=new Ot;class jo{constructor(e=[],t=[]){this.uuid=be(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Ot)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Ot;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Vo;Go.multiplyMatrices(i,t[r]),Go.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new jo(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ho(t,e,e,G,F);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new zo),this.bones.push(i),this.boneInverses.push((new Ot).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}class Wo extends kn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const qo=new Ot,Xo=new Ot,Zo=[],Yo=new at,Ko=new Ot,Qo=new lr,Jo=new At;class $o extends lr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wo(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,Ko)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new at),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qo),Yo.copy(e.boundingBox).applyMatrix4(qo),this.boundingBox.union(Yo)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new At),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,qo),Jo.copy(e.boundingSphere).applyMatrix4(qo),this.boundingSphere.union(Jo)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Qo.geometry=this.geometry,Qo.material=this.material,void 0!==Qo.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Jo.copy(this.boundingSphere),Jo.applyMatrix4(n),!1!==e.ray.intersectsSphere(Jo)))for(let i=0;i<r;i++){this.getMatrixAt(i,qo),Xo.multiplyMatrices(n,qo),Qo.matrixWorld=Xo,Qo.raycast(e,Zo);for(let e=0,n=Zo.length;e<n;e++){const n=Zo[e];n.instanceId=i,n.object=this,t.push(n)}Zo.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Wo(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ea extends Tn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new En(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ta=new it,na=new it,ra=new Ot,ia=new kt,sa=new At;class oa extends on{constructor(e=new jn,t=new ea){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)ta.fromBufferAttribute(t,e-1),na.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ta.distanceTo(na);e.setAttribute("lineDistance",new Dn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),sa.copy(n.boundingSphere),sa.applyMatrix4(r),sa.radius+=i,!1===e.ray.intersectsSphere(sa))return;ra.copy(r).invert(),ia.copy(e.ray).applyMatrix4(ra);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=new it,c=new it,u=new it,d=new it,h=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f)for(let n=Math.max(0,s.start),r=Math.min(f.count,s.start+s.count)-1;n<r;n+=h){const r=f.getX(n),i=f.getX(n+1);if(l.fromBufferAttribute(p,r),c.fromBufferAttribute(p,i),ia.distanceSqToSegment(l,c,d,u)>a)continue;d.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(d);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,s.start),r=Math.min(p.count,s.start+s.count)-1;n<r;n+=h){if(l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1),ia.distanceSqToSegment(l,c,d,u)>a)continue;d.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(d);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const aa=new it,la=new it;class ca extends oa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)aa.fromBufferAttribute(t,e),la.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+aa.distanceTo(la);e.setAttribute("lineDistance",new Dn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ua extends oa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class da extends Tn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new En(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ha=new Ot,fa=new kt,pa=new At,ma=new it;class ga extends on{constructor(e=new jn,t=new da){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),pa.copy(n.boundingSphere),pa.applyMatrix4(r),pa.radius+=i,!1===e.ray.intersectsSphere(pa))return;ha.copy(r).invert(),fa.copy(e.ray).applyMatrix4(ha);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,s.start),i=Math.min(l.count,s.start+s.count);n<i;n++){const i=l.getX(n);ma.fromBufferAttribute(c,i),va(ma,i,a,r,e,t,this)}else for(let n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);n<i;n++)ma.fromBufferAttribute(c,n),va(ma,n,a,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function va(e,t,n,r,i,s,o){const a=fa.distanceSqToPoint(e);if(a<n){const n=new it;fa.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;s.push({distance:l,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:o})}}class ya{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let o,a=0,l=i-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),o=n[r]-s,o<0)a=r+1;else{if(!(o>0)){l=r;break}l=r-1}if(r=l,n[r]===s)return r/(i-1);const c=n[r];return(r+(s-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),a=t||(s.isVector2?new Re:new it);return a.copy(o).sub(s).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new it,r=[],i=[],s=[],o=new it,a=new Ot;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new it)}i[0]=new it,s[0]=new it;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),s[t]=s[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(_e(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(a.makeRotationAxis(o,e))}s[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(_e(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ba extends ya{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t){const n=t||new Re,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=l-this.aY;a=n*e-r*t+this.aX,l=n*t+r*e+this.aY}return n.set(a,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function _a(){let e=0,t=0,n=0,r=0;function i(i,s,o,a){e=i,t=o,n=-3*i+3*s-2*o-a,r=2*i-2*s+o+a}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,o,a){let l=(t-e)/s-(n-e)/(s+o)+(n-t)/o,c=(n-t)/o-(r-t)/(o+a)+(r-n)/a;l*=o,c*=o,i(t,n,l,c)},calc:function(i){const s=i*i;return e+t*i+n*s+r*(s*i)}}}const xa=new it,wa=new _a,Ea=new _a,Sa=new _a;function Aa(e,t,n,r,i){const s=.5*(r-t),o=.5*(i-n),a=e*e;return(2*n-2*r+s+o)*(e*a)+(-3*n+3*r-2*s-o)*a+s*e+n}function Ta(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Ma(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Ca extends ya{constructor(e=new Re,t=new Re,n=new Re,r=new Re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Re){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(Ma(e,r.x,i.x,s.x,o.x),Ma(e,r.y,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Pa extends ya{constructor(e=new Re,t=new Re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Re){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ra extends ya{constructor(e=new Re,t=new Re,n=new Re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Re){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Ta(e,r.x,i.x,s.x),Ta(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ia extends ya{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Re){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),o=i-s,a=r[0===s?s:s-1],l=r[s],c=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return n.set(Aa(o,a.x,l.x,c.x,u.x),Aa(o,a.y,l.y,c.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Re).fromArray(n))}return this}}var La=Object.freeze({__proto__:null,ArcCurve:class extends ba{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class extends ya{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new it){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let o,a,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/i)+1)*i:0===c&&l===i-1&&(l=i-2,c=1),this.closed||l>0?o=r[(l-1)%i]:(xa.subVectors(r[0],r[1]).add(r[0]),o=xa);const u=r[l%i],d=r[(l+1)%i];if(this.closed||l+2<i?a=r[(l+2)%i]:(xa.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=xa),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(d),e),r=Math.pow(d.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),wa.initNonuniformCatmullRom(o.x,u.x,d.x,a.x,t,n,r),Ea.initNonuniformCatmullRom(o.y,u.y,d.y,a.y,t,n,r),Sa.initNonuniformCatmullRom(o.z,u.z,d.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(wa.initCatmullRom(o.x,u.x,d.x,a.x,this.tension),Ea.initCatmullRom(o.y,u.y,d.y,a.y,this.tension),Sa.initCatmullRom(o.z,u.z,d.z,a.z,this.tension));return n.set(wa.calc(c),Ea.calc(c),Sa.calc(c)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new it).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Ca,CubicBezierCurve3:class extends ya{constructor(e=new it,t=new it,n=new it,r=new it){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new it){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(Ma(e,r.x,i.x,s.x,o.x),Ma(e,r.y,i.y,s.y,o.y),Ma(e,r.z,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:ba,LineCurve:Pa,LineCurve3:class extends ya{constructor(e=new it,t=new it){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new it){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new it){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Ra,QuadraticBezierCurve3:class extends ya{constructor(e=new it,t=new it,n=new it){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new it){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(Ta(e,r.x,i.x,s.x),Ta(e,r.y,i.y,s.y),Ta(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:Ia});class ka extends ya{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new La[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,s=this.curves[i],o=s.getLength(),a=0===o?0:1-e/o;return s.getPointAt(a,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],o=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new La[n.type]).fromJSON(n))}return this}}class Oa extends ka{constructor(e){super(),this.type="Path",this.currentPoint=new Re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Pa(this.currentPoint.clone(),new Re(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Ra(this.currentPoint.clone(),new Re(e,t),new Re(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const o=new Ca(this.currentPoint.clone(),new Re(e,t),new Re(n,r),new Re(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Ia(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,s,o,a),this}absellipse(e,t,n,r,i,s,o,a){const l=new ba(e,t,n,r,i,s,o,a);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Na extends Oa{constructor(e){super(e),this.uuid=be(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Oa).fromJSON(n))}return this}}function Da(e,t,n,r,i){let s,o;if(i===function(e,t,n,r){let i=0;for(let s=t,o=n-r;s<n;s+=r)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}(e,t,n,r)>0)for(s=t;s<n;s+=r)o=rl(s,e[s],e[s+1],o);else for(s=n-r;s>=t;s-=r)o=rl(s,e[s],e[s+1],o);return o&&Qa(o,o.next)&&(il(o),o=o.next),o}function Ba(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Qa(r,r.next)&&0!==Ka(r.prev,r,r.next))r=r.next;else{if(il(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Ua(e,t,n,r,i,s,o){if(!e)return;!o&&s&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=qa(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,s,o,a,l,c=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,r=n,a=0,t=0;t<c&&(a++,r=r.nextZ,r);t++);for(l=c;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1)}(i)}(e,r,i,s);let a,l,c=e;for(;e.prev!==e.next;)if(a=e.prev,l=e.next,s?za(e,r,i,s):Fa(e))t.push(a.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),il(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Ua(e=Ha(Ba(e),t,n),t,n,r,i,s,2):2===o&&Ga(e,t,n,r,i,s):Ua(Ba(e),t,n,r,i,s,1);break}}function Fa(e){const t=e.prev,n=e,r=e.next;if(Ka(t,n,r)>=0)return!1;const i=t.x,s=n.x,o=r.x,a=t.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let p=r.next;for(;p!==t;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=f&&Za(i,a,s,l,o,c,p.x,p.y)&&Ka(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function za(e,t,n,r){const i=e.prev,s=e,o=e.next;if(Ka(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<d?u<h?u:h:d<h?d:h,m=a>l?a>c?a:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=qa(f,p,t,n,r),y=qa(m,g,t,n,r);let b=e.prevZ,_=e.nextZ;for(;b&&b.z>=v&&_&&_.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&Za(a,u,l,d,c,h,b.x,b.y)&&Ka(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&Za(a,u,l,d,c,h,_.x,_.y)&&Ka(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;b&&b.z>=v;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&Za(a,u,l,d,c,h,b.x,b.y)&&Ka(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&Za(a,u,l,d,c,h,_.x,_.y)&&Ka(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Ha(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!Qa(i,s)&&Ja(i,r,r.next,s)&&tl(i,s)&&tl(s,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(s.i/n|0),il(r),il(r.next),r=e=s),r=r.next}while(r!==e);return Ba(r)}function Ga(e,t,n,r,i,s){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&Ya(o,e)){let a=nl(o,e);return o=Ba(o,o.next),a=Ba(a,a.next),Ua(o,t,n,r,i,s,0),void Ua(a,t,n,r,i,s,0)}e=e.next}o=o.next}while(o!==e)}function Va(e,t){return e.x-t.x}function ja(e,t){const n=function(e,t){let n,r=t,i=-1/0;const s=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){const e=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=s&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===s))return n}r=r.next}while(r!==t);if(!n)return null;const a=n,l=n.x,c=n.y;let u,d=1/0;r=n;do{s>=r.x&&r.x>=l&&s!==r.x&&Za(o<c?s:i,o,l,c,o<c?i:s,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(s-r.x),tl(r,e)&&(u<d||u===d&&(r.x>n.x||r.x===n.x&&Wa(n,r)))&&(n=r,d=u)),r=r.next}while(r!==a);return n}(e,t);if(!n)return t;const r=nl(n,e);return Ba(r,r.next),Ba(n,n.next)}function Wa(e,t){return Ka(e.prev,e,t.prev)<0&&Ka(t.next,e,e.next)<0}function qa(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Xa(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Za(e,t,n,r,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(r-a)>=(n-o)*(t-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Ya(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ja(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(tl(e,t)&&tl(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ka(e.prev,e,t.prev)||Ka(e,t.prev,t))||Qa(e,t)&&Ka(e.prev,e,e.next)>0&&Ka(t.prev,t,t.next)>0)}function Ka(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Qa(e,t){return e.x===t.x&&e.y===t.y}function Ja(e,t,n,r){const i=el(Ka(e,t,n)),s=el(Ka(e,t,r)),o=el(Ka(n,r,e)),a=el(Ka(n,r,t));return i!==s&&o!==a||!(0!==i||!$a(e,n,t))||!(0!==s||!$a(e,r,t))||!(0!==o||!$a(n,e,r))||!(0!==a||!$a(n,t,r))}function $a(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function el(e){return e>0?1:e<0?-1:0}function tl(e,t){return Ka(e.prev,e,e.next)<0?Ka(e,t,e.next)>=0&&Ka(e,e.prev,t)>=0:Ka(e,t,e.prev)<0||Ka(e,e.next,t)<0}function nl(e,t){const n=new sl(e.i,e.x,e.y),r=new sl(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function rl(e,t,n,r){const i=new sl(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function il(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function sl(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ol{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return ol.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];al(e),ll(n,e);let s=e.length;t.forEach(al);for(let e=0;e<t.length;e++)r.push(s),s+=t[e].length,ll(n,t[e]);const o=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let s=Da(e,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,f;if(r&&(s=function(e,t,n,r){const i=[];let s,o,a,l,c;for(s=0,o=t.length;s<o;s++)a=t[s]*r,l=s<o-1?t[s+1]*r:e.length,c=Da(e,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Xa(c));for(i.sort(Va),s=0;s<i.length;s++)n=ja(i[s],n);return n}(e,t,s,n)),e.length>80*n){a=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)d=e[t],h=e[t+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=0!==f?32767/f:0}return Ua(s,o,n,a,l,f,0),o}(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function al(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ll(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class cl extends jn{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let l=0;const c=[],u=new it,d=new it,h=[],f=[],p=[],m=[];for(let h=0;h<=n;h++){const g=[],v=h/n;let y=0;0===h&&0===s?y=.5/t:h===n&&a===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(s+v*o),u.y=e*Math.cos(s+v*o),u.z=e*Math.sin(r+a*i)*Math.sin(s+v*o),f.push(u.x,u.y,u.z),d.copy(u).normalize(),p.push(d.x,d.y,d.z),m.push(a+y,1-v),g.push(l++)}c.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=c[e][r+1],i=c[e][r],o=c[e+1][r],l=c[e+1][r+1];(0!==e||s>0)&&h.push(t,i,l),(e!==n-1||a<Math.PI)&&h.push(i,o,l)}this.setIndex(h),this.setAttribute("position",new Dn(f,3)),this.setAttribute("normal",new Dn(p,3)),this.setAttribute("uv",new Dn(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ul extends Tn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new En(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new En(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dl extends ul{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Re(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return _e(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new En(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new En(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new En(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class hl extends Tn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new En(16777215),this.specular=new En(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new En(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fl extends Tn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new En(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new En(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=f,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function pl(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function ml(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function gl(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,o=0;o!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function vl(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{o=s[r],void 0!==o&&(t.push(s.time),n.push.apply(n,o)),s=e[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[r],void 0!==o&&(t.push(s.time),o.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{o=s[r],void 0!==o&&(t.push(s.time),n.push(o)),s=e[i++]}while(void 0!==s)}class yl{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class bl extends yl{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,o=r[i],a=r[s];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=e,o=2*t-n;break;case 2402:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:s=e,a=2*n-t;break;case 2402:s=1,a=n+r[1]-r[0];break;default:s=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-o),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=s*c}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=this._offsetPrev,u=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-d*m+2*d*p-d*f,v=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,b=h*m-h*p;for(let e=0;e!==o;++e)i[e]=g*s[c+e]+v*s[l+e]+y*s[a+e]+b*s[u+e];return i}}class _l extends yl{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,l=a-o,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==o;++e)i[e]=s[l+e]*u+s[a+e]*c;return i}}class xl extends yl{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class wl{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=pl(t,this.TimeBufferType),this.values=pl(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:pl(e.times,Array),values:pl(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new xl(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new _l(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new bl(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case K:t=this.InterpolantFactoryMethodDiscrete;break;case Q:t=this.InterpolantFactoryMethodLinear;break;case J:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return K;case this.InterpolantFactoryMethodLinear:return Q;case this.InterpolantFactoryMethodSmooth:return J}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=n.slice(i,s),this.values=this.values.slice(i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==s&&s>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,s),e=!1;break}s=r}if(void 0!==r&&(o=r,ArrayBuffer.isView(o)&&!(o instanceof DataView)))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}var o;return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===J,i=e.length-1;let s=1;for(let o=1;o<i;++o){let i=!1;const a=e[o];if(a!==e[o+1]&&(1!==o||a!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,s=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[s+o]){i=!0;break}}}if(i){if(o!==s){e[s]=e[o];const r=o*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,o=0;o!==n;++o)t[r+o]=t[e+o];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}wl.prototype.TimeBufferType=Float32Array,wl.prototype.ValueBufferType=Float32Array,wl.prototype.DefaultInterpolation=Q;class El extends wl{}El.prototype.ValueTypeName="bool",El.prototype.ValueBufferType=Array,El.prototype.DefaultInterpolation=K,El.prototype.InterpolantFactoryMethodLinear=void 0,El.prototype.InterpolantFactoryMethodSmooth=void 0;class Sl extends wl{}Sl.prototype.ValueTypeName="color";class Al extends wl{}Al.prototype.ValueTypeName="number";class Tl extends yl{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(r-t);let l=e*o;for(let e=l+o;l!==e;l+=4)rt.slerpFlat(i,0,s,l-o,s,l,a);return i}}class Ml extends wl{InterpolantFactoryMethodLinear(e){return new Tl(this.times,this.values,this.getValueSize(),e)}}Ml.prototype.ValueTypeName="quaternion",Ml.prototype.DefaultInterpolation=Q,Ml.prototype.InterpolantFactoryMethodSmooth=void 0;class Cl extends wl{}Cl.prototype.ValueTypeName="string",Cl.prototype.ValueBufferType=Array,Cl.prototype.DefaultInterpolation=K,Cl.prototype.InterpolantFactoryMethodLinear=void 0,Cl.prototype.InterpolantFactoryMethodSmooth=void 0;class Pl extends wl{}Pl.prototype.ValueTypeName="vector";class Rl{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=be(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(Il(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(wl.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let e=0;e<i;e++){let o=[],a=[];o.push((e+i-1)%i,e,(e+1)%i),a.push(0,1,0);const l=ml(o);o=gl(o,1,l),a=gl(a,1,l),r||0!==o[0]||(o.push(i),a.push(a[0])),s.push(new Al(".morphTargetInfluences["+t[e].name+"]",o,a).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],s=n.name.match(i);if(s&&s.length>1){const e=s[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const s=[];for(const e in r)s.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],o=[];vl(n,s,o,r),0!==s.length&&i.push(new e(t,s,o))}},r=[],i=e.name||"default",s=e.fps||30,o=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],s=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),s.push(r.morphTarget===n?1:0)}r.push(new Al(".morphTargetInfluence["+n+"]",e,s))}a=e.length*s}else{const s=".bones["+t[e].name+"]";n(Pl,s+".position",i,"pos",r),n(Ml,s+".quaternion",i,"rot",r),n(Pl,s+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,a,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Il(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Al;case"vector":case"vector2":case"vector3":case"vector4":return Pl;case"color":return Sl;case"quaternion":return Ml;case"bool":case"boolean":return El;case"string":return Cl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];vl(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Ll={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class kl{constructor(e,t,n){const r=this;let i,s=!1,o=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===s&&void 0!==r.onStart&&r.onStart(e,o,a),s=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Ol=new kl;class Nl{constructor(e){this.manager=void 0!==e?e:Ol,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Nl.DEFAULT_MATERIAL_NAME="__DEFAULT";const Dl={};class Bl extends Error{constructor(e,t){super(e),this.response=t}}class Ul extends Nl{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Ll.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Dl[e])return void Dl[e].push({onLoad:t,onProgress:n,onError:r});Dl[e]=[],Dl[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Dl[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),s=i?parseInt(i):0,o=0!==s;let a=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{a+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new Bl(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Ll.add(e,t);const n=Dl[e];delete Dl[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=Dl[e];if(void 0===n)throw this.manager.itemError(e),t;delete Dl[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Fl extends Nl{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ll.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o=Oe("img");function a(){c(),Ll.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){o.removeEventListener("load",a,!1),o.removeEventListener("error",l,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class zl extends Nl{constructor(e){super(e)}load(e,t,n,r){const i=new _r;i.colorSpace=te;const s=new Fl(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)a(t);return i}}class Hl extends Nl{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Ho,o=new Ul(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){let n;try{n=i.parse(e)}catch(e){if(void 0===r)return void console.error(e);r(e)}void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:P,s.wrapT=void 0!==n.wrapT?n.wrapT:P,s.magFilter=void 0!==n.magFilter?n.magFilter:O,s.minFilter=void 0!==n.minFilter?n.minFilter:O,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace?s.colorSpace=n.colorSpace:void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=N),1===n.mipmapCount&&(s.minFilter=O),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n)}),n,r),s}}class Gl extends Nl{constructor(e){super(e)}load(e,t,n,r){const i=new Qe,s=new Fl(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Vl extends on{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new En(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const jl=new Ot,Wl=new it,ql=new it;class Xl{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Re(512,512),this.map=null,this.mapPass=null,this.matrix=new Ot,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Cr,this._frameExtents=new Re(1,1),this._viewportCount=1,this._viewports=[new Je(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Wl.setFromMatrixPosition(e.matrixWorld),t.position.copy(Wl),ql.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(ql),t.updateMatrixWorld(),jl.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jl),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(jl)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Zl extends Xl{constructor(){super(new vr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ye*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Yl extends Vl{constructor(e,t,n=0,r=Math.PI/3,i=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(on.DEFAULT_UP),this.updateMatrix(),this.target=new on,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new Zl}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Kl=new Ot,Ql=new it,Jl=new it;class $l extends Xl{constructor(){super(new vr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Re(4,2),this._viewportCount=6,this._viewports=[new Je(2,1,1,1),new Je(0,1,1,1),new Je(3,1,1,1),new Je(1,1,1,1),new Je(3,0,1,1),new Je(1,0,1,1)],this._cubeDirections=[new it(1,0,0),new it(-1,0,0),new it(0,0,1),new it(0,0,-1),new it(0,1,0),new it(0,-1,0)],this._cubeUps=[new it(0,1,0),new it(0,1,0),new it(0,1,0),new it(0,1,0),new it(0,0,1),new it(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Ql.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ql),Jl.copy(n.position),Jl.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Jl),n.updateMatrixWorld(),r.makeTranslation(-Ql.x,-Ql.y,-Ql.z),Kl.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Kl)}}class ec extends Vl{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new $l}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class tc extends Xl{constructor(){super(new Gr(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class nc extends Vl{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(on.DEFAULT_UP),this.updateMatrix(),this.target=new on,this.shadow=new tc}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class rc extends Vl{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ic{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class sc extends Nl{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Ll.get(e);if(void 0!==s)return i.manager.itemStart(e),s.then?void s.then((n=>{t&&t(n),i.manager.itemEnd(e)})).catch((e=>{r&&r(e)})):(setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s);const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader;const a=fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return Ll.add(e,n),t&&t(n),i.manager.itemEnd(e),n})).catch((function(t){r&&r(t),Ll.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)}));Ll.add(e,a),i.manager.itemStart(e)}}const oc="\\[\\]\\.:\\/",ac=new RegExp("["+oc+"]","g"),lc="[^"+oc+"]",cc="[^"+oc.replace("\\.","")+"]",uc=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",lc)+/(WCOD+)?/.source.replace("WCOD",cc)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lc)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lc)+"$"),dc=["material","materials","bones","map"];class hc{constructor(e,t,n){this.path=t,this.parsedPath=n||hc.parseTrackName(t),this.node=hc.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new hc.Composite(e,t,n):new hc(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ac,"")}static parseTrackName(e){const t=uc.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==dc.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=hc.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}hc.Composite=class{constructor(e,t,n){const r=n||hc.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},hc.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},hc.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},hc.prototype.GetterByBindingType=[hc.prototype._getValue_direct,hc.prototype._getValue_array,hc.prototype._getValue_arrayElement,hc.prototype._getValue_toArray],hc.prototype.SetterByBindingTypeAndVersioning=[[hc.prototype._setValue_direct,hc.prototype._setValue_direct_setNeedsUpdate,hc.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[hc.prototype._setValue_array,hc.prototype._setValue_array_setNeedsUpdate,hc.prototype._setValue_array_setMatrixWorldNeedsUpdate],[hc.prototype._setValue_arrayElement,hc.prototype._setValue_arrayElement_setNeedsUpdate,hc.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[hc.prototype._setValue_fromArray,hc.prototype._setValue_fromArray_setNeedsUpdate,hc.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class fc{constructor(e,t,n=0,r=1/0){this.ray=new kt(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new Wt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return mc(e,this,n,t),n.sort(pc),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)mc(e[r],this,n,t);return n.sort(pc),n}}function pc(e,t){return e.distance-t.distance}function mc(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)mc(r[e],t,n,!0)}}class gc{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(_e(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class vc{constructor(){this.type="ShapePath",this.color=new En,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Oa,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=t[i],o=t[s],a=o.x-n.x,l=o.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],a=-a,o=t[i],l=-l),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const n=ol.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,s,o;const a=[];if(1===r.length)return s=r[0],o=new Na,o.curves=s.curves,a.push(o),a;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let d,h,f=[],p=0;u[p]=void 0,f[p]=[];for(let t=0,o=r.length;t<o;t++)s=r[t],d=s.getPoints(),i=n(d),i=e?!i:i,i?(!l&&u[p]&&p++,u[p]={s:new Na,p:d},u[p].s.curves=s.curves,l&&p++,f[p]=[]):f[p].push({h:s,p:d[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Na;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let r=0,i=u.length;r<i;r++){const i=f[r];for(let s=0;s<i.length;s++){const o=i[s];let a=!0;for(let i=0;i<u.length;i++)t(o.p,u[i].p)&&(r!==i&&n++,a?(a=!1,c[i].push(o)):e=!0);a&&c[r].push(o)}}n>0&&!1===e&&(f=c)}for(let e=0,t=u.length;e<t;e++){o=u[e].s,a.push(o),h=f[e];for(let e=0,t=h.length;e<t;e++)o.holes.push(h[e].h)}return a}}function yc(e,t){if(0===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(2===t||1===t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(2===t)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(i),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:l}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=l);class bc extends Nl{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Ac(e)})),this.register((function(e){return new Oc(e)})),this.register((function(e){return new Nc(e)})),this.register((function(e){return new Dc(e)})),this.register((function(e){return new Mc(e)})),this.register((function(e){return new Cc(e)})),this.register((function(e){return new Pc(e)})),this.register((function(e){return new Rc(e)})),this.register((function(e){return new Sc(e)})),this.register((function(e){return new Ic(e)})),this.register((function(e){return new Tc(e)})),this.register((function(e){return new kc(e)})),this.register((function(e){return new Lc(e)})),this.register((function(e){return new wc(e)})),this.register((function(e){return new Bc(e)})),this.register((function(e){return new Uc(e)}))}load(e,t,n,r){const i=this;let s;if(""!==this.resourcePath)s=this.resourcePath;else if(""!==this.path){const t=ic.extractUrlBase(e);s=ic.resolveURL(t,this.path)}else s=ic.extractUrlBase(e);this.manager.itemStart(e);const o=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},a=new Ul(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{i.parse(n,s,(function(n){t(n),i.manager.itemEnd(e)}),o)}catch(e){o(e)}}),n,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},o={},a=new TextDecoder;if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(a.decode(new Uint8Array(e,0,4))===Fc){try{s[xc.KHR_BINARY_GLTF]=new zc(e)}catch(e){return void(r&&r(e))}i=JSON.parse(s[xc.KHR_BINARY_GLTF].content)}else i=JSON.parse(a.decode(e));else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new lu(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](l);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,s[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){const t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case xc.KHR_MATERIALS_UNLIT:s[t]=new Ec;break;case xc.KHR_DRACO_MESH_COMPRESSION:s[t]=new Hc(i,this.dracoLoader);break;case xc.KHR_TEXTURE_TRANSFORM:s[t]=new Gc;break;case xc.KHR_MESH_QUANTIZATION:s[t]=new Vc;break;default:n.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(s),l.setPlugins(o),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function _c(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const xc={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class wc{constructor(e){this.parser=e,this.name=xc.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,s=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let o;const a=new En(16777215);void 0!==s.color&&a.setRGB(s.color[0],s.color[1],s.color[2],ne);const l=void 0!==s.range?s.range:0;switch(s.type){case"directional":o=new nc(a),o.target.position.set(0,0,-1),o.add(o.target);break;case"point":o=new ec(a),o.distance=l;break;case"spot":o=new Yl(a),o.distance=l,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+s.type)}return o.position.set(0,0,0),o.decay=2,nu(o,s),void 0!==s.intensity&&(o.intensity=s.intensity),o.name=t.createUniqueName(s.name||"light_"+e),r=Promise.resolve(o),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class Ec{constructor(){this.name=xc.KHR_MATERIALS_UNLIT}getMaterialType(){return Mn}extendParams(e,t,n){const r=[];e.color=new En(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],ne),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,te))}return Promise.all(r)}}class Sc{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class Ac{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];if(void 0!==s.clearcoatFactor&&(t.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(t.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){const e=s.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Re(e,e)}return Promise.all(i)}}class Tc{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class Mc{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new En(0,0,0),t.sheenRoughness=0,t.sheen=1;const s=r.extensions[this.name];if(void 0!==s.sheenColorFactor){const e=s.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],ne)}return void 0!==s.sheenRoughnessFactor&&(t.sheenRoughness=s.sheenRoughnessFactor),void 0!==s.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",s.sheenColorTexture,te)),void 0!==s.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",s.sheenRoughnessTexture)),Promise.all(i)}}class Cc{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class Pc{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.thickness=void 0!==s.thicknessFactor?s.thicknessFactor:0,void 0!==s.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",s.thicknessTexture)),t.attenuationDistance=s.attenuationDistance||1/0;const o=s.attenuationColor||[1,1,1];return t.attenuationColor=(new En).setRGB(o[0],o[1],o[2],ne),Promise.all(i)}}class Rc{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class Ic{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];t.specularIntensity=void 0!==s.specularFactor?s.specularFactor:1,void 0!==s.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",s.specularTexture));const o=s.specularColorFactor||[1,1,1];return t.specularColor=(new En).setRGB(o[0],o[1],o[2],ne),void 0!==s.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",s.specularColorTexture,te)),Promise.all(i)}}class Lc{constructor(e){this.parser=e,this.name=xc.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return t.bumpScale=void 0!==s.bumpFactor?s.bumpFactor:1,void 0!==s.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(i)}}class kc{constructor(e){this.parser=e,this.name=xc.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?dl:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(i)}}class Oc{constructor(e){this.parser=e,this.name=xc.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class Nc{constructor(e){this.parser=e,this.name=xc.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],o=r.images[s.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Dc{constructor(e){this.parser=e,this.name=xc.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],o=r.images[s.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class Bc{constructor(e){this.name=xc.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,s=e.count,o=e.byteStride,a=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(s,o,a,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(s*o);return i.decodeGltfBuffer(new Uint8Array(t),s,o,a,e.mode,e.filter),t}))}))}return null}}class Uc{constructor(e){this.name=xc.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const e of r.primitives)if(e.mode!==Xc.TRIANGLES&&e.mode!==Xc.TRIANGLE_STRIP&&e.mode!==Xc.TRIANGLE_FAN&&void 0!==e.mode)return null;const i=n.extensions[this.name].attributes,s=[],o={};for(const e in i)s.push(this.parser.getDependency("accessor",i[e]).then((t=>(o[e]=t,o[e]))));return s.length<1?null:(s.push(this.parser.createNodeMesh(e)),Promise.all(s).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(const e of n){const t=new Ot,n=new it,s=new rt,a=new it(1,1,1),l=new $o(e.geometry,e.material,r);for(let e=0;e<r;e++)o.TRANSLATION&&n.fromBufferAttribute(o.TRANSLATION,e),o.ROTATION&&s.fromBufferAttribute(o.ROTATION,e),o.SCALE&&a.fromBufferAttribute(o.SCALE,e),l.setMatrixAt(e,t.compose(n,s,a));for(const t in o)if("_COLOR_0"===t){const e=o[t];l.instanceColor=new Wo(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,o[t]);on.prototype.copy.call(l,e),this.parser.assignFinalMaterial(l),i.push(l)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]})))}}const Fc="glTF";class zc{constructor(e){this.name=xc.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Fc)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,i=new DataView(e,12);let s=0;for(;s<r;){const t=i.getUint32(s,!0);s+=4;const r=i.getUint32(s,!0);if(s+=4,1313821514===r){const r=new Uint8Array(e,12+s,t);this.content=n.decode(r)}else if(5130562===r){const n=12+s;this.body=e.slice(n,n+t)}s+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Hc{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=xc.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,s=e.extensions[this.name].attributes,o={},a={},l={};for(const e in s){const t=Jc[e]||e.toLowerCase();o[t]=s[e]}for(const t in e.attributes){const r=Jc[t]||t.toLowerCase();if(void 0!==s[t]){const i=n.accessors[e.attributes[t]],s=Zc[i.componentType];l[r]=s.name,a[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t,n){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=a[t];void 0!==r&&(n.normalized=r)}t(e)}),o,l,ne,n)}))}))}}class Gc{constructor(){this.name=xc.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class Vc{constructor(){this.name=xc.KHR_MESH_QUANTIZATION}}class jc extends yl{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,l=3*o,c=r-t,u=(n-t)/c,d=u*u,h=d*u,f=e*l,p=f-l,m=-2*h+3*d,g=h-d,v=1-m,y=g-d+u;for(let e=0;e!==o;e++){const t=s[p+e+o],n=s[p+e+a]*c,r=s[f+e+o],l=s[f+e]*c;i[e]=v*t+y*n+m*r+g*l}return i}}const Wc=new rt;class qc extends jc{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return Wc.fromArray(i).normalize().toArray(i),i}}const Xc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Zc={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Yc={9728:I,9729:O,9984:L,9985:1007,9986:k,9987:N},Kc={33071:P,33648:R,10497:C},Qc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Jc={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},$c={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},eu={CUBICSPLINE:void 0,LINEAR:Q,STEP:K};function tu(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function nu(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ru(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function iu(e){let t;const n=e.extensions&&e.extensions[xc.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+su(n.attributes):e.indices+":"+su(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+su(e.targets[n]);return t}function su(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function ou(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const au=new Ot;class lu{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new _c,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||r&&i<98?this.textureLoader=new Gl(this.options.manager):this.textureLoader=new sc(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ul(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const s={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return tu(i,s,r),nu(s,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[xc.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(ic.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=Qc[r.type],t=Zc[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new kn(i,e,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],s=Qc[r.type],o=Zc[r.componentType],a=o.BYTES_PER_ELEMENT,l=a*s,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;let h,f;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(h=new o(i,e*u,r.count*u/a),l=new ho(h,u/a),t.cache.add(n,l)),f=new po(l,s,c%u/a,d)}else h=null===i?new o(r.count*s):new o(i,c,r.count*s),f=new kn(h,s,d);if(void 0!==r.sparse){const t=Qc.SCALAR,n=Zc[r.sparse.indices.componentType],a=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],a,r.sparse.count*t),u=new o(e[2],l,r.sparse.count*s);null!==i&&(f=new kn(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=c.length;e<t;e++){const t=c[e];if(f.setX(t,u[e*s]),s>=2&&f.setY(t,u[e*s+1]),s>=3&&f.setZ(t,u[e*s+2]),s>=4&&f.setW(t,u[e*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let s=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(s=e)}return this.loadTextureImage(e,r,s)}loadTextureImage(e,t,n){const r=this,i=this.json,s=i.textures[e],o=i.images[t],a=(o.uri||o.bufferView)+":"+s.sampler;if(this.textureCache[a])return this.textureCache[a];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=s.name||o.name||"",""===t.name&&"string"==typeof o.uri&&!1===o.uri.startsWith("data:image/")&&(t.name=o.uri);const n=(i.samplers||{})[s.sampler]||{};return t.magFilter=Yc[n.magFilter]||O,t.minFilter=Yc[n.minFilter]||N,t.wrapS=Kc[n.wrapS]||C,t.wrapT=Kc[n.wrapT]||C,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[a]=l,l}loadImageSource(e,t){const n=this.json,r=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const i=n.images[e],s=self.URL||self.webkitURL;let o=i.uri||"",a=!1;if(void 0!==i.bufferView)o=this.getDependency("bufferView",i.bufferView).then((function(e){a=!0;const t=new Blob([e],{type:i.mimeType});return o=s.createObjectURL(t),o}));else if(void 0===i.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const l=Promise.resolve(o).then((function(e){return new Promise((function(n,i){let s=n;!0===t.isImageBitmapLoader&&(s=function(e){const t=new Qe(e);t.needsUpdate=!0,n(t)}),t.load(ic.resolveURL(e,r.path),s,void 0,i)}))})).then((function(e){var t;return!0===a&&s.revokeObjectURL(o),e.userData.mimeType=i.mimeType||((t=i.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),e}));return this.sourceCache[e]=l,l}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(s){if(!s)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((s=s.clone()).channel=n.texCoord),i.extensions[xc.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[xc.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(s);s=i.extensions[xc.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),i.associations.set(s,t)}}return void 0!==r&&(s.colorSpace=r),e[t]=s,s}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,s=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new da,Tn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new ea,Tn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||s){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),s&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),s&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return ul}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let s;const o={},a=[];if((i.extensions||{})[xc.KHR_MATERIALS_UNLIT]){const e=r[xc.KHR_MATERIALS_UNLIT];s=e.getMaterialType(),a.push(e.extendParams(o,i,t))}else{const n=i.pbrMetallicRoughness||{};if(o.color=new En(1,1,1),o.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;o.color.setRGB(e[0],e[1],e[2],ne),o.opacity=e[3]}void 0!==n.baseColorTexture&&a.push(t.assignTexture(o,"map",n.baseColorTexture,te)),o.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,o.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(a.push(t.assignTexture(o,"metalnessMap",n.metallicRoughnessTexture)),a.push(t.assignTexture(o,"roughnessMap",n.metallicRoughnessTexture))),s=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),a.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,o)}))))}!0===i.doubleSided&&(o.side=2);const l=i.alphaMode||"OPAQUE";if("BLEND"===l?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,"MASK"===l&&(o.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&s!==Mn&&(a.push(t.assignTexture(o,"normalMap",i.normalTexture)),o.normalScale=new Re(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;o.normalScale.set(e,e)}if(void 0!==i.occlusionTexture&&s!==Mn&&(a.push(t.assignTexture(o,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(o.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&s!==Mn){const e=i.emissiveFactor;o.emissive=(new En).setRGB(e[0],e[1],e[2],ne)}return void 0!==i.emissiveTexture&&s!==Mn&&a.push(t.assignTexture(o,"emissiveMap",i.emissiveTexture,te)),Promise.all(a).then((function(){const n=new s(o);return i.name&&(n.name=i.name),nu(n,i),t.associations.set(n,{materials:e}),i.extensions&&tu(r,n,i),n}))}createUniqueName(e){const t=hc.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[xc.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return cu(n,e,t)}))}const s=[];for(let n=0,o=e.length;n<o;n++){const o=e[n],a=iu(o),l=r[a];if(l)s.push(l.promise);else{let e;e=o.extensions&&o.extensions[xc.KHR_DRACO_MESH_COMPRESSION]?i(o):cu(new jn,o,t),r[a]={primitive:o,promise:e},s.push(e)}}return Promise.all(s)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],s=i.primitives,o=[];for(let e=0,t=s.length;e<t;e++){const t=void 0===s[e].material?(void 0===(a=this.cache).DefaultMaterial&&(a.DefaultMaterial=new ul({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),a.DefaultMaterial):this.getDependency("material",s[e].material);o.push(t)}var a;return o.push(t.loadGeometries(s)),Promise.all(o).then((function(n){const o=n.slice(0,n.length-1),a=n[n.length-1],l=[];for(let n=0,c=a.length;n<c;n++){const c=a[n],u=s[n];let d;const h=o[n];if(u.mode===Xc.TRIANGLES||u.mode===Xc.TRIANGLE_STRIP||u.mode===Xc.TRIANGLE_FAN||void 0===u.mode)d=!0===i.isSkinnedMesh?new Fo(c,h):new lr(c,h),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),u.mode===Xc.TRIANGLE_STRIP?d.geometry=yc(d.geometry,1):u.mode===Xc.TRIANGLE_FAN&&(d.geometry=yc(d.geometry,2));else if(u.mode===Xc.LINES)d=new ca(c,h);else if(u.mode===Xc.LINE_STRIP)d=new oa(c,h);else if(u.mode===Xc.LINE_LOOP)d=new ua(c,h);else{if(u.mode!==Xc.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);d=new ga(c,h)}Object.keys(d.geometry.morphAttributes).length>0&&ru(d,i),d.name=t.createUniqueName(i.name||"mesh_"+e),nu(d,i),u.extensions&&tu(r,d,u),t.assignFinalMaterial(d),l.push(d)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return i.extensions&&tu(r,l[0],i),l[0];const c=new io;i.extensions&&tu(r,c,i),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new vr(Pe(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Gr(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),nu(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),r=e,i=[],s=[];for(let e=0,o=r.length;e<o;e++){const o=r[e];if(o){i.push(o);const t=new Ot;null!==n&&t.fromArray(n.array,16*e),s.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new jo(i,s)}))}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,s=[],o=[],a=[],l=[],c=[];for(let e=0,t=r.channels.length;e<t;e++){const t=r.channels[e],n=r.samplers[t.sampler],i=t.target,u=i.node,d=void 0!==r.parameters?r.parameters[n.input]:n.input,h=void 0!==r.parameters?r.parameters[n.output]:n.output;void 0!==i.node&&(s.push(this.getDependency("node",u)),o.push(this.getDependency("accessor",d)),a.push(this.getDependency("accessor",h)),l.push(n),c.push(i))}return Promise.all([Promise.all(s),Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c)]).then((function(e){const t=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=[];for(let e=0,i=t.length;e<i;e++){const i=t[e],c=r[e],u=s[e],d=o[e],h=a[e];if(void 0===i)continue;i.updateMatrix&&i.updateMatrix();const f=n._createAnimationTracks(i,c,u,d,h);if(f)for(let e=0;e<f.length;e++)l.push(f[e])}return new Rl(i,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],s=n.children||[];for(let e=0,n=s.length;e<n;e++)i.push(t.getDependency("node",s[e]));const o=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),o]).then((function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,au)}));for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const i=t.nodes[e],s=i.name?r.createUniqueName(i.name):"",o=[],a=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return a&&o.push(a),void 0!==i.camera&&o.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){o.push(e)})),this.nodeCache[e]=Promise.all(o).then((function(t){let o;if(o=!0===i.isBone?new zo:t.length>1?new io:1===t.length?t[0]:new on,o!==t[0])for(let e=0,n=t.length;e<n;e++)o.add(t[e]);if(i.name&&(o.userData.name=i.name,o.name=s),nu(o,i),i.extensions&&tu(n,o,i),void 0!==i.matrix){const e=new Ot;e.fromArray(i.matrix),o.applyMatrix4(e)}else void 0!==i.translation&&o.position.fromArray(i.translation),void 0!==i.rotation&&o.quaternion.fromArray(i.rotation),void 0!==i.scale&&o.scale.fromArray(i.scale);return r.associations.has(o)||r.associations.set(o,{}),r.associations.get(o).nodes=e,o})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new io;n.name&&(i.name=r.createUniqueName(n.name)),nu(i,n),n.extensions&&tu(t,i,n);const s=n.nodes||[],o=[];for(let e=0,t=s.length;e<t;e++)o.push(r.getDependency("node",s[e]));return Promise.all(o).then((function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[e,n]of r.associations)(e instanceof Tn||e instanceof Qe)&&t.set(e,n);return e.traverse((e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)})),t})(i),i}))}_createAnimationTracks(e,t,n,r,i){const s=[],o=e.name?e.name:e.uuid,a=[];let l;switch($c[i.path]===$c.weights?e.traverse((function(e){e.morphTargetInfluences&&a.push(e.name?e.name:e.uuid)})):a.push(o),$c[i.path]){case $c.weights:l=Al;break;case $c.rotation:l=Ml;break;case $c.position:case $c.scale:l=Pl;break;default:l=1===n.itemSize?Al:Pl}const c=void 0!==r.interpolation?eu[r.interpolation]:Q,u=this._getArrayFromAccessor(n);for(let e=0,n=a.length;e<n;e++){const n=new l(a[e]+"."+$c[i.path],t.array,u,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(n),s.push(n)}return s}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=ou(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof Ml?qc:jc)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function cu(e,t,n){const r=t.attributes,i=[];function s(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in r){const n=Jc[t]||t.toLowerCase();n in e.attributes||i.push(s(r[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return Ge.workingColorSpace!==ne&&"COLOR_0"in r&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Ge.workingColorSpace}" not supported.`),nu(e,t),function(e,t,n){const r=t.attributes,i=new at;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new it(t[0],t[1],t[2]),new it(s[0],s[1],s[2])),e.normalized){const t=ou(Zc[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new it,t=new it;for(let r=0,i=s.length;r<i;r++){const i=s[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],s=r.min,o=r.max;if(void 0!==s&&void 0!==o){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),r.normalized){const e=ou(Zc[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const o=new At;i.getCenter(o.center),o.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=o}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,s=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(e);const o=[],a=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;a.push(t)}if(s){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then((function(t){const n=t[0],o=t[1],a=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),s&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}const uu={type:"change"},du={type:"start"},hu={type:"end"},fu=new kt,pu=new Ar,mu=Math.cos(70*Me);var gu=class{target;name;intersected;wasIntersected=!1;distance;constructor(e,t){this.target=e,this.name=t,this.intersected=!1,this.distance=0}},vu=class{type;cancelBubble;originalEvent;coords=new Re(0,0);distance=0;intersected=!1;constructor(e,t=null){this.cancelBubble=!1,this.type=e,this.originalEvent=t}stopPropagation(){this.cancelBubble=!0}};function yu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bu(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _u,xu,wu,Eu,Su,Au,Tu,Mu,Cu,Pu,Ru,Iu={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Lu={duration:.5,overwrite:!1,delay:0},ku=1e8,Ou=1e-8,Nu=2*Math.PI,Du=Nu/4,Bu=0,Uu=Math.sqrt,Fu=Math.cos,zu=Math.sin,Hu=function(e){return"string"==typeof e},Gu=function(e){return"function"==typeof e},Vu=function(e){return"number"==typeof e},ju=function(e){return void 0===e},Wu=function(e){return"object"==typeof e},qu=function(e){return!1!==e},Xu=function(){return"undefined"!=typeof window},Zu=function(e){return Gu(e)||Hu(e)},Yu="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Ku=Array.isArray,Qu=/(?:-?\.?\d|\.)+/gi,Ju=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,$u=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ed=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,td=/[+-]=-?[.\d]+/,nd=/[^,'"\[\]\s]+/gi,rd=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,id={},sd={},od=function(e){return(sd=Nd(e,id))&&Df},ad=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ld=function(e,t){return!t&&console.warn(e)},cd=function(e,t){return e&&(id[e]=t)&&sd&&(sd[e]=t)||id},ud=function(){return 0},dd={suppressEvents:!0,isStart:!0,kill:!1},hd={suppressEvents:!0,kill:!1},fd={suppressEvents:!0},pd={},md=[],gd={},vd={},yd={},bd=30,_d=[],xd="",wd=function(e){var t,n,r=e[0];if(Wu(r)||Gu(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=_d.length;n--&&!_d[n].targetTest(r););t=_d[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Yh(e[n],t)))||e.splice(n,1);return e},Ed=function(e){return e._gsap||wd(hh(e))[0]._gsap},Sd=function(e,t,n){return(n=e[t])&&Gu(n)?e[t]():ju(n)&&e.getAttribute&&e.getAttribute(t)||n},Ad=function(e,t){return(e=e.split(",")).forEach(t)||e},Td=function(e){return Math.round(1e5*e)/1e5||0},Md=function(e){return Math.round(1e7*e)/1e7||0},Cd=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},Pd=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},Rd=function(){var e,t,n=md.length,r=md.slice(0);for(gd={},md.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Id=function(e,t,n,r){md.length&&!xu&&Rd(),e.render(t,n,r||xu&&t<0&&(e._initted||e._startAt)),md.length&&!xu&&Rd()},Ld=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(nd).length<2?t:Hu(e)?e.trim():e},kd=function(e){return e},Od=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Nd=function(e,t){for(var n in t)e[n]=t[n];return e},Dd=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=Wu(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Bd=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},Ud=function(e){var t,n=e.parent||Eu,r=e.keyframes?(t=Ku(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):Od;if(qu(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},Fd=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var s,o=e[r];if(i)for(s=t[i];o&&o[i]>s;)o=o._prev;return o?(t._next=o._next,o._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=o,t.parent=t._dp=e,t},zd=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,s=t._next;i?i._next=s:e[n]===t&&(e[n]=s),s?s._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Hd=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Gd=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Vd=function(e,t,n,r){return e._startAt&&(xu?e._startAt.revert(hd):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},jd=function e(t){return!t||t._ts&&e(t.parent)},Wd=function(e){return e._repeat?qd(e._tTime,e=e.duration()+e._rDelay)*e:0},qd=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},Xd=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Zd=function(e){return e._end=Md(e._start+(e._tDur/Math.abs(e._ts||e._rts||Ou)||0))},Yd=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=Md(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Zd(e),n._dirty||Gd(n,e)),e},Kd=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=Xd(e.rawTime(),t),(!t._dur||lh(0,t.totalDuration(),n)-t._tTime>Ou)&&t.render(n,!0)),Gd(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Qd=function(e,t,n,r){return t.parent&&Hd(t),t._start=Md((Vu(n)?n:n||e!==Eu?sh(e,n,t):e._time)+t._delay),t._end=Md(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Fd(e,t,"_first","_last",e._sort?"_start":0),th(t)||(e._recent=t),r||Kd(e,t),e._ts<0&&Yd(e,e._tTime),e},Jd=function(e,t){return(id.ScrollTrigger||ad("scrollTrigger",t))&&id.ScrollTrigger.create(t,e)},$d=function(e,t,n,r,i){return rf(e,t,i),e._initted?!n&&e._pt&&!xu&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Cu!==Dh.frame?(md.push(e),e._lazy=[i,r],1):void 0:1},eh=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},th=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},nh=function(e,t,n,r){var i=e._repeat,s=Md(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=s/e._dur),e._dur=s,e._tDur=i?i<0?1e10:Md(s*(i+1)+e._rDelay*i):s,o>0&&!r&&Yd(e,e._tTime=e._tDur*o),e.parent&&Zd(e),n||Gd(e.parent,e),e},rh=function(e){return e instanceof Qh?Gd(e):nh(e,e._dur)},ih={_start:0,endTime:ud,totalDuration:ud},sh=function e(t,n,r){var i,s,o,a=t.labels,l=t._recent||ih,c=t.duration()>=ku?l.endTime(!1):t._dur;return Hu(n)&&(isNaN(n)||n in a)?(s=n.charAt(0),o="%"===n.substr(-1),i=n.indexOf("="),"<"===s||">"===s?(i>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(o?(i<0?l:r).totalDuration()/100:1)):i<0?(n in a||(a[n]=c),a[n]):(s=parseFloat(n.charAt(i-1)+n.substr(i+1)),o&&r&&(s=s/100*(Ku(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+s:c+s)):null==n?c:+n},oh=function(e,t,n){var r,i,s=Vu(t[1]),o=(s?2:1)+(e<2?0:1),a=t[o];if(s&&(a.duration=t[1]),a.parent=n,e){for(r=a,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=qu(i.vars.inherit)&&i.parent;a.immediateRender=qu(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return new cf(t[0],a,t[o+1])},ah=function(e,t){return e||0===e?t(e):t},lh=function(e,t,n){return n<e?e:n>t?t:n},ch=function(e,t){return Hu(e)&&(t=rd.exec(e))?t[1]:""},uh=[].slice,dh=function(e,t){return e&&Wu(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&Wu(e[0]))&&!e.nodeType&&e!==Su},hh=function(e,t,n){return wu&&!t&&wu.selector?wu.selector(e):!Hu(e)||n||!Au&&Bh()?Ku(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return Hu(e)&&!t||dh(e,1)?(r=n).push.apply(r,hh(e)):n.push(e)}))||n}(e,n):dh(e)?uh.call(e,0):e?[e]:[]:uh.call((t||Tu).querySelectorAll(e),0)},fh=function(e){return e=hh(e)[0]||ld("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return hh(t,n.querySelectorAll?n:n===e?ld("Invalid scope")||Tu.createElement("div"):e)}},ph=function(e){return e.sort((function(){return.5-Math.random()}))},mh=function(e){if(Gu(e))return e;var t=Wu(e)?e:{each:e},n=jh(t.ease),r=t.from||0,i=parseFloat(t.base)||0,s={},o=r>0&&r<1,a=isNaN(r)||o,l=t.axis,c=r,u=r;return Hu(r)?c=u={center:.5,edges:.5,end:1}[r]||0:!o&&a&&(c=r[0],u=r[1]),function(e,o,d){var h,f,p,m,g,v,y,b,_,x=(d||t).length,w=s[x];if(!w){if(!(_="auto"===t.grid?0:(t.grid||[1,ku])[1])){for(y=-ku;y<(y=d[_++].getBoundingClientRect().left)&&_<x;);_<x&&_--}for(w=s[x]=[],h=a?Math.min(_,x)*c-.5:r%_,f=_===ku?0:a?x*u/_-.5:r/_|0,y=0,b=ku,v=0;v<x;v++)p=v%_-h,m=f-(v/_|0),w[v]=g=l?Math.abs("y"===l?m:p):Uu(p*p+m*m),g>y&&(y=g),g<b&&(b=g);"random"===r&&ph(w),w.max=y-b,w.min=b,w.v=x=(parseFloat(t.amount)||parseFloat(t.each)*(_>x?x-1:l?"y"===l?x/_:_:Math.max(_,x/_))||0)*("edges"===r?-1:1),w.b=x<0?i-x:i,w.u=ch(t.amount||t.each)||0,n=n&&x<0?Gh(n):n}return x=(w[e]-w.min)/w.max||0,Md(w.b+(n?n(x):x)*w.v)+w.u}},gh=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=Md(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(Vu(n)?0:ch(n))}},vh=function(e,t){var n,r,i=Ku(e);return!i&&Wu(e)&&(n=i=e.radius||ku,e.values?(e=hh(e.values),(r=!Vu(e[0]))&&(n*=n)):e=gh(e.increment)),ah(t,i?Gu(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,s,o=parseFloat(r?t.x:t),a=parseFloat(r?t.y:0),l=ku,c=0,u=e.length;u--;)(i=r?(i=e[u].x-o)*i+(s=e[u].y-a)*s:Math.abs(e[u]-o))<l&&(l=i,c=u);return c=!n||l<=n?e[c]:t,r||c===t||Vu(t)?c:c+ch(t)}:gh(e))},yh=function(e,t,n,r){return ah(Ku(e)?!t:!0===n?!!(n=0):!r,(function(){return Ku(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},bh=function(e,t,n){return ah(n,(function(n){return e[~~t(n)]}))},_h=function(e){for(var t,n,r,i,s=0,o="";~(t=e.indexOf("random(",s));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?nd:Qu),o+=e.substr(s,t-s)+yh(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),s=r+1;return o+e.substr(s,e.length-s)},xh=function(e,t,n,r,i){var s=t-e,o=r-n;return ah(i,(function(t){return n+((t-e)/s*o||0)}))},wh=function(e,t,n){var r,i,s,o=e.labels,a=ku;for(r in o)(i=o[r]-t)<0==!!n&&i&&a>(i=Math.abs(i))&&(s=r,a=i);return s},Eh=function(e,t,n){var r,i,s,o=e.vars,a=o[t],l=wu,c=e._ctx;if(a)return r=o[t+"Params"],i=o.callbackScope||e,n&&md.length&&Rd(),c&&(wu=c),s=r?a.apply(i,r):a.call(i),wu=l,s},Sh=function(e){return Hd(e),e.scrollTrigger&&e.scrollTrigger.kill(!!xu),e.progress()<1&&Eh(e,"onInterrupt"),e},Ah=[],Th=function(e){if(Xu()&&e){var t=(e=!e.name&&e.default||e).name,n=Gu(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:ud,render:yf,add:tf,kill:_f,modifier:bf,rawVars:0},s={targetTest:0,get:0,getSetter:pf,aliases:{},register:0};if(Bh(),e!==r){if(vd[t])return;Od(r,Od(Bd(e,i),s)),Nd(r.prototype,Nd(i,Bd(e,s))),vd[r.prop=t]=r,e.targetTest&&(_d.push(r),pd[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}cd(t,r),e.register&&e.register(Df,r,Ef)}else e&&Ah.push(e)},Mh=255,Ch={aqua:[0,Mh,Mh],lime:[0,Mh,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Mh],navy:[0,0,128],white:[Mh,Mh,Mh],olive:[128,128,0],yellow:[Mh,Mh,0],orange:[Mh,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Mh,0,0],pink:[Mh,192,203],cyan:[0,Mh,Mh],transparent:[Mh,Mh,Mh,0]},Ph=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*Mh+.5|0},Rh=function(e,t,n){var r,i,s,o,a,l,c,u,d,h,f=e?Vu(e)?[e>>16,e>>8&Mh,e&Mh]:0:Ch.black;if(!f){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),Ch[e])f=Ch[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),s=e.charAt(3),e="#"+r+r+i+i+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(f=parseInt(e.substr(1,6),16))>>16,f>>8&Mh,f&Mh,parseInt(e.substr(7),16)/255];f=[(e=parseInt(e.substr(1),16))>>16,e>>8&Mh,e&Mh]}else if("hsl"===e.substr(0,3))if(f=h=e.match(Qu),t){if(~e.indexOf("="))return f=e.match(Ju),n&&f.length<4&&(f[3]=1),f}else o=+f[0]%360/360,a=+f[1]/100,r=2*(l=+f[2]/100)-(i=l<=.5?l*(a+1):l+a-l*a),f.length>3&&(f[3]*=1),f[0]=Ph(o+1/3,r,i),f[1]=Ph(o,r,i),f[2]=Ph(o-1/3,r,i);else f=e.match(Qu)||Ch.transparent;f=f.map(Number)}return t&&!h&&(r=f[0]/Mh,i=f[1]/Mh,s=f[2]/Mh,l=((c=Math.max(r,i,s))+(u=Math.min(r,i,s)))/2,c===u?o=a=0:(d=c-u,a=l>.5?d/(2-c-u):d/(c+u),o=c===r?(i-s)/d+(i<s?6:0):c===i?(s-r)/d+2:(r-i)/d+4,o*=60),f[0]=~~(o+.5),f[1]=~~(100*a+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f},Ih=function(e){var t=[],n=[],r=-1;return e.split(kh).forEach((function(e){var i=e.match($u)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},Lh=function(e,t,n){var r,i,s,o,a="",l=(e+a).match(kh),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map((function(e){return(e=Rh(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(s=Ih(e),(r=n.c).join(a)!==s.c.join(a)))for(o=(i=e.replace(kh,"1").split($u)).length-1;u<o;u++)a+=i[u]+(~r.indexOf(u)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!i)for(o=(i=e.split(kh)).length-1;u<o;u++)a+=i[u]+l[u];return a+i[o]},kh=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in Ch)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),Oh=/hsl[a]?\(/,Nh=function(e){var t,n=e.join(" ");if(kh.lastIndex=0,kh.test(n))return t=Oh.test(n),e[1]=Lh(e[1],t),e[0]=Lh(e[0],t,Ih(e[1])),!0},Dh=function(){var e,t,n,r,i,s,o=Date.now,a=500,l=33,c=o(),u=c,d=1e3/240,h=d,f=[],p=function n(p){var m,g,v,y,b=o()-u,_=!0===p;if(b>a&&(c+=b-l),((m=(v=(u+=b)-c)-h)>0||_)&&(y=++r.frame,i=v-1e3*r.time,r.time=v/=1e3,h+=m+(m>=d?4:d-m),g=1),_||(e=t(n)),g)for(s=0;s<f.length;s++)f[s](v,i,y,p)};return r={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){Mu&&(!Au&&Xu()&&(Su=Au=window,Tu=Su.document||{},id.gsap=Df,(Su.gsapVersions||(Su.gsapVersions=[])).push(Df.version),od(sd||Su.GreenSockGlobals||!Su.gsap&&Su||{}),n=Su.requestAnimationFrame,Ah.forEach(Th)),e&&r.sleep(),t=n||function(e){return setTimeout(e,h-1e3*r.time+1|0)},Ru=1,p(2))},sleep:function(){(n?Su.cancelAnimationFrame:clearTimeout)(e),Ru=0,t=ud},lagSmoothing:function(e,t){a=e||1/0,l=Math.min(t||33,a)},fps:function(e){d=1e3/(e||240),h=1e3*r.time+d},add:function(e,t,n){var i=t?function(t,n,s,o){e(t,n,s,o),r.remove(i)}:e;return r.remove(e),f[n?"unshift":"push"](i),Bh(),i},remove:function(e,t){~(t=f.indexOf(e))&&f.splice(t,1)&&s>=t&&s--},_listeners:f},r}(),Bh=function(){return!Ru&&Dh.wake()},Uh={},Fh=/^[\d.\-M][\d.\-,\s]/,zh=/["']/g,Hh=function(e){for(var t,n,r,i={},s=e.substr(1,e.length-3).split(":"),o=s[0],a=1,l=s.length;a<l;a++)n=s[a],t=a!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[o]=isNaN(r)?r.replace(zh,"").trim():+r,o=n.substr(t+1).trim();return i},Gh=function(e){return function(t){return 1-e(1-t)}},Vh=function e(t,n){for(var r,i=t._first;i;)i instanceof Qh?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},jh=function(e,t){return e&&(Gu(e)?e:Uh[e]||function(e){var t,n,r,i,s=(e+"").split("("),o=Uh[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~e.indexOf("{")?[Hh(s[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(Ld)):Uh._CE&&Fh.test(e)?Uh._CE("",e):o}(e))||t},Wh=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,s={easeIn:t,easeOut:n,easeInOut:r};return Ad(e,(function(e){for(var t in Uh[e]=id[e]=s,Uh[i=e.toLowerCase()]=n,s)Uh[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Uh[e+"."+t]=s[t]})),s},qh=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Xh=function e(t,n,r){var i=n>=1?n:1,s=(r||(t?.3:.45))/(n<1?n:1),o=s/Nu*(Math.asin(1/i)||0),a=function(e){return 1===e?1:i*Math.pow(2,-10*e)*zu((e-o)*s)+1},l="out"===t?a:"in"===t?function(e){return 1-a(1-e)}:qh(a);return s=Nu/s,l.config=function(n,r){return e(t,n,r)},l},Zh=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:qh(r);return i.config=function(n){return e(t,n)},i};Ad("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Wh(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Uh.Linear.easeNone=Uh.none=Uh.Linear.easeIn,Wh("Elastic",Xh("in"),Xh("out"),Xh()),function(e,t){var n=function(n){return n<.36363636363636365?e*n*n:n<.7272727272727273?e*Math.pow(n-1.5/t,2)+.75:n<.9090909090909092?e*(n-=2.25/t)*n+.9375:e*Math.pow(n-2.625/t,2)+.984375};Wh("Bounce",(function(e){return 1-n(1-e)}),n)}(7.5625,2.75),Wh("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Wh("Circ",(function(e){return-(Uu(1-e*e)-1)})),Wh("Sine",(function(e){return 1===e?1:1-Fu(e*Du)})),Wh("Back",Zh("in"),Zh("out"),Zh()),Uh.SteppedEase=Uh.steps=id.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*lh(0,.99999999,e)|0)+i)*n}}},Lu.ease=Uh["quad.out"],Ad("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return xd+=e+","+e+"Params,"}));var Yh=function(e,t){this.id=Bu++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Sd,this.set=t?t.getSetter:pf},Kh=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,nh(this,+e.duration,1,1),this.data=e.data,wu&&(this._ctx=wu,wu.data.push(this)),Ru||Dh.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,nh(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(Bh(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Yd(this,e),!n._dp||n.parent||Kd(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Qd(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===Ou||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),Id(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Wd(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Wd(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?qd(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?Xd(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(lh(-Math.abs(this._delay),this._tDur,n),!1!==t),Zd(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Bh(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==Ou&&(this._tTime-=Ou)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Qd(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(qu(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xd(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=fd);var t=xu;return xu=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),xu=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,rh(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,rh(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(sh(this,e),qu(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,qu(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-Ou))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=Gu(e)?e:kd,i=function(){var e=t.then;t.then=null,Gu(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){Sh(this)},e}();Od(Kh.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Qh=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=qu(t.sortChildren),Eu&&Qd(t.parent||Eu,yu(r),n),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&Jd(yu(r),t.scrollTrigger),r}bu(t,e);var n=t.prototype;return n.to=function(e,t,n){return oh(0,arguments,this),this},n.from=function(e,t,n){return oh(1,arguments,this),this},n.fromTo=function(e,t,n,r){return oh(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,Ud(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new cf(e,t,sh(this,n),1),this},n.call=function(e,t,n){return Qd(this,cf.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,s,o){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=s,n.onCompleteParams=o,n.parent=this,new cf(e,n,sh(this,i)),this},n.staggerFrom=function(e,t,n,r,i,s,o){return n.runBackwards=1,Ud(n).immediateRender=qu(n.immediateRender),this.staggerTo(e,t,n,r,i,s,o)},n.staggerFromTo=function(e,t,n,r,i,s,o,a){return r.startAt=n,Ud(r).immediateRender=qu(r.immediateRender),this.staggerTo(e,t,r,i,s,o,a)},n.render=function(e,t,n){var r,i,s,o,a,l,c,u,d,h,f,p,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=e<=0?0:Md(e),b=this._zTime<0!=e<0&&(this._initted||!v);if(this!==Eu&&y>g&&e>=0&&(y=g),y!==this._tTime||n||b){if(m!==this._time&&v&&(y+=this._time-m,e+=this._time-m),r=y,d=this._start,l=!(u=this._ts),b&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(f=this._yoyo,a=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*a+e,t,n);if(r=Md(y%a),y===g?(o=this._repeat,r=v):((o=~~(y/a))&&o===y/a&&(r=v,o--),r>v&&(r=v)),h=qd(this._tTime,a),!m&&this._tTime&&h!==o&&this._tTime-h*a-this._dur<=0&&(h=o),f&&1&o&&(r=v-r,p=1),o!==h&&!this._lock){var _=f&&1&h,x=_===(f&&1&o);if(o<h&&(_=!_),m=_?0:y%v?v:y,this._lock=1,this.render(m||(p?0:Md(o*a)),t,!v)._lock=0,this._tTime=y,!t&&this.parent&&Eh(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,x&&(this._lock=2,m=_?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;Vh(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,Md(m),Md(r)),c&&(y-=r-(r=c._start))),this._tTime=y,this._time=r,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&r&&!t&&!o&&(Eh(this,"onStart"),this._tTime!==y))return this;if(r>=m&&e>=0)for(i=this._first;i;){if(s=i._next,(i._act||r>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var w=e<0?e:r;i;){if(s=i._prev,(i._act||w<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(w-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(w-i._start)*i._ts,t,n||xu&&(i._initted||i._startAt)),r!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=w?-1e-8:Ou);break}}i=s}}if(c&&!t&&(this.pause(),c.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=d,Zd(this),this.render(e,t,n);this._onUpdate&&!t&&Eh(this,"onUpdate",!0),(y===g&&this._tTime>=this.totalDuration()||!y&&m)&&(d!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&Hd(this,1),t||e<0&&!m||!y&&!m&&g||(Eh(this,y===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(Vu(t)||(t=sh(this,t,e)),!(e instanceof Kh)){if(Ku(e))return e.forEach((function(e){return n.add(e,t)})),this;if(Hu(e))return this.addLabel(e,t);if(!Gu(e))return this;e=cf.delayedCall(0,e)}return this!==e?Qd(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-ku);for(var i=[],s=this._first;s;)s._start>=r&&(s instanceof cf?t&&i.push(s):(n&&i.push(s),e&&i.push.apply(i,s.getChildren(!0,t,n)))),s=s._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return Hu(e)?this.removeLabel(e):Gu(e)?this.killTweensOf(e):(zd(this,e),e===this._recent&&(this._recent=this._last),Gd(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Md(Dh.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=sh(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=cf.delayedCall(0,t||ud,n);return r.data="isPause",this._hasPause=1,Qd(this,r,sh(this,e))},n.removePause=function(e){var t=this._first;for(e=sh(this,e);t;)t._start===e&&"isPause"===t.data&&Hd(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)Jh!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=hh(e),s=this._first,o=Vu(t);s;)s instanceof cf?Pd(s._targets,i)&&(o?(!Jh||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&r.push(s):(n=s.getTweensOf(i,t)).length&&r.push.apply(r,n),s=s._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=sh(r,e),s=t,o=s.startAt,a=s.onStart,l=s.onStartParams,c=s.immediateRender,u=cf.to(r,Od({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale())||Ou,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(o&&"time"in o?o.time:r._time))/r.timeScale());u._dur!==e&&nh(u,e,0,1).render(u._time,!0,!0),n=1}a&&a.apply(u,l||[])}},t));return c?u.render(0):u},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,Od({startAt:{time:sh(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),wh(this,sh(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),wh(this,sh(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+Ou)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,s=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in s)s[r]>=n&&(s[r]+=e);return Gd(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Gd(this)},n.totalDuration=function(e){var t,n,r,i=0,s=this,o=s._last,a=ku;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(r=s.parent;o;)t=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,Qd(s,o,n-o._delay,1)._lock=0):a=n,n<0&&o._ts&&(i-=n,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-Infinity),a=0),o._end>i&&o._ts&&(i=o._end),o=t;nh(s,s===Eu&&s._time>i?s._time:i,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(Eu._ts&&(Id(Eu,Xd(e,Eu)),Cu=Dh.frame),Dh.frame>=bd){bd+=Iu.autoSleep||120;var t=Eu._first;if((!t||!t._ts)&&Iu.autoSleep&&Dh._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Dh.sleep()}}},t}(Kh);Od(Qh.prototype,{_lock:0,_hasPause:0,_forcing:0});var Jh,$h,ef=function(e,t,n,r,i,s,o){var a,l,c,u,d,h,f,p,m=new Ef(this._pt,e,t,0,1,vf,null,i),g=0,v=0;for(m.b=n,m.e=r,n+="",(f=~(r+="").indexOf("random("))&&(r=_h(r)),s&&(s(p=[n,r],e,t),n=p[0],r=p[1]),l=n.match(ed)||[];a=ed.exec(r);)u=a[0],d=r.substring(g,a.index),c?c=(c+1)%5:"rgba("===d.substr(-5)&&(c=1),u!==l[v++]&&(h=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:d||1===v?d:",",s:h,c:"="===u.charAt(1)?Cd(h,u)-h:parseFloat(u)-h,m:c&&c<4?Math.round:0},g=ed.lastIndex);return m.c=g<r.length?r.substring(g,r.length):"",m.fp=o,(td.test(r)||f)&&(m.e=0),this._pt=m,m},tf=function(e,t,n,r,i,s,o,a,l,c){Gu(r)&&(r=r(i||0,e,s));var u,d=e[t],h="get"!==n?n:Gu(d)?l?e[t.indexOf("set")||!Gu(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():d,f=Gu(d)?l?hf:df:uf;if(Hu(r)&&(~r.indexOf("random(")&&(r=_h(r)),"="===r.charAt(1)&&((u=Cd(h,r)+(ch(h)||0))||0===u)&&(r=u)),!c||h!==r||$h)return isNaN(h*r)||""===r?(!d&&!(t in e)&&ad(t,r),ef.call(this,e,t,h,r,f,a||Iu.stringFilter,l)):(u=new Ef(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof d?gf:mf,0,f),l&&(u.fp=l),o&&u.modifier(o,this,e),this._pt=u)},nf=function(e,t,n,r,i,s){var o,a,l,c;if(vd[e]&&!1!==(o=new vd[e]).init(i,o.rawVars?t[e]:function(e,t,n,r,i){if(Gu(e)&&(e=of(e,i,t,n,r)),!Wu(e)||e.style&&e.nodeType||Ku(e)||Yu(e))return Hu(e)?of(e,i,t,n,r):e;var s,o={};for(s in e)o[s]=of(e[s],i,t,n,r);return o}(t[e],r,i,s,n),n,r,s)&&(n._pt=a=new Ef(n._pt,i,e,0,1,o.render,o,0,o.priority),n!==Pu))for(l=n._ptLookup[n._targets.indexOf(i)],c=o._props.length;c--;)l[o._props[c]]=a;return o},rf=function e(t,n,r){var i,s,o,a,l,c,u,d,h,f,p,m,g,v=t.vars,y=v.ease,b=v.startAt,_=v.immediateRender,x=v.lazy,w=v.onUpdate,E=v.runBackwards,S=v.yoyoEase,A=v.keyframes,T=v.autoRevert,M=t._dur,C=t._startAt,P=t._targets,R=t.parent,I=R&&"nested"===R.data?R.vars.targets:P,L="auto"===t._overwrite&&!_u,k=t.timeline;if(k&&(!A||!y)&&(y="none"),t._ease=jh(y,Lu.ease),t._yEase=S?Gh(jh(!0===S?y:S,Lu.ease)):0,S&&t._yoyo&&!t._repeat&&(S=t._yEase,t._yEase=t._ease,t._ease=S),t._from=!k&&!!v.runBackwards,!k||A&&!v.stagger){if(m=(d=P[0]?Ed(P[0]).harness:0)&&v[d.prop],i=Bd(v,pd),C&&(C._zTime<0&&C.progress(1),n<0&&E&&_&&!T?C.render(-1,!0):C.revert(E&&M?hd:dd),C._lazy=0),b){if(Hd(t._startAt=cf.set(P,Od({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:!C&&qu(x),startAt:null,delay:0,onUpdate:w&&function(){return Eh(t,"onUpdate")},stagger:0},b))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(xu||!_&&!T)&&t._startAt.revert(hd),_&&M&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(E&&M&&!C)if(n&&(_=!1),o=Od({overwrite:!1,data:"isFromStart",lazy:_&&!C&&qu(x),immediateRender:_,stagger:0,parent:R},i),m&&(o[d.prop]=m),Hd(t._startAt=cf.set(P,o)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(xu?t._startAt.revert(hd):t._startAt.render(-1,!0)),t._zTime=n,_){if(!n)return}else e(t._startAt,Ou,Ou);for(t._pt=t._ptCache=0,x=M&&qu(x)||x&&!M,s=0;s<P.length;s++){if(u=(l=P[s])._gsap||wd(P)[s]._gsap,t._ptLookup[s]=f={},gd[u.id]&&md.length&&Rd(),p=I===P?s:I.indexOf(l),d&&!1!==(h=new d).init(l,m||i,t,p,I)&&(t._pt=a=new Ef(t._pt,l,h.name,0,1,h.render,h,0,h.priority),h._props.forEach((function(e){f[e]=a})),h.priority&&(c=1)),!d||m)for(o in i)vd[o]&&(h=nf(o,i,t,p,l,I))?h.priority&&(c=1):f[o]=a=tf.call(t,l,o,"get",i[o],p,I,0,v.stringFilter);t._op&&t._op[s]&&t.kill(l,t._op[s]),L&&t._pt&&(Jh=t,Eu.killTweensOf(l,f,t.globalTime(n)),g=!t.parent,Jh=0),t._pt&&x&&(gd[u.id]=1)}c&&wf(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!g,A&&n<=0&&k.render(ku,!0,!0)},sf=function(e,t,n,r){var i,s,o=t.ease||r||"power1.inOut";if(Ku(t))s=n[e]||(n[e]=[]),t.forEach((function(e,n){return s.push({t:n/(t.length-1)*100,v:e,e:o})}));else for(i in t)s=n[i]||(n[i]=[]),"ease"===i||s.push({t:parseFloat(e),v:t[i],e:o})},of=function(e,t,n,r,i){return Gu(e)?e.call(t,n,r,i):Hu(e)&&~e.indexOf("random(")?_h(e):e},af=xd+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",lf={};Ad(af+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return lf[e]=1}));var cf=function(e){function t(t,n,r,i){var s;"number"==typeof n&&(r.duration=n,n=r,r=null);var o,a,l,c,u,d,h,f,p=(s=e.call(this,i?n:Ud(n))||this).vars,m=p.duration,g=p.delay,v=p.immediateRender,y=p.stagger,b=p.overwrite,_=p.keyframes,x=p.defaults,w=p.scrollTrigger,E=p.yoyoEase,S=n.parent||Eu,A=(Ku(t)||Yu(t)?Vu(t[0]):"length"in n)?[t]:hh(t);if(s._targets=A.length?wd(A):ld("GSAP target "+t+" not found. https://gsap.com",!Iu.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=b,_||y||Zu(m)||Zu(g)){if(n=s.vars,(o=s.timeline=new Qh({data:"nested",defaults:x||{},targets:S&&"nested"===S.data?S.vars.targets:A})).kill(),o.parent=o._dp=yu(s),o._start=0,y||Zu(m)||Zu(g)){if(c=A.length,h=y&&mh(y),Wu(y))for(u in y)~af.indexOf(u)&&(f||(f={}),f[u]=y[u]);for(a=0;a<c;a++)(l=Bd(n,lf)).stagger=0,E&&(l.yoyoEase=E),f&&Nd(l,f),d=A[a],l.duration=+of(m,yu(s),a,d,A),l.delay=(+of(g,yu(s),a,d,A)||0)-s._delay,!y&&1===c&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),o.to(d,l,h?h(a,d,A):0),o._ease=Uh.none;o.duration()?m=g=0:s.timeline=0}else if(_){Ud(Od(o.vars.defaults,{ease:"none"})),o._ease=jh(_.ease||n.ease||"none");var T,M,C,P=0;if(Ku(_))_.forEach((function(e){return o.to(A,e,">")})),o.duration();else{for(u in l={},_)"ease"===u||"easeEach"===u||sf(u,_[u],l,_.easeEach);for(u in l)for(T=l[u].sort((function(e,t){return e.t-t.t})),P=0,a=0;a<T.length;a++)(C={ease:(M=T[a]).e,duration:(M.t-(a?T[a-1].t:0))/100*m})[u]=M.v,o.to(A,C,P),P+=C.duration;o.duration()<m&&o.to({},{duration:m-o.duration()})}}m||s.duration(m=o.duration())}else s.timeline=0;return!0!==b||_u||(Jh=yu(s),Eu.killTweensOf(A),Jh=0),Qd(S,yu(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(v||!m&&!_&&s._start===Md(S._time)&&qu(v)&&jd(yu(s))&&"nested"!==S.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g)||0)),w&&Jd(yu(s),w),s}bu(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,s,o,a,l,c,u,d,h=this._time,f=this._tDur,p=this._dur,m=e<0,g=e>f-Ou&&!m?f:e<Ou?0:e;if(p){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m){if(r=g,u=this.timeline,this._repeat){if(o=p+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*o+e,t,n);if(r=Md(g%o),g===f?(s=this._repeat,r=p):((s=~~(g/o))&&s===Md(g/o)&&(r=p,s--),r>p&&(r=p)),(l=this._yoyo&&1&s)&&(d=this._yEase,r=p-r),a=qd(this._tTime,o),r===h&&!n&&this._initted&&s===a)return this._tTime=g,this;s!==a&&(u&&this._yEase&&Vh(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&this._time!==p&&this._initted&&(this._lock=n=1,this.render(Md(o*s),!0).invalidate()._lock=0))}if(!this._initted){if($d(this,m?e:r,n,t,g))return this._tTime=0,this;if(!(h===this._time||n&&this.vars.repeatRefresh&&s!==a))return this;if(p!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(d||this._ease)(r/p),this._from&&(this.ratio=c=1-c),r&&!h&&!t&&!s&&(Eh(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(c,i.d),i=i._next;u&&u.render(e<0?e:!r&&l?-1e-8:u._dur*u._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&Vd(this,e,0,n),Eh(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!t&&this.parent&&Eh(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&Vd(this,e,0,!0),(e||!p)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Hd(this,1),t||m&&!h||!(g||h||l)||(Eh(this,g===f?"onComplete":"onReverseComplete",!0),this._prom&&!(g<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,s,o,a=e.ratio,l=t<0||!t&&(!e._start&&eh(e)&&(e._initted||!th(e))||(e._ts<0||e._dp._ts<0)&&!th(e))?0:1,c=e._rDelay,u=0;if(c&&e._repeat&&(u=lh(0,e._tDur,t),s=qd(u,c),e._yoyo&&1&s&&(l=1-l),s!==qd(e._tTime,c)&&(a=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==a||xu||r||e._zTime===Ou||!t&&e._zTime){if(!e._initted&&$d(e,t,r,n,u))return;for(o=e._zTime,e._zTime=t||(n?Ou:0),n||(n=t&&!o),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&Vd(e,t,0,!0),e._onUpdate&&!n&&Eh(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&Eh(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Hd(e,1),n||xu||(Eh(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r,i){Ru||Dh.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||rf(this,s),function(e,t,n,r,i,s,o,a){var l,c,u,d,h=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!h)for(h=e._ptCache[t]=[],u=e._ptLookup,d=e._targets.length;d--;){if((l=u[d][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return $h=1,e.vars[t]="+=0",rf(e,o),$h=0,a?ld(t+" not eligible for reset"):1;h.push(l)}for(d=h.length;d--;)(l=(c=h[d])._pt||c).s=!r&&0!==r||i?l.s+(r||0)+s*l.c:r,l.c=n-l.s,c.e&&(c.e=Td(n)+ch(c.e)),c.b&&(c.b=l.s+ch(c.b))}(this,e,t,n,r,this._ease(s/this._dur),s,i)?this.resetTo(e,t,n,r,1):(Yd(this,0),this.parent||Fd(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?Sh(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Jh&&!0!==Jh.vars.overwrite)._first||Sh(this),this.parent&&n!==this.timeline.totalDuration()&&nh(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,s,o,a,l,c,u=this._targets,d=e?hh(e):u,h=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(u,d))return"all"===t&&(this._pt=0),Sh(this);for(r=this._op=this._op||[],"all"!==t&&(Hu(t)&&(a={},Ad(t,(function(e){return a[e]=1})),t=a),t=function(e,t){var n,r,i,s,o=e[0]?Ed(e[0]).harness:0,a=o&&o.aliases;if(!a)return t;for(r in n=Nd({},t),a)if(r in n)for(i=(s=a[r].split(",")).length;i--;)n[s[i]]=n[r];return n}(u,t)),c=u.length;c--;)if(~d.indexOf(u[c]))for(a in i=h[c],"all"===t?(r[c]=t,o=i,s={}):(s=r[c]=r[c]||{},o=t),o)(l=i&&i[a])&&("kill"in l.d&&!0!==l.d.kill(a)||zd(this,l,"_pt"),delete i[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&f&&Sh(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return oh(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return oh(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return Eu.killTweensOf(e,t,n)},t}(Kh);Od(cf.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Ad("staggerTo,staggerFrom,staggerFromTo",(function(e){cf[e]=function(){var t=new Qh,n=uh.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var uf=function(e,t,n){return e[t]=n},df=function(e,t,n){return e[t](n)},hf=function(e,t,n,r){return e[t](r.fp,n)},ff=function(e,t,n){return e.setAttribute(t,n)},pf=function(e,t){return Gu(e[t])?df:ju(e[t])&&e.setAttribute?ff:uf},mf=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},gf=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},vf=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},yf=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},bf=function(e,t,n,r){for(var i,s=this._pt;s;)i=s._next,s.p===r&&s.modifier(e,t,n),s=i},_f=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?zd(this,r,"_pt"):r.dep||(t=1),r=n;return!t},xf=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},wf=function(e){for(var t,n,r,i,s=e._pt;s;){for(t=s._next,n=r;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:i)?s._prev._next=s:r=s,(s._next=n)?n._prev=s:i=s,s=t}e._pt=r},Ef=function(){function e(e,t,n,r,i,s,o,a,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=s||mf,this.d=o||this,this.set=a||uf,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=xf,this.m=e,this.mt=n,this.tween=t},e}();Ad(xd+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return pd[e]=1})),id.TweenMax=id.TweenLite=cf,id.TimelineLite=id.TimelineMax=Qh,Eu=new Qh({sortChildren:!1,defaults:Lu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Iu.stringFilter=Nh;var Sf=[],Af={},Tf=[],Mf=0,Cf=0,Pf=function(e){return(Af[e]||Tf).map((function(e){return e()}))},Rf=function(){var e=Date.now(),t=[];e-Mf>2&&(Pf("matchMediaInit"),Sf.forEach((function(e){var n,r,i,s,o=e.queries,a=e.conditions;for(r in o)(n=Su.matchMedia(o[r]).matches)&&(i=1),n!==a[r]&&(a[r]=n,s=1);s&&(e.revert(),i&&t.push(e))})),Pf("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e,(function(t){return e.add(null,t)}))})),Mf=e,Pf("matchMedia"))},If=function(){function e(e,t){this.selector=t&&fh(t),this.data=[],this._r=[],this.isReverted=!1,this.id=Cf++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){Gu(e)&&(n=t,t=e,e=Gu);var r=this,i=function(){var e,i=wu,s=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=fh(n)),wu=r,e=t.apply(r,arguments),Gu(e)&&r._r.push(e),wu=i,r.selector=s,r.isReverted=!1,e};return r.last=i,e===Gu?i(r,(function(e){return r.add(null,e)})):e?r[e]=i:i},t.ignore=function(e){var t=wu;wu=null,e(this),wu=t},t.getTweens=function(){var t=[];return this.data.forEach((function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof cf&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(t=n.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(e){return r.splice(r.indexOf(e),1)})));for(r.map((function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}})).sort((function(e,t){return t.g-e.g||-1/0})).forEach((function(t){return t.t.revert(e)})),i=n.data.length;i--;)(t=n.data[i])instanceof Qh?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof cf)&&t.revert&&t.revert(e);n._r.forEach((function(t){return t(e,n)})),n.isReverted=!0}():this.data.forEach((function(e){return e.kill&&e.kill()})),this.clear(),t)for(var r=Sf.length;r--;)Sf[r].id===this.id&&Sf.splice(r,1)},t.revert=function(e){this.kill(e||{})},e}(),Lf=function(){function e(e){this.contexts=[],this.scope=e}var t=e.prototype;return t.add=function(e,t,n){Wu(e)||(e={matches:e});var r,i,s,o=new If(0,n||this.scope),a=o.conditions={};for(i in wu&&!o.selector&&(o.selector=wu.selector),this.contexts.push(o),t=o.add("onMatch",t),o.queries=e,e)"all"===i?s=1:(r=Su.matchMedia(e[i]))&&(Sf.indexOf(o)<0&&Sf.push(o),(a[i]=r.matches)&&(s=1),r.addListener?r.addListener(Rf):r.addEventListener("change",Rf));return s&&t(o,(function(e){return o.add(null,e)})),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),kf={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return Th(e)}))},timeline:function(e){return new Qh(e)},getTweensOf:function(e,t){return Eu.getTweensOf(e,t)},getProperty:function(e,t,n,r){Hu(e)&&(e=hh(e)[0]);var i=Ed(e||{}).get,s=n?kd:Ld;return"native"===n&&(n=""),e?t?s((vd[t]&&vd[t].get||i)(e,t,n,r)):function(t,n,r){return s((vd[t]&&vd[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=hh(e)).length>1){var r=e.map((function(e){return Df.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var s=vd[t],o=Ed(e),a=o.harness&&(o.harness.aliases||{})[t]||t,l=s?function(t){var r=new s;Pu._pt=0,r.init(e,n?t+n:t,Pu,0,[e]),r.render(1,r),Pu._pt&&yf(1,Pu)}:o.set(e,a);return s?l:function(t){return l(e,a,n?t+n:t,o,1)}},quickTo:function(e,t,n){var r,i=Df.to(e,Nd(((r={})[t]="+=0.1",r.paused=!0,r),n||{})),s=function(e,n,r){return i.resetTo(t,e,n,r)};return s.tween=i,s},isTweening:function(e){return Eu.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=jh(e.ease,Lu.ease)),Dd(Lu,e||{})},config:function(e){return Dd(Iu,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,s=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!vd[e]&&!id[e]&&ld(t+" effect requires "+e+" plugin.")})),yd[t]=function(e,t,r){return n(hh(e),Od(t||{},i),r)},s&&(Qh.prototype[t]=function(e,n,r){return this.add(yd[t](e,Wu(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){Uh[e]=jh(t)},parseEase:function(e,t){return arguments.length?jh(e,t):Uh},getById:function(e){return Eu.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new Qh(e);for(i.smoothChildTiming=qu(e.smoothChildTiming),Eu.remove(i),i._dp=0,i._time=i._tTime=Eu._time,n=Eu._first;n;)r=n._next,!t&&!n._dur&&n instanceof cf&&n.vars.onComplete===n._targets[0]||Qd(i,n,n._start-n._delay),n=r;return Qd(Eu,i,0),i},context:function(e,t){return e?new If(e,t):wu},matchMedia:function(e){return new Lf(e)},matchMediaRefresh:function(){return Sf.forEach((function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()}))||Rf()},addEventListener:function(e,t){var n=Af[e]||(Af[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=Af[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var i=n-t;return Ku(t)?bh(t,e(0,t.length),n):ah(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,s=2*i;return Ku(t)?bh(t,e(0,t.length-1),n):ah(r,(function(e){return t+((e=(s+(e-t)%s)%s||0)>i?s-e:e)}))},distribute:mh,random:yh,snap:vh,normalize:function(e,t,n){return xh(e,t,0,1,n)},getUnit:ch,clamp:function(e,t,n){return ah(n,(function(n){return lh(e,t,n)}))},splitColor:Rh,toArray:hh,selector:fh,mapRange:xh,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||ch(n))}},interpolate:function e(t,n,r,i){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var o,a,l,c,u,d=Hu(t),h={};if(!0===r&&(i=1)&&(r=null),d)t={p:t},n={p:n};else if(Ku(t)&&!Ku(n)){for(l=[],c=t.length,u=c-2,a=1;a<c;a++)l.push(e(t[a-1],t[a]));c--,s=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},r=n}else i||(t=Nd(Ku(t)?[]:{},t));if(!l){for(o in n)tf.call(h,t,o,"get",n[o]);s=function(e){return yf(e,h)||(d?t.p:t)}}}return ah(r,s)},shuffle:ph},install:od,effects:yd,ticker:Dh,updateRoot:Qh.updateRoot,plugins:vd,globalTimeline:Eu,core:{PropTween:Ef,globals:cd,Tween:cf,Timeline:Qh,Animation:Kh,getCache:Ed,_removeLinkedListItem:zd,reverting:function(){return xu},context:function(e){return e&&wu&&(wu.data.push(e),e._ctx=wu),wu},suppressOverwrites:function(e){return _u=e}}};Ad("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return kf[e]=cf[e]})),Dh.add(Qh.updateRoot),Pu=kf.to({},{duration:0});var Of=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Nf=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(Hu(n)&&(r={},Ad(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,s=e._targets;for(n in t)for(r=s.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=Of(i,n)),i&&i.modifier&&i.modifier(t[n],e,s[r],n))}(e,n)}}}},Df=kf.registerPlugin({name:"attr",init:function(e,t,n,r,i){var s,o,a;for(s in this.tween=n,t)a=e.getAttribute(s)||"",(o=this.add(e,"setAttribute",(a||0)+"",t[s],r,i,0,0,s)).op=s,o.b=a,this._props.push(s)},render:function(e,t){for(var n=t._pt;n;)xu?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Nf("roundProps",gh),Nf("modifiers"),Nf("snap",vh))||kf;cf.version=Qh.version=Df.version="3.12.4",Mu=1,Xu()&&Bh(),Uh.Power0,Uh.Power1,Uh.Power2,Uh.Power3,Uh.Power4,Uh.Linear,Uh.Quad,Uh.Cubic,Uh.Quart,Uh.Quint,Uh.Strong,Uh.Elastic,Uh.Back,Uh.SteppedEase,Uh.Bounce,Uh.Sine,Uh.Expo,Uh.Circ;var Bf,Uf,Ff,zf,Hf,Gf,Vf,jf,Wf={},qf=180/Math.PI,Xf=Math.PI/180,Zf=Math.atan2,Yf=/([A-Z])/g,Kf=/(left|right|width|margin|padding|x)/i,Qf=/[\s,\(]\S/,Jf={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},$f=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},ep=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},tp=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},np=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},rp=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},ip=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},sp=function(e,t,n){return e.style[t]=n},op=function(e,t,n){return e.style.setProperty(t,n)},ap=function(e,t,n){return e._gsap[t]=n},lp=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},cp=function(e,t,n,r,i){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(i,s)},up=function(e,t,n,r,i){var s=e._gsap;s[t]=n,s.renderTransform(i,s)},dp="transform",hp=dp+"Origin",fp=function e(t,n){var r=this,i=this.target,s=i.style,o=i._gsap;if(t in Wf&&s){if(this.tfm=this.tfm||{},"transform"===t)return Jf.transform.split(",").forEach((function(t){return e.call(r,t,n)}));if(~(t=Jf[t]||t).indexOf(",")?t.split(",").forEach((function(e){return r.tfm[e]=Ip(i,e)})):this.tfm[t]=o.x?o[t]:Ip(i,t),t===hp&&(this.tfm.zOrigin=o.zOrigin),this.props.indexOf(dp)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(hp,n,"")),t=dp}(s||n)&&this.props.push(t,n,s[t])},pp=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},mp=function(){var e,t,n=this.props,r=this.target,i=r.style,s=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?r[n[e]]=n[e+2]:n[e+2]?i[n[e]]=n[e+2]:i.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(Yf,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)s[t]=this.tfm[t];s.svg&&(s.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=Vf())&&e.isStart||i[dp]||(pp(i),s.zOrigin&&i[hp]&&(i[hp]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},gp=function(e,t){var n={target:e,props:[],revert:mp,save:fp};return e._gsap||Df.core.getCache(e),t&&t.split(",").forEach((function(e){return n.save(e)})),n},vp=function(e,t){var n=Uf.createElementNS?Uf.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Uf.createElement(e);return n&&n.style?n:Uf.createElement(e)},yp=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(Yf,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,_p(n)||n,1)||""},bp="O,Moz,ms,Ms,Webkit".split(","),_p=function(e,t,n){var r=(t||Hf).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(bp[i]+e in r););return i<0?null:(3===i?"ms":i>=0?bp[i]:"")+e},xp=function(){"undefined"!=typeof window&&window.document&&(Bf=window,Uf=Bf.document,Ff=Uf.documentElement,Hf=vp("div")||{style:{}},vp("div"),dp=_p(dp),hp=dp+"Origin",Hf.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jf=!!_p("perspective"),Vf=Df.core.reverting,zf=1)},wp=function e(t){var n,r=vp("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Ff.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),Ff.removeChild(r),this.style.cssText=o,n},Ep=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},Sp=function(e){var t;try{t=e.getBBox()}catch(n){t=wp.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===wp||(t=wp.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+Ep(e,["x","cx","x1"])||0,y:+Ep(e,["y","cy","y1"])||0,width:0,height:0}},Ap=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Sp(e))},Tp=function(e,t){if(t){var n,r=e.style;t in Wf&&t!==hp&&(t=dp),r.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty("--"===n?t:t.replace(Yf,"-$1").toLowerCase())):r.removeAttribute(t)}},Mp=function(e,t,n,r,i,s){var o=new Ef(e._pt,t,n,0,1,s?ip:rp);return e._pt=o,o.b=r,o.e=i,e._props.push(n),o},Cp={deg:1,rad:1,turn:1},Pp={grid:1,flex:1},Rp=function e(t,n,r,i){var s,o,a,l,c=parseFloat(r)||0,u=(r+"").trim().substr((c+"").length)||"px",d=Hf.style,h=Kf.test(n),f="svg"===t.tagName.toLowerCase(),p=(f?"client":"offset")+(h?"Width":"Height"),m=100,g="px"===i,v="%"===i;if(i===u||!c||Cp[i]||Cp[u])return c;if("px"!==u&&!g&&(c=e(t,n,r,"px")),l=t.getCTM&&Ap(t),(v||"%"===u)&&(Wf[n]||~n.indexOf("adius")))return s=l?t.getBBox()[h?"width":"height"]:t[p],Td(v?c/s*m:c/100*s);if(d[h?"width":"height"]=m+(g?u:i),o=~n.indexOf("adius")||"em"===i&&t.appendChild&&!f?t:t.parentNode,l&&(o=(t.ownerSVGElement||{}).parentNode),o&&o!==Uf&&o.appendChild||(o=Uf.body),(a=o._gsap)&&v&&a.width&&h&&a.time===Dh.time&&!a.uncache)return Td(c/a.width*m);if(!v||"height"!==n&&"width"!==n)(v||"%"===u)&&!Pp[yp(o,"display")]&&(d.position=yp(t,"position")),o===t&&(d.position="static"),o.appendChild(Hf),s=Hf[p],o.removeChild(Hf),d.position="absolute";else{var y=t.style[n];t.style[n]=m+i,s=t[p],y?t.style[n]=y:Tp(t,n)}return h&&v&&((a=Ed(o)).time=Dh.time,a.width=o[p]),Td(g?s*c/m:s&&c?m/s*c:0)},Ip=function(e,t,n,r){var i;return zf||xp(),t in Jf&&"transform"!==t&&~(t=Jf[t]).indexOf(",")&&(t=t.split(",")[0]),Wf[t]&&"transform"!==t?(i=Vp(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:jp(yp(e,hp))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Dp[t]&&Dp[t](e,t,n)||yp(e,t)||Sd(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?Rp(e,t,i,n)+n:i},Lp=function(e,t,n,r){if(!n||"none"===n){var i=_p(t,e,1),s=i&&yp(e,i,1);s&&s!==n?(t=i,n=s):"borderColor"===t&&(n=yp(e,"borderTopColor"))}var o,a,l,c,u,d,h,f,p,m,g,v=new Ef(this._pt,e.style,t,0,1,vf),y=0,b=0;if(v.b=n,v.e=r,n+="","auto"==(r+="")&&(d=e.style[t],e.style[t]=r,r=yp(e,t)||r,d?e.style[t]=d:Tp(e,t)),Nh(o=[n,r]),r=o[1],l=(n=o[0]).match($u)||[],(r.match($u)||[]).length){for(;a=$u.exec(r);)h=a[0],p=r.substring(y,a.index),u?u=(u+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(u=1),h!==(d=l[b++]||"")&&(c=parseFloat(d)||0,g=d.substr((c+"").length),"="===h.charAt(1)&&(h=Cd(c,h)+g),f=parseFloat(h),m=h.substr((f+"").length),y=$u.lastIndex-m.length,m||(m=m||Iu.units[t]||g,y===r.length&&(r+=m,v.e+=m)),g!==m&&(c=Rp(e,t,d,m)||0),v._pt={_next:v._pt,p:p||1===b?p:",",s:c,c:f-c,m:u&&u<4||"zIndex"===t?Math.round:0});v.c=y<r.length?r.substring(y,r.length):""}else v.r="display"===t&&"none"===r?ip:rp;return td.test(r)&&(v.e=0),this._pt=v,v},kp={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Op=function(e){var t=e.split(" "),n=t[0],r=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==r&&"right"!==r||(e=n,n=r,r=e),t[0]=kp[n]||n,t[1]=kp[r]||r,t.join(" ")},Np=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,s=t.t,o=s.style,a=t.u,l=s._gsap;if("all"===a||!0===a)o.cssText="",r=1;else for(i=(a=a.split(",")).length;--i>-1;)n=a[i],Wf[n]&&(r=1,n="transformOrigin"===n?hp:dp),Tp(s,n);r&&(Tp(s,dp),l&&(l.svg&&s.removeAttribute("transform"),Vp(s,1),l.uncache=1,pp(o)))}},Dp={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var s=e._pt=new Ef(e._pt,t,n,0,0,Np);return s.u=r,s.pr=-10,s.tween=i,e._props.push(n),1}}},Bp=[1,0,0,1,0,0],Up={},Fp=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},zp=function(e){var t=yp(e,dp);return Fp(t)?Bp:t.substr(7).match(Ju).map(Td)},Hp=function(e,t){var n,r,i,s,o=e._gsap||Ed(e),a=e.style,l=zp(e);return o.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?Bp:l:(l!==Bp||e.offsetParent||e===Ff||o.svg||(i=a.display,a.display="block",(n=e.parentNode)&&e.offsetParent||(s=1,r=e.nextElementSibling,Ff.appendChild(e)),l=zp(e),i?a.display=i:Tp(e,"display"),s&&(r?n.insertBefore(e,r):n?n.appendChild(e):Ff.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},Gp=function(e,t,n,r,i,s){var o,a,l,c=e._gsap,u=i||Hp(e,!0),d=c.xOrigin||0,h=c.yOrigin||0,f=c.xOffset||0,p=c.yOffset||0,m=u[0],g=u[1],v=u[2],y=u[3],b=u[4],_=u[5],x=t.split(" "),w=parseFloat(x[0])||0,E=parseFloat(x[1])||0;n?u!==Bp&&(a=m*y-g*v)&&(l=w*(-g/a)+E*(m/a)-(m*_-g*b)/a,w=w*(y/a)+E*(-v/a)+(v*_-y*b)/a,E=l):(w=(o=Sp(e)).x+(~x[0].indexOf("%")?w/100*o.width:w),E=o.y+(~(x[1]||x[0]).indexOf("%")?E/100*o.height:E)),r||!1!==r&&c.smooth?(b=w-d,_=E-h,c.xOffset=f+(b*m+_*v)-b,c.yOffset=p+(b*g+_*y)-_):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=E,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[hp]="0px 0px",s&&(Mp(s,c,"xOrigin",d,w),Mp(s,c,"yOrigin",h,E),Mp(s,c,"xOffset",f,c.xOffset),Mp(s,c,"yOffset",p,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+E)},Vp=function(e,t){var n=e._gsap||new Yh(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,s,o,a,l,c,u,d,h,f,p,m,g,v,y,b,_,x,w,E,S,A,T,M,C,P,R,I,L,k,O,N=e.style,D=n.scaleX<0,B="px",U="deg",F=getComputedStyle(e),z=yp(e,hp)||"0";return r=i=s=l=c=u=d=h=f=0,o=a=1,n.svg=!(!e.getCTM||!Ap(e)),F.translate&&("none"===F.translate&&"none"===F.scale&&"none"===F.rotate||(N[dp]=("none"!==F.translate?"translate3d("+(F.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==F.rotate?"rotate("+F.rotate+") ":"")+("none"!==F.scale?"scale("+F.scale.split(" ").join(",")+") ":"")+("none"!==F[dp]?F[dp]:"")),N.scale=N.rotate=N.translate="none"),g=Hp(e,n.svg),n.svg&&(n.uncache?(M=e.getBBox(),z=n.xOrigin-M.x+"px "+(n.yOrigin-M.y)+"px",T=""):T=!t&&e.getAttribute("data-svg-origin"),Gp(e,T||z,!!T||n.originIsAbsolute,!1!==n.smooth,g)),p=n.xOrigin||0,m=n.yOrigin||0,g!==Bp&&(_=g[0],x=g[1],w=g[2],E=g[3],r=S=g[4],i=A=g[5],6===g.length?(o=Math.sqrt(_*_+x*x),a=Math.sqrt(E*E+w*w),l=_||x?Zf(x,_)*qf:0,(d=w||E?Zf(w,E)*qf+l:0)&&(a*=Math.abs(Math.cos(d*Xf))),n.svg&&(r-=p-(p*_+m*w),i-=m-(p*x+m*E))):(O=g[6],L=g[7],P=g[8],R=g[9],I=g[10],k=g[11],r=g[12],i=g[13],s=g[14],c=(v=Zf(O,I))*qf,v&&(T=S*(y=Math.cos(-v))+P*(b=Math.sin(-v)),M=A*y+R*b,C=O*y+I*b,P=S*-b+P*y,R=A*-b+R*y,I=O*-b+I*y,k=L*-b+k*y,S=T,A=M,O=C),u=(v=Zf(-w,I))*qf,v&&(y=Math.cos(-v),k=E*(b=Math.sin(-v))+k*y,_=T=_*y-P*b,x=M=x*y-R*b,w=C=w*y-I*b),l=(v=Zf(x,_))*qf,v&&(T=_*(y=Math.cos(v))+x*(b=Math.sin(v)),M=S*y+A*b,x=x*y-_*b,A=A*y-S*b,_=T,S=M),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),o=Td(Math.sqrt(_*_+x*x+w*w)),a=Td(Math.sqrt(A*A+O*O)),v=Zf(S,A),d=Math.abs(v)>2e-4?v*qf:0,f=k?1/(k<0?-k:k):0),n.svg&&(T=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!Fp(yp(e,dp)),T&&e.setAttribute("transform",T))),Math.abs(d)>90&&Math.abs(d)<270&&(D?(o*=-1,d+=l<=0?180:-180,l+=l<=0?180:-180):(a*=-1,d+=d<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+B,n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+B,n.z=s+B,n.scaleX=Td(o),n.scaleY=Td(a),n.rotation=Td(l)+U,n.rotationX=Td(c)+U,n.rotationY=Td(u)+U,n.skewX=d+U,n.skewY=h+U,n.transformPerspective=f+B,(n.zOrigin=parseFloat(z.split(" ")[2])||!t&&n.zOrigin||0)&&(N[hp]=jp(z)),n.xOffset=n.yOffset=0,n.force3D=Iu.force3D,n.renderTransform=n.svg?Qp:jf?Kp:qp,n.uncache=0,n},jp=function(e){return(e=e.split(" "))[0]+" "+e[1]},Wp=function(e,t,n){var r=ch(t);return Td(parseFloat(t)+parseFloat(Rp(e,"x",n+"px",r)))+r},qp=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Kp(e,t)},Xp="0deg",Zp="0px",Yp=") ",Kp=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,s=n.x,o=n.y,a=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,d=n.skewX,h=n.skewY,f=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,b="",_="auto"===g&&e&&1!==e||!0===g;if(y&&(u!==Xp||c!==Xp)){var x,w=parseFloat(c)*Xf,E=Math.sin(w),S=Math.cos(w);w=parseFloat(u)*Xf,x=Math.cos(w),s=Wp(v,s,E*x*-y),o=Wp(v,o,-Math.sin(w)*-y),a=Wp(v,a,S*x*-y+y)}m!==Zp&&(b+="perspective("+m+Yp),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(_||s!==Zp||o!==Zp||a!==Zp)&&(b+=a!==Zp||_?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Yp),l!==Xp&&(b+="rotate("+l+Yp),c!==Xp&&(b+="rotateY("+c+Yp),u!==Xp&&(b+="rotateX("+u+Yp),d===Xp&&h===Xp||(b+="skew("+d+", "+h+Yp),1===f&&1===p||(b+="scale("+f+", "+p+Yp),v.style[dp]=b||"translate(0, 0)"},Qp=function(e,t){var n,r,i,s,o,a=t||this,l=a.xPercent,c=a.yPercent,u=a.x,d=a.y,h=a.rotation,f=a.skewX,p=a.skewY,m=a.scaleX,g=a.scaleY,v=a.target,y=a.xOrigin,b=a.yOrigin,_=a.xOffset,x=a.yOffset,w=a.forceCSS,E=parseFloat(u),S=parseFloat(d);h=parseFloat(h),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),h+=p),h||f?(h*=Xf,f*=Xf,n=Math.cos(h)*m,r=Math.sin(h)*m,i=Math.sin(h-f)*-g,s=Math.cos(h-f)*g,f&&(p*=Xf,o=Math.tan(f-p),i*=o=Math.sqrt(1+o*o),s*=o,p&&(o=Math.tan(p),n*=o=Math.sqrt(1+o*o),r*=o)),n=Td(n),r=Td(r),i=Td(i),s=Td(s)):(n=m,s=g,r=i=0),(E&&!~(u+"").indexOf("px")||S&&!~(d+"").indexOf("px"))&&(E=Rp(v,"x",u,"px"),S=Rp(v,"y",d,"px")),(y||b||_||x)&&(E=Td(E+y-(y*n+b*i)+_),S=Td(S+b-(y*r+b*s)+x)),(l||c)&&(o=v.getBBox(),E=Td(E+l/100*o.width),S=Td(S+c/100*o.height)),o="matrix("+n+","+r+","+i+","+s+","+E+","+S+")",v.setAttribute("transform",o),w&&(v.style[dp]=o)},Jp=function(e,t,n,r,i){var s,o,a=360,l=Hu(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?qf:1)-r,u=r+c+"deg";return l&&("short"===(s=i.split("_")[1])&&(c%=a)!=c%180&&(c+=c<0?a:-360),"cw"===s&&c<0?c=(c+36e9)%a-~~(c/a)*a:"ccw"===s&&c>0&&(c=(c-36e9)%a-~~(c/a)*a)),e._pt=o=new Ef(e._pt,t,n,r,c,ep),o.e=u,o.u="deg",e._props.push(n),o},$p=function(e,t){for(var n in t)e[n]=t[n];return e},em=function(e,t,n){var r,i,s,o,a,l,c,u=$p({},n._gsap),d=n.style;for(i in u.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),d[dp]=t,r=Vp(n,1),Tp(n,dp),n.setAttribute("transform",s)):(s=getComputedStyle(n)[dp],d[dp]=t,r=Vp(n,1),d[dp]=s),Wf)(s=u[i])!==(o=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(a=ch(s)!==(c=ch(o))?Rp(n,i,s,c):parseFloat(s),l=parseFloat(o),e._pt=new Ef(e._pt,r,i,a,l-a,$f),e._pt.u=c||0,e._props.push(i));$p(r,u)};Ad("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",s="Left",o=(t<3?[n,r,i,s]:[n+s,n+r,i+r,i+s]).map((function(n){return t<2?e+n:"border"+n+e}));Dp[t>1?"border"+e:e]=function(e,t,n,r,i){var s,a;if(arguments.length<4)return s=o.map((function(t){return Ip(e,t,n)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(r+"").split(" "),a={},o.forEach((function(e,t){return a[e]=s[t]=s[t]||s[(t-1)/2|0]})),e.init(t,a,i)}}));var tm,nm,rm={name:"css",register:xp,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var s,o,a,l,c,u,d,h,f,p,m,g,v,y,b,_,x=this._props,w=e.style,E=n.vars.startAt;for(d in zf||xp(),this.styles=this.styles||gp(e),_=this.styles.props,this.tween=n,t)if("autoRound"!==d&&(o=t[d],!vd[d]||!nf(d,t,n,r,e,i)))if(c=typeof o,u=Dp[d],"function"===c&&(c=typeof(o=o.call(n,r,e,i))),"string"===c&&~o.indexOf("random(")&&(o=_h(o)),u)u(this,e,d,o,n)&&(b=1);else if("--"===d.substr(0,2))s=(getComputedStyle(e).getPropertyValue(d)+"").trim(),o+="",kh.lastIndex=0,kh.test(s)||(h=ch(s),f=ch(o)),f?h!==f&&(s=Rp(e,d,s,f)+f):h&&(o+=h),this.add(w,"setProperty",s,o,r,i,0,0,d),x.push(d),_.push(d,0,w[d]);else if("undefined"!==c){if(E&&d in E?(s="function"==typeof E[d]?E[d].call(n,r,e,i):E[d],Hu(s)&&~s.indexOf("random(")&&(s=_h(s)),ch(s+"")||"auto"===s||(s+=Iu.units[d]||ch(Ip(e,d))||""),"="===(s+"").charAt(1)&&(s=Ip(e,d))):s=Ip(e,d),l=parseFloat(s),(p="string"===c&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),d in Jf&&("autoAlpha"===d&&(1===l&&"hidden"===Ip(e,"visibility")&&a&&(l=0),_.push("visibility",0,w.visibility),Mp(this,w,"visibility",l?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==d&&"transform"!==d&&~(d=Jf[d]).indexOf(",")&&(d=d.split(",")[0])),m=d in Wf)if(this.styles.save(d),g||((v=e._gsap).renderTransform&&!t.parseTransform||Vp(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new Ef(this._pt,w,dp,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===d)this._pt=new Ef(this._pt,v,"scaleY",v.scaleY,(p?Cd(v.scaleY,p+a):a)-v.scaleY||0,$f),this._pt.u=0,x.push("scaleY",d),d+="X";else{if("transformOrigin"===d){_.push(hp,0,w[hp]),o=Op(o),v.svg?Gp(e,o,0,y,0,this):((f=parseFloat(o.split(" ")[2])||0)!==v.zOrigin&&Mp(this,v,"zOrigin",v.zOrigin,f),Mp(this,w,d,jp(s),jp(o)));continue}if("svgOrigin"===d){Gp(e,o,1,y,0,this);continue}if(d in Up){Jp(this,v,d,l,p?Cd(l,p+o):o);continue}if("smoothOrigin"===d){Mp(this,v,"smooth",v.smooth,o);continue}if("force3D"===d){v[d]=o;continue}if("transform"===d){em(this,o,e);continue}}else d in w||(d=_p(d)||d);if(m||(a||0===a)&&(l||0===l)&&!Qf.test(o)&&d in w)a||(a=0),(h=(s+"").substr((l+"").length))!==(f=ch(o)||(d in Iu.units?Iu.units[d]:h))&&(l=Rp(e,d,s,f)),this._pt=new Ef(this._pt,m?v:w,d,l,(p?Cd(l,p+a):a)-l,m||"px"!==f&&"zIndex"!==d||!1===t.autoRound?$f:np),this._pt.u=f||0,h!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=tp);else if(d in w)Lp.call(this,e,d,s,p?p+o:o);else if(d in e)this.add(e,d,s||e[d],p?p+o:o,r,i);else if("parseTransform"!==d){ad(d,o);continue}m||(d in w?_.push(d,0,w[d]):_.push(d,1,s||e[d])),x.push(d)}b&&wf(this)},render:function(e,t){if(t.tween._time||!Vf())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Ip,aliases:Jf,getSetter:function(e,t,n){var r=Jf[t];return r&&r.indexOf(",")<0&&(t=r),t in Wf&&t!==hp&&(e._gsap.x||Ip(e,"x"))?n&&Gf===n?"scale"===t?lp:ap:(Gf=n||{})&&("scale"===t?cp:up):e.style&&!ju(e.style[t])?sp:~t.indexOf("-")?op:pf(e,t)},core:{_removeProperty:Tp,_getMatrix:Hp}};Df.utils.checkPrefix=_p,Df.core.getStyleSaver=gp,nm=Ad("x,y,z,scale,scaleX,scaleY,xPercent,yPercent"+","+(tm="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){Wf[e]=1})),Ad(tm,(function(e){Iu.units[e]="deg",Up[e]=1})),Jf[nm[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+tm,Ad("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");Jf[t[1]]=nm[t[0]]})),Ad("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){Iu.units[e]="px"})),Df.registerPlugin(rm);var im=Df.registerPlugin(rm)||Df,sm=(im.core.Tween,16645360),om=4.162671473134066,am=.4196273812798987,lm=3.9894729623442213,cm=-.15128983435038482,um=.9141115624499687,dm=.12016555953791716,hm=["Shape 1","Shape 2","Shape 3","Shape 4"],fm={x:.98*window.innerWidth,y:.98*window.innerHeight},pm=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};try{URL.revokeObjectURL(pm(""))}catch(e){pm=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var mm=Uint8Array,gm=Uint16Array,vm=Uint32Array,ym=new mm([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bm=new mm([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_m=new mm([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xm=function(e,t){for(var n=new gm(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new vm(n[30]);for(r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},wm=xm(ym,2),Em=wm[0],Sm=wm[1];Em[28]=258,Sm[258]=28;for(var Am=xm(bm,0),Tm=Am[0],Mm=(Am[1],new gm(32768)),Cm=0;Cm<32768;++Cm){var Pm=(43690&Cm)>>>1|(21845&Cm)<<1;Pm=(61680&(Pm=(52428&Pm)>>>2|(13107&Pm)<<2))>>>4|(3855&Pm)<<4,Mm[Cm]=((65280&Pm)>>>8|(255&Pm)<<8)>>>1}var Rm=function(e,t,n){for(var r=e.length,i=0,s=new gm(t);i<r;++i)++s[e[i]-1];var o,a=new gm(t);for(i=0;i<t;++i)a[i]=a[i-1]+s[i-1]<<1;if(n){o=new gm(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],d=a[e[i]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[Mm[d]>>>l]=c}else for(o=new gm(r),i=0;i<r;++i)e[i]&&(o[i]=Mm[a[e[i]-1]++]>>>15-e[i]);return o},Im=new mm(288);for(Cm=0;Cm<144;++Cm)Im[Cm]=8;for(Cm=144;Cm<256;++Cm)Im[Cm]=9;for(Cm=256;Cm<280;++Cm)Im[Cm]=7;for(Cm=280;Cm<288;++Cm)Im[Cm]=8;var Lm=new mm(32);for(Cm=0;Cm<32;++Cm)Lm[Cm]=5;var km=Rm(Im,9,1),Om=Rm(Lm,5,1),Nm=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Dm=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Bm=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Um=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new mm(0);var i=!t||n,s=!n||n.i;n||(n={}),t||(t=new mm(3*r));var o,a=function(e){var n=t.length;if(e>n){var r=new mm(Math.max(2*n,e));r.set(t),t=r}},l=n.f||0,c=n.p||0,u=n.b||0,d=n.l,h=n.d,f=n.m,p=n.n,m=8*r;do{if(!d){n.f=l=Dm(e,c,1);var g=Dm(e,c+1,3);if(c+=3,!g){var v=e[(o=c,(C=(o/8|0)+(7&o&&1)+4)-4)]|e[C-3]<<8,y=C+v;if(y>r){if(s)throw"unexpected EOF";break}i&&a(u+v),t.set(e.subarray(C,y),u),n.b=u+=v,n.p=c=8*y;continue}if(1==g)d=km,h=Om,f=9,p=5;else{if(2!=g)throw"invalid block type";var b=Dm(e,c,31)+257,_=Dm(e,c+10,15)+4,x=b+Dm(e,c+5,31)+1;c+=14;for(var w=new mm(x),E=new mm(19),S=0;S<_;++S)E[_m[S]]=Dm(e,c+3*S,7);c+=3*_;var A=Nm(E),T=(1<<A)-1,M=Rm(E,A,1);for(S=0;S<x;){var C,P=M[Dm(e,c,T)];if(c+=15&P,(C=P>>>4)<16)w[S++]=C;else{var R=0,I=0;for(16==C?(I=3+Dm(e,c,3),c+=2,R=w[S-1]):17==C?(I=3+Dm(e,c,7),c+=3):18==C&&(I=11+Dm(e,c,127),c+=7);I--;)w[S++]=R}}var L=w.subarray(0,b),k=w.subarray(b);f=Nm(L),p=Nm(k),d=Rm(L,f,1),h=Rm(k,p,1)}if(c>m){if(s)throw"unexpected EOF";break}}i&&a(u+131072);for(var O=(1<<f)-1,N=(1<<p)-1,D=c;;D=c){var B=(R=d[Bm(e,c)&O])>>>4;if((c+=15&R)>m){if(s)throw"unexpected EOF";break}if(!R)throw"invalid length/literal";if(B<256)t[u++]=B;else{if(256==B){D=c,d=null;break}var U=B-254;if(B>264){var F=ym[S=B-257];U=Dm(e,c,(1<<F)-1)+Em[S],c+=F}var z=h[Bm(e,c)&N],H=z>>>4;if(!z)throw"invalid distance";if(c+=15&z,k=Tm[H],H>3&&(F=bm[H],k+=Bm(e,c)&(1<<F)-1,c+=F),c>m){if(s)throw"unexpected EOF";break}i&&a(u+131072);for(var G=u+U;u<G;u+=4)t[u]=t[u-k],t[u+1]=t[u+1-k],t[u+2]=t[u+2-k],t[u+3]=t[u+3-k];u=G}}n.l=d,n.p=D,n.b=u,d&&(l=1,n.m=f,n.d=h,n.n=p)}while(!l);return u==t.length?t:function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof gm?gm:e instanceof vm?vm:mm)(n-t);return r.set(e.subarray(t,n)),r}(t,0,u)},Fm=new mm(0);var zm="undefined"!=typeof TextDecoder&&new TextDecoder;try{zm.decode(Fm,{stream:!0})}catch(e){}function Hm(e,t,n){const r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;let i=e,s=r,o=Math.floor((i+s)/2);for(;t<n[o]||t>=n[o+1];)t<n[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function Gm(e,t){let n=1;for(let t=2;t<=e;++t)n*=t;let r=1;for(let e=2;e<=t;++e)r*=e;for(let n=2;n<=e-t;++n)r*=n;return n/r}class Vm extends ya{constructor(e,t,n,r,i){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(let e=0;e<n.length;++e){const t=n[e];this.controlPoints[e]=new Je(t.x,t.y,t.z,t.w)}}getPoint(e,t=new it){const n=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,t,n,r){const i=Hm(e,r,t),s=function(e,t,n,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=n;++a){s[a]=t-r[e+1-a],o[a]=r[e+a]-t;let n=0;for(let e=0;e<a;++e){const t=o[e+1],r=s[a-e],l=i[e]/(t+r);i[e]=n+t*l,n=r*l}i[a]=n}return i}(i,r,e,t),o=new Je(0,0,0,0);for(let t=0;t<=e;++t){const r=n[i-e+t],a=s[t],l=r.w*a;o.x+=r.x*l,o.y+=r.y*l,o.z+=r.z*l,o.w+=r.w*a}return o}(this.degree,this.knots,this.controlPoints,r);return 1!==i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)}getTangent(e,t=new it){const n=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=function(e,t,n,r,i){const s=function(e,t,n,r,i){const s=i<e?i:e,o=[],a=Hm(e,r,t),l=function(e,t,n,r,i){const s=[];for(let e=0;e<=n;++e)s[e]=0;const o=[];for(let e=0;e<=r;++e)o[e]=s.slice(0);const a=[];for(let e=0;e<=n;++e)a[e]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let r=1;r<=n;++r){l[r]=t-i[e+1-r],c[r]=i[e+r]-t;let n=0;for(let e=0;e<r;++e){const t=c[e+1],i=l[r-e];a[r][e]=t+i;const s=a[e][r-1]/a[r][e];a[e][r]=n+t*s,n=i*s}a[r][r]=n}for(let e=0;e<=n;++e)o[0][e]=a[e][n];for(let e=0;e<=n;++e){let t=0,i=1;const l=[];for(let e=0;e<=n;++e)l[e]=s.slice(0);l[0][0]=1;for(let s=1;s<=r;++s){let r=0;const c=e-s,u=n-s;e>=s&&(l[i][0]=l[t][0]/a[u+1][c],r=l[i][0]*a[c][u]);const d=e-1<=u?s-1:n-e;for(let e=c>=-1?1:-c;e<=d;++e)l[i][e]=(l[t][e]-l[t][e-1])/a[u+1][c+e],r+=l[i][e]*a[c+e][u];e<=u&&(l[i][s]=-l[t][s-1]/a[u+1][e],r+=l[i][s]*a[e][u]),o[s][e]=r;const h=t;t=i,i=h}}let u=n;for(let e=1;e<=r;++e){for(let t=0;t<=n;++t)o[e][t]*=u;u*=n-e}return o}(a,r,e,s,t),c=[];for(let e=0;e<n.length;++e){const t=n[e].clone(),r=t.w;t.x*=r,t.y*=r,t.z*=r,c[e]=t}for(let t=0;t<=s;++t){const n=c[a-e].clone().multiplyScalar(l[t][0]);for(let r=1;r<=e;++r)n.add(c[a-e+r].clone().multiplyScalar(l[t][r]));o[t]=n}for(let e=s+1;e<=i+1;++e)o[e]=new Je(0,0,0);return o}(e,t,n,r,i);return function(e){const t=e.length,n=[],r=[];for(let i=0;i<t;++i){const t=e[i];n[i]=new it(t.x,t.y,t.z),r[i]=t.w}const i=[];for(let e=0;e<t;++e){const t=n[e].clone();for(let n=1;n<=e;++n)t.sub(i[e-n].clone().multiplyScalar(Gm(e,n)*r[n]));i[e]=t.divideScalar(r[0])}return i}(s)}(this.degree,this.knots,this.controlPoints,r,1);return n.copy(i[1]).normalize(),n}}let jm,Wm,qm;class Xm extends Nl{constructor(e){super(e)}load(e,t,n,r){const i=this,s=""===i.path?ic.extractUrlBase(e):i.path,o=new Ul(this.manager);o.setPath(i.path),o.setResponseType("arraybuffer"),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(n,s))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=21&&t===ug(e,0,21)}(e))jm=(new Jm).parse(e);else{const t=ug(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(t){const r=e[t-1];return e=e.slice(n+t),n++,r}for(let e=0;e<t.length;++e)if(r(1)===t[e])return!1;return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(tg(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+tg(t));jm=(new Qm).parse(t)}const n=new Gl(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Zm(n,this.manager).parse(jm)}}class Zm{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Wm=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),i=(new Ym).parse(r);return this.parseScene(r,i,n),qm}parseConnections(){const e=new Map;return"Connections"in jm&&jm.Connections.connections.forEach((function(t){const n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const s={ID:r,relationship:i};e.get(n).parents.push(s),e.has(r)||e.set(r,{parents:[],children:[]});const o={ID:n,relationship:i};e.get(r).children.push(o)})),e}parseImages(){const e={},t={};if("Video"in jm.Objects){const n=jm.Objects.Video;for(const r in n){const i=n[r];if(e[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){const e=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,s="string"==typeof i.Content&&""!==i.Content;if(e||s){const e=this.parseImage(n[r]);t[i.RelativeFilename||i.Filename]=e}}}}for(const n in e){const r=e[n];void 0!==t[r]?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let i;switch(r){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),i="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof t)return"data:"+i+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in jm.Objects){const n=jm.Objects.Texture;for(const r in n){const i=this.parseTexture(n[r],e);t.set(parseInt(r),i)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,i=e.WrapModeV,s=void 0!==r?r.value:0,o=void 0!==i?i.value:0;if(n.wrapS=0===s?C:P,n.wrapT=0===o?C:P,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;n.offset.x=t[0],n.offset.y=t[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,i=Wm.get(e.id).children;let s;void 0!==i&&i.length>0&&void 0!==t[i[0].ID]&&(n=t[i[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const o=e.FileName.slice(-3).toLowerCase();if("tga"===o){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),s=new Qe):(t.setPath(this.textureLoader.path),s=t.load(n))}else if("dds"===o){const t=this.manager.getHandler(".dds");null===t?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),s=new Qe):(t.setPath(this.textureLoader.path),s=t.load(n))}else"psd"===o?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),s=new Qe):s=this.textureLoader.load(n);return this.textureLoader.setPath(r),s}parseMaterials(e){const t=new Map;if("Material"in jm.Objects){const n=jm.Objects.Material;for(const r in n){const i=this.parseMaterial(n[r],e);null!==i&&t.set(parseInt(r),i)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let i=e.ShadingModel;if("object"==typeof i&&(i=i.value),!Wm.has(n))return null;const s=this.parseParameters(e,t,n);let o;switch(i.toLowerCase()){case"phong":o=new hl;break;case"lambert":o=new fl;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',i),o=new hl}return o.setValues(s),o.name=r,o}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new En).fromArray(e.Diffuse.value).convertSRGBToLinear():!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(r.color=(new En).fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new En).fromArray(e.Emissive.value).convertSRGBToLinear():!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(r.emissive=(new En).fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new En).fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new En).fromArray(e.SpecularColor.value).convertSRGBToLinear());const i=this;return Wm.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":r.bumpMap=i.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=i.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=i.getTexture(t,e.ID),void 0!==r.map&&(r.map.colorSpace=te);break;case"DisplacementColor":r.displacementMap=i.getTexture(t,e.ID);break;case"EmissiveColor":r.emissiveMap=i.getTexture(t,e.ID),void 0!==r.emissiveMap&&(r.emissiveMap.colorSpace=te);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=i.getTexture(t,e.ID);break;case"ReflectionColor":r.envMap=i.getTexture(t,e.ID),void 0!==r.envMap&&(r.envMap.mapping=T,r.envMap.colorSpace=te);break;case"SpecularColor":r.specularMap=i.getTexture(t,e.ID),void 0!==r.specularMap&&(r.specularMap.colorSpace=te);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=i.getTexture(t,e.ID),r.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),r}getTexture(e,t){return"LayeredTexture"in jm.Objects&&t in jm.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Wm.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in jm.Objects){const n=jm.Objects.Deformer;for(const r in n){const i=n[r],s=Wm.get(parseInt(r));if("Skin"===i.attrType){const t=this.parseSkeleton(s,n);t.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=s.parents[0].ID,e[r]=t}else if("BlendShape"===i.attrType){const e={id:r};e.rawTargets=this.parseMorphTargets(s,n),e.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const r=t[e.ID];if("Cluster"!==r.attrType)return;const i={ID:e.ID,indices:[],weights:[],transformLink:(new Ot).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const i=e.children[r],s=t[i.ID],o={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;o.geoID=Wm.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(o)}return n}parseScene(e,t,n){qm=new io;const r=this.parseModels(e.skeletons,t,n),i=jm.Objects.Model,s=this;r.forEach((function(e){const t=i[e.ID];s.setLookAtProperties(e,t),Wm.get(e.ID).parents.forEach((function(t){const n=r.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&qm.add(e)})),this.bindSkeleton(e.skeletons,t,r),this.addGlobalSceneSettings(),qm.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=ag(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const o=(new Km).parse();1===qm.children.length&&qm.children[0].isGroup&&(qm.children[0].animations=o,qm=qm.children[0]),qm.animations=o}parseModels(e,t,n){const r=new Map,i=jm.Objects.Model;for(const s in i){const o=parseInt(s),a=i[s],l=Wm.get(o);let c=this.buildSkeleton(l,e,o,a.attrName);if(!c){switch(a.attrType){case"Camera":c=this.createCamera(l);break;case"Light":c=this.createLight(l);break;case"Mesh":c=this.createMesh(l,t,n);break;case"NurbsCurve":c=this.createCurve(l,t);break;case"LimbNode":case"Root":c=new zo;break;default:c=new io}c.name=a.attrName?hc.sanitizeNodeName(a.attrName):"",c.userData.originalName=a.attrName,c.ID=o}this.getTransformData(c,a),r.set(o,c)}return r}buildSkeleton(e,t,n,r){let i=null;return e.parents.forEach((function(e){for(const s in t){const o=t[s];o.rawBones.forEach((function(t,s){if(t.ID===e.ID){const e=i;i=new zo,i.matrixWorld.copy(t.transformLink),i.name=r?hc.sanitizeNodeName(r):"",i.userData.originalName=r,i.ID=n,o.bones[s]=i,null!==e&&i.add(e)}}))}})),i}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=jm.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new on;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let r=1;void 0!==n.NearPlane&&(r=n.NearPlane.value/1e3);let i=1e3;void 0!==n.FarPlane&&(i=n.FarPlane.value/1e3);let s=window.innerWidth,o=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(s=n.AspectWidth.value,o=n.AspectHeight.value);const a=s/o;let l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);const c=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new vr(l,a,r,i),null!==c&&t.setFocalLength(c);break;case 1:t=new Gr(-s/2,s/2,o/2,-o/2,r,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new on}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=jm.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new on;else{let e;e=void 0===n.LightType?0:n.LightType.value;let r=16777215;void 0!==n.Color&&(r=(new En).fromArray(n.Color.value).convertSRGBToLinear());let i=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(i=0);let s=0;void 0!==n.FarAttenuationEnd&&(s=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const o=1;switch(e){case 0:t=new ec(r,i,s,o);break;case 1:t=new nc(r,i);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=Ce(n.InnerAngle.value));let a=0;void 0!==n.OuterAngle&&(a=Ce(n.OuterAngle.value),a=Math.max(a,1)),t=new Yl(r,i,s,e,a,o);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new ec(r,i)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,i=null,s=null;const o=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&o.push(n.get(e.ID))})),o.length>1?s=o:o.length>0?s=o[0]:(s=new hl({name:Nl.DEFAULT_MATERIAL_NAME,color:13421772}),o.push(s)),"color"in i.attributes&&o.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(r=new Fo(i,s),r.normalizeSkinWeights()):r=new lr(i,s),r}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new ea({name:Nl.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new oa(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?lg(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){"LookAtProperty"in t&&Wm.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=jm.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),qm.add(e.target)):e.lookAt((new it).fromArray(t))}}}))}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const i in e){const s=e[i];Wm.get(parseInt(s.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;Wm.get(t).parents.forEach((function(e){n.has(e.ID)&&n.get(e.ID).bind(new jo(s.bones),r[e.ID])}))}}))}}parsePoseNodes(){const e={};if("Pose"in jm.Objects){const t=jm.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach((function(t){e[t.Node]=(new Ot).fromArray(t.Matrix.a)})):e[r.Node]=(new Ot).fromArray(r.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in jm){if("AmbientColor"in jm.GlobalSettings){const e=jm.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){const e=new En(t,n,r).convertSRGBToLinear();qm.add(new rc(e,1))}}"UnitScaleFactor"in jm.GlobalSettings&&(qm.userData.unitScaleFactor=jm.GlobalSettings.UnitScaleFactor.value)}}}class Ym{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in jm.Objects){const n=jm.Objects.Geometry;for(const r in n){const i=Wm.get(parseInt(r)),s=this.parseGeometry(i,n[r],e);t.set(parseInt(r),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,i=[],s=e.parents.map((function(e){return jm.Objects.Model[e.ID]}));if(0===s.length)return;const o=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&i.push(n.morphTargets[e.ID])}));const a=s[0],l={};"RotationOrder"in a&&(l.eulerOrder=lg(a.RotationOrder.value)),"InheritType"in a&&(l.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(l.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(l.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(l.scale=a.GeometricScaling.value);const c=ag(l);return this.genGeometry(t,o,i,c)}genGeometry(e,t,n,r){const i=new jn;e.attrName&&(i.name=e.attrName);const s=this.parseGeoNode(e,t),o=this.genBuffers(s),a=new Dn(o.vertex,3);if(a.applyMatrix4(r),i.setAttribute("position",a),o.colors.length>0&&i.setAttribute("color",new Dn(o.colors,3)),t&&(i.setAttribute("skinIndex",new On(o.weightsIndices,4)),i.setAttribute("skinWeight",new Dn(o.vertexWeights,4)),i.FBX_Deformer=t),o.normal.length>0){const e=(new Ie).getNormalMatrix(r),t=new Dn(o.normal,3);t.applyNormalMatrix(e),i.setAttribute("normal",t)}if(o.uvs.forEach((function(e,t){const n=0===t?"uv":`uv${t}`;i.setAttribute(n,new Dn(o.uvs[t],2))})),s.material&&"AllSame"!==s.material.mappingType){let e=o.materialIndex[0],t=0;if(o.materialIndex.forEach((function(n,r){n!==e&&(i.addGroup(t,r-t,e),e=n,t=r)})),i.groups.length>0){const t=i.groups[i.groups.length-1],n=t.start+t.count;n!==o.materialIndex.length&&i.addGroup(n,o.materialIndex.length-n,e)}0===i.groups.length&&i.addGroup(0,o.materialIndex.length,o.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,i=!1,s=[],o=[],a=[],l=[],c=[],u=[];const d=this;return e.vertexIndices.forEach((function(h,f){let p,m=!1;h<0&&(h^=-1,m=!0);let g=[],v=[];if(s.push(3*h,3*h+1,3*h+2),e.color){const t=ig(f,n,h,e.color);a.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[h]&&e.weightTable[h].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,r){let i=n,s=g[r];t.forEach((function(t,n,r){if(i>t){r[n]=i,i=t;const o=e[n];e[n]=s,s=o}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)c.push(v[e]),u.push(g[e])}if(e.normal){const t=ig(f,n,h,e.normal);o.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(p=ig(f,n,h,e.material)[0],p<0&&(d.negativeMaterialIndices=!0,p=0)),e.uv&&e.uv.forEach((function(e,t){const r=ig(f,n,h,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,m&&(d.genFace(t,e,s,p,o,a,l,c,u,r),n++,r=0,s=[],o=[],a=[],l=[],c=[],u=[])})),t}getNormalNewell(e){const t=new it(0,0,0);for(let n=0;n<e.length;n++){const r=e[n],i=e[(n+1)%e.length];t.x+=(r.y-i.y)*(r.z+i.z),t.y+=(r.z-i.z)*(r.x+i.x),t.z+=(r.x-i.x)*(r.y+i.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),n=(Math.abs(t.z)>.5?new it(0,1,0):new it(0,0,1)).cross(t).normalize(),r=t.clone().cross(n).normalize();return{normal:t,tangent:n,bitangent:r}}flattenVertex(e,t,n){return new Re(e.dot(t),e.dot(n))}genFace(e,t,n,r,i,s,o,a,l,c){let u;if(c>3){const e=[];for(let r=0;r<n.length;r+=3)e.push(new it(t.vertexPositions[n[r]],t.vertexPositions[n[r+1]],t.vertexPositions[n[r+2]]));const{tangent:r,bitangent:i}=this.getNormalTangentAndBitangent(e),s=[];for(const t of e)s.push(this.flattenVertex(t,r,i));u=ol.triangulateShape(s,[])}else u=[[0,1,2]];for(const[c,d,h]of u)e.vertex.push(t.vertexPositions[n[3*c]]),e.vertex.push(t.vertexPositions[n[3*c+1]]),e.vertex.push(t.vertexPositions[n[3*c+2]]),e.vertex.push(t.vertexPositions[n[3*d]]),e.vertex.push(t.vertexPositions[n[3*d+1]]),e.vertex.push(t.vertexPositions[n[3*d+2]]),e.vertex.push(t.vertexPositions[n[3*h]]),e.vertex.push(t.vertexPositions[n[3*h+1]]),e.vertex.push(t.vertexPositions[n[3*h+2]]),t.skeleton&&(e.vertexWeights.push(a[4*c]),e.vertexWeights.push(a[4*c+1]),e.vertexWeights.push(a[4*c+2]),e.vertexWeights.push(a[4*c+3]),e.vertexWeights.push(a[4*d]),e.vertexWeights.push(a[4*d+1]),e.vertexWeights.push(a[4*d+2]),e.vertexWeights.push(a[4*d+3]),e.vertexWeights.push(a[4*h]),e.vertexWeights.push(a[4*h+1]),e.vertexWeights.push(a[4*h+2]),e.vertexWeights.push(a[4*h+3]),e.weightsIndices.push(l[4*c]),e.weightsIndices.push(l[4*c+1]),e.weightsIndices.push(l[4*c+2]),e.weightsIndices.push(l[4*c+3]),e.weightsIndices.push(l[4*d]),e.weightsIndices.push(l[4*d+1]),e.weightsIndices.push(l[4*d+2]),e.weightsIndices.push(l[4*d+3]),e.weightsIndices.push(l[4*h]),e.weightsIndices.push(l[4*h+1]),e.weightsIndices.push(l[4*h+2]),e.weightsIndices.push(l[4*h+3])),t.color&&(e.colors.push(s[3*c]),e.colors.push(s[3*c+1]),e.colors.push(s[3*c+2]),e.colors.push(s[3*d]),e.colors.push(s[3*d+1]),e.colors.push(s[3*d+2]),e.colors.push(s[3*h]),e.colors.push(s[3*h+1]),e.colors.push(s[3*h+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[3*c]),e.normal.push(i[3*c+1]),e.normal.push(i[3*c+2]),e.normal.push(i[3*d]),e.normal.push(i[3*d+1]),e.normal.push(i[3*d+2]),e.normal.push(i[3*h]),e.normal.push(i[3*h+1]),e.normal.push(i[3*h+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(o[n][2*c]),e.uvs[n].push(o[n][2*c+1]),e.uvs[n].push(o[n][2*d]),e.uvs[n].push(o[n][2*d+1]),e.uvs[n].push(o[n][2*h]),e.uvs[n].push(o[n][2*h+1])}))}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const s=jm.Objects.Geometry[n.geoID];void 0!==s&&i.genMorphGeometry(e,t,s,r,n.name)}))}))}genMorphGeometry(e,t,n,r,i){const s=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],o=void 0!==n.Vertices?n.Vertices.a:[],a=void 0!==n.Indexes?n.Indexes.a:[],l=3*e.attributes.position.count,c=new Float32Array(l);for(let e=0;e<a.length;e++){const t=3*a[e];c[t]=o[3*e],c[t+1]=o[3*e+1],c[t+2]=o[3*e+2]}const u={vertexIndices:s,vertexPositions:c},d=this.genBuffers(u),h=new Dn(d.vertex,3);h.name=i||n.attrName,h.applyMatrix4(r),e.morphAttributes.position.push(h)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let i=[];"IndexToDirect"===n&&(i=e.ColorIndex.a);for(let e=0,t=new En;e<r.length;e+=4)t.fromArray(r,e).convertSRGBToLinear().toArray(r,e);return{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,i=[];for(let e=0;e<r.length;++e)i.push(e);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new jn;const n=t-1,r=e.KnotVector.a,i=[],s=e.Points.a;for(let e=0,t=s.length;e<t;e+=4)i.push((new Je).fromArray(s,e));let o,a;if("Closed"===e.Form)i.push(i[0]);else if("Periodic"===e.Form){o=n,a=r.length-1-o;for(let e=0;e<n;++e)i.push(i[e])}const l=new Vm(n,r,i,o,a).getPoints(12*i.length);return(new jn).setFromPoints(l)}}class Km{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const r=t[n],i=this.addClip(r);e.push(i)}return e}parseClips(){if(void 0===jm.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=jm.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const e={id:r.id,attr:r.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=jm.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(ng),values:t[n].KeyValueFloat.a},i=Wm.get(r.id);if(void 0!==i){const t=i.parents[0].ID,n=i.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=r:n.match(/Y/)?e.get(t).curves.y=r:n.match(/Z/)?e.get(t).curves.z=r:n.match(/DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=r)}}}parseAnimationLayers(e){const t=jm.Objects.AnimationLayer,n=new Map;for(const r in t){const t=[],i=Wm.get(parseInt(r));void 0!==i&&(i.children.forEach((function(n,r){if(e.has(n.ID)){const i=e.get(n.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===t[r]){const e=Wm.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const i=jm.Objects.Model[e.toString()];if(void 0===i)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const s={modelName:i.attrName?hc.sanitizeNodeName(i.attrName):"",ID:i.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};qm.traverse((function(e){e.ID===i.id&&(s.transform=e.matrix,e.userData.transformData&&(s.eulerOrder=e.userData.transformData.eulerOrder))})),s.transform||(s.transform=new Ot),"PreRotation"in i&&(s.preRotation=i.PreRotation.value),"PostRotation"in i&&(s.postRotation=i.PostRotation.value),t[r]=s}}t[r]&&(t[r][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===t[r]){const e=Wm.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,i=Wm.get(e).parents[0].ID,s=Wm.get(i).parents[0].ID,o=Wm.get(s).parents[0].ID,a=jm.Objects.Model[o],l={modelName:a.attrName?hc.sanitizeNodeName(a.attrName):"",morphName:jm.Objects.Deformer[e].attrName};t[r]=l}t[r][i.attr]=i}}})),n.set(parseInt(r),t))}return n}parseAnimStacks(e){const t=jm.Objects.AnimationStack,n={};for(const r in t){const i=Wm.get(parseInt(r)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const s=e.get(i[0].ID);n[r]={name:t[r].attrName,layer:s}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new Rl(e.name,-1,t)}generateTracks(e){const t=[];let n=new it,r=new it;if(e.transform&&e.transform.decompose(n,new rt,r),n=n.toArray(),r=r.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==r&&t.push(r)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,r){const i=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(i,t,n);return new Pl(e+"."+r,i,s)}generateRotationTrack(e,t,n,r,i){let s,o;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){const e=this.interpolateRotations(t.x,t.y,t.z,i);s=e[0],o=e[1]}void 0!==n&&((n=n.map(Ce)).push(i),n=(new jt).fromArray(n),n=(new rt).setFromEuler(n)),void 0!==r&&((r=r.map(Ce)).push(i),r=(new jt).fromArray(r),r=(new rt).setFromEuler(r).invert());const a=new rt,l=new jt,c=[];if(!o||!s)return new Ml(e+".quaternion",[],[]);for(let e=0;e<o.length;e+=3)l.set(o[e],o[e+1],o[e+2],i),a.setFromEuler(l),void 0!==n&&a.premultiply(n),void 0!==r&&a.multiply(r),e>2&&(new rt).fromArray(c,(e-3)/3*4).dot(a)<0&&a.set(-a.x,-a.y,-a.z,-a.w),a.toArray(c,e/3*4);return new Ml(e+".quaternion",s,c)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),r=qm.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Al(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let r=1;r<t.length;r++){const i=t[r];i!==n&&(t[e]=i,n=i,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const r=n,i=[];let s=-1,o=-1,a=-1;return e.forEach((function(e){if(t.x&&(s=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==s){const e=t.x.values[s];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==o){const e=t.y.values[o];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==a){const e=t.z.values[a];i.push(e),r[2]=e}else i.push(r[2])})),i}interpolateRotations(e,t,n,r){const i=[],s=[];i.push(e.times[0]),s.push(Ce(e.values[0])),s.push(Ce(t.values[0])),s.push(Ce(n.values[0]));for(let o=1;o<e.values.length;o++){const a=[e.values[o-1],t.values[o-1],n.values[o-1]];if(isNaN(a[0])||isNaN(a[1])||isNaN(a[2]))continue;const l=a.map(Ce),c=[e.values[o],t.values[o],n.values[o]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;const u=c.map(Ce),d=[c[0]-a[0],c[1]-a[1],c[2]-a[2]],h=[Math.abs(d[0]),Math.abs(d[1]),Math.abs(d[2])];if(h[0]>=180||h[1]>=180||h[2]>=180){const t=Math.max(...h)/180,n=new jt(...l,r),a=new jt(...u,r),c=(new rt).setFromEuler(n),d=(new rt).setFromEuler(a);c.dot(d)&&d.set(-d.x,-d.y,-d.z,-d.w);const f=e.times[o-1],p=e.times[o]-f,m=new rt,g=new jt;for(let e=0;e<1;e+=1/t)m.copy(c.clone().slerp(d.clone(),e)),i.push(f+e*p),g.setFromQuaternion(m,r),s.push(g.x),s.push(g.y),s.push(g.z)}else i.push(e.times[o]),s.push(Ce(e.values[o])),s.push(Ce(t.values[o])),s.push(Ce(n.values[o]))}return[i,s]}}class Qm{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new eg,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){const i=e.match(/^[\s\t]*;/),s=e.match(/^[\s\t]*$/);if(i||s)return;const o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):a?t.parseNodeProperty(e,a,n[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},s=this.parseNodeAttr(r),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in o?("PoseNode"===n?o.PoseNode.push(i):void 0!==o[n].id&&(o[n]={},o[n][o[n].id]=o[n]),""!==s.id&&(o[n][s.id]=i)):"number"==typeof s.id?(o[n]={},o[n][s.id]=i):"Properties70"!==n&&(o[n]="PoseNode"===n?[i]:i),"number"==typeof s.id&&(i.id=s.id),""!==s.name&&(i.attrName=s.name),""!==s.type&&(i.attrType=s.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if("Properties70"!==s.name){if("C"===r){const e=i.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let o=i.split(",").slice(3);o=o.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",i=[t,n],function(e,t){for(let n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i,o),void 0===s[r]&&(s[r]=[])}"Node"===r&&(s.id=i),r in s&&Array.isArray(s[r])?s[r].push(i):"a"!==r?s[r]=i:s.a=i,this.setCurrentProp(s,r),"a"===r&&","!==i.slice(-1)&&(s.a=cg(i))}else this.parseNodeSpecialProperty(e,r,i)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=cg(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],s=r[1],o=r[2],a=r[3];let l=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=cg(l)}this.getPrevNode()[i]={type:s,type2:o,flag:a,value:l},this.setCurrentProp(this.getPrevNode(),i)}}class Jm{parse(e){const t=new $m(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new eg;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&r.add(e.name,e)}return r}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const s=e.getUint8(),o=e.getString(s);if(0===r)return null;const a=[];for(let t=0;t<i;t++)a.push(this.parseProperty(e));const l=a.length>0?a[0]:"",c=a.length>1?a[1]:"",u=a.length>2?a[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){const r=this.parseNode(e,t);null!==r&&this.parseSubNode(o,n,r)}return n.propertyList=a,"number"==typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==o&&(n.name=o),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name)Object.keys(n).forEach((function(e){t[e]=n[e]}));else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],r=n.propertyList[1];const i=n.propertyList[2],s=n.propertyList[3];let o;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),o="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:r,type2:i,flag:s,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),i=e.getUint32(),s=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const o=function(e,t){return Um((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}(new Uint8Array(e.getArrayBuffer(s))),a=new $m(o.buffer);switch(t){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class $m{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const r=n.indexOf(0);return r>=0&&(n=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(n)}}class eg{add(e,t){this[e]=t}}function tg(e){const t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function ng(e){return e/46186158e3}const rg=[];function ig(e,t,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return function(e,t,n,r){for(let i=n,s=0;i<r;i++,s++)e[s]=t[i];return e}(rg,r.buffer,s,o)}const sg=new jt,og=new it;function ag(e){const t=new Ot,n=new Ot,r=new Ot,i=new Ot,s=new Ot,o=new Ot,a=new Ot,l=new Ot,c=new Ot,u=new Ot,d=new Ot,h=new Ot,f=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(og.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(Ce);t.push(e.eulerOrder||jt.DEFAULT_ORDER),n.makeRotationFromEuler(sg.fromArray(t))}if(e.rotation){const t=e.rotation.map(Ce);t.push(e.eulerOrder||jt.DEFAULT_ORDER),r.makeRotationFromEuler(sg.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(Ce);t.push(e.eulerOrder||jt.DEFAULT_ORDER),i.makeRotationFromEuler(sg.fromArray(t)),i.invert()}e.scale&&s.scale(og.fromArray(e.scale)),e.scalingOffset&&a.setPosition(og.fromArray(e.scalingOffset)),e.scalingPivot&&o.setPosition(og.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(og.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(og.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(d.copy(e.parentMatrix),u.copy(e.parentMatrixWorld));const p=n.clone().multiply(r).multiply(i),m=new Ot;m.extractRotation(u);const g=new Ot;g.copyPosition(u);const v=g.clone().invert().multiply(u),y=m.clone().invert().multiply(v),b=s,_=new Ot;if(0===f)_.copy(m).multiply(p).multiply(y).multiply(b);else if(1===f)_.copy(m).multiply(y).multiply(p).multiply(b);else{const e=(new Ot).scale((new it).setFromMatrixScale(d)).clone().invert(),t=y.clone().multiply(e);_.copy(m).multiply(p).multiply(t).multiply(b)}const x=c.clone().invert(),w=o.clone().invert();let E=t.clone().multiply(l).multiply(c).multiply(n).multiply(r).multiply(i).multiply(x).multiply(a).multiply(o).multiply(s).multiply(w);const S=(new Ot).copyPosition(E),A=u.clone().multiply(S);return h.copyPosition(A),E=h.clone().multiply(_),E.premultiply(u.invert()),E}function lg(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function cg(e){return e.split(",").map((function(e){return parseFloat(e)}))}function ug(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,n))}const dg=/^[og]\s*(.+)?/,hg=/^mtllib /,fg=/^usemtl /,pg=/^usemap /,mg=/\s+/,gg=new it,vg=new it,yg=new it,bg=new it,_g=new it,xg=new En;function wg(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,i=this.object.geometry.normals;gg.fromArray(r,e),vg.fromArray(r,t),yg.fromArray(r,n),_g.subVectors(yg,vg),bg.subVectors(gg,vg),_g.cross(bg),_g.normalize(),i.push(_g.x,_g.y,_g.z),i.push(_g.x,_g.y,_g.z),i.push(_g.x,_g.y,_g.z)},addColor:function(e,t,n){const r=this.colors,i=this.object.geometry.colors;void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,s,o,a,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),d=this.parseVertexIndex(t,c),h=this.parseVertexIndex(n,c);if(this.addVertex(u,d,h),this.addColor(u,d,h),void 0!==o&&""!==o){const e=this.normals.length;u=this.parseNormalIndex(o,e),d=this.parseNormalIndex(a,e),h=this.parseNormalIndex(l,e),this.addNormal(u,d,h)}else this.addFaceNormal(u,d,h);if(void 0!==r&&""!==r){const e=this.uvs.length;u=this.parseUVIndex(r,e),d=this.parseUVIndex(i,e),h=this.parseUVIndex(s,e),this.addUV(u,d,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const r=this.parseVertexIndex(e[n],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let t=0,r=e.length;t<r;t++)this.addVertexLine(this.parseVertexIndex(e[t],n));for(let e=0,n=t.length;e<n;e++)this.addUVLine(this.parseUVIndex(t[e],r))}};return e.startObject("",!1),e}class Eg extends Nl{constructor(e){super(e),this.materials=null}load(e,t,n,r){const i=this,s=new Ul(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(i.parse(n))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new wg;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r=[];for(let e=0,i=n.length;e<i;e++){const i=n[e].trimStart();if(0===i.length)continue;const s=i.charAt(0);if("#"!==s)if("v"===s){const e=i.split(mg);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(xg.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])).convertSRGBToLinear(),t.colors.push(xg.r,xg.g,xg.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===s){const e=i.slice(1).trim().split(mg),n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const r=n[0];for(let e=1,i=n.length-1;e<i;e++){const i=n[e],s=n[e+1];t.addFace(r[0],i[0],s[0],r[1],i[1],s[1],r[2],i[2],s[2])}}else if("l"===s){const e=i.substring(1).trim().split(" ");let n=[];const r=[];if(-1===i.indexOf("/"))n=e;else for(let t=0,i=e.length;t<i;t++){const i=e[t].split("/");""!==i[0]&&n.push(i[0]),""!==i[1]&&r.push(i[1])}t.addLineGeometry(n,r)}else if("p"===s){const e=i.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(r=dg.exec(i))){const e=(" "+r[0].slice(1).trim()).slice(1);t.startObject(e)}else if(fg.test(i))t.object.startMaterial(i.substring(7).trim(),t.materialLibraries);else if(hg.test(i))t.materialLibraries.push(i.substring(7).trim());else if(pg.test(i))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===s){if(r=i.split(" "),r.length>1){const e=r[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===i)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+i+'"')}}t.finalize();const i=new io;if(i.materialLibraries=[].concat(t.materialLibraries),!0==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,n=t.objects.length;e<n;e++){const n=t.objects[e],r=n.geometry,s=n.materials,o="Line"===r.type,a="Points"===r.type;let l=!1;if(0===r.vertices.length)continue;const c=new jn;c.setAttribute("position",new Dn(r.vertices,3)),r.normals.length>0&&c.setAttribute("normal",new Dn(r.normals,3)),r.colors.length>0&&(l=!0,c.setAttribute("color",new Dn(r.colors,3))),!0===r.hasUVIndices&&c.setAttribute("uv",new Dn(r.uvs,2));const u=[];for(let e=0,n=s.length;e<n;e++){const n=s[e],r=n.name+"_"+n.smooth+"_"+l;let i=t.materials[r];if(null!==this.materials)if(i=this.materials.create(n.name),!o||!i||i instanceof ea){if(a&&i&&!(i instanceof da)){const e=new da({size:10,sizeAttenuation:!1});Tn.prototype.copy.call(e,i),e.color.copy(i.color),e.map=i.map,i=e}}else{const e=new ea;Tn.prototype.copy.call(e,i),e.color.copy(i.color),i=e}void 0===i&&(i=o?new ea:a?new da({size:1,sizeAttenuation:!1}):new hl,i.name=n.name,i.flatShading=!n.smooth,i.vertexColors=l,t.materials[r]=i),u.push(i)}let d;if(u.length>1){for(let e=0,t=s.length;e<t;e++){const t=s[e];c.addGroup(t.groupStart,t.groupCount,e)}d=o?new ca(c,u):a?new ga(c,u):new lr(c,u)}else d=o?new ca(c,u[0]):a?new ga(c,u[0]):new lr(c,u[0]);d.name=n.name,i.add(d)}else if(t.vertices.length>0){const e=new da({size:1,sizeAttenuation:!1}),n=new jn;n.setAttribute("position",new Dn(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new Dn(t.colors,3)),e.vertexColors=!0);const r=new ga(n,e);i.add(r)}return i}}class Sg extends Hl{constructor(e){super(e),this.type=z}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,s=0,o="",a=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=a.indexOf("\n"))&&s<t&&r<e.byteLength;)o+=a,s+=a.length,r+=128,a+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=s+i+1),o+a.slice(0,i))},r=function(e,t,n,r){const i=e[t+3],s=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*s,n[r+1]=e[t+1]*s,n[r+2]=e[t+2]*s,n[r+3]=1},i=function(e,t,n,r){const i=e[t+3],s=Math.pow(2,i-128)/255;n[r+0]=Rn.toHalfFloat(Math.min(e[t+0]*s,65504)),n[r+1]=Rn.toHalfFloat(Math.min(e[t+1]*s,65504)),n[r+2]=Rn.toHalfFloat(Math.min(e[t+2]*s,65504)),n[r+3]=Rn.toHalfFloat(1)},s=new Uint8Array(e);s.pos=0;const o=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,o=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=n(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),a.valid|=1,a.programtype=c[1],a.string+=l+"\n";l=n(e),!1!==l;)if(a.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(a.gamma=parseFloat(c[1])),(c=l.match(i))&&(a.exposure=parseFloat(c[1])),(c=l.match(s))&&(a.valid|=2,a.format=c[1]),(c=l.match(o))&&(a.valid|=4,a.height=parseInt(c[1],10),a.width=parseInt(c[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=l+"\n";return 2&a.valid||t(3,"missing format specifier"),4&a.valid||t(3,"missing image size specifier"),a}(s),a=o.width,l=o.height,c=function(e,n,r){const i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);i!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const s=new Uint8Array(4*n*r);s.length||t(4,"unable to allocate buffer space");let o=0,a=0;const l=4*i,c=new Uint8Array(4),u=new Uint8Array(l);let d=r;for(;d>0&&a<e.byteLength;){a+4>e.byteLength&&t(1),c[0]=e[a++],c[1]=e[a++],c[2]=e[a++],c[3]=e[a++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==i||t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&a<e.byteLength;){n=e[a++];const i=n>128;if(i&&(n-=128),(0===n||r+n>l)&&t(3,"bad scanline data"),i){const t=e[a++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(a,a+n),r),r+=n,a+=n}const h=i;for(let e=0;e<h;e++){let t=0;s[o]=u[e+t],t+=i,s[o+1]=u[e+t],t+=i,s[o+2]=u[e+t],t+=i,s[o+3]=u[e+t],o+=4}d--}return s}(s.subarray(s.pos),a,l);let u,d,h;switch(this.type){case F:h=c.length/4;const e=new Float32Array(4*h);for(let t=0;t<h;t++)r(c,4*t,e,4*t);u=e,d=F;break;case z:h=c.length/4;const t=new Uint16Array(4*h);for(let e=0;e<h;e++)i(c,4*e,t,4*e);u=t,d=z;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:a,height:l,data:u,header:o.string,gamma:o.gamma,exposure:o.exposure,type:d}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){switch(e.type){case F:case z:e.colorSpace=ne,e.minFilter=O,e.magFilter=O,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,r)}}class Ag extends Nl{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Ul(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(e){const n=i.parse(JSON.parse(e));t&&t(n)}),n,r)}parse(e){return new Tg(e)}}class Tg{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function(e,t,n){const r=Array.from(e),i=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[];let a=0,l=0;for(let e=0;e<r.length;e++){const t=r[e];if("\n"===t)a=0,l-=s;else{const e=Mg(t,i,a,l,n);a+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data);for(let e=0,t=r.length;e<t;e++)n.push(...r[e].toShapes());return n}}function Mg(e,t,n,r,i){const s=i.glyphs[e]||i.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const o=new vc;let a,l,c,u,d,h,f,p;if(s.o){const e=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let i=0,s=e.length;i<s;)switch(e[i++]){case"m":a=e[i++]*t+n,l=e[i++]*t+r,o.moveTo(a,l);break;case"l":a=e[i++]*t+n,l=e[i++]*t+r,o.lineTo(a,l);break;case"q":c=e[i++]*t+n,u=e[i++]*t+r,d=e[i++]*t+n,h=e[i++]*t+r,o.quadraticCurveTo(d,h,c,u);break;case"b":c=e[i++]*t+n,u=e[i++]*t+r,d=e[i++]*t+n,h=e[i++]*t+r,f=e[i++]*t+n,p=e[i++]*t+r,o.bezierCurveTo(d,h,f,p,c,u)}}return{offsetX:s.ha*t,path:o}}function Cg(e){const t=new Map,n=new Map,r=e.clone();return Pg(e,r,(function(e,r){t.set(r,e),n.set(e,r)})),r.traverse((function(e){if(!e.isSkinnedMesh)return;const r=e,i=t.get(e),s=i.skeleton.bones;r.skeleton=i.skeleton.clone(),r.bindMatrix.copy(i.bindMatrix),r.skeleton.bones=s.map((function(e){return n.get(e)})),r.bind(r.skeleton,r.bindMatrix)})),r}function Pg(e,t,n){n(e,t);for(let r=0;r<e.children.length;r++)Pg(e.children[r],t.children[r],n)}var Rg;function Ig(e){return Ig="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ig(e)}function Lg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Og(r.key),r)}}function kg(e,t,n){return(t=Og(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Og(e){var t=function(e,t){if("object"!=Ig(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ig(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ig(t)?t:String(t)}var Ng="DEBUG",Dg="INFO",Bg="NETWORK",Ug="WARNING",Fg="ERROR",zg=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"setMode",value:function(t){switch(e.mode=t,e.mode){case e.MODE_DEBUG:e.levels=[Ng,Dg,Bg,Ug,Fg];break;case e.MODE_RELEASE:e.levels=[Ug,Fg]}}},{key:"getMode",value:function(){return this.mode}},{key:"getCSS",value:function(e){return"background: "+e+";background-repeat: no-repeat;color: #1df9a8;line-height: 16px;padding: 1px 0;margin: 0;user-select: none;-webkit-user-select: none;-moz-user-select: none;"}},{key:"getLink",value:function(e){return"background: "+e+";background-repeat: no-repeat;font-size: 12px;color: #446d96;line-height: 14px"}},{key:"log",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ng,r=arguments.length>2?arguments[2]:void 0;if(e.levels.indexOf(n)<0)return!1;var i="";switch(n){case Dg:i="background: #308AE4; color: #fff; padding: 1px 4px";break;case Ug:i="background: #f7a148; color: #fff; padding: 1px 4px";break;case Fg:i="background: #DB5252; color: #fff; padding: 1px 4px";break;case Bg:i="background: #7D2998; color: #fff; padding: 1px 4px";break;default:i="background: #ADADAD; color: #fff; padding: 1px 4px"}return r?console.log("%c%s",i,n,t,r):console.log("%c%s",i,n,t),!0}},{key:"system",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log("%c %c %c %s %c %c %c %c%s",e.getCSS("#5C6166"),e.getCSS("#4F5357"),e.getCSS("#313335"),t,e.getCSS("#4F5357"),e.getCSS("#5C6166"),e.getLink("none"),e.getLink("none"),n)}},{key:"debug",value:function(t,n){return e.log(t,Ng,n)}},{key:"info",value:function(t,n){return e.log(t,Dg,n)}},{key:"net",value:function(t,n){return e.log(t,Bg,n)}},{key:"warn",value:function(t,n){return e.log(t,Ug,n)}},{key:"error",value:function(t,n){return e.log(t,Fg,n)}}],null&&Lg(t.prototype,null),n&&Lg(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Hg(e){return Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(e)}function Gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jg(r.key),r)}}function Vg(e,t,n){return(t=jg(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jg(e){var t=function(e,t){if("object"!=Hg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Hg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Hg(t)?t:String(t)}Rg=zg,kg(zg,"MODE_DEBUG","MODE_DEBUG"),kg(zg,"MODE_RELEASE","MODE_RELEASE"),kg(zg,"mode",Rg.MODE_DEBUG),kg(zg,"levels",[Ng,Dg,Bg,Ug,Fg]);var Wg=function(e){return e.texture="texture",e.cubeTexture="cubeTexture",e.hdr="hdr",e.obj="obj",e.fbx="fbx",e.glb="glb",e.gltf="gltf",e.json="json",e.font="font",e.gz="gz",e.gzip="gzip",e}({}),qg=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Vg(this,"cache",{}),Vg(this,"sets",{}),Vg(this,"setCounter",0),e.instance)throw new Error("Don't use ThreeLoader.constructor(), it's SINGLETON, use getInstance() method");this._params=t||{},this._params.retryCount||(this._params.retryCount=0)}var t,n,r;return t=e,n=[{key:"logDebug",value:function(e,t){zg.debug("ThreeLoader: ".concat(e),t)}},{key:"logWarn",value:function(e,t){zg.warn("ThreeLoader: ".concat(e),t)}},{key:"logError",value:function(e,t){zg.error("ThreeLoader: ".concat(e),t)}},{key:"getFileType",value:function(e){var t=e;t.indexOf("?")>0&&(t=t.substring(0,t.indexOf("?")));for(var n="",r=t.length-1;r>=0;r--){if("."==t[r]){if(n==Wg.gz||n==Wg.gzip){n="";continue}break}n=t[r]+n}switch(n.toLowerCase(),n){case"png":case"jpg":case"jpeg":case"bmp":case"webp":case"gif":case"dds":case"ogg":case"ogv":return Wg.texture;default:return n}}},{key:"isAliasInLoader",value:function(e){if(this.cache[e])return this.logWarn("item exists in cache ".concat(e,":"),this.cache[e]),!0;for(var t in this.sets){var n=this.sets[t];if(n)for(var r=0;r<n.loadItem.length;r++){var i=n.loadItem[r];if(i.alias==e)return this.logWarn("item exists in loading sets ".concat(e,":"),i),!0}}return!1}},{key:"createNewSet",value:function(e){this.setCounter++;var t=this.setCounter;return this.sets[t]={loadItem:[],callbacks:e?[e]:[],loadCounter:0},t}},{key:"addFileToSet",value:function(e,t){if(this.isAliasInLoader(t.alias))throw new Error("addFileToSet() -> File with same alias (".concat(t.alias,") already exists in loader!"));this.sets[e].loadItem.push({type:null!=t.type?t.type:this.getFileType(t.file),alias:t.alias,file:t.file})}},{key:"addCubeTextureToSet",value:function(e,t,n){this.isAliasInLoader(t)?this.logError("addCubeTextureToSet() -> File with same alias (".concat(t,") already exists in loader!")):this.sets[e].loadItem.push({type:Wg.cubeTexture,alias:t,files:n})}},{key:"addFontToSet",value:function(e,t,n){this.isAliasInLoader(t)?this.logError("addFontToSet() -> File with same alias (".concat(t,") already exists in loader!")):this.sets[e].loadItem.push({type:Wg.font,alias:t,file:n})}},{key:"loadSet",value:function(e,t){for(var n=this.createNewSet(t),r=0;r<e.length;r++){var i=e[r];switch(i.type){case Wg.cubeTexture:this.addCubeTextureToSet(n,i.alias,i.files);break;case Wg.font:this.addFontToSet(n,i.alias,i.file);default:this.addFileToSet(n,i)}}this.startSetLoading(n)}},{key:"startSetLoading",value:function(e,t){var n=this.sets[e];t&&n.callbacks.push(t),n.loadItem.length<=0&&this.onSetFileFinished(e);for(var r=0;r<n.loadItem.length;r++)this.loadSetItem(e,n.loadItem[r])}},{key:"onSetFileFinished",value:function(e,t,n){var r=this.sets[e];if(r.loadCounter++,this.logDebug("onSetFileFinished ".concat(null!=n?"(ERROR)":""," (").concat(null==t?void 0:t.alias,"): "),{loadCounter:r.loadCounter,totalFiles:r.loadItem.length}),r.loadCounter>=r.loadItem.length){for(var i=0;i<r.callbacks.length;i++){var s=r.callbacks[i];s.onComplete&&s.onComplete.call(s.context)}this.sets[e]=null}else for(var o=0;o<r.callbacks.length;o++){var a=r.callbacks[o];a.onProgress&&a.onProgress.call(a.context,r.loadCounter/r.loadItem.length)}}},{key:"loadSetItem",value:function(e,t){var n=this;switch(t.type){case Wg.texture:this.loadTexture(t.alias,t.file,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(r){n.onSetFileFinished(e,t,r)}});break;case Wg.cubeTexture:this.loadCubeTexture(t.alias,t.files,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(){n.onSetFileFinished(e,t)}});break;case Wg.hdr:this.loadHdr(t.alias,t.file,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(){n.onSetFileFinished(e,t)}});break;case Wg.obj:this.loadObj(t.alias,t.file,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(r){n.onSetFileFinished(e,t,r)}});break;case Wg.fbx:this.loadFBX(t.alias,t.file,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(r){n.onSetFileFinished(e,t,r)}});break;case Wg.glb:case Wg.gltf:this.loadGLB(t.alias,t.file,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(){n.onSetFileFinished(e,t)}});break;case Wg.json:this.loadJSON(t.alias,t.file,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(){n.onSetFileFinished(e,t)}});break;case Wg.font:this.loadFont(t.alias,t.file,{onComplete:function(){n.onSetFileFinished(e,t)},onError:function(){n.onSetFileFinished(e,t)}});break;default:this.logError("loadByData() -> unknown data type: "+t.type)}}},{key:"loadTexture",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new Gl;s.crossOrigin="Anonymous",s.load(t,(function(i){r.logDebug("loadTexture: Complete (".concat(e,") file(").concat(t,"):"),i),r._params.textureMapping&&(i.mapping=r._params.textureMapping),r.cache[e]=i,n&&n.onComplete&&n.onComplete.call(n.context)}),(function(e){var t=e.loaded/e.total;n&&n.onProgress&&n.onProgress.call(n.context,t)}),(function(s){var o=r._params.retryCount;i>=o?(r.logError("loadTexture: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadTexture: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadTexture(e,t,n,i)}),100))}))}},{key:"loadCubeTexture",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new zl;s.crossOrigin="Anonymous",s.load(t,(function(t){r.cache[e]=t,r.logDebug("loadCubeTexture: load complete (".concat(e,"):"),t),n&&n.onComplete&&n.onComplete.call(n.context)}),(function(e){var t=e.loaded/e.total;n&&n.onProgress&&n.onProgress.call(n.context,t)}),(function(s){var o=r._params.retryCount;i>=o?(r.logError("loadCubeTexture: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadCubeTexture: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadCubeTexture(e,t,n,i)}),100))}))}},{key:"loadHdr",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new Sg;s.crossOrigin="Anonymous",s.load(t,(function(i){r._params.textureMapping&&(i.mapping=r._params.textureMapping),r.cache[e]=i,r.logDebug("loadHdr: Complete (".concat(e,") file(").concat(t,"):"),i),n&&n.onComplete&&n.onComplete.call(n.context)}),(function(e){var t=e.loaded/e.total;n&&n.onProgress&&n.onProgress.call(n.context,t)}),(function(s){var o=r._params.retryCount;i>=o?(r.logError("loadHdr: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadHdr: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadHdr(e,t,n,i)}),200))}))}},{key:"loadObj",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new Eg;s.crossOrigin="Anonymous",s.load(t,(function(t){r.cache[e]=t,r.logDebug("loadObj: Complete (".concat(e,"):"),t),n&&n.onComplete&&n.onComplete.call(n.context)}),(function(e){var t=e.loaded/e.total;n&&n.onProgress&&n.onProgress.call(n.context,t)}),(function(s){var o=r._params.retryCount;i>=o?(r.logError("loadObj: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadObj: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadObj(e,t,n,i)}),100))}))}},{key:"loadFBX",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new Xm;s.crossOrigin="Anonymous",s.load(t,(function(t){r.cache[e]=t,r.logDebug("loadFBX: Complete (".concat(e,"):"),t),n&&n.onComplete&&n.onComplete.call(n.context)}),(function(e){var t=e.loaded/e.total;n&&n.onProgress&&n.onProgress.call(n.context,t)}),(function(s){var o=r._params.retryCount;i>=o?(r.logError("loadFBX: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadFBX: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadFBX(e,t,n,i)}),200))}))}},{key:"loadGLB",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(new bc).load(t,(function(t){r.cache[e]=t,r.logDebug("loadGLB: load complete (".concat(e,"):"),t),n&&n.onComplete&&n.onComplete.call(n.context)}),(function(e){var t=e.loaded/e.total;n&&n.onProgress&&n.onProgress.call(n.context,t)}),(function(s){var o=r._params.retryCount;i>=o?(r.logError("loadGLB: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadGLB: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadGLB(e,t,n,i)}),200))}))}},{key:"loadJSONFromUrl",value:function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.setRequestHeader("X-Requested-With","true"),n.setRequestHeader("Accept","application/json"),n.onload=function(){var e=n.status;4===n.readyState&&e>=400&&e<=599?t(e,n.response):t(null,n.response)},n.send()}},{key:"loadJSON",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.loadJSONFromUrl(t,(function(s,o){if(null!==s){var a=r._params.retryCount;i>=a?(r.logError("loadJSON: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadJSON: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadJSON(e,t,n,i)}),200))}else r.cache[e]=o,r.logDebug("loadJSON: Complete (".concat(e,"):"),o),n&&n.onComplete&&n.onComplete.call(n.context)}))}},{key:"loadFont",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(new Ag).load(t,(function(t){r.cache[e]=t,r.logDebug("loadFont: load complete (".concat(e,"):"),t),n&&n.onComplete&&n.onComplete.call(n.context)}),(function(e){var t=e.loaded/e.total;n&&n.onProgress&&n.onProgress.call(n.context,t)}),(function(s){var o=r._params.retryCount;i>=o?(r.logError("loadFont: ERROR (".concat(i," retries):"),s),n&&n.onError&&n.onError.call(n.context,s)):(i++,r.logWarn("loadFont: Retry ".concat(i," (").concat(e,")")),setTimeout((function(){r.loadFont(e,t,n,i)}),200))}))}},{key:"getTexture",value:function(e){var t=this.cache[e];return t||this.logWarn("getTexture() -> key not found: "+e),t}},{key:"getCubeTexture",value:function(e){var t=this.cache[e];return t||this.logWarn("getCubeTexture() -> key not found: "+e),t}},{key:"getModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.cache[e];return n?t?n:n.scene&&n.scene instanceof io?n.scene.clone(!0):Cg(n):(this.logWarn("getModel() -> key not found: ".concat(e)),null)}},{key:"getJSON",value:function(e){var t=this.cache[e];return t||this.logWarn("ThreeLoader.getJSON() key not found: "+e),t}},{key:"getFont",value:function(e){var t=this.cache[e];return t||this.logWarn("ThreeLoader.getFont() key not found: "+e),t}}],r=[{key:"getInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e.instance||(e.instance=new e(t)),e.instance}}],n&&Gg(t.prototype,n),r&&Gg(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xg(e){return Xg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xg(e)}function Zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yg(r.key),r)}}function Yg(e){var t=function(e,t){if("object"!=Xg(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Xg(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xg(t)?t:String(t)}function Kg(e,t){return Kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Kg(e,t)}function Qg(e){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qg(e)}Vg(qg,"instance",null);var Jg=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kg(e,t)}(o,e);var t,n,r,i,s=(r=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qg(r);if(i){var n=Qg(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Xg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function o(e,t,n,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(i=s.call(this))._parentPos=e,i._camera=t,i._starScale=n,i._params=r,i._params.mainColor||(i._params.mainColor={r:.9,g:.6,b:.3}),i._params.coronaColor||(i._params.coronaColor={r:.9,g:.3,b:.1});var a=i._params.mainColor,l=i._params.coronaColor,c=(qg.getInstance(),(new Gl).load("/assets/sun/surfTexture.jpg"));i._uniforms={tSun:{value:c},centerColor:{value:{x:a.r,y:a.g,z:a.b}},coronaColor:{value:{x:l.r,y:l.g,z:l.b}},coronaNoiseParam1:{value:3},coronaNoiseParam2:{value:4},coronaResolution:{value:25},iTime:{value:0},mx:{value:0},my:{value:0}},i._material=new mr({vertexShader:"\nvarying vec2 vUv;\nvarying vec3 vNormal;\n\nvoid main() {\n    vUv = uv;\n    vNormal = normalize(normalMatrix * normal);\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    vec4 viewPosition = modelViewMatrix * vec4(position, 1.0);\n    gl_Position = projectionMatrix * mvPosition;\n}\n",fragmentShader:"\nvarying vec2 vUv;\nvarying vec3 vNormal;\n\nuniform vec2 cameraRelativePosition;\nuniform sampler2D tSun;\nuniform float iTime;\nuniform float mx;\nuniform float my;\nuniform vec3 centerColor;\nuniform vec3 coronaColor;\nuniform float coronaNoiseParam1; // default: 2.\nuniform float coronaNoiseParam2; // default: 3.\nuniform float coronaResolution;\nuniform vec3 hueShift;\n\n#define GLOW_INTENSITY -.1\n#define NOISE 0.\n#define MOUSE_SENSIBILITY .5\n\n#define iterations 22\n#define formuparam .55\n\n#define volstepsBack 20\n#define volstepsFront 2\n#define stepsize 0.11\n\n#define zoom 0.800\n#define tile 0.850\n#define speed 0.0005 \n\n#define brightnessStar 0.0015\n#define darkmatter 0.300\n#define distfading 0.730\n#define saturation 0.750\n   \nfloat snoise(vec3 uv, float res)\n{\n\tconst vec3 s = vec3(1e0, 1e2, 1e4);\n\tuv *= res;\n\tvec3 uv0 = floor(mod(uv, res)) * s;\n\tvec3 uv1 = floor(mod(uv + vec3(1.), res)) * s;\n\tvec3 f = fract(uv);\n    f = f * f * (3.0 - 2.0 * f);\n\tvec4 v = vec4(uv0.x + uv0.y + uv0.z, uv1.x + uv0.y + uv0.z, uv0.x + uv1.y + uv0.z, uv1.x + uv1.y + uv0.z);\n\tvec4 r = fract(sin(v * 1e-3) * 1e5);\n\tfloat r0 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n\tr = fract(sin((v + uv1.z - uv0.z) * 1e-3) * 1e5);\n\tfloat r1 = mix(mix(r.x, r.y, f.x), mix(r.z, r.w, f.x), f.y);\n\treturn mix(r0, r1, f.z) * 2. - 1.;\n}\n\nvec3 GetRayDir(vec2 uv, vec3 ro)\n{\n    vec3 f = normalize(vec3(0) - ro),\n        r = normalize(cross(vec3(0, 1, 0), f)),\n        u = cross(f, r),\n        c = ro + f,\n        i = c + uv.x * r + uv.y * u,\n        rd = normalize(i - ro);\n    return rd;\n}\n\nvec2 normalizeVec2(vec2 aVec2)\n{\n    float newX = aVec2.x;\n    float newY = aVec2.y;\n    while (newX > 1.) newX -= 1.;\n    while (newX < 0.) newX += 1.;\n    while (newY > 1.) newY -= 1.;\n    while (newY < 0.) newY += 1.;\n    return vec2(newX, newY);\n}\n\nvec3 hsl2rgb(vec3 c) {\n    vec3 rgb = clamp(abs(mod(c.x * 6.0 + vec3(0.0, 4.0, 2.0), 6.0) - 3.0) - 1.0, 0.0, 1.0);\n    return c.z + c.y * (rgb - 0.5) * (1.0 - abs(2.0 * c.z - 1.0));\n}\n\nvec3 rgb2hsl(vec3 c) {\n    float \n        cMin = min(min(c.r, c.g), c.b),\n        cMax = max(max(c.r, c.g), c.b),\n        delta = cMax - cMin;\n    vec3 hsl = vec3(0., 0., (cMax + cMin) / 2.);\n    // If it has chroma and isn't gray.\n    if (delta != 0.0) {\n        if (hsl.z < .5) {\n            hsl.y = delta / (cMax + cMin); // saturation\n        }else{\n            hsl.y = delta / (2. - cMax - cMin); // saturation\n        }\n        float deltaR = (((cMax - c.r) / 6.) + (delta / 2.)) / delta,\n            deltaG = (((cMax - c.g) / 6.) + (delta / 2.)) / delta,\n            deltaB = (((cMax - c.b) / 6.) + (delta / 2.)) / delta;\n        // Hue\n        if (c.r == cMax) {\n            hsl.x = deltaB - deltaG;\n        }\n        else if (c.g == cMax) {\n            hsl.x = (1. / 3.) + deltaR - deltaB;\n        }\n        else { // if(c.b==cMax){\n            hsl.x = (2. / 3.) + deltaG - deltaR;\n        }\n        hsl.x = fract(hsl.x);\n    }\n    return hsl;\n}\n\nvec4 mainImage( vec4 fragColor, vec2 fragCoord )\n{\n\tvec4 resultFragColor = vec4(.0, .0, .0, 1.);\n\n    float mouseX = mx;\n    float mouseY = my;\n\n\tfloat brightness = 0.;\n\tfloat radius = 0.24; // + brightness * 0.2;\n\tfloat invRadius = 1.0 / radius;\n\t\n\tvec3 glowColor = vec3( 0.1, 0.35, 0.8 );\n\tfloat time = iTime * 0.1;\n\tfloat aspect = 1.;\n\t// original: vec2 uv\t\t\t= fragCoord.xy / iResolution.xy;\n\tvec2 uv = vUv;\n\tvec2 p = -0.5 + uv;\n\tp.x *= aspect;\n\n\tfloat fade  = pow( length( 2.05 * p ), 0.5 );\n\tfloat fVal1\t= 1.0 - fade;\n\tfloat fVal2\t= 1.0 - fade;\n\t\n    // v1\n\tfloat angle = atan( p.x * clamp((cos(mouseX) + .5), .5, 1.), p.y * (sin(mouseY) + .5) ) / 6.2832;\n    // v2\n    // mouseX = 0.0;\n    // mouseY = 0.0;\n\t// float angle = atan( p.x * clamp((cos(mouseX) + .5), .5, 1.), p.y * (sin(mouseY) + .5) ) / 6.2832;\n\t// float angle = atan( p.x * clamp((cos(mouseX) + .5), .5, 1.), p.y * (sin(0.0) + .5) ) / 6.2832;\n\n\t// float angle\t= 1. / 6.2;\n\tfloat dist = length(p);\n\tvec3 coord = vec3( angle, dist, time * 0.1 );\n\t\n    // 1st variant of corona\n\n\tfloat newTime1 = abs( snoise( coord + vec3(time * 0.015, -time * 0.35, time * 0.0), coronaResolution ) );\n\tfloat newTime2 = abs( snoise( coord + vec3(0.0, -time * 0.15, time * 0.015), 45.0 ) );\t\n\t\n\tfloat power = pow(coronaNoiseParam1, coronaNoiseParam2);\n\tfVal1 += 0.5 / power * snoise( coord + vec3( 0.015, -time, time * 0.2 ), (power * 10.0 * (newTime1 + 1.0)) );\n\tfVal2 += 0.5 / power * snoise( coord + vec3( 0.0, -time, time * 0.2 ), (power * 25.0 * (newTime2 + 1.0)) );\n\t\n\tfloat corona = pow( fVal1 * max( 1.2 - fade, 0.0 ), 2. ) * 50.;\n\tcorona += pow( fVal2 * max( 1.3 - fade, 0.0 ), 2. ) * 50.;\n\tcorona *= 1.2 - newTime1;\n\n    // end\n\t\n\tvec2 sp = -1.0 + 2.0 * uv;\n\tsp.x *= aspect;\n\tsp *= (2.0 - brightness);\n\n  \tfloat r = dot(sp, sp);\n\t// float f = float( ( 1.0 - sqrt( abs(1.0 - r) ) ) / r + brightness * 0.5 );\n    float fs1 = ( 1.0 - sqrt( abs(1.0 - r) ) ) / r;\n    float fs2 = brightness * 0.5;\n\tfloat f = fs1 + fs2;\n    \n\tif (dist < radius) {\n\t\tcorona *= pow(dist * invRadius, 24.0);\n        vec2 newUv = vec2((snoise(vec3(uv * 8., uv.y), 5.) * 2.)) * .005;\n \t\tnewUv.x += sp.x * f - (iTime * .05) - mouseX;\n  \t\tnewUv.y += sp.y * f - mouseY;\n\t\t\n        // normalize coordinates\n        vec2 newUvNormal = normalizeVec2(newUv);\n\n\t\tvec3 texSample = texture( tSun, newUvNormal ).rgb;\n\t\tfloat uOff = ( texSample.g * brightness * 4.5 );\n\t\tvec2 starUV\t= newUv + vec2( uOff , 0.0 );\n\n        vec2 starUVNormal = normalizeVec2(starUV);\n\n\t\tvec3 starSphere\t= texture(tSun, starUVNormal).rgb;\n        // resultFragColor.rgb += max(starSphere, .6) * fVal1 * .5;\n        resultFragColor.rgb += max(starSphere, .96) * fVal1 * .95;\n        resultFragColor.rgb += starSphere; \n\n        float maxRBG = max(resultFragColor.x, max(resultFragColor.y, resultFragColor.z));\n\n        resultFragColor.x = maxRBG * centerColor.x;\n        resultFragColor.y = maxRBG * centerColor.y;\n        resultFragColor.z = maxRBG * centerColor.z;\n\t}\n    else {\n        // test\n        // resultFragColor = vec4(0.2, 0.2, 0.5, .3);\n    }\n    \n    vec3 ro = vec3(-mouseX, -mouseY, -5.4);\n    vec3 rd = GetRayDir(uv, ro);\n    \n    float diam = 1.;\n    float dia = clamp(1.0 - length(vec2(p * diam)), 0., 1.);\n    \n\t//vec3 v = StarNest(rd, .1, 1., resultFragColor.rgb, ro, 0.);\n    vec3 v = vec3(0.0, 0.0, 0.0);\n    //v=mix(vec3(length(v)*.1),v,saturation); //color adjust\n    //v *= mix(vec3(0.8),vec3(1.,1.,0.)+2.5,dia);\n    resultFragColor.rgb += vec3(v * .01) * (1. - dia);  \n    \n\tresultFragColor.rgb\t+= vec3( f * coronaColor ) + corona * coronaColor; // + starGlow * glowColor;\n\n\tif (dist > radius) {\n        resultFragColor.a = (resultFragColor.x + resultFragColor.y + resultFragColor.z) / 3.;\n    }\n\n    return resultFragColor;\n\n    // test\n    // return vec4(0.2, 0.2, 0.5, .3);\n\n}\n\nvoid main(void)\n{\n    gl_FragColor = mainImage(vec4(gl_FragColor), vec2(gl_FragCoord));\n}\n",uniforms:i._uniforms,transparent:!0,depthWrite:!1});var u=(i._params.starSize||1)*i._starScale,d=new Ir(u,u);return i._mesh=new lr(d,i._material),i.add(i._mesh),i}return t=o,n=[{key:"starScale",get:function(){return this._starScale},set:function(e){this._starScale=e,this._mesh&&this._mesh.scale.set(e,e,1)}},{key:"createDebugGui",value:function(e){var t=this,n={coronaColor:{r:255*this._params.mainColor.r,g:255*this._params.mainColor.g,b:255*this._params.mainColor.b},centerColor:{r:255*this._params.coronaColor.r,g:255*this._params.coronaColor.g,b:255*this._params.coronaColor.b},coronaNoiseParam1:this._uniforms.coronaNoiseParam1.value,coronaNoiseParam2:this._uniforms.coronaNoiseParam2.value,coronaResolution:this._uniforms.coronaResolution.value},r=this._gui=e;this._guiFolder=r.addFolder("Star"),this._guiControllers=[];var i=r.addColor(n,"centerColor").onChange((function(e){var n=e;t._uniforms.centerColor.value.x=n.r/255,t._uniforms.centerColor.value.y=n.g/255,t._uniforms.centerColor.value.z=n.b/255,console.log("centerColor:",t._uniforms.centerColor.value)}));this._guiControllers.push(i),i=r.addColor(n,"coronaColor").onChange((function(e){var n=e;t._uniforms.coronaColor.value.x=n.r/255,t._uniforms.coronaColor.value.y=n.g/255,t._uniforms.coronaColor.value.z=n.b/255,console.log("coronaColor:",t._uniforms.coronaColor.value)})),this._guiControllers.push(i),i=r.add(n,"coronaNoiseParam1",1,6,.01).onChange((function(){t._uniforms.coronaNoiseParam1.value=n.coronaNoiseParam1})),this._guiControllers.push(i),i=r.add(n,"coronaNoiseParam2",.5,6,.01).onChange((function(){t._uniforms.coronaNoiseParam2.value=n.coronaNoiseParam2})),this._guiControllers.push(i),i=r.add(n,"coronaResolution",1,100,1).onChange((function(){t._uniforms.coronaResolution.value=n.coronaResolution})),this._guiControllers.push(i)}},{key:"updateStar",value:function(e){this._params=e,this._params.mainColor||(this._params.mainColor={r:.9,g:.6,b:.3}),this._params.coronaColor||(this._params.coronaColor={r:.9,g:.3,b:.1});var t=this._params.mainColor,n=this._params.coronaColor;this._uniforms.centerColor.value={x:t.r,y:t.g,z:t.b},this._uniforms.coronaColor.value={x:n.r,y:n.g,z:n.b}}},{key:"free",value:function(){if(this._gui){for(var e=0;e<this._guiControllers.length;e++){var t=this._guiControllers[e];this._gui.remove(t)}this._gui.removeFolder(this._guiFolder)}}},{key:"getStarMaterial",value:function(){return this._material}},{key:"update",value:function(e){this._uniforms.iTime.value+=e,this._camera}}],n&&Zg(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(io);function $g(e){return $g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(e)}function ev(e,t){return ev=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ev(e,t)}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},tv(e)}var nv=new mr({vertexShader:"\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nvoid main() {\n    vNormal = normalize(normalMatrix * normal); //  \n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    vViewPosition = -mvPosition.xyz; //    \n    gl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nvoid main() {\n    //        \n    float intensity = dot(normalize(vViewPosition), vNormal);\n    float edgeFactor = smoothstep(0.0, 1.0, intensity);\n\n    //    \n    vec4 color = vec4(1.0, 1.0, 1.0, edgeFactor); //     \n\n    gl_FragColor = color;\n}\n",transparent:!0}),rv=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ev(e,t)}(s,e);var t,n,r,i=(n=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tv(n);if(r){var i=tv(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===$g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e,t,n){var r,o,a,l,c,u,d,h,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=i.call(this)).count=e,r.radiusMin=t,r.radiusMax=n,r.position.set(0,0,0);for(var p=0;p<r.count;p++){var m=(o=(c=r.radiusMin,u=r.radiusMax,void 0,void 0,void 0,d=Math.random()*(u-c)+c,h=2*Math.random()*Math.PI,f=Math.acos(2*Math.random()-1),{x:d*Math.sin(f)*Math.cos(h),y:d*Math.sin(f)*Math.sin(h),z:d*Math.cos(f)}),void 0,l=void 0,a=new cl(.2,16,16),(l=new lr(a,nv)).position.set(o.x,o.y,o.z),l);r.add(m)}return r}return t=s,Object.defineProperty(t,"prototype",{writable:!1}),t}(io);function iv(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?sv(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ov,av,lv,cv=new it(.05,0,-.1),uv=new it(.9,0,.6),dv=new Gl,hv=function(e){var t={sunDirection:{value:e},dayTexture:{value:dv.load("/model/textures/globusday.jpg")},nightTexture:{value:dv.load("/model/textures/globusnight.jpg")}};return new mr({uniforms:t,vertexShader:"\nvarying vec2 vUv;\nvarying vec3 vNormal;\n\nvoid main() {\n  vUv = uv;\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n  vNormal = normalMatrix * normal;\n  gl_Position = projectionMatrix * mvPosition;\n}\n",fragmentShader:"\nuniform sampler2D dayTexture;\nuniform sampler2D nightTexture;\n\nuniform vec3 sunDirection;\n\nvarying vec2 vUv;\nvarying vec3 vNormal;\n\nvoid main( void ) {\n  vec3 dayColor = texture2D( dayTexture, vUv ).rgb;\n  vec3 nightColor = texture2D( nightTexture, vUv ).rgb;\n\n  // compute cosine sun to normal so -1 is away from sun and +1 is toward sun.\n  float cosineAngleSunToNormal = dot(normalize(vNormal), sunDirection);\n\n  // sharpen the edge beween the transition\n  cosineAngleSunToNormal = clamp( cosineAngleSunToNormal * 10.0, -1.0, 1.0);\n\n  // convert to 0 to 1 for mixing\n  float mixAmount = cosineAngleSunToNormal * 0.5 + 0.5;\n\n  // Select day or night texture based on mix.\n  vec3 color = mix( nightColor, dayColor, mixAmount );\n\n  gl_FragColor = vec4( color, 1.0 );\n}\n"})},fv=new bc,pv=new class extends on{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}},mv=(new Map,new mr({vertexShader:"\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nvoid main() {\n    vNormal = normalize(normalMatrix * normal); //  \n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    vViewPosition = -mvPosition.xyz; //    \n    gl_Position = projectionMatrix * mvPosition;\n}\n",fragmentShader:"\nvarying vec3 vNormal;\nvarying vec3 vViewPosition;\n\nvoid main() {\n    //        \n    float intensity = dot(normalize(vViewPosition), vNormal);\n    float edgeFactor = smoothstep(0.0, 1.0, intensity);\n\n    //    \n    vec4 color = vec4(1.0, 1.0, 0.0, edgeFactor); //     \n\n    gl_FragColor = color;\n}",transparent:!0,side:2}),new vr(45,fm.x/fm.y,1,25e3)),gv=(new it,new uo({alpha:!0}));pv.add(mv);var vv=new rc(sm,9);pv.add(vv),[].forEach((function(e){var t=new nc(sm,9);t.position.set(e.x,e.y,e.z),pv.add(t)})),[{x:.8923791558530315,y:-.40590313037652653,z:.1137383534006568},{x:.8923791558530315,y:.40590313037652653,z:.1137383534006568}].forEach((function(e){var t=new ec(16777215,1);t.position.set(e.x,e.y,e.z),pv.add(t)}));var yv=new class{renderer;camera;domElement;bindEventsOnBodyElement;autoAdd;scene;mouse;supportsPointerEvents;interactiveObjects;closestObject;raycaster;treatTouchEventsAsMouseEvents;constructor(e,t,n,r){this.renderer=e,this.camera=t,this.domElement=n,this.bindEventsOnBodyElement=!(r&&typeof r.bindEventsOnBodyElement<"u")||r.bindEventsOnBodyElement,this.scene=r&&typeof r.scene<"u"?r.scene:null,this.scene&&(this.scene.onBeforeRender=()=>{this.autoAdd&&null!==this.scene&&this.scene.traverse((e=>{this.add(e),e.addEventListener("removed",(e=>{this.remove(e.target)}))})),this.update()}),this.autoAdd=!!(r&&typeof r.autoAdd<"u")&&r.autoAdd,this.autoAdd&&null===this.scene&&console.error("Attention: Options.scene needs to be set when using options.autoAdd"),this.mouse=new Re(-1,1),this.supportsPointerEvents=!!window.PointerEvent,this.interactiveObjects=[],this.closestObject=null,this.raycaster=new fc,n.addEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?n.ownerDocument.addEventListener("pointermove",this.onDocumentPointerMove):n.addEventListener("pointermove",this.onDocumentPointerMove),n.addEventListener("pointerdown",this.onPointerDown),n.addEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?n.ownerDocument.addEventListener("mousemove",this.onDocumentMouseMove):n.addEventListener("mousemove",this.onDocumentMouseMove),n.addEventListener("mousedown",this.onMouseDown),n.addEventListener("mouseup",this.onMouseUp),n.addEventListener("touchstart",this.onTouchStart,{passive:!0}),n.addEventListener("touchmove",this.onTouchMove,{passive:!0}),n.addEventListener("touchend",this.onTouchEnd,{passive:!0}),this.treatTouchEventsAsMouseEvents=!0}dispose=()=>{this.domElement.removeEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("pointermove",this.onDocumentPointerMove):this.domElement.removeEventListener("pointermove",this.onDocumentPointerMove),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("mousemove",this.onDocumentMouseMove):this.domElement.removeEventListener("mousemove",this.onDocumentMouseMove),this.domElement.removeEventListener("mousedown",this.onMouseDown),this.domElement.removeEventListener("mouseup",this.onMouseUp),this.domElement.removeEventListener("touchstart",this.onTouchStart),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd)};add=(e,t=[])=>{if(e&&!this.interactiveObjects.find((t=>t.target===e)))if(t.length>0)t.forEach((t=>{let n=e.getObjectByName(t);if(n){let e=new gu(n,t);this.interactiveObjects.push(e)}}));else{let t=new gu(e,e.name);this.interactiveObjects.push(t)}};remove=(e,t=[])=>{!e||(t.length>0?t.forEach((t=>{let n=e.getObjectByName(t);n&&(this.interactiveObjects=this.interactiveObjects.filter((e=>e.target!==n)))})):this.interactiveObjects=this.interactiveObjects.filter((t=>t.target!==e)))};update=()=>{this.raycaster.setFromCamera(this.mouse,this.camera),this.interactiveObjects.forEach((e=>{e.target&&this.checkIntersection(e)})),this.interactiveObjects.sort((function(e,t){return e.distance-t.distance}));let e,t,n=this.interactiveObjects.find((e=>e.intersected))??null;if(n!=this.closestObject){if(this.closestObject){let e=new vu("mouseout");this.dispatch(this.closestObject,e)}if(n){let e=new vu("mouseover");this.dispatch(n,e)}this.closestObject=n}this.interactiveObjects.forEach((t=>{!t.intersected&&t.wasIntersected&&(e||(e=new vu("mouseleave")),this.dispatch(t,e))})),this.interactiveObjects.forEach((e=>{e.intersected&&!e.wasIntersected&&(t||(t=new vu("mouseenter")),this.dispatch(e,t))}))};checkIntersection=e=>{let t=this.raycaster.intersectObjects([e.target],!0);if(e.wasIntersected=e.intersected,t.length>0){let n=t[0].distance;t.forEach((e=>{e.distance<n&&(n=e.distance)})),e.intersected=!0,e.distance=n}else e.intersected=!1};onDocumentMouseMove=e=>{this.mapPositionToPoint(this.mouse,e.clientX,e.clientY);let t=new vu("mousemove",e);this.interactiveObjects.forEach((e=>{this.dispatch(e,t)}))};onDocumentPointerMove=e=>{this.mapPositionToPoint(this.mouse,e.clientX,e.clientY);let t=new vu("pointermove",e);this.interactiveObjects.forEach((e=>{this.dispatch(e,t)}))};onTouchMove=e=>{e.touches.length>0&&this.mapPositionToPoint(this.mouse,e.touches[0].clientX,e.touches[0].clientY);let t=new vu(this.treatTouchEventsAsMouseEvents?"mousemove":"touchmove",e);this.interactiveObjects.forEach((e=>{this.dispatch(e,t)}))};onMouseClick=e=>{this.update();let t=new vu("click",e);this.interactiveObjects.forEach((e=>{e.intersected&&this.dispatch(e,t)}))};onMouseDown=e=>{this.mapPositionToPoint(this.mouse,e.clientX,e.clientY),this.update();let t=new vu("mousedown",e);this.interactiveObjects.forEach((e=>{e.intersected&&this.dispatch(e,t)}))};onPointerDown=e=>{this.mapPositionToPoint(this.mouse,e.clientX,e.clientY),this.update();let t=new vu("pointerdown",e);this.interactiveObjects.forEach((e=>{e.intersected&&this.dispatch(e,t)}))};onTouchStart=e=>{e.touches.length>0&&this.mapPositionToPoint(this.mouse,e.touches[0].clientX,e.touches[0].clientY),this.update();let t=new vu(this.treatTouchEventsAsMouseEvents?"mousedown":"touchstart",e);this.interactiveObjects.forEach((e=>{e.intersected&&this.dispatch(e,t)}))};onMouseUp=e=>{let t=new vu("mouseup",e);this.interactiveObjects.forEach((e=>{this.dispatch(e,t)}))};onPointerUp=e=>{let t=new vu("pointerup",e);this.interactiveObjects.forEach((e=>{this.dispatch(e,t)}))};onTouchEnd=e=>{e.touches.length>0&&this.mapPositionToPoint(this.mouse,e.touches[0].clientX,e.touches[0].clientY),this.update();let t=new vu(this.treatTouchEventsAsMouseEvents?"mouseup":"touchend",e);this.interactiveObjects.forEach((e=>{this.dispatch(e,t)}))};dispatch=(e,t)=>{e.target&&!t.cancelBubble&&(t.coords=this.mouse,t.distance=e.distance,t.intersected=e.intersected,e.target.dispatchEvent(t))};mapPositionToPoint=(e,t,n)=>{let r=this.renderer.domElement.getBoundingClientRect();e.x=(t-r.left)/r.width*2-1,e.y=-(n-r.top)/r.height*2+1}}(gv,mv,gv.domElement),bv=new rv(9e3,90,1600);setInterval((function(){}),1e3),function e(){requestAnimationFrame(e),gv.render(pv,mv),yv.update(),av&&(av.update(1/60),av.lookAt(mv.position))}(),window.addEventListener("resize",(function(){mv.aspect=.98*window.innerWidth/window.innerHeight*.98,mv.updateProjectionMatrix(),gv.setSize(.98*window.innerWidth,.98*window.innerHeight)}),!1),gv.setSize(fm.x,fm.y),gv.setPixelRatio(Math.min(window.devicePixelRatio,2)),gv.shadowMap.enabled=!0;var _v=new class extends me{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new it,this.cursor=new it,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",q),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",q),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(uu),n.update(),i=r.NONE},this.update=function(){const t=new it,u=(new rt).setFromUnitVectors(e.up,new it(0,1,0)),d=u.clone().invert(),h=new it,f=new rt,p=new it,m=2*Math.PI;return function(g=null){const v=n.object.position;t.copy(v).sub(n.target),t.applyQuaternion(u),o.setFromVector3(t),n.autoRotate&&i===r.NONE&&A(function(e){return null!==e?2*Math.PI/60*n.autoRotateSpeed*e:2*Math.PI/60/60*n.autoRotateSpeed}(g)),n.enableDamping?(o.theta+=a.theta*n.dampingFactor,o.phi+=a.phi*n.dampingFactor):(o.theta+=a.theta,o.phi+=a.phi);let y=n.minAzimuthAngle,w=n.maxAzimuthAngle;isFinite(y)&&isFinite(w)&&(y<-Math.PI?y+=m:y>Math.PI&&(y-=m),w<-Math.PI?w+=m:w>Math.PI&&(w-=m),o.theta=y<=w?Math.max(y,Math.min(w,o.theta)):o.theta>(y+w)/2?Math.max(y,o.theta):Math.min(w,o.theta)),o.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,o.phi)),o.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor),n.zoomToCursor&&x||n.object.isOrthographicCamera?o.radius=k(o.radius):o.radius=k(o.radius*l),t.setFromSpherical(o),t.applyQuaternion(d),v.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(a.theta*=1-n.dampingFactor,a.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(a.set(0,0,0),c.set(0,0,0));let E=!1;if(n.zoomToCursor&&x){let r=null;if(n.object.isPerspectiveCamera){const e=t.length();r=k(e*l);const i=e-r;n.object.position.addScaledVector(b,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new it(_.x,_.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),E=!0;const i=new it(_.x,_.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(fu.origin.copy(n.object.position),fu.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(fu.direction))<mu?e.lookAt(n.target):(pu.setFromNormalAndCoplanarPoint(n.object.up,n.target),fu.intersectPlane(pu,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),E=!0);return l=1,x=!1,!!(E||h.distanceToSquared(n.object.position)>s||8*(1-f.dot(n.object.quaternion))>s||p.distanceToSquared(n.target)>0)&&(n.dispatchEvent(uu),h.copy(n.object.position),f.copy(n.object.quaternion),p.copy(n.target),!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",X),n.domElement.removeEventListener("pointerdown",G),n.domElement.removeEventListener("pointercancel",j),n.domElement.removeEventListener("wheel",W),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",j),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",q),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const s=1e-6,o=new gc,a=new gc;let l=1;const c=new it,u=new Re,d=new Re,h=new Re,f=new Re,p=new Re,m=new Re,g=new Re,v=new Re,y=new Re,b=new it,_=new Re;let x=!1;const w=[],E={};function S(e){const t=Math.abs(e)/(100*(0|window.devicePixelRatio));return Math.pow(.95,n.zoomSpeed*t)}function A(e){a.theta-=e}function T(e){a.phi-=e}const M=function(){const e=new it;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),C=function(){const e=new it;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),P=function(){const e=new it;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),M(2*t*o/i.clientHeight,n.object.matrix),C(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(M(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),C(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function R(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function L(e,t){if(!n.zoomToCursor)return;x=!0;const r=n.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,o=r.width,a=r.height;_.x=i/o*2-1,_.y=-s/a*2+1,b.set(_.x,_.y,1).unproject(n.object).sub(n.object.position).normalize()}function k(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function O(e){u.set(e.clientX,e.clientY)}function N(e){f.set(e.clientX,e.clientY)}function D(e){if(1===w.length)u.set(e.pageX,e.pageY);else{const t=Y(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);u.set(n,r)}}function B(e){if(1===w.length)f.set(e.pageX,e.pageY);else{const t=Y(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}}function U(e){const t=Y(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);g.set(0,i)}function F(e){if(1==w.length)d.set(e.pageX,e.pageY);else{const t=Y(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);d.set(n,r)}h.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;A(2*Math.PI*h.x/t.clientHeight),T(2*Math.PI*h.y/t.clientHeight),u.copy(d)}function z(e){if(1===w.length)p.set(e.pageX,e.pageY);else{const t=Y(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);p.set(n,r)}m.subVectors(p,f).multiplyScalar(n.panSpeed),P(m.x,m.y),f.copy(p)}function H(e){const t=Y(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);v.set(0,s),y.set(0,Math.pow(v.y/g.y,n.zoomSpeed)),R(y.y),g.copy(v),L(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}function G(e){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",V),n.domElement.addEventListener("pointerup",j)),function(e){w.push(e.pointerId)}(e),"touch"===e.pointerType?function(e){switch(Z(e),w.length){case 1:switch(n.touches.ONE){case 0:if(!1===n.enableRotate)return;D(e),i=r.TOUCH_ROTATE;break;case 1:if(!1===n.enablePan)return;B(e),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&U(e),n.enablePan&&B(e)}(e),i=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&U(e),n.enableRotate&&D(e)}(e),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(du)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===n.enableZoom)return;!function(e){L(e.clientX,e.clientX),g.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case 0:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;N(e),i=r.PAN}else{if(!1===n.enableRotate)return;O(e),i=r.ROTATE}break;case 2:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),i=r.ROTATE}else{if(!1===n.enablePan)return;N(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(du)}(e))}function V(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Z(e),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;F(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;z(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&H(e),n.enablePan&&z(e)}(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&H(e),n.enableRotate&&F(e)}(e),n.update();break;default:i=r.NONE}}(e):function(e){switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(e){d.set(e.clientX,e.clientY),h.subVectors(d,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;A(2*Math.PI*h.x/t.clientHeight),T(2*Math.PI*h.y/t.clientHeight),u.copy(d),n.update()}(e);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g),y.y>0?R(S(y.y)):y.y<0&&I(S(y.y)),g.copy(v),n.update()}(e);break;case r.PAN:if(!1===n.enablePan)return;!function(e){p.set(e.clientX,e.clientY),m.subVectors(p,f).multiplyScalar(n.panSpeed),P(m.x,m.y),f.copy(p),n.update()}(e)}}(e))}function j(e){!function(e){delete E[e.pointerId];for(let t=0;t<w.length;t++)if(w[t]==e.pointerId)return void w.splice(t,1)}(e),0===w.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",j)),n.dispatchEvent(hu),i=r.NONE}function W(e){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(e.preventDefault(),n.dispatchEvent(du),function(e){L(e.clientX,e.clientY),e.deltaY<0?I(S(e.deltaY)):e.deltaY>0&&R(S(e.deltaY)),n.update()}(e),n.dispatchEvent(hu))}function q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?A(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?A(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):P(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function X(e){!1!==n.enabled&&e.preventDefault()}function Z(e){let t=E[e.pointerId];void 0===t&&(t=new Re,E[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Y(e){const t=e.pointerId===w[0]?w[1]:w[0];return E[t]}n.domElement.addEventListener("contextmenu",X),n.domElement.addEventListener("pointerdown",G),n.domElement.addEventListener("pointercancel",j),n.domElement.addEventListener("wheel",W,{passive:!1}),this.update()}}(mv,gv.domElement);_v.enableZoom=!1,_v.enableRotate=!1,_v.enablePan=!1,_v.listenToKeyEvents(window),_v.update();var xv,wv=0;requestAnimationFrame((function e(t){t>=wv+1e3&&(0,wv=t),requestAnimationFrame(e)})),_v.addEventListener("change",(function(){var e=new it;console.log("Target: "),console.log(mv.getWorldDirection(e))})),mv.position.set(om,am,lm),mv.rotation.set(cm,um,dm),_v.target.set(0,0,0);var Ev=new mo({color:267386880,side:2,transparent:!0});new mo({color:255,side:2,transparent:!0}),(new on).position.x=1,new class extends on{constructor(e=new mo){if(super(),this.isSprite=!0,this.type="Sprite",void 0===go){go=new jn;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new ho(e,5);go.setIndex([0,1,2,0,2,3]),go.setAttribute("position",new po(t,3,0,!1)),go.setAttribute("uv",new po(t,2,3,!1))}this.geometry=go,this.material=e,this.center=new Re(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),yo.setFromMatrixScale(this.matrixWorld),wo.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bo.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&yo.multiplyScalar(-bo.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;Po(Eo.set(-.5,-.5,0),bo,s,yo,r,i),Po(So.set(.5,-.5,0),bo,s,yo,r,i),Po(Ao.set(.5,.5,0),bo,s,yo,r,i),To.set(0,0),Mo.set(1,0),Co.set(1,1);let o=e.ray.intersectTriangle(Eo,So,Ao,!1,vo);if(null===o&&(Po(So.set(-.5,.5,0),bo,s,yo,r,i),Mo.set(0,1),o=e.ray.intersectTriangle(Eo,Ao,So,!1,vo),null===o))return;const a=e.ray.origin.distanceTo(vo);a<e.near||a>e.far||t.push({distance:a,point:vo.clone(),uv:yn.getInterpolation(vo,Eo,So,Ao,To,Mo,Co,new Re),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}(Ev).position.x=1,fv.load("model/stars3.glb",(function(e){console.log(e);var t=e.scene;(xv=new io).name="PlanetGroup";var n=document.querySelector(".render--zone"),r=(document.querySelector(".planetClicker"),new Event("click"));return null==n||n.dispatchEvent(r),t.traverse((function(e){if(0===e.children.length){if("Planet"===e.name&&((ov=e.clone()).material=hv(uv),ov.rotateZ(Math.PI),setInterval((function(){ov.rotateY(.005)}),10),xv.add(ov)),"Sun"===e.name){av=new Jg(e.position,mv,1,{starSize:1,galaxyColor:{r:0,g:0,b:0}});var t=new Ir(2.5,2.5),n=av.getStarMaterial();(lv=new lr(t,n)).position.set(e.position.x,e.position.y,e.position.z),lv.lookAt(mv.position),xv.add(lv)}e.visible=!1}})),xv.add(bv),pv.add(xv),window.addEventListener("resize",(function(){})),n?n.appendChild(gv.domElement):console.log("Not found container!"),!0}));const Sv=function(){var e=iv((0,o.useState)(!1),2),t=(e[0],e[1],iv((0,o.useState)(!0),2)),n=(t[0],t[1],iv((0,o.useState)(!0),2)),r=(n[0],n[1],iv((0,o.useState)(""),2)),i=(r[0],r[1],iv((0,o.useState)(hm[0]),2)),s=(i[0],i[1],iv((0,o.useState)("VRP"),2)),a=s[0],l=s[1];return(0,o.useEffect)((function(){var e=document.getElementById("selectVRP"),t=document.getElementById("selectVAO");e&&t&&(e.addEventListener("click",(function(){e.classList.add("selected"),t.classList.remove("selected"),l("VRP"),function(){var e=hv(uv),t=!1;if(xv)var n=im.to(xv.rotation,{duration:1,y:0,repeat:0,ease:"power1.inOut",onUpdate:function(){n.progress()>.9&&!t&&(ov.material=e,t=!0),lv&&lv.lookAt(mv.position)},onComplete:function(){}})}()})),t.addEventListener("click",(function(){e.classList.remove("selected"),t.classList.add("selected"),l("VAO"),function(){var e=hv(cv),t=(uv.x,uv.y,uv.z,cv.x,cv.y,cv.z,!1);if(xv)var n=im.to(xv.rotation,{duration:1,y:Math.PI,repeat:0,ease:"power1.inOut",onUpdate:function(){n.progress()>.1&&!t&&(ov.material=e,t=!0),lv&&lv.lookAt(mv.position)},onComplete:function(){}})}()})))}),[]),o.createElement(o.Fragment,null,o.createElement("div",{className:"renderBkg",style:{transform:"translateX(".concat("VRP"===a?0:-100,"vw)")}}),o.createElement("div",{className:"render--zone"}))};var Av=i(379),Tv=i.n(Av),Mv=i(795),Cv=i.n(Mv),Pv=i(569),Rv=i.n(Pv),Iv=i(565),Lv=i.n(Iv),kv=i(216),Ov=i.n(kv),Nv=i(589),Dv=i.n(Nv),Bv=i(316),Uv={};Uv.styleTagTransform=Dv(),Uv.setAttributes=Lv(),Uv.insert=Rv().bind(null,"head"),Uv.domAPI=Cv(),Uv.insertStyleElement=Ov(),Tv()(Bv.Z,Uv),Bv.Z&&Bv.Z.locals&&Bv.Z.locals;var Fv=i(103),zv=o,Hv=Symbol.for("react-redux-context"),Gv="undefined"!=typeof globalThis?globalThis:{};function Vv(){if(!zv.createContext)return{};const e=Gv[Hv]??(Gv[Hv]=new Map);let t=e.get(zv.createContext);return t||(t=zv.createContext(null),e.set(zv.createContext,t)),t}var jv=Vv();function Wv(e=jv){return function(){return zv.useContext(e)}}var qv=Wv(),Xv=()=>{throw new Error("uSES not initialized!")},Zv=(e,t)=>e===t;function Yv(e=jv){const t=e===jv?qv:Wv(e);return function(e,n={}){const{equalityFn:r=Zv,devModeChecks:i={}}="function"==typeof n?{equalityFn:n}:n,{store:s,subscription:o,getServerState:a,stabilityCheck:l,identityFunctionCheck:c}=t(),u=(zv.useRef(!0),zv.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),d=Xv(o.addNestedSub,s.getState,a||s.getState,u,r);return zv.useDebugValue(d),d}}var Kv=Yv();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");var Qv={notify(){},get:()=>[]};var Jv="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?zv.useLayoutEffect:zv.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var $v=function({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=zv.useMemo((()=>{const t=function(e,t){let n,r=Qv,i=0,s=!1;function o(){c.onStateChange&&c.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){let t=[],n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0,i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=Qv)}const c={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}(e);return{store:e,subscription:t,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}}),[e,r,i,s]),a=zv.useMemo((()=>e.getState()),[e]);Jv((()=>{const{subscription:t}=o;return t.onStateChange=t.notifyNestedSubs,t.trySubscribe(),a!==e.getState()&&t.notifyNestedSubs(),()=>{t.tryUnsubscribe(),t.onStateChange=void 0}}),[o,a]);const l=t||jv;return zv.createElement(l.Provider,{value:o},n)};function ey(e=jv){const t=e===jv?qv:Wv(e);return function(){const{store:e}=t();return e}}var ty=ey();function ny(e=jv){const t=e===jv?ty:ey(e);return function(){return t().dispatch}}var ry,iy=ny();ry=Fv.useSyncExternalStoreWithSelector,Xv=ry,o.useSyncExternalStore;const sy=function(e){return o.createElement("svg",{width:e.width,height:e.height,viewBox:"0 0 137 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o.createElement("g",{clipPath:"url(#clip0_79_43)"},o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.0964 4.26664L9.75876 17.7345L3.42116 4.26664H0.905223L8.18177 19.7213H11.2923L18.563 4.26664H16.0964ZM19.194 3.59998C19.244 3.60127 19.2927 3.61528 19.3353 3.6406C19.3779 3.66591 19.4129 3.70164 19.4367 3.7442C19.4605 3.78676 19.4724 3.83464 19.4711 3.88305C19.4698 3.93145 19.4554 3.97868 19.4293 4.01998L11.808 20.22C11.7857 20.269 11.7493 20.3109 11.7033 20.3407C11.6572 20.3704 11.6033 20.3868 11.548 20.388H7.92619C7.87066 20.3876 7.81647 20.3715 7.77027 20.3416C7.72407 20.3118 7.68788 20.2695 7.66616 20.22L0.0386895 4.01998C0.0116243 3.97433 -0.00171652 3.92226 0.00017685 3.86964C0.00207022 3.81703 0.0191222 3.76598 0.0494028 3.72228C0.0796834 3.67857 0.121984 3.64395 0.171515 3.62234C0.221047 3.60072 0.275833 3.59298 0.329672 3.59998H3.68526C3.74318 3.60094 3.79935 3.61937 3.84595 3.6527C3.89255 3.68604 3.92728 3.73262 3.94529 3.78598L9.75876 16.14L15.5722 3.78598C15.5914 3.73215 15.6273 3.68538 15.6749 3.65208C15.7226 3.61878 15.7797 3.60058 15.8384 3.59998H19.194Z",fill:"#00FFFF"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M108.185 3.6238H104.57C104.517 3.62671 104.466 3.64329 104.423 3.67181C104.379 3.70032 104.344 3.7397 104.322 3.7858L96.7007 19.9858C96.681 20.0287 96.6726 20.0758 96.6764 20.1226C96.6803 20.1695 96.6961 20.2146 96.7226 20.254C96.7491 20.2934 96.7853 20.3257 96.828 20.348C96.8707 20.3704 96.9184 20.382 96.9669 20.3818H100.335C100.39 20.3807 100.444 20.3644 100.49 20.3346C100.536 20.3048 100.573 20.2629 100.595 20.2138L102.694 15.7558C102.716 15.7074 102.753 15.6665 102.799 15.6377C102.845 15.609 102.899 15.5937 102.954 15.5938H109.863C109.918 15.5936 109.972 15.6088 110.018 15.6375C110.064 15.6663 110.1 15.7074 110.123 15.7558L112.222 20.2138C112.245 20.2637 112.282 20.3062 112.329 20.336C112.377 20.3658 112.432 20.3817 112.488 20.3818H115.813C115.861 20.3826 115.909 20.3712 115.952 20.3489C115.995 20.3266 116.031 20.294 116.057 20.2543C116.083 20.2146 116.098 20.169 116.101 20.122C116.104 20.075 116.094 20.0281 116.073 19.9858L108.451 3.7858C108.428 3.73646 108.391 3.69478 108.344 3.66598C108.296 3.63717 108.241 3.6225 108.185 3.6238ZM112.803 19.6667H115.189L107.939 4.29046H104.835L97.5783 19.7151H100.079L102.074 15.4775C102.152 15.312 102.277 15.1726 102.433 15.0754C102.569 14.9909 110.123 15 110.123 15C110.123 15 110.418 15 110.759 15.3334M107.832 4.06308L107.832 4.06447L107.832 4.06308ZM104.638 11.5858L106.136 8.3998C106.158 8.35113 106.195 8.3098 106.241 8.2808C106.287 8.2518 106.341 8.23637 106.396 8.23637C106.451 8.23637 106.505 8.2518 106.551 8.2808C106.597 8.3098 106.634 8.35113 106.656 8.3998L108.16 11.5858C108.18 11.6287 108.188 11.6757 108.184 11.7225C108.18 11.7693 108.165 11.8144 108.138 11.8537C108.112 11.8931 108.076 11.9254 108.033 11.9477C107.99 11.9701 107.943 11.9818 107.894 11.9818H104.898C104.854 11.9769 104.812 11.9622 104.776 11.939C104.739 11.9158 104.708 11.8847 104.686 11.848C104.664 11.8114 104.651 11.7703 104.648 11.7279C104.645 11.6855 104.652 11.643 104.669 11.6038L104.638 11.5858ZM104.012 11.9976L103.762 11.8523L105.516 8.12281C105.593 7.95734 105.717 7.8177 105.873 7.71995C106.029 7.62166 106.211 7.5697 106.396 7.5697C106.581 7.5697 106.763 7.62167 106.919 7.71995C107.075 7.81754 107.199 7.95691 107.276 8.12213L108.783 11.3142C108.849 11.4592 108.877 11.6182 108.864 11.7767C108.85 11.9352 108.797 12.0876 108.708 12.22C108.619 12.3524 108.497 12.4605 108.355 12.5351C108.213 12.6096 108.055 12.6485 107.894 12.6485H104.858L104.819 12.644C104.672 12.6273 104.531 12.5778 104.406 12.4989C104.281 12.4199 104.176 12.3136 104.1 12.188C104.063 12.1277 104.034 12.0639 104.012 11.9976Z",fill:"#00FFFF"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M123.52 17.1784V4.29038H120.89V19.7151H136.156V17.1784H123.52ZM136.838 16.5117V20.3817H120.208V3.62372H124.202V16.5117H136.838Z",fill:"#00FFFF"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M90.5358 4.26696L90.5346 4.26696L77.4898 4.26696V19.6976H80.1323V15.2156H90.547C93.5135 15.2156 95.9079 12.8863 95.9079 10.0263V9.48305C95.9113 8.79934 95.7751 8.12159 95.5071 7.48875C95.239 6.8559 94.8443 6.28028 94.3453 5.79519C93.8462 5.31008 93.2528 4.9251 92.5989 4.6627C91.9451 4.4003 91.2439 4.26575 90.5358 4.26696ZM90.5346 7.51829C91.0775 7.52003 91.5976 7.72985 91.9814 8.10193C92.3652 8.47402 92.5816 8.97816 92.5832 9.50429V9.99629C92.5851 10.2584 92.5334 10.5182 92.4313 10.7609C92.3292 11.0036 92.1786 11.2244 91.9883 11.4105C91.7979 11.5966 91.5715 11.7446 91.3221 11.8458C91.0726 11.947 90.805 11.9995 90.5346 12.0003H81.0925C81.0164 12.0003 80.9433 11.9714 80.8889 11.9198C80.8345 11.8682 80.8031 11.798 80.8015 11.7243V7.80029C80.8015 7.7255 80.8322 7.65377 80.8867 7.60089C80.9413 7.548 81.0153 7.51829 81.0925 7.51829H90.5346ZM81.0925 12.667C81.0924 12.667 81.0925 12.667 81.0925 12.667C80.8401 12.667 80.5966 12.5712 80.4144 12.3984C80.232 12.2254 80.1256 11.9887 80.1201 11.7386L80.1199 11.7314V7.80029C80.1199 7.54668 80.2239 7.30473 80.407 7.12731C80.5899 6.9501 80.8366 6.85162 81.0925 6.85162H90.5368C91.2577 6.85394 91.9497 7.1325 92.4612 7.62843C92.973 8.12456 93.2626 8.79807 93.2648 9.50227L93.2648 9.50429L93.2648 9.99413C93.2669 10.3441 93.1978 10.6909 93.0616 11.0146C92.9251 11.339 92.724 11.6337 92.4702 11.8819M81.0925 12.667L90.5346 12.667L90.5366 12.667C90.8959 12.6659 91.2515 12.5961 91.5832 12.4616C91.9149 12.327 92.2164 12.1301 92.4702 11.8819M80.8139 15.8823H90.547C93.884 15.8823 96.5895 13.2603 96.5895 10.0263V9.48629C96.5933 8.7138 96.4395 7.94821 96.1368 7.23358C95.8341 6.51896 95.3885 5.86941 94.8257 5.32234C94.263 4.77527 93.5941 4.34147 92.8577 4.04593C92.1212 3.75039 91.3317 3.59894 90.5346 3.60029H77.0992C76.9389 3.60029 76.8082 3.72629 76.8082 3.88229V20.0823C76.8082 20.1571 76.8389 20.2288 76.8935 20.2817C76.948 20.3346 77.022 20.3643 77.0992 20.3643H80.5229C80.6839 20.3643 80.8139 20.2383 80.8139 20.0823V15.8823Z",fill:"#00FFFF"}),o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M66.3153 15.8703L66.8416 16.2318L72.1412 19.8723C72.1902 19.9073 72.2267 19.9563 72.2455 20.0125C72.2643 20.0686 72.2645 20.129 72.2461 20.1853C72.2276 20.2415 72.1915 20.2908 72.1427 20.3261C72.0939 20.3615 72.0349 20.3811 71.974 20.3823H66.6187C66.5583 20.3828 66.4995 20.3638 66.4515 20.3283L60.0933 15.9543C60.0566 15.9279 60.0268 15.8935 60.0063 15.8539C59.9859 15.8143 59.9754 15.7706 59.9756 15.7263V12.2823C59.9748 12.2455 59.9816 12.209 59.9955 12.1748C60.0094 12.1406 60.0303 12.1095 60.0568 12.0832C60.0833 12.057 60.115 12.0361 60.15 12.0219C60.1849 12.0076 60.2225 12.0003 60.2604 12.0003H66.8416C67.3851 12.0003 67.9063 11.791 68.2906 11.4186C68.6749 11.0461 68.8909 10.541 68.8909 10.0143V9.47428C68.8909 8.94756 68.6749 8.44242 68.2906 8.06997C67.9063 7.69752 67.3851 7.48828 66.8416 7.48828H57.1091V20.0883C57.1092 20.162 57.0793 20.2329 57.0261 20.2856C56.9729 20.3383 56.9004 20.3687 56.8243 20.3703H53.4068C53.3689 20.3703 53.3314 20.363 53.2964 20.3487C53.2614 20.3345 53.2298 20.3136 53.2032 20.2873C53.1767 20.2611 53.1559 20.2299 53.1419 20.1957C53.128 20.1616 53.1212 20.125 53.1221 20.0883V3.90028C53.1186 3.86207 53.1234 3.82359 53.1362 3.78728C53.1489 3.75097 53.1694 3.71764 53.1962 3.68941C53.223 3.66119 53.2555 3.63868 53.2918 3.62333C53.3281 3.60799 53.3673 3.60014 53.4068 3.60028H66.8416C70.1786 3.60028 72.8841 6.22228 72.8841 9.45628V9.99628C72.8863 10.7667 72.7317 11.5301 72.429 12.2425C72.1264 12.955 71.6816 13.6026 71.1203 14.1482C70.559 14.6939 69.8922 15.1268 69.158 15.4223C68.6139 15.6413 68.0407 15.7816 67.4567 15.8397C67.2527 15.86 67.0474 15.8702 66.8416 15.8703H66.3153ZM66.8416 15.2036C66.8415 15.2036 66.8417 15.2036 66.8416 15.2036C67.5478 15.2034 68.2468 15.0681 68.8986 14.8058C69.5505 14.5434 70.1422 14.1592 70.6399 13.6754C71.1376 13.1915 71.5316 12.6176 71.7996 11.9867C72.0676 11.3558 72.2045 10.6801 72.2025 9.99814L72.2025 9.99628L72.2025 9.45628C72.2025 6.59625 69.8081 4.26695 66.8416 4.26695H53.8036V19.7036H56.4275V6.82162H66.8416C67.5638 6.82162 68.2578 7.09961 68.7704 7.5964C69.2832 8.09338 69.5724 8.76875 69.5724 9.47428V10.0143C69.5724 10.7198 69.2832 11.3952 68.7704 11.8922C68.2578 12.389 67.5638 12.6669 66.8416 12.6669H60.6572V15.5272L66.7457 19.7156H70.7272L64.1589 15.2036H66.8416ZM60.6572 15.7299V15.7263C60.6572 15.7275 60.6572 15.7287 60.6572 15.7299Z",fill:"#00FFFF"}),o.createElement("path",{d:"M35.3155 24C42.154 24 47.6977 18.6274 47.6977 12C47.6977 5.37258 42.154 0 35.3155 0C28.477 0 22.9332 5.37258 22.9332 12C22.9332 18.6274 28.477 24 35.3155 24Z",fill:"url(#paint0_radial_79_43)"}),o.createElement("path",{d:"M36.6287 12C36.6246 15.5276 36.1882 19.0422 35.3286 22.47C34.4606 19.0432 34.0158 15.5286 34.0037 12C34.0158 8.47149 34.4606 4.95685 35.3286 1.53003C36.1882 4.95783 36.6246 8.47245 36.6287 12Z",fill:"black"}),o.createElement("path",{d:"M37.1481 9.8035C38.1466 9.8035 38.956 9.0191 38.956 8.0515C38.956 7.0839 38.1466 6.2995 37.1481 6.2995C36.1497 6.2995 35.3403 7.0839 35.3403 8.0515C35.3403 9.0191 36.1497 9.8035 37.1481 9.8035Z",fill:"white"})),o.createElement("defs",null,o.createElement("radialGradient",{id:"paint0_radial_79_43",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(34.8332 -3.108) scale(25.6375 24.846)"},o.createElement("stop",{offset:"0.23",stopColor:"#FFF883"}),o.createElement("stop",{offset:"0.31",stopColor:"#FCF882"}),o.createElement("stop",{offset:"0.38",stopColor:"#F2F87E"}),o.createElement("stop",{offset:"0.45",stopColor:"#E1F778"}),o.createElement("stop",{offset:"0.5",stopColor:"#C9F770"}),o.createElement("stop",{offset:"0.56",stopColor:"#AAF765"}),o.createElement("stop",{offset:"0.62",stopColor:"#84F658"}),o.createElement("stop",{offset:"0.67",stopColor:"#57F548"}),o.createElement("stop",{offset:"0.72",stopColor:"#25F436"}),o.createElement("stop",{offset:"0.74",stopColor:"#14F430"})),o.createElement("clipPath",{id:"clip0_79_43"},o.createElement("rect",{width:"137",height:"24",fill:"white"}))))};var oy=[{name:"PITCHDECK",url:"/",active:!1},{name:"STARMAP",url:"https://starmap.vorpal.finance",active:!1},{name:"SALE",url:"https://sale.vorpal.finance",active:!0},{name:"LITEPAPER",url:"/",active:!1},{name:"GITHUB",url:"/",active:!1}];const ay=function(){return o.createElement("div",{className:"mainMenu"},oy.map((function(e,t){return o.createElement("div",{key:"mitm_".concat(4.567*t),className:"mainMenuItem".concat(e.active?" active":"")},o.createElement("a",{href:e.url},e.name))})))},ly=function(e){return o.createElement("div",{className:"ActionBtn",onClick:e.onClick},e.text)},cy=-32700,uy=-32600,dy=-32601,hy=-32602,fy=-32603,py=-32e3,my=-32001,gy=-32002,vy=-32003,yy=-32004,by=-32005,_y=-32006;class xy extends Error{constructor(e,t){super(e),this.innerError=t,this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(new.target.constructor):this.stack=(new Error).stack}static convertToString(e,t=!1){if(null==e)return"undefined";const n=JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t));return t&&["bigint","string"].includes(typeof e)?n.replace(/['\\"]+/g,""):n}toJSON(){return{name:this.name,code:this.code,message:this.message,innerError:this.innerError}}}class wy extends xy{constructor(e,t){super(`Invalid value given "${xy.convertToString(e,!0)}". Error: ${t}.`),this.name=this.constructor.name}}class Ey extends xy{constructor(){super("Private key must be 32 bytes."),this.code=701}}class Sy extends xy{constructor(){super("Invalid Private Key, Not a valid string or uint8Array"),this.code=702}}class Ay extends xy{constructor(e){super(`"${e}"`),this.code=802}}class Ty extends xy{constructor(){super("Invalid key derivation function"),this.code=703}}class My extends xy{constructor(){super("Key derivation failed - possibly wrong password"),this.code=704}}class Cy extends xy{constructor(){super("Unsupported key store version"),this.code=705}}class Py extends xy{constructor(){super("Password cannot be empty"),this.code=706}}class Ry extends xy{constructor(){super("Initialization vector must be 16 bytes"),this.code=707}}class Iy extends xy{constructor(){super("c > 1000, pbkdf2 is less secure with less iterations"),this.code=709}}class Ly extends xy{constructor(e,t){super(e),this.code=500,t&&(this.errorCode=t.code,this.errorReason=t.reason)}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{errorCode:this.errorCode,errorReason:this.errorReason})}}class ky extends Ly{constructor(e){super("Connection not open",e),this.code=503}}class Oy extends Ly{constructor(e){super(`Maximum number of reconnect attempts reached! (${e})`),this.code=505}}class Ny extends Ly{constructor(){super("CONNECTION ERROR: Provider started to reconnect before the response got received!"),this.code=506}}class Dy extends Ly{constructor(e){super(`Request already sent with following id: ${e}`),this.code=507}}class By extends xy{constructor(e,t){super(e),this.code=300,this.receipt=t}}class Uy extends xy{constructor(e,t){super(`The resolver at ${e} does not implement requested method: "${t}".`),this.address=e,this.name=t,this.code=301}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{address:this.address,name:this.name})}}class Fy extends By{constructor(e){if(super(e.message||"Error"),this.name="name"in e&&e.name||this.constructor.name,this.stack="stack"in e&&e.stack||void 0,this.code=e.code,"object"==typeof e.data){let t;t="originalError"in e.data?e.data.originalError:e.data,this.data=t.data,this.innerError=new Fy(t)}else this.data=e.data}setDecodedProperties(e,t,n){this.errorName=e,this.errorSignature=t,this.errorArgs=n}toJSON(){let e=Object.assign(Object.assign({},super.toJSON()),{data:this.data});return this.errorName&&(e=Object.assign(Object.assign({},e),{errorName:this.errorName,errorSignature:this.errorSignature,errorArgs:this.errorArgs})),e}}class zy extends By{constructor(e){super("Error happened while trying to execute a function inside a smart contract"),this.code=310,this.innerError=new Fy(e)}}class Hy extends wy{constructor(e){var t,n;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(n=e.input)&&void 0!==n?n:"undefined"}`,'You can\'t have "data" and "input" as properties of a contract at the same time, please use either "data" or "input" instead.'),this.code=311}}class Gy extends xy{constructor(e){super(`ENS is not supported on network ${e}`),this.code=902}}class Vy extends xy{constructor(){super("Network not synced"),this.code=903}}class jy extends xy{constructor(e){super(`Invalid parameters passed. "${void 0!==e?e:""}"`),this.hint=e,this.code=207}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{hint:this.hint})}}class Wy extends xy{constructor(){super(...arguments),this.code=201}}class qy extends xy{constructor(){super("The method you're trying to call is not implemented."),this.code=202}}class Xy extends xy{constructor(){super(...arguments),this.code=203}}class Zy extends xy{constructor(){super(...arguments),this.code=204}}class Yy extends xy{constructor(e,t){super(e),this.code=205,this.props=null!=t?t:{}}}class Ky extends xy{constructor(e){super(`A plugin with the namespace: ${e} has already been registered.`),this.code=206}}class Qy extends xy{constructor(){super(...arguments),this.code=600}}class Jy extends xy{constructor(e){super(`Client URL "${e}" is invalid.`),this.code=602}}class $y extends xy{constructor(){super(...arguments),this.code=603}}class eb extends xy{constructor(){super(...arguments),this.code=604}}class tb extends wy{constructor(){super(...arguments),this.code=801}}class nb extends xy{constructor(e,t){super(e),this.receipt=t,this.code=400}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{receipt:this.receipt})}}class rb extends xy{constructor(e,t,n,r){super("Transaction has been reverted by the EVM"+(void 0===n?"":`:\n ${xy.convertToString(n)}`)),this.reason=e,this.signature=t,this.receipt=n,this.data=r,this.code=402}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,signature:this.signature,receipt:this.receipt,data:this.data})}}class ib extends rb{constructor(e,t,n,r,i,s,o){super(e),this.reason=e,this.customErrorName=t,this.customErrorDecodedSignature=n,this.customErrorArguments=r,this.signature=i,this.receipt=s,this.data=o,this.code=438}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{reason:this.reason,customErrorName:this.customErrorName,customErrorDecodedSignature:this.customErrorDecodedSignature,customErrorArguments:this.customErrorArguments,signature:this.signature,receipt:this.receipt,data:this.data})}}class sb extends nb{constructor(e){super("Transaction has been reverted by the EVM"+(void 0===e?"":`:\n ${xy.convertToString(e)}`),e),this.code=405}}class ob extends nb{constructor(){super("Raw transaction undefined"),this.code=407}}class ab extends nb{constructor(){super("Transaction not found"),this.code=430}}class lb extends wy{constructor(e){super(e,"invalid transaction with invalid sender"),this.code=408}}class cb extends wy{constructor(e){super(e,"invalid transaction with invalid receiver"),this.code=437}}class ub extends wy{constructor(){super("MissingCustomChainError","If tx.common is provided it must have tx.common.customChain"),this.code=410}}class db extends wy{constructor(){super("MissingCustomChainIdError","If tx.common is provided it must have tx.common.customChain and tx.common.customChain.chainId"),this.code=411}}class hb extends wy{constructor(e){super(JSON.stringify(e),"Chain Id doesnt match in tx.chainId tx.common.customChain.chainId"),this.code=412}}class fb extends wy{constructor(e){super(JSON.stringify(e),"Chain doesnt match in tx.chain tx.common.basechain"),this.code=435}}class pb extends wy{constructor(e){super(JSON.stringify(e),"hardfork doesnt match in tx.hardfork tx.common.hardfork"),this.code=436}}class mb extends wy{constructor(){super("CommonOrChainAndHardforkError","Please provide the common object or the chain and hardfork property but not all together."),this.code=413}}class gb extends wy{constructor(e){var t,n;super("MissingChainOrHardforkError",`When specifying chain and hardfork, both values must be defined. Received "chain": ${null!==(t=e.chain)&&void 0!==t?t:"undefined"}, "hardfork": ${null!==(n=e.hardfork)&&void 0!==n?n:"undefined"}`),this.code=414}}class vb extends xy{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions'),this.code=440}}class yb extends wy{constructor(e){var t,n,r,i;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(n=e.gasPrice)&&void 0!==n?n:"undefined"}, maxPriorityFeePerGas: ${null!==(r=e.maxPriorityFeePerGas)&&void 0!==r?r:"undefined"}, maxFeePerGas: ${null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"}`,'"gas" is missing'),this.code=415,this.innerError=new vb}}class bb extends xy{constructor(){super('Missing properties in transaction, either define "gas" and "gasPrice" for type 0 transactions or "gas", "maxPriorityFeePerGas" and "maxFeePerGas" for type 2 transactions, not both'),this.code=441}}class _b extends wy{constructor(e){var t,n,r,i;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(n=e.gasPrice)&&void 0!==n?n:"undefined"}, maxPriorityFeePerGas: ${null!==(r=e.maxPriorityFeePerGas)&&void 0!==r?r:"undefined"}, maxFeePerGas: ${null!==(i=e.maxFeePerGas)&&void 0!==i?i:"undefined"}`,"transaction must specify legacy or fee market gas properties, not both"),this.code=434,this.innerError=new bb}}class xb extends wy{constructor(e){var t,n;super(`gas: ${null!==(t=e.gas)&&void 0!==t?t:"undefined"}, gasPrice: ${null!==(n=e.gasPrice)&&void 0!==n?n:"undefined"}`,"Gas or gasPrice is lower than 0"),this.code=416}}class wb extends wy{constructor(e){var t,n;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(n=e.maxFeePerGas)&&void 0!==n?n:"undefined"}`,"maxPriorityFeePerGas or maxFeePerGas is lower than 0"),this.code=417}}class Eb extends wy{constructor(e){super(e,"eip-1559 transactions don't support gasPrice"),this.code=418}}class Sb extends wy{constructor(e){var t,n;super(`maxPriorityFeePerGas: ${null!==(t=e.maxPriorityFeePerGas)&&void 0!==t?t:"undefined"}, maxFeePerGas: ${null!==(n=e.maxFeePerGas)&&void 0!==n?n:"undefined"}`,"pre-eip-1559 transaction don't support maxFeePerGas/maxPriorityFeePerGas"),this.code=419}}class Ab extends wy{constructor(e){super(e,"invalid transaction object"),this.code=420}}class Tb extends wy{constructor(e){var t,n;super(`nonce: ${null!==(t=e.nonce)&&void 0!==t?t:"undefined"}, chainId: ${null!==(n=e.chainId)&&void 0!==n?n:"undefined"}`,"Nonce or chainId is lower than 0"),this.code=421}}class Mb extends wy{constructor(){super("UnableToPopulateNonceError","unable to populate nonce, no from address available"),this.code=422}}class Cb extends wy{constructor(){super("Eip1559NotSupportedError","Network doesn't support eip-1559"),this.code=423}}class Pb extends wy{constructor(e){super(e,"unsupported transaction type"),this.code=424}}class Rb extends wy{constructor(e){var t,n;super(`data: ${null!==(t=e.data)&&void 0!==t?t:"undefined"}, input: ${null!==(n=e.input)&&void 0!==n?n:"undefined"}`,'You can\'t have "data" and "input" as properties of transactions at the same time, please use either "data" or "input" instead.'),this.code=425}}class Ib extends xy{constructor(e){super(`The connected Ethereum Node did not respond within ${e.numberOfSeconds} seconds, please make sure your transaction was properly sent and you are connected to a healthy Node. Be aware that transaction might still be pending or mined!\n\tTransaction Hash: ${e.transactionHash?e.transactionHash.toString():"not available"}`),this.code=431}}function Lb(e){return`Please make sure your transaction was properly sent and there are no previous pending transaction for the same account. However, be aware that it might still be mined!\n\tTransaction Hash: ${e?e.toString():"not available"}`}class kb extends xy{constructor(e){super(`Transaction was not mined within ${e.numberOfSeconds} seconds. ${Lb(e.transactionHash)}`),this.code=426}}class Ob extends xy{constructor(e){super(`Transaction started at ${e.starterBlockNumber} but was not mined within ${e.numberOfBlocks} blocks. ${Lb(e.transactionHash)}`),this.code=432}}class Nb extends wy{constructor(e){var t,n;super(`receipt: ${JSON.stringify(e.receipt)}, blockHash: ${null===(t=e.blockHash)||void 0===t?void 0:t.toString()}, transactionHash: ${null===(n=e.transactionHash)||void 0===n?void 0:n.toString()}`,"Receipt missing or blockHash null"),this.code=427}}class Db extends wy{constructor(e){super(`receipt: ${JSON.stringify(e.receipt)}`,"Receipt missing block number"),this.code=428}}class Bb extends xy{constructor(e){super(`Invalid signature. "${e}"`),this.code=433}}class Ub extends wy{constructor(){super("LocalWalletNotAvailableError","Attempted to index account in local wallet, but no wallet is available"),this.code=429}}class Fb extends xy{constructor(e,t){const n=[];e.forEach((e=>n.push(e.keyword))),super(`The following properties are invalid for the transaction type ${t}: ${n.join(", ")}`),this.code=439}}class zb extends wy{constructor(e){super(e,"can not parse as byte data"),this.code=1002}}class Hb extends wy{constructor(e){super(e,"can not parse as number data"),this.code=1003}}class Gb extends wy{constructor(e){super(e,"invalid ethereum address"),this.code=1005}}class Vb extends wy{constructor(e){super(e,"not a valid string"),this.code=1001}}class jb extends wy{constructor(e){super(e,"invalid unit"),this.code=1004}}class Wb extends wy{constructor(e){super(e,"can not be converted to hex"),this.code=1006}}class qb extends wy{constructor(e){super(e,"value greater than the nibble width"),this.code=1014}}class Xb extends wy{constructor(e){super(e,"not a valid boolean."),this.code=1008}}class Zb extends wy{constructor(e){super(e,"not a valid unsigned integer."),this.code=1009}}class Yb extends wy{constructor(e){super(e,"invalid size given."),this.code=1010}}class Kb extends wy{constructor(e){super(e,"value is larger than size."),this.code=1011}}class Qb extends wy{constructor(e){super(e,"invalid string given"),this.code=1012}}const Jb=e=>(e=>!(Array.isArray(e)||"2.0"!==e.jsonrpc||!e||void 0!==e.result&&null!==e.result||!("error"in e)||"number"!=typeof e.id&&"string"!=typeof e.id))(e)?e.error.message:"";class $b extends xy{constructor(e,t,n){var r;let i;super(null!=t?t:`Returned error: ${Array.isArray(e)?e.map((e=>Jb(e))).join(","):Jb(e)}`),this.code=100,t||(this.data=Array.isArray(e)?e.map((e=>{var t;return null===(t=e.error)||void 0===t?void 0:t.data})):null===(r=null==e?void 0:e.error)||void 0===r?void 0:r.data),this.request=n,"error"in e?i=e.error:e instanceof Array&&(i=e.map((e=>e.error))),this.innerError=i}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{data:this.data,request:this.request})}}class e_ extends $b{constructor(e,t){let n;super(e,void 0,t),this.code=101,"error"in e?n=e.error:e instanceof Array&&(n=e.map((e=>e.error))),this.innerError=n}}class t_ extends xy{constructor(e,t){super(`Web3Config hardfork doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=1101}}class n_ extends xy{constructor(e,t){super(`Web3Config chain doesnt match in defaultHardfork ${e} and common.hardfork ${t}`),this.code=1101}}const r_="An Rpc error has occured with a code of *code*",i_={[cy]:{message:"Parse error",description:"Invalid JSON"},[uy]:{message:"Invalid request",description:"JSON is not a valid request object\t"},[dy]:{message:"Method not found",description:"Method does not exist\t"},[hy]:{message:"Invalid params",description:"Invalid method parameters"},[fy]:{message:"Internal error",description:"Internal JSON-RPC error"},[py]:{message:"Invalid input",description:"Missing or invalid parameters"},[my]:{message:"Resource not found",description:"Requested resource not found"},[gy]:{message:"Resource unavailable",description:"Requested resource not available"},[vy]:{message:"Transaction rejected",description:"Transaction creation failed"},[yy]:{message:"Method not supported",description:"Method is not implemented"},[by]:{message:"Limit exceeded",description:"Request exceeds defined limit"},[_y]:{message:"JSON-RPC version not supported",description:"Version of JSON-RPC protocol is not supported"},4001:{name:"User Rejected Request",message:"The user rejected the request."},4100:{name:"Unauthorized",message:"The requested method and/or account has not been authorized by the user."},4200:{name:"Unsupported Method",message:"The Provider does not support the requested method."},4900:{name:"Disconnected",message:"The Provider is disconnected from all chains."},4901:{name:"Chain Disconnected",message:"The Provider is not connected to the requested chain."},"0-999":{name:"",message:"Not used."},1e3:{name:"Normal Closure",message:"The connection successfully completed the purpose for which it was created."},1001:{name:"Going Away",message:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{name:"Protocol error",message:"The endpoint is terminating the connection due to a protocol error."},1003:{name:"Unsupported Data",message:"The connection is being terminated because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)"},1004:{name:"Reserved",message:"Reserved. A meaning might be defined in the future."},1005:{name:"No Status Rcvd",message:"Reserved. Indicates that no status code was provided even though one was expected."},1006:{name:"Abnormal Closure",message:"Reserved. Indicates that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{name:"Invalid frame payload data",message:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{name:"Policy Violation",message:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{name:"Message Too Big",message:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{name:"Mandatory Ext.",message:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{name:"Internal Error",message:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{name:"Service Restart",message:"The server is terminating the connection because it is restarting."},1013:{name:"Try Again Later",message:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{name:"Bad Gateway",message:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{name:"TLS handshake",message:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},"1016-2999":{name:"",message:"For definition by future revisions of the WebSocket Protocol specification, and for definition by extension specifications."},"3000-3999":{name:"",message:"For use by libraries, frameworks, and applications. These status codes are registered directly with IANA. The interpretation of these codes is undefined by the WebSocket protocol."},"4000-4999":{name:"",message:"For private use, and thus can't be registered. Such codes can be used by prior agreements between WebSocket applications. The interpretation of these codes is undefined by the WebSocket protocol."}};class s_ extends xy{constructor(e,t){super(null!=t?t:r_.replace("*code*",e.error.code.toString())),this.code=e.error.code,this.id=e.id,this.jsonrpc=e.jsonrpc,this.jsonRpcError=e.error}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{error:this.jsonRpcError,id:this.id,jsonRpc:this.jsonrpc})}}class o_ extends xy{constructor(e,t){var n,r,i,s;if(e)if(null===(n=i_[e])||void 0===n?void 0:n.message)super(i_[e].message);else{const t=Object.keys(i_).find((t=>"string"==typeof t&&e>=parseInt(t.split("-")[0],10)&&e<=parseInt(t.split("-")[1],10)));super(null!==(i=null===(r=i_[null!=t?t:""])||void 0===r?void 0:r.message)&&void 0!==i?i:r_.replace("*code*",null!==(s=null==e?void 0:e.toString())&&void 0!==s?s:'""'))}else super();this.code=e,this.data=t}}const a_=new Map;a_.set(cy,{error:class extends s_{constructor(e){super(e,i_[-32700].message),this.code=cy}}}),a_.set(uy,{error:class extends s_{constructor(e){super(e,i_[-32600].message),this.code=uy}}}),a_.set(dy,{error:class extends s_{constructor(e){super(e,i_[-32601].message),this.code=dy}}}),a_.set(hy,{error:class extends s_{constructor(e){super(e,i_[-32602].message),this.code=hy}}}),a_.set(fy,{error:class extends s_{constructor(e){super(e,i_[-32603].message),this.code=fy}}}),a_.set(py,{error:class extends s_{constructor(e){super(e,i_[-32e3].message),this.code=py}}}),a_.set(yy,{error:class extends s_{constructor(e){super(e,i_[-32004].message),this.code=yy}}}),a_.set(gy,{error:class extends s_{constructor(e){super(e,i_[-32002].message),this.code=gy}}}),a_.set(vy,{error:class extends s_{constructor(e){super(e,i_[-32003].message),this.code=vy}}}),a_.set(my,{error:class extends s_{constructor(e){super(e,i_[-32001].message),this.code=my}}}),a_.set(_y,{error:class extends s_{constructor(e){super(e,i_[-32006].message),this.code=_y}}}),a_.set(by,{error:class extends s_{constructor(e){super(e,i_[-32005].message),this.code=by}}});class l_ extends xy{constructor(e){super(`Format for the type ${e} is unsupported`),this.type=e,this.code=1200}toJSON(){return Object.assign(Object.assign({},super.toJSON()),{type:this.type})}}function c_(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function u_(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}const d_={number:c_,bool:function(e){if("boolean"!=typeof e)throw new Error(`Expected boolean, not ${e}`)},bytes:u_,hash:function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");c_(e.outputLen),c_(e.blockLen)},exists:function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){u_(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}},h_=BigInt(2**32-1),f_=BigInt(32);function p_(e,t=!1){return t?{h:Number(e&h_),l:Number(e>>f_&h_)}:{h:0|Number(e>>f_&h_),l:0|Number(e&h_)}}const m_={fromBig:p_,split:function(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=p_(e[i],t);[n[i],r[i]]=[s,o]}return[n,r]},toBig:(e,t)=>BigInt(e>>>0)<<f_|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:(e,t,n)=>e<<n|t>>>32-n,rotlSL:(e,t,n)=>t<<n|e>>>32-n,rotlBH:(e,t,n)=>t<<n-32|e>>>64-n,rotlBL:(e,t,n)=>e<<n-32|t>>>64-n,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},g_=m_,v_="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,y_=e=>e instanceof Uint8Array,b_=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),__=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),x_=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function w_(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function E_(e){if("string"==typeof e&&(e=w_(e)),!y_(e))throw new Error("expected Uint8Array, got "+typeof e);return e}function S_(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!y_(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));class A_{clone(){return this._cloneInto()}}const T_=e=>"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object;function M_(e,t){if(void 0!==t&&("object"!=typeof t||!T_(t)))throw new Error("Options should be object or undefined");return Object.assign(e,t)}function C_(e){const t=t=>e().update(E_(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function P_(e=32){if(v_&&"function"==typeof v_.getRandomValues)return v_.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const[R_,I_,L_]=[[],[],[]],k_=BigInt(0),O_=BigInt(1),N_=BigInt(2),D_=BigInt(7),B_=BigInt(256),U_=BigInt(113);for(let e=0,t=O_,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],R_.push(2*(5*r+n)),I_.push((e+1)*(e+2)/2%64);let i=k_;for(let e=0;e<7;e++)t=(t<<O_^(t>>D_)*U_)%B_,t&N_&&(i^=O_<<(O_<<BigInt(e))-O_);L_.push(i)}const[F_,z_]=g_.split(L_,!0),H_=(e,t,n)=>n>32?g_.rotlBH(e,t,n):g_.rotlSH(e,t,n),G_=(e,t,n)=>n>32?g_.rotlBL(e,t,n):g_.rotlSL(e,t,n);class V_ extends A_{constructor(e,t,n,r=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,d_.number(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=b_(this.state)}keccak(){!function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,i=(t+2)%10,s=n[i],o=n[i+1],a=H_(s,o,1)^n[r],l=G_(s,o,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=l}let t=e[2],i=e[3];for(let n=0;n<24;n++){const r=I_[n],s=H_(t,i,r),o=G_(t,i,r),a=R_[n];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=F_[r],e[1]^=z_[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){d_.exists(this);const{blockLen:t,state:n}=this,r=(e=E_(e)).length;for(let i=0;i<r;){const s=Math.min(t-this.pos,r-i);for(let t=0;t<s;t++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!=(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){d_.exists(this,!1),d_.bytes(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return d_.number(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(d_.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return e||(e=new V_(t,n,r,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=s,e.destroyed=this.destroyed,e}}const j_=(e,t,n)=>C_((()=>new V_(t,e,n))),W_=(j_(6,144,28),j_(6,136,32),j_(6,104,48),j_(6,72,64),j_(1,144,28)),q_=j_(1,136,32),X_=j_(1,104,48),Z_=j_(1,72,64),Y_=(e,t,n)=>function(e){const t=(t,n)=>e(n).update(E_(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}(((r={})=>new V_(t,e,void 0===r.dkLen?n:r.dkLen,!0))),K_=(Y_(31,168,16),Y_(31,136,32),d_.bool,d_.bytes);function Q_(e){if(!(e instanceof Uint8Array))throw new TypeError("bytesToUtf8 expected Uint8Array, got "+typeof e);return(new TextDecoder).decode(e)}function J_(e){return t=>(d_.bytes(t),e(t))}(()=>{const e="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,t="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);t&&!e&&t("crypto")})(),J_(W_);const $_=(()=>{const e=J_(q_);return e.create=q_.create,e})();var ex,tx;J_(X_),J_(Z_),function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(ex||(ex={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(tx||(tx={}));const nx=ex.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),rx=e=>{switch(typeof e){case"undefined":return nx.undefined;case"string":return nx.string;case"number":return isNaN(e)?nx.nan:nx.number;case"boolean":return nx.boolean;case"function":return nx.function;case"bigint":return nx.bigint;case"symbol":return nx.symbol;case"object":return Array.isArray(e)?nx.array:null===e?nx.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?nx.promise:"undefined"!=typeof Map&&e instanceof Map?nx.map:"undefined"!=typeof Set&&e instanceof Set?nx.set:"undefined"!=typeof Date&&e instanceof Date?nx.date:nx.object;default:return nx.unknown}},ix=ex.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class sx extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,ex.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=(e=>e.message)){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}sx.create=e=>new sx(e);const ox=(e,t)=>{let n;switch(e.code){case ix.invalid_type:n=e.received===nx.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ix.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,ex.jsonStringifyReplacer)}`;break;case ix.unrecognized_keys:n=`Unrecognized key(s) in object: ${ex.joinValues(e.keys,", ")}`;break;case ix.invalid_union:n="Invalid input";break;case ix.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ex.joinValues(e.options)}`;break;case ix.invalid_enum_value:n=`Invalid enum value. Expected ${ex.joinValues(e.options)}, received '${e.received}'`;break;case ix.invalid_arguments:n="Invalid function arguments";break;case ix.invalid_return_type:n="Invalid function return type";break;case ix.invalid_date:n="Invalid date";break;case ix.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:ex.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ix.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ix.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ix.custom:n="Invalid input";break;case ix.invalid_intersection_types:n="Intersection results could not be merged";break;case ix.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case ix.not_finite:n="Number must be finite";break;default:n=t.defaultError,ex.assertNever(e)}return{message:n}};let ax=ox;function lx(){return ax}const cx=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter((e=>!!e)).slice().reverse();for(const e of l)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:i.message||a}};function ux(e,t){const n=cx({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,lx(),ox].filter((e=>!!e))});e.common.issues.push(n)}class dx{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return hx;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const e of t)n.push({key:await e.key,value:await e.value});return dx.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return hx;if("aborted"===i.status)return hx;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const hx=Object.freeze({status:"aborted"}),fx=e=>({status:"dirty",value:e}),px=e=>({status:"valid",value:e}),mx=e=>"aborted"===e.status,gx=e=>"dirty"===e.status,vx=e=>"valid"===e.status,yx=e=>"undefined"!=typeof Promise&&e instanceof Promise;var bx;!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(bx||(bx={}));class _x{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xx=(e,t)=>{if(vx(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new sx(e.common.issues);return this._error=t,this._error}}};function wx(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=r?r:t.defaultError}:{message:null!=n?n:t.defaultError},description:i}}class Ex{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return rx(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:rx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new dx,ctx:{common:e.parent.common,data:e.data,parsedType:rx(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(yx(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rx(e)},i=this._parseSync({data:e,path:r.path,parent:r});return xx(r,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:rx(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(yx(r)?r:Promise.resolve(r));return xx(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,r)=>{const i=e(t),s=()=>r.addIssue({code:ix.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1)))}_refinement(e){return new uw({schema:this,typeName:ww.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return dw.create(this,this._def)}nullable(){return hw.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wx.create(this,this._def)}promise(){return cw.create(this,this._def)}or(e){return Zx.create([this,e],this._def)}and(e){return Jx.create(this,e,this._def)}transform(e){return new uw({...wx(this._def),schema:this,typeName:ww.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new fw({...wx(this._def),innerType:this,defaultValue:t,typeName:ww.ZodDefault})}brand(){return new vw({typeName:ww.ZodBranded,type:this,...wx(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new pw({...wx(this._def),innerType:this,catchValue:t,typeName:ww.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return yw.create(this,e)}readonly(){return bw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Sx=/^c[^\s-]{8,}$/i,Ax=/^[a-z][a-z0-9]*$/,Tx=/^[0-9A-HJKMNP-TV-Z]{26}$/,Mx=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Cx=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let Px;const Rx=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Ix=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class Lx extends Ex{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==nx.string){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.string,received:t.parsedType}),hx}const t=new dx;let n;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("length"===o.kind){const r=e.data.length>o.value,i=e.data.length<o.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?ux(n,{code:ix.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&ux(n,{code:ix.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if("email"===o.kind)Cx.test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"email",code:ix.invalid_string,message:o.message}),t.dirty());else if("emoji"===o.kind)Px||(Px=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Px.test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"emoji",code:ix.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)Mx.test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"uuid",code:ix.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)Sx.test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"cuid",code:ix.invalid_string,message:o.message}),t.dirty());else if("cuid2"===o.kind)Ax.test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"cuid2",code:ix.invalid_string,message:o.message}),t.dirty());else if("ulid"===o.kind)Tx.test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"ulid",code:ix.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(r){n=this._getOrReturnCtx(e,n),ux(n,{validation:"url",code:ix.invalid_string,message:o.message}),t.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"regex",code:ix.invalid_string,message:o.message}),t.dirty())):"trim"===o.kind?e.data=e.data.trim():"includes"===o.kind?e.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty()):"toLowerCase"===o.kind?e.data=e.data.toLowerCase():"toUpperCase"===o.kind?e.data=e.data.toUpperCase():"startsWith"===o.kind?e.data.startsWith(o.value)||(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty()):"endsWith"===o.kind?e.data.endsWith(o.value)||(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty()):"datetime"===o.kind?((s=o).precision?s.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}Z$`):0===s.precision?s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.invalid_string,validation:"datetime",message:o.message}),t.dirty()):"ip"===o.kind?(r=e.data,("v4"===(i=o.version)||!i)&&Rx.test(r)||("v6"===i||!i)&&Ix.test(r)||(n=this._getOrReturnCtx(e,n),ux(n,{validation:"ip",code:ix.invalid_string,message:o.message}),t.dirty())):ex.assertNever(o);var r,i,s;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:ix.invalid_string,...bx.errToObj(n)})}_addCheck(e){return new Lx({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...bx.errToObj(e)})}url(e){return this._addCheck({kind:"url",...bx.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...bx.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...bx.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...bx.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...bx.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...bx.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...bx.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...bx.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...bx.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...bx.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...bx.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...bx.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...bx.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...bx.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...bx.errToObj(t)})}nonempty(e){return this.min(1,bx.errToObj(e))}trim(){return new Lx({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Lx({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Lx({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function kx(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}Lx.create=e=>{var t;return new Lx({checks:[],typeName:ww.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...wx(e)})};class Ox extends Ex{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==nx.number){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.number,received:t.parsedType}),hx}let t;const n=new dx;for(const r of this._def.checks)"int"===r.kind?ex.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==kx(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.not_finite,message:r.message}),n.dirty()):ex.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,bx.toString(t))}gt(e,t){return this.setLimit("min",e,!1,bx.toString(t))}lte(e,t){return this.setLimit("max",e,!0,bx.toString(t))}lt(e,t){return this.setLimit("max",e,!1,bx.toString(t))}setLimit(e,t,n,r){return new Ox({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:bx.toString(r)}]})}_addCheck(e){return new Ox({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:bx.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:bx.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:bx.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:bx.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:bx.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:bx.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:bx.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:bx.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:bx.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&ex.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Ox.create=e=>new Ox({checks:[],typeName:ww.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...wx(e)});class Nx extends Ex{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==nx.bigint){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.bigint,received:t.parsedType}),hx}let t;const n=new dx;for(const r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ux(t,{code:ix.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):ex.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,bx.toString(t))}gt(e,t){return this.setLimit("min",e,!1,bx.toString(t))}lte(e,t){return this.setLimit("max",e,!0,bx.toString(t))}lt(e,t){return this.setLimit("max",e,!1,bx.toString(t))}setLimit(e,t,n,r){return new Nx({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:bx.toString(r)}]})}_addCheck(e){return new Nx({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:bx.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:bx.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:bx.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:bx.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:bx.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Nx.create=e=>{var t;return new Nx({checks:[],typeName:ww.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...wx(e)})};class Dx extends Ex{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==nx.boolean){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.boolean,received:t.parsedType}),hx}return px(e.data)}}Dx.create=e=>new Dx({typeName:ww.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...wx(e)});class Bx extends Ex{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==nx.date){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.date,received:t.parsedType}),hx}if(isNaN(e.data.getTime()))return ux(this._getOrReturnCtx(e),{code:ix.invalid_date}),hx;const t=new dx;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),ux(n,{code:ix.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):ex.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Bx({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:bx.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:bx.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Bx.create=e=>new Bx({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:ww.ZodDate,...wx(e)});class Ux extends Ex{_parse(e){if(this._getType(e)!==nx.symbol){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.symbol,received:t.parsedType}),hx}return px(e.data)}}Ux.create=e=>new Ux({typeName:ww.ZodSymbol,...wx(e)});class Fx extends Ex{_parse(e){if(this._getType(e)!==nx.undefined){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.undefined,received:t.parsedType}),hx}return px(e.data)}}Fx.create=e=>new Fx({typeName:ww.ZodUndefined,...wx(e)});class zx extends Ex{_parse(e){if(this._getType(e)!==nx.null){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.null,received:t.parsedType}),hx}return px(e.data)}}zx.create=e=>new zx({typeName:ww.ZodNull,...wx(e)});class Hx extends Ex{constructor(){super(...arguments),this._any=!0}_parse(e){return px(e.data)}}Hx.create=e=>new Hx({typeName:ww.ZodAny,...wx(e)});class Gx extends Ex{constructor(){super(...arguments),this._unknown=!0}_parse(e){return px(e.data)}}Gx.create=e=>new Gx({typeName:ww.ZodUnknown,...wx(e)});class Vx extends Ex{_parse(e){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.never,received:t.parsedType}),hx}}Vx.create=e=>new Vx({typeName:ww.ZodNever,...wx(e)});class jx extends Ex{_parse(e){if(this._getType(e)!==nx.undefined){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.void,received:t.parsedType}),hx}return px(e.data)}}jx.create=e=>new jx({typeName:ww.ZodVoid,...wx(e)});class Wx extends Ex{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==nx.array)return ux(t,{code:ix.invalid_type,expected:nx.array,received:t.parsedType}),hx;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(ux(t,{code:e?ix.too_big:ix.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(ux(t,{code:ix.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(ux(t,{code:ix.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new _x(t,e,t.path,n))))).then((e=>dx.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>r.type._parseSync(new _x(t,e,t.path,n))));return dx.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Wx({...this._def,minLength:{value:e,message:bx.toString(t)}})}max(e,t){return new Wx({...this._def,maxLength:{value:e,message:bx.toString(t)}})}length(e,t){return new Wx({...this._def,exactLength:{value:e,message:bx.toString(t)}})}nonempty(e){return this.min(1,e)}}function qx(e){if(e instanceof Xx){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=dw.create(qx(r))}return new Xx({...e._def,shape:()=>t})}return e instanceof Wx?new Wx({...e._def,type:qx(e.element)}):e instanceof dw?dw.create(qx(e.unwrap())):e instanceof hw?hw.create(qx(e.unwrap())):e instanceof $x?$x.create(e.items.map((e=>qx(e)))):e}Wx.create=(e,t)=>new Wx({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ww.ZodArray,...wx(t)});class Xx extends Ex{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=ex.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==nx.object){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.object,received:t.parsedType}),hx}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof Vx&&"strip"===this._def.unknownKeys))for(const e in n.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=r[e],i=n.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new _x(n,i,n.path,e)),alwaysSet:e in n.data})}if(this._def.catchall instanceof Vx){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:n.data[e]}});else if("strict"===e)s.length>0&&(ux(n,{code:ix.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const r=n.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new _x(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const n=await t.key;e.push({key:n,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>dx.mergeObjectSync(t,e))):dx.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return bx.errToObj,new Xx({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i,s,o;const a=null!==(s=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,t,n).message)&&void 0!==s?s:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=bx.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new Xx({...this._def,unknownKeys:"strip"})}passthrough(){return new Xx({...this._def,unknownKeys:"passthrough"})}extend(e){return new Xx({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Xx({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ww.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Xx({...this._def,catchall:e})}pick(e){const t={};return ex.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new Xx({...this._def,shape:()=>t})}omit(e){const t={};return ex.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new Xx({...this._def,shape:()=>t})}deepPartial(){return qx(this)}partial(e){const t={};return ex.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new Xx({...this._def,shape:()=>t})}required(e){const t={};return ex.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof dw;)e=e._def.innerType;t[n]=e}})),new Xx({...this._def,shape:()=>t})}keyof(){return ow(ex.objectKeys(this.shape))}}Xx.create=(e,t)=>new Xx({shape:()=>e,unknownKeys:"strip",catchall:Vx.create(),typeName:ww.ZodObject,...wx(t)}),Xx.strictCreate=(e,t)=>new Xx({shape:()=>e,unknownKeys:"strict",catchall:Vx.create(),typeName:ww.ZodObject,...wx(t)}),Xx.lazycreate=(e,t)=>new Xx({shape:e,unknownKeys:"strip",catchall:Vx.create(),typeName:ww.ZodObject,...wx(t)});class Zx extends Ex{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const n=e.map((e=>new sx(e.ctx.common.issues)));return ux(t,{code:ix.invalid_union,unionErrors:n}),hx}));{let e;const r=[];for(const i of n){const n={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:n});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map((e=>new sx(e)));return ux(t,{code:ix.invalid_union,unionErrors:i}),hx}}get options(){return this._def.options}}Zx.create=(e,t)=>new Zx({options:e,typeName:ww.ZodUnion,...wx(t)});const Yx=e=>e instanceof iw?Yx(e.schema):e instanceof uw?Yx(e.innerType()):e instanceof sw?[e.value]:e instanceof aw?e.options:e instanceof lw?Object.keys(e.enum):e instanceof fw?Yx(e._def.innerType):e instanceof Fx?[void 0]:e instanceof zx?[null]:null;class Kx extends Ex{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==nx.object)return ux(t,{code:ix.invalid_type,expected:nx.object,received:t.parsedType}),hx;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ux(t,{code:ix.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),hx)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const n of t){const t=Yx(n.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(r.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);r.set(i,n)}}return new Kx({typeName:ww.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...wx(n)})}}function Qx(e,t){const n=rx(e),r=rx(t);if(e===t)return{valid:!0,data:e};if(n===nx.object&&r===nx.object){const n=ex.objectKeys(t),r=ex.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const n of r){const r=Qx(e[n],t[n]);if(!r.valid)return{valid:!1};i[n]=r.data}return{valid:!0,data:i}}if(n===nx.array&&r===nx.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=Qx(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===nx.date&&r===nx.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Jx extends Ex{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(mx(e)||mx(r))return hx;const i=Qx(e.value,r.value);return i.valid?((gx(e)||gx(r))&&t.dirty(),{status:t.value,value:i.data}):(ux(n,{code:ix.invalid_intersection_types}),hx)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((([e,t])=>r(e,t))):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Jx.create=(e,t,n)=>new Jx({left:e,right:t,typeName:ww.ZodIntersection,...wx(n)});class $x extends Ex{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==nx.array)return ux(n,{code:ix.invalid_type,expected:nx.array,received:n.parsedType}),hx;if(n.data.length<this._def.items.length)return ux(n,{code:ix.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),hx;!this._def.rest&&n.data.length>this._def.items.length&&(ux(n,{code:ix.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new _x(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>dx.mergeArray(t,e))):dx.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new $x({...this._def,rest:e})}}$x.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new $x({items:e,typeName:ww.ZodTuple,rest:null,...wx(t)})};class ew extends Ex{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==nx.object)return ux(n,{code:ix.invalid_type,expected:nx.object,received:n.parsedType}),hx;const r=[],i=this._def.keyType,s=this._def.valueType;for(const e in n.data)r.push({key:i._parse(new _x(n,e,n.path,e)),value:s._parse(new _x(n,n.data[e],n.path,e))});return n.common.async?dx.mergeObjectAsync(t,r):dx.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new ew(t instanceof Ex?{keyType:e,valueType:t,typeName:ww.ZodRecord,...wx(n)}:{keyType:Lx.create(),valueType:e,typeName:ww.ZodRecord,...wx(t)})}}class tw extends Ex{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==nx.map)return ux(n,{code:ix.invalid_type,expected:nx.map,received:n.parsedType}),hx;const r=this._def.keyType,i=this._def.valueType,s=[...n.data.entries()].map((([e,t],s)=>({key:r._parse(new _x(n,e,n.path,[s,"key"])),value:i._parse(new _x(n,t,n.path,[s,"value"]))})));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of s){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return hx;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of s){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return hx;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}tw.create=(e,t,n)=>new tw({valueType:t,keyType:e,typeName:ww.ZodMap,...wx(n)});class nw extends Ex{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==nx.set)return ux(n,{code:ix.invalid_type,expected:nx.set,received:n.parsedType}),hx;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(ux(n,{code:ix.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(ux(n,{code:ix.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const n=new Set;for(const r of e){if("aborted"===r.status)return hx;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const o=[...n.data.values()].map(((e,t)=>i._parse(new _x(n,e,n.path,t))));return n.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new nw({...this._def,minSize:{value:e,message:bx.toString(t)}})}max(e,t){return new nw({...this._def,maxSize:{value:e,message:bx.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}nw.create=(e,t)=>new nw({valueType:e,minSize:null,maxSize:null,typeName:ww.ZodSet,...wx(t)});class rw extends Ex{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==nx.function)return ux(t,{code:ix.invalid_type,expected:nx.function,received:t.parsedType}),hx;function n(e,n){return cx({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lx(),ox].filter((e=>!!e)),issueData:{code:ix.invalid_arguments,argumentsError:n}})}function r(e,n){return cx({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,lx(),ox].filter((e=>!!e)),issueData:{code:ix.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof cw){const e=this;return px((async function(...t){const o=new sx([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(n(t,e)),o})),l=await Reflect.apply(s,this,a);return await e._def.returns._def.type.parseAsync(l,i).catch((e=>{throw o.addIssue(r(l,e)),o}))}))}{const e=this;return px((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new sx([n(t,o.error)]);const a=Reflect.apply(s,this,o.data),l=e._def.returns.safeParse(a,i);if(!l.success)throw new sx([r(a,l.error)]);return l.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rw({...this._def,args:$x.create(e).rest(Gx.create())})}returns(e){return new rw({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new rw({args:e||$x.create([]).rest(Gx.create()),returns:t||Gx.create(),typeName:ww.ZodFunction,...wx(n)})}}class iw extends Ex{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}iw.create=(e,t)=>new iw({getter:e,typeName:ww.ZodLazy,...wx(t)});class sw extends Ex{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ux(t,{received:t.data,code:ix.invalid_literal,expected:this._def.value}),hx}return{status:"valid",value:e.data}}get value(){return this._def.value}}function ow(e,t){return new aw({values:e,typeName:ww.ZodEnum,...wx(t)})}sw.create=(e,t)=>new sw({value:e,typeName:ww.ZodLiteral,...wx(t)});class aw extends Ex{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ux(t,{expected:ex.joinValues(n),received:t.parsedType,code:ix.invalid_type}),hx}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ux(t,{received:t.data,code:ix.invalid_enum_value,options:n}),hx}return px(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return aw.create(e)}exclude(e){return aw.create(this.options.filter((t=>!e.includes(t))))}}aw.create=ow;class lw extends Ex{_parse(e){const t=ex.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==nx.string&&n.parsedType!==nx.number){const e=ex.objectValues(t);return ux(n,{expected:ex.joinValues(e),received:n.parsedType,code:ix.invalid_type}),hx}if(-1===t.indexOf(e.data)){const e=ex.objectValues(t);return ux(n,{received:n.data,code:ix.invalid_enum_value,options:e}),hx}return px(e.data)}get enum(){return this._def.values}}lw.create=(e,t)=>new lw({values:e,typeName:ww.ZodNativeEnum,...wx(t)});class cw extends Ex{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==nx.promise&&!1===t.common.async)return ux(t,{code:ix.invalid_type,expected:nx.promise,received:t.parsedType}),hx;const n=t.parsedType===nx.promise?t.data:Promise.resolve(t.data);return px(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}cw.create=(e,t)=>new cw({type:e,typeName:ww.ZodPromise,...wx(t)});class uw extends Ex{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ww.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{ux(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:n.path,parent:n}))):this._def.schema._parseSync({data:e,path:n.path,parent:n})}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?hx:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?hx:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!vx(e))return e;const s=r.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>vx(e)?Promise.resolve(r.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}ex.assertNever(r)}}uw.create=(e,t,n)=>new uw({schema:e,typeName:ww.ZodEffects,effect:t,...wx(n)}),uw.createWithPreprocess=(e,t,n)=>new uw({schema:t,effect:{type:"preprocess",transform:e},typeName:ww.ZodEffects,...wx(n)});class dw extends Ex{_parse(e){return this._getType(e)===nx.undefined?px(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}dw.create=(e,t)=>new dw({innerType:e,typeName:ww.ZodOptional,...wx(t)});class hw extends Ex{_parse(e){return this._getType(e)===nx.null?px(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hw.create=(e,t)=>new hw({innerType:e,typeName:ww.ZodNullable,...wx(t)});class fw extends Ex{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===nx.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}fw.create=(e,t)=>new fw({innerType:e,typeName:ww.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...wx(t)});class pw extends Ex{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return yx(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new sx(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new sx(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}pw.create=(e,t)=>new pw({innerType:e,typeName:ww.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...wx(t)});class mw extends Ex{_parse(e){if(this._getType(e)!==nx.nan){const t=this._getOrReturnCtx(e);return ux(t,{code:ix.invalid_type,expected:nx.nan,received:t.parsedType}),hx}return{status:"valid",value:e.data}}}mw.create=e=>new mw({typeName:ww.ZodNaN,...wx(e)});const gw=Symbol("zod_brand");class vw extends Ex{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class yw extends Ex{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?hx:"dirty"===e.status?(t.dirty(),fx(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?hx:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new yw({in:e,out:t,typeName:ww.ZodPipeline})}}class bw extends Ex{_parse(e){const t=this._def.innerType._parse(e);return vx(t)&&(t.value=Object.freeze(t.value)),t}}bw.create=(e,t)=>new bw({innerType:e,typeName:ww.ZodReadonly,...wx(t)});const _w=(e,t={},n)=>e?Hx.create().superRefine(((r,i)=>{var s,o;if(!e(r)){const e="function"==typeof t?t(r):"string"==typeof t?{message:t}:t,a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:n)||void 0===o||o,l="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...l,fatal:a})}})):Hx.create(),xw={object:Xx.lazycreate};var ww;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(ww||(ww={}));const Ew=Lx.create,Sw=Ox.create,Aw=mw.create,Tw=Nx.create,Mw=Dx.create,Cw=Bx.create,Pw=Ux.create,Rw=Fx.create,Iw=zx.create,Lw=Hx.create,kw=Gx.create,Ow=Vx.create,Nw=jx.create,Dw=Wx.create,Bw=Xx.create,Uw=Xx.strictCreate,Fw=Zx.create,zw=Kx.create,Hw=Jx.create,Gw=$x.create,Vw=ew.create,jw=tw.create,Ww=nw.create,qw=rw.create,Xw=iw.create,Zw=sw.create,Yw=aw.create,Kw=lw.create,Qw=cw.create,Jw=uw.create,$w=dw.create,eE=hw.create,tE=uw.createWithPreprocess,nE=yw.create,rE={string:e=>Lx.create({...e,coerce:!0}),number:e=>Ox.create({...e,coerce:!0}),boolean:e=>Dx.create({...e,coerce:!0}),bigint:e=>Nx.create({...e,coerce:!0}),date:e=>Bx.create({...e,coerce:!0})},iE=hx;var sE=Object.freeze({__proto__:null,defaultErrorMap:ox,setErrorMap:function(e){ax=e},getErrorMap:lx,makeIssue:cx,EMPTY_PATH:[],addIssueToContext:ux,ParseStatus:dx,INVALID:hx,DIRTY:fx,OK:px,isAborted:mx,isDirty:gx,isValid:vx,isAsync:yx,get util(){return ex},get objectUtil(){return tx},ZodParsedType:nx,getParsedType:rx,ZodType:Ex,ZodString:Lx,ZodNumber:Ox,ZodBigInt:Nx,ZodBoolean:Dx,ZodDate:Bx,ZodSymbol:Ux,ZodUndefined:Fx,ZodNull:zx,ZodAny:Hx,ZodUnknown:Gx,ZodNever:Vx,ZodVoid:jx,ZodArray:Wx,ZodObject:Xx,ZodUnion:Zx,ZodDiscriminatedUnion:Kx,ZodIntersection:Jx,ZodTuple:$x,ZodRecord:ew,ZodMap:tw,ZodSet:nw,ZodFunction:rw,ZodLazy:iw,ZodLiteral:sw,ZodEnum:aw,ZodNativeEnum:lw,ZodPromise:cw,ZodEffects:uw,ZodTransformer:uw,ZodOptional:dw,ZodNullable:hw,ZodDefault:fw,ZodCatch:pw,ZodNaN:mw,BRAND:gw,ZodBranded:vw,ZodPipeline:yw,ZodReadonly:bw,custom:_w,Schema:Ex,ZodSchema:Ex,late:xw,get ZodFirstPartyTypeKind(){return ww},coerce:rE,any:Lw,array:Dw,bigint:Tw,boolean:Mw,date:Cw,discriminatedUnion:zw,effect:Jw,enum:Yw,function:qw,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>_w((t=>t instanceof e),t),intersection:Hw,lazy:Xw,literal:Zw,map:jw,nan:Aw,nativeEnum:Kw,never:Ow,null:Iw,nullable:eE,number:Sw,object:Bw,oboolean:()=>Mw().optional(),onumber:()=>Sw().optional(),optional:$w,ostring:()=>Ew().optional(),pipeline:nE,preprocess:tE,promise:Qw,record:Vw,set:Ww,strictObject:Uw,string:Ew,symbol:Pw,transformer:Jw,tuple:Gw,undefined:Rw,union:Fw,unknown:kw,void:Nw,NEVER:iE,ZodIssueCode:ix,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:sx});const oE=e=>e.message?e.message:"unspecified error";class aE extends xy{constructor(e){super(),this.code=1100,this.errors=e,super.message=`Web3 validator found ${e.length} error[s]:\n${this._compileErrors().join("\n")}`}_compileErrors(){return this.errors.map(oE)}}const lE=["bool","int","uint","bytes","string","address","tuple"],cE=e=>"object"==typeof e&&"type"in e&&"name"in e,uE=e=>"string"==typeof e,dE=e=>"string"==typeof e&&/^((-)?0x[0-9a-f]+|(0x))$/i.test(e);function hE(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||void 0!==t&&t>0&&e.length!==2+2*t)}const fE=e=>"number"==typeof e||"bigint"==typeof e||"string"==typeof e&&/^((-0x|0x|-)?[0-9a-f]+|(0x))$/i.test(e);function pE(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return e.startsWith("0x")}const mE=function(e){for(const[t,n]of Object.entries(e))if(void 0!==n&&n.length>0&&0===n[0])throw new Error(`${t} cannot have leading zeroes, received: ${n.toString()}`)},gE=["hex","number","blockNumber","blockNumberOrTag","filter","bloom"],vE=e=>{let t,n=e.replace(/ /,""),r=!1,i=[];if(e.includes("[")&&(n=n.slice(0,n.indexOf("[")),i=[...e.matchAll(/(?:\[(\d*)\])/g)].map((e=>parseInt(e[1],10))).map((e=>Number.isNaN(e)?-1:e)),r=i.length>0),lE.includes(n))return{baseType:n,isArray:r,baseTypeSize:t,arraySizes:i};if(n.startsWith("int"))t=parseInt(n.substring(3),10),n="int";else if(n.startsWith("uint"))t=parseInt(e.substring(4),10),n="uint";else{if(!n.startsWith("bytes"))return{baseType:void 0,isArray:!1,baseTypeSize:void 0,arraySizes:i};t=parseInt(n.substring(5),10),n="bytes"}return{baseType:n,isArray:r,baseTypeSize:t,arraySizes:i}},yE=(e,t={})=>{if(Object.keys(t).includes("type"))throw new aE([{keyword:"eth",message:'Either "eth" or "type" can be presented in schema',params:{eth:e},instancePath:"",schemaPath:""}]);const{baseType:n,baseTypeSize:r}=vE(e);if(!n&&!gE.includes(e))throw new aE([{keyword:"eth",message:`Eth data type "${e}" is not valid`,params:{eth:e},instancePath:"",schemaPath:""}]);if(n){if("tuple"===n)throw new Error('"tuple" type is not implemented directly.');return{format:`${n}${null!=r?r:""}`,required:!0}}return e?{format:e,required:!0}:{}},bE=(e,t="/0")=>{const n={type:"array",items:[],maxItems:e.length,minItems:e.length};for(const[r,i]of e.entries()){let e,s,o=[];cE(i)?(e=i.type,s=i.name,o=i.components):"string"==typeof i?(e=i,s=`${t}/${r}`):Array.isArray(i)&&(i[0]&&"string"==typeof i[0]&&i[0].startsWith("tuple")&&!Array.isArray(i[0])&&i[1]&&Array.isArray(i[1])?(e=i[0],s=`${t}/${r}`,o=i[1]):(e="tuple",s=`${t}/${r}`,o=i));const{baseType:a,isArray:l,arraySizes:c}=vE(e);let u,d=n;for(let e=c.length-1;e>0;e-=1)u={type:"array",items:[],maxItems:c[e],minItems:c[e]},c[e]<0&&(delete u.maxItems,delete u.minItems),Array.isArray(d.items)?0===d.items.length?d.items=u:d.items.push(u):d.items=[d.items,u],d=u;if("tuple"!==a||l)if("tuple"===a&&l){const e=c[0],t={$id:s,type:"array",items:bE(o,s),maxItems:e,minItems:e};e<0&&(delete t.maxItems,delete t.minItems),d.items.push(t)}else if(l){const e=c[0],t={type:"array",$id:s,items:yE(String(a)),minItems:e,maxItems:e};e<0&&(delete t.maxItems,delete t.minItems),d.items.push(t)}else Array.isArray(d.items)?d.items.push(Object.assign({$id:s},yE(e))):d.items.items.push(Object.assign({$id:s},yE(e)));else{const e=bE(o,s);e.$id=s,d.items.push(e)}d=n}return n},_E=e=>bE(e),xE=(e,t)=>1===t?e:xE(e[0],t-1),wE=(e,t,n)=>{const r=[];for(const[i,s]of e.entries()){let e,o,a=[];cE(s)?(e=s.type,o=s.name,a=s.components):"string"==typeof s?e=s:Array.isArray(s)&&(s[1]&&Array.isArray(s[1])?(e=s[0],a=s[1]):(e="tuple",a=s));const{baseType:l,isArray:c,arraySizes:u}=vE(e),d=Array.isArray(t)?t[i]:t[o];if("tuple"!==l||c)if("tuple"===l&&c){const e=[];for(const t of d)if(u.length>1){const r=xE(t,u.length-1),i=[];for(const e of r)i.push(wE(a,e,n));e.push(i)}else e.push(wE(a,t,n));r.push(e)}else r.push(d);else r.push(wE(a,d,n))}return(n=null!=n?n:[]).push(...r),n},EE=e=>{if(e>=48&&e<=57)return e-48;if(e>=65&&e<=70)return e-55;if(e>=97&&e<=102)return e-87;throw new Error(`Invalid code point: ${e}`)},SE=e=>{if(!dE(e))throw new Error("Invalid hex string");const[t,n]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e],r=BigInt(n);return r>Number.MAX_SAFE_INTEGER?t?-r:r:r<Number.MIN_SAFE_INTEGER?r:t?-1*Number(r):Number(r)},AE=e=>{if(("number"==typeof e||"bigint"==typeof e)&&e<0)return`-0x${e.toString(16).slice(1)}`;if(("number"==typeof e||"bigint"==typeof e)&&e>=0)return`0x${e.toString(16)}`;if("string"==typeof e&&dE(e)){const[t,n]=e.startsWith("-")?[!0,e.slice(1)]:[!1,e];return`${t?"-":""}0x${n.split(/^(-)?0(x|X)/).slice(-1)[0].replace(/^0+/,"").toLowerCase()}`}if("string"==typeof e&&!dE(e))return AE(BigInt(e));throw new Hb(e)},TE=(e,t,n="0")=>{if("string"==typeof e&&!dE(e))return e.padStart(t,n);const r="string"==typeof e&&dE(e)?e:AE(e),[i,s]=r.startsWith("-")?["-0x",r.slice(3)]:["0x",r.slice(2)];return`${i}${s.padStart(t,n)}`};function ME(e){let t="0x";for(const n of e){const e=n.toString(16);t+=1===e.length?`0${e}`:e}return t}function CE(e){let t;if(t=e.toLowerCase().startsWith("0x")?e.slice(2):e,t.length%2!=0)throw new zb(`hex string has odd length: ${e}`);const n=new Uint8Array(Math.ceil(t.length/2));for(let e=0;e<n.length;e+=1){const r=parseInt(t.substring(2*e,2*e+2),16);n[e]=r}return n}const PE=e=>{if(!/^(0x)?[0-9a-f]{40}$/i.test(e))return!1;const t=e.slice(2),n=w_(t.toLowerCase()),r=ME($_(n)).slice(2);for(let e=0;e<40;e+=1)if(parseInt(r[e],16)>7&&t[e].toUpperCase()!==t[e]||parseInt(r[e],16)<=7&&t[e].toLowerCase()!==t[e])return!1;return!0},RE=(e,t=!0)=>{if("string"!=typeof e&&!(e instanceof Uint8Array))return!1;let n;return n=e instanceof Uint8Array?ME(e):"string"!=typeof e||dE(e)||e.toLowerCase().startsWith("0x")?e:`0x${e}`,!!/^(0x)?[0-9a-f]{40}$/i.test(n)&&(!(!/^(0x|0X)?[0-9a-f]{40}$/.test(n)&&!/^(0x|0X)?[0-9A-F]{40}$/.test(n))||!t||PE(n))};var IE,LE;!function(e){e.NUMBER="NUMBER_NUMBER",e.HEX="NUMBER_HEX",e.STR="NUMBER_STR",e.BIGINT="NUMBER_BIGINT"}(IE||(IE={})),function(e){e.HEX="BYTES_HEX",e.UINT8ARRAY="BYTES_UINT8ARRAY"}(LE||(LE={}));const kE={number:IE.BIGINT,bytes:LE.HEX},OE={number:IE.HEX,bytes:LE.HEX};var NE,DE,BE;(BE=NE||(NE={})).EARLIEST="earliest",BE.LATEST="latest",BE.PENDING="pending",BE.SAFE="safe",BE.FINALIZED="finalized",function(e){e.chainstart="chainstart",e.frontier="frontier",e.homestead="homestead",e.dao="dao",e.tangerineWhistle="tangerineWhistle",e.spuriousDragon="spuriousDragon",e.byzantium="byzantium",e.constantinople="constantinople",e.petersburg="petersburg",e.istanbul="istanbul",e.muirGlacier="muirGlacier",e.berlin="berlin",e.london="london",e.altair="altair",e.arrowGlacier="arrowGlacier",e.grayGlacier="grayGlacier",e.bellatrix="bellatrix",e.merge="merge",e.capella="capella",e.shanghai="shanghai"}(DE||(DE={}));const UE=Object.getPrototypeOf(Uint8Array);var FE=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const zE=Symbol.for("web3/base-provider");class HE{static isWeb3Provider(e){return e instanceof HE||Boolean(e&&e[zE])}get[zE](){return!0}send(e,t){this.request(e).then((e=>{t(null,e)})).catch((e=>{t(e)}))}sendAsync(e){return FE(this,void 0,void 0,(function*(){return this.request(e)}))}asEIP1193Provider(){const e=Object.create(this),t=e.request;return e.request=function(e){return FE(this,void 0,void 0,(function*(){return(yield t(e)).result}))},e.asEIP1193Provider=void 0,e}}class GE extends Array{constructor(e){super(),this._accountProvider=e}}const VE=(e,t)=>{let n=e;for(let r=1;r<t;r+=1)n*=e;return n},jE=(e,t={abiType:"uint"})=>{if(!["number","string","bigint"].includes(typeof e)||"string"==typeof e&&0===e.length)return!1;let n;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=vE(t.abiType);e&&(n=e)}else t.bitSize&&(n=t.bitSize);const r=VE(BigInt(2),BigInt(null!=n?n:256))-BigInt(1);try{const t="string"==typeof e&&dE(e)?BigInt(SE(e)):BigInt(e);return t>=0&&t<=r}catch(e){return!1}},WE=(e,t={abiType:"int"})=>{if(!["number","string","bigint"].includes(typeof e))return!1;if("number"==typeof e&&e>Number.MAX_SAFE_INTEGER)return!1;let n;if(null==t?void 0:t.abiType){const{baseTypeSize:e,baseType:r}=vE(t.abiType);if("int"!==r)return!1;e&&(n=e)}else t.bitSize&&(n=t.bitSize);const r=VE(BigInt(2),BigInt((null!=n?n:256)-1)),i=BigInt(-1)*VE(BigInt(2),BigInt((null!=n?n:256)-1));try{const t="string"==typeof e&&dE(e)?BigInt(SE(e)):BigInt(e);return t>=i&&t<=r}catch(e){return!1}},qE=e=>!!WE(e)||!("string"!=typeof e||!/[0-9.]/.test(e)||e.indexOf(".")!==e.lastIndexOf("."))||"number"==typeof e,XE=e=>jE(e),ZE=e=>Object.values(NE).includes(e),YE=e=>ZE(e)||XE(e),KE=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{512}$/i.test(e)||!/^(0x)?[0-9a-f]{512}$/.test(e)&&!/^(0x)?[0-9A-F]{512}$/.test(e)),QE=(e,t)=>{if("string"==typeof t&&!dE(t))return!1;if(!KE(e))return!1;const n="string"==typeof t?CE(t):t,r=ME($_(n)).slice(2);for(let t=0;t<12;t+=4){const n=(parseInt(r.slice(t,t+2),16)<<8)+parseInt(r.slice(t+2,t+4),16)&2047,i=1<<n%4;if((EE(e.charCodeAt(e.length-1-Math.floor(n/4)))&i)!==i)return!1}return!0},JE=(e,t={abiType:"bytes"})=>{if(!("string"==typeof e||Array.isArray(e)||e instanceof Uint8Array))return!1;if("string"==typeof e&&dE(e)&&e.startsWith("-"))return!1;if("string"==typeof e&&!dE(e))return!1;let n;if("string"==typeof e){if(e.length%2!=0)return!1;n=CE(e)}else if(Array.isArray(e)){if(e.some((e=>e<0||e>255||!Number.isInteger(e))))return!1;n=new Uint8Array(e)}else n=e;if(null==t?void 0:t.abiType){const{baseTypeSize:e}=vE(t.abiType);return!e||n.length===e}return!(null==t?void 0:t.size)||n.length===(null==t?void 0:t.size)},$E=e=>null==e,eS=e=>!("object"!=typeof e||$E(e)||Array.isArray(e)||e instanceof UE),tS=e=>!("string"!=typeof e||!/^(0x)?[0-9a-f]{64}$/i.test(e)||!/^(0x)?[0-9a-f]{64}$/.test(e)&&!/^(0x)?[0-9A-F]{64}$/.test(e)),nS={address:e=>RE(e),bloom:e=>KE(e),blockNumber:e=>XE(e),blockTag:e=>ZE(e),blockNumberOrTag:e=>YE(e),bool:e=>{return!!["number","string","boolean"].includes(typeof(t=e))&&("boolean"==typeof t||("string"!=typeof t||dE(t)?"string"==typeof t&&dE(t)?"0x1"===t||"0x0"===t:1===t||0===t:"1"===t||"0"===t));var t},bytes:e=>JE(e),filter:e=>(e=>{const t=["fromBlock","toBlock","address","topics","blockHash"];if($E(e)||"object"!=typeof e)return!1;if(!Object.keys(e).every((e=>t.includes(e))))return!1;if(!$E(e.fromBlock)&&!YE(e.fromBlock)||!$E(e.toBlock)&&!YE(e.toBlock))return!1;if(!$E(e.address))if(Array.isArray(e.address)){if(!e.address.every((e=>RE(e))))return!1}else if(!RE(e.address))return!1;return!(!$E(e.topics)&&!e.topics.every((e=>!!$E(e)||(Array.isArray(e)?e.every((e=>tS(e))):!!tS(e)))))})(e),hex:e=>dE(e),uint:e=>jE(e),int:e=>WE(e),number:e=>qE(e),string:e=>uE(e)};for(let e=8;e<=256;e+=8)nS[`int${e}`]=t=>WE(t,{bitSize:e}),nS[`uint${e}`]=t=>jE(t,{bitSize:e});for(let e=1;e<=32;e+=1)nS[`bytes${e}`]=t=>JE(t,{size:e});nS.bytes256=nS.bytes;const rS=nS,iS=e=>{if((!(null==e?void 0:e.type)||"object"===(null==e?void 0:e.type))&&(null==e?void 0:e.properties)){const t={};for(const n of Object.keys(e.properties)){const r=iS(e.properties[n]);r&&(t[n]=r)}return Array.isArray(e.required)?sE.object(t).partial().required(e.required.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:!0})),{})):sE.object(t).partial()}if("array"===(null==e?void 0:e.type)&&(null==e?void 0:e.items)){if(Array.isArray(e.items)&&e.items.length>0){const t=[];for(const n of e.items){const e=iS(n);e&&t.push(e)}return sE.tuple(t)}return sE.array(iS(e.items))}if(e.oneOf&&Array.isArray(e.oneOf))return sE.union(e.oneOf.map((e=>iS(e))));if(null==e?void 0:e.format){if(!rS[e.format])throw new l_(e.format);return sE.any().refine(rS[e.format],(t=>({params:{value:t,format:e.format}})))}return(null==e?void 0:e.type)&&"object"!==(null==e?void 0:e.type)&&"function"==typeof sE[String(e.type)]?sE[String(e.type)]():sE.object({data:sE.any()}).partial()};class sS{static factory(){return sS.validatorInstance||(sS.validatorInstance=new sS),sS.validatorInstance}validate(e,t,n){var r,i;const s=iS(e).safeParse(t);if(!s.success){const e=this.convertErrors(null!==(i=null===(r=s.error)||void 0===r?void 0:r.issues)&&void 0!==i?i:[]);if(e){if(null==n?void 0:n.silent)return e;throw new aE(e)}}}convertErrors(e){if(e&&Array.isArray(e)&&e.length>0)return e.map((e=>{var t;let n,r,i,s;s=e.path.join("/");const o=String(e.path[e.path.length-1]),a=e.path.join("/");if(e.code===ix.too_big)r="maxItems",s=`${a}/maxItems`,i={limit:e.maximum},n=`must NOT have more than ${e.maximum} items`;else if(e.code===ix.too_small)r="minItems",s=`${a}/minItems`,i={limit:e.minimum},n=`must NOT have fewer than ${e.minimum} items`;else if(e.code===ix.custom){const{value:r,format:o}=null!==(t=e.params)&&void 0!==t?t:{};n=void 0===r?`value at "/${s}" is required`:`value "${"object"==typeof r?JSON.stringify(r):r}" at "/${s}" must pass "${o}" validation`,i={value:r}}return{keyword:null!=r?r:o,instancePath:a?`/${a}`:"",schemaPath:s?`#${s}`:"#",params:null!=i?i:{value:e.message},message:null!=n?n:e.message}}))}}const oS=new class{constructor(){this._validator=sS.factory()}validateJSONSchema(e,t,n){return this._validator.validate(e,t,n)}validate(e,t,n={silent:!1}){var r,i;const s=_E(e);if(!Array.isArray(s.items)||0!==(null===(r=s.items)||void 0===r?void 0:r.length)||0!==t.length){if(Array.isArray(s.items)&&0===(null===(i=s.items)||void 0===i?void 0:i.length)&&0!==t.length)throw new aE([{instancePath:"/0",schemaPath:"/",keyword:"required",message:"empty schema against data can not be validated",params:t}]);return this._validator.validate(s,t,n)}}},aS={noether:BigInt(0),wei:BigInt(1),kwei:BigInt(1e3),Kwei:BigInt(1e3),babbage:BigInt(1e3),femtoether:BigInt(1e3),mwei:BigInt(1e6),Mwei:BigInt(1e6),lovelace:BigInt(1e6),picoether:BigInt(1e6),gwei:BigInt(1e9),Gwei:BigInt(1e9),shannon:BigInt(1e9),nanoether:BigInt(1e9),nano:BigInt(1e9),szabo:BigInt(1e12),microether:BigInt(1e12),micro:BigInt(1e12),finney:BigInt(1e15),milliether:BigInt(1e15),milli:BigInt(1e15),ether:BigInt("1000000000000000000"),kether:BigInt("1000000000000000000000"),grand:BigInt("1000000000000000000000"),mether:BigInt("1000000000000000000000000"),gether:BigInt("1000000000000000000000000000"),tether:BigInt("1000000000000000000000000000000")},lS=e=>{if(oS.validate(["bytes"],[e]),e instanceof Uint8Array)return e;if(Array.isArray(e))return new Uint8Array(e);if("string"==typeof e)return CE(e);throw new zb(e)},{uint8ArrayToHexString:cS}=e,uS=e=>cS(lS(e)),dS=e=>"string"==typeof e&&"0x"!==e.slice(0,2).toLowerCase()?lS(`0x${e}`):lS(e),hS=e=>(oS.validate(["hex"],[e]),SE(e)),fS=hS,pS=(e,t)=>{"bigint"!=typeof e&&oS.validate(["int"],[e]);let n=AE(e);return t&&(n.startsWith("-")||n.length%2!=1?n.length%2==0&&n.startsWith("-")&&(n="-0x0".concat(n.slice(3))):n="0x0".concat(n.slice(2))),n},mS=pS,gS=e=>hS(e).toString(),vS=e=>{oS.validate(["string"],[e]);let t=e.replace(/^(?:\u0000)/,"");return t=t.replace(/(?:\u0000)$/,""),uS((new TextEncoder).encode(t))},yS=vS,bS=vS,_S=e=>Q_(dS(e)),xS=e=>"string"==typeof e?_S(e):(oS.validate(["bytes"],[e]),Q_(e)),wS=w_,ES=_S,SS=e=>{oS.validate(["string"],[e]);let t="";for(let n=0;n<e.length;n+=1){const r=e.charCodeAt(n).toString(16);t+=r.length%2!=0?`0${r}`:r}return`0x${t}`},AS=SS,TS=e=>new TextDecoder("ascii").decode(dS(e)),MS=TS,CS=(e,t)=>{if("string"==typeof e&&RE(e))return t?"address":`0x${e.toLowerCase().replace(/^0x/i,"")}`;if("boolean"==typeof e)return t?"bool":e?"0x01":"0x00";if("number"==typeof e)return t?e<0?"int256":"uint256":pS(e);if("bigint"==typeof e)return t?"bigint":pS(e);if("object"==typeof e&&e)return t?"string":vS(JSON.stringify(e));if("string"==typeof e){if(e.startsWith("-0x")||e.startsWith("-0X"))return t?"int256":pS(e);if(dE(e))return t?"bytes":e;if(fE(e)&&!WE(e))return t?"bytes":`0x${e}`;if(!Number.isFinite(e))return t?"string":vS(e)}throw new Wb(e)},PS=e=>{if("number"==typeof e)return e;if("bigint"==typeof e)return e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):e;if("string"==typeof e&&dE(e))return hS(e);try{return PS(BigInt(e))}catch(t){throw new Hb(e)}},RS=e=>{if("number"==typeof e)return BigInt(e);if("bigint"==typeof e)return e;if("string"==typeof e&&fE(e))return e.startsWith("-")?-BigInt(e.substring(1)):BigInt(e);throw new Hb(e)},IS=(e,t)=>{const n=aS[t];if(!n)throw new jb(t);const r=String(PS(e)),i=n.toString().length-1;if(i<=0)return r.toString();const s=r.padStart(i,"0"),o=s.slice(0,-i),a=s.slice(-i).replace(/\.?0+$/,"");return""===o?`0.${a}`:""===a?o:`${o}.${a}`},LS=(e,t)=>{oS.validate(["number"],[e]);const n=aS[t];if(!n)throw new jb(t);const[r,i]=String("string"!=typeof e||dE(e)?PS(e):e).split(".").concat(""),s=BigInt(`${r}${i}`)*n,o=n.toString().length-1,a=Math.min(i.length,o);return 0===a?s.toString():s.toString().padStart(a,"0").slice(0,-a)},kS=e=>{if(!RE(e,!1))throw new Gb(e);const t=e.toLowerCase().replace(/^0x/i,""),n=ME($_(wS(t)));if($E(n)||"0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470"===n)return"";let r="0x";const i=n.replace(/^0x/i,"");for(let e=0;e<t.length;e+=1)parseInt(i[e],16)>7?r+=t[e].toUpperCase():r+=t[e];return r},OS=e=>{if("boolean"==typeof e)return e;if("number"==typeof e&&(0===e||1===e))return Boolean(e);if("bigint"==typeof e&&(e===BigInt(0)||e===BigInt(1)))return Boolean(e);if("string"==typeof e&&!dE(e)&&("1"===e||"0"===e||"false"===e||"true"===e))return"true"===e||"false"!==e&&Boolean(Number(e));if("string"==typeof e&&dE(e)&&("0x1"===e||"0x0"===e))return Boolean(PS(e));throw new Xb(e)};var NS=i(187);class DS extends EventTarget{constructor(){super(...arguments),this._listeners={},this.maxListeners=Number.MAX_SAFE_INTEGER}on(e,t){return this.addEventListener(e,t),this}once(e,t){const n=r=>{return i=this,s=void 0,a=function*(){this.off(e,n),yield t(r)},new((o=void 0)||(o=Promise))((function(e,t){function n(e){try{l(a.next(e))}catch(e){t(e)}}function r(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof o?i:new o((function(e){e(i)}))).then(n,r)}l((a=a.apply(i,s||[])).next())}));var i,s,o,a};return this.on(e,n)}off(e,t){return this.removeEventListener(e,t),this}emit(e,t){const n=new CustomEvent(e,{detail:t});return super.dispatchEvent(n)}listenerCount(e){const t=this._listeners[e];return t?t.length:0}listeners(e){return this._listeners[e].map((e=>e[0]))||[]}eventNames(){return Object.keys(this._listeners)}removeAllListeners(){return Object.keys(this._listeners).forEach((e=>{this._listeners[e].forEach((t=>{super.removeEventListener(e,t[1])}))})),this._listeners={},this}setMaxListeners(e){return this.maxListeners=e,this}getMaxListeners(){return this.maxListeners}addEventListener(e,t){const n=(e=>t=>e(t.detail))(t);super.addEventListener(e,n),this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push([t,n])}removeEventListener(e,t){const n=this._listeners[e];if(n){const r=n.findIndex((e=>e[0]===t));-1!==r&&(super.removeEventListener(e,n[r][1]),n.splice(r,1))}}}let BS;BS="undefined"==typeof window?NS.EventEmitter:DS;class US extends BS{}const FS=dE,zS=fE,HS=PE,GS=RE,VS=KE,jS=QE,WS=(e,t)=>{if(!KE(e))return!1;if(!RE(t))return!1;const n=TE(t,64);return QE(e,n)},qS=(e,t)=>!!KE(e)&&!!RE(t)&&QE(e,t),XS=tS,ZS=(e,t)=>!!KE(e)&&!!tS(t)&&QE(e,t),YS=(e,t)=>{const n="string"==typeof e&&ZE(e),r="string"==typeof t&&ZE(t);if(e===t||("earliest"===e||0===e)&&("earliest"===t||0===t))return 0;if("earliest"===e&&t>0)return-1;if("earliest"===t&&e>0)return 1;if(n&&r){const n={[NE.EARLIEST]:1,[NE.FINALIZED]:2,[NE.SAFE]:3,[NE.LATEST]:4,[NE.PENDING]:5};return n[e]<n[t]?-1:1}if(n&&!r||!n&&r)throw new Qb("Cannot compare blocktag with provided non-blocktag input.");const i=BigInt(e),s=BigInt(t);return i<s?-1:i===s?0:1},KS=e=>"object"==typeof e&&!$E(e)&&0!==Object.keys(e).length&&["input","data","from","gas","gasPrice","gasLimit","address","jsonInterface","syncWithContext","dataInputFill"].some((t=>t in e)),QS=$E,JS=e=>!("object"!=typeof e||$E(e)||Array.isArray(e)||e instanceof UE),$S=(e,...t)=>{const n=e;if(!JS(n))return n;for(const e of t)for(const t in e)JS(e[t])?(n[t]||(n[t]={}),$S(n[t],e[t])):!$E(e[t])&&Object.hasOwnProperty.call(e,t)&&(Array.isArray(e[t])||e[t]instanceof UE?n[t]=e[t].slice(0):n[t]=e[t]);return n},eA=(e,t,n="0")=>"string"==typeof e?dE(e)?TE(e,t,n):e.padStart(t,n):(oS.validate(["int"],[e]),TE(e,t,n)),tA=(e,t,n="0")=>{if("string"==typeof e&&!dE(e))return e.padEnd(t,n);oS.validate(["int"],[e]);const r="string"==typeof e&&dE(e)?e:pS(e),i=r.startsWith("-")?3:2;return r.padEnd(t+i,n)},nA=tA,rA=eA,iA=(e,t=64)=>{oS.validate(["int"],[e]);const n=PS(e);if(n>=0)return eA(CS(n),t);const r=VE(BigInt(2),BigInt(4*t));if(-n>=r)throw new qb(`value: ${e}, nibbleWidth: ${t}`);const i=BigInt(n);return eA(pS(i+r),t)},sA=(e,t=64)=>{oS.validate(["int"],[e]);const n=PS(e);if(n<0)return n;const r=Math.ceil(Math.log(Number(n))/Math.log(2));if(r>4*t)throw new qb(`value: "${e}", nibbleWidth: "${t}"`);if(4*t!==r)return n;const i=VE(BigInt(2),BigInt(t)*BigInt(4));return PS(BigInt(n)-i)};function oA(...e){const t=e.reduce(((e,t)=>e+t.length),0),n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}function aA(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n+=1)if(e[n]!==t[n])return!1;return!0}const{parseBaseType:lA}=e,cA=e=>"object"==typeof e&&!$E(e)&&"number"in e&&"bytes"in e,uA=(e,t,n=[])=>{let r,i=Object.assign({},e);for(const e of t){if(i.oneOf&&r){const e=n.find((function(e){return this===e[0]}),null!=r?r:"");e&&e[0]===r&&(i=i.oneOf[e[1]])}if(!i.properties&&!i.items)return;if(i.properties)i=i.properties[e];else if(i.items&&i.items.properties){const t=i.items.properties;if(!t)return;i=t[e]}else i.items&&eS(i.items)?i=i.items:i.items&&Array.isArray(i.items)&&(i=i.items[parseInt(e,10)]);i&&e&&(r=e)}return i},dA=(e,t,n)=>{try{const{baseType:r,baseTypeSize:i}=lA(t);if("int"===r||"uint"===r)switch(n.number){case IE.NUMBER:return Number(RS(e));case IE.HEX:return pS(RS(e));case IE.STR:return RS(e).toString();case IE.BIGINT:return RS(e);default:throw new Wy(`Invalid format: ${String(n.number)}`)}if("bytes"===r){let t;switch(i?"string"==typeof e?t=eA(e,2*i):e instanceof Uint8Array&&(t=oA(new Uint8Array(i-e.length),e)):t=e,n.bytes){case LE.HEX:return uS(lS(t));case LE.UINT8ARRAY:return lS(t);default:throw new Wy(`Invalid format: ${String(n.bytes)}`)}}}catch(t){return e}return e},hA=(e,t,n,r,i=[])=>{var s,o;if(!eS(e)&&!Array.isArray(e))return dA(e,null==t?void 0:t.format,r);const a=e;for(const[e,l]of Object.entries(a)){n.push(e);const c=uA(t,n,i);if($E(c))delete a[e],n.pop();else if(eS(l))hA(l,t,n,r),n.pop();else{if(Array.isArray(l)){let u=c;if(void 0!==(null==c?void 0:c.oneOf)&&c.oneOf.forEach(((t,n)=>{var r,s;!Array.isArray(null==c?void 0:c.items)&&("object"==typeof l[0]&&"object"===(null===(r=null==t?void 0:t.items)||void 0===r?void 0:r.type)||"string"==typeof l[0]&&"object"!==(null===(s=null==t?void 0:t.items)||void 0===s?void 0:s.type))&&(u=t,i.push([e,n]))})),$E(null==u?void 0:u.items)){delete a[e],n.pop();continue}if(eS(u.items)&&!$E(u.items.format)){for(let t=0;t<l.length;t+=1)a[e][t]=dA(l[t],null===(s=null==u?void 0:u.items)||void 0===s?void 0:s.format,r);n.pop();continue}if(!Array.isArray(null==u?void 0:u.items)&&"object"===(null===(o=null==u?void 0:u.items)||void 0===o?void 0:o.type)){for(const e of l)hA(e,t,n,r,i);n.pop();continue}if(Array.isArray(null==u?void 0:u.items)){for(let t=0;t<l.length;t+=1)a[e][t]=dA(l[t],u.items[t].format,r);n.pop();continue}}a[e]=dA(l,c.format,r),n.pop()}}return a},fA=(e,t,n)=>{let r;r=eS(t)?$S({},t):Array.isArray(t)?[...t]:t;const i=eS(e)?e:_E(e);if(!i.properties&&!i.items&&!i.format)throw new Wy("Invalid json schema for formatting");return hA(r,i,[],n)},pA="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",mA=e=>{let t;t="string"==typeof e?e.startsWith("0x")&&dE(e)?dS(e):w_(e):e;const n=uS($_(t));return n===pA?void 0:n},gA=e=>{const t=mA(e);return $E(t)?pA:t},vA=e=>{let t;return t="bigint"==typeof e||"number"==typeof e?w_(e.toString()):Array.isArray(e)?new Uint8Array(e):"string"!=typeof e||dE(e)?lS(e):w_(e),uS($_(t))},yA=(e,t)=>{const n=/^(\d+).*$/.exec(e.slice(t));return n?parseInt(n[1],10):0},bA=e=>e.toString(2).length,_A=(e,t)=>{const n=t.toString();if("string"===e){if("string"==typeof t)return vS(t);throw new Vb(t)}if("bool"===e||"boolean"===e){if("boolean"==typeof t)return t?"01":"00";throw new Xb(t)}if("address"===e){if(!RE(n))throw new Gb(n);return n}const r=(e=>e.startsWith("int[")?`int256${e.slice(3)}`:"int"===e?"int256":e.startsWith("uint[")?`uint256'${e.slice(4)}`:"uint"===e?"uint256":e)(e);if(e.startsWith("uint")){const e=yA(r,4);if(e%8||e<8||e>256)throw new Yb(n);const t=PS(n);if(bA(t)>e)throw new Kb(n);if(t<BigInt(0))throw new Zb(n);return e?rA(t.toString(16),e/8*2):t.toString(16)}if(e.startsWith("int")){const t=yA(r,3);if(t%8||t<8||t>256)throw new Yb(e);const i=PS(n);if(bA(i)>t)throw new Kb(n);return i<BigInt(0)?iA(i.toString(),t/8*2):t?rA(i.toString(16),t/4):i.toString(16)}if("bytes"===r){if(n.replace(/^0x/i,"").length%2!=0)throw new zb(n);return n}if(e.startsWith("bytes")){if(n.replace(/^0x/i,"").length%2!=0)throw new zb(n);const t=yA(e,5);if(!t||t<1||t>64||t<n.replace(/^0x/i,"").length/2)throw new zb(n);return nA(n,2*t)}return""},xA=e=>{const[t,n]=(e=>{if(Array.isArray(e))throw new Error("Autodetection of array types is not supported.");let t,n;if("object"==typeof e&&("t"in e||"type"in e)&&("v"in e||"value"in e))t="t"in e?e.t:e.type,n="v"in e?e.v:e.value,t="bigint"===t.toLowerCase()?"int":t;else{if("bigint"==typeof e)return["int",e];t=CS(e,!0),n=CS(e),t.startsWith("int")||t.startsWith("uint")||(t="bytes")}return!t.startsWith("int")&&!t.startsWith("uint")||"string"!=typeof n||/^(-)?0x/i.test(n)||(n=RS(n)),[t,n]})(e);return Array.isArray(n)?n.map((e=>_A(t,e).replace("0x",""))).join(""):_A(t,n).replace("0x","")},wA=(...e)=>`0x${e.map(xA).join("").toLowerCase()}`,EA=(...e)=>mA(wA(...e)),SA=(...e)=>gA(wA(...e)),AA=e=>mA(`0x${("number"==typeof e?e.toString():e).padStart(64,"0")}`),TA=e=>function(e){return P_(e)}(e),MA=e=>uS(TA(e));var CA=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};function PA(e){return("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}function RA(e,t,n){return CA(this,void 0,void 0,(function*(){let r;const i=yield Promise.race([e instanceof Promise?e:e(),new Promise(((e,i)=>{r=setTimeout((()=>n?i(n):e(void 0)),t)}))]);if(r&&clearTimeout(r),i instanceof Error)throw i;return i}))}function IA(e,t){let n;return[new Promise(((r,i)=>{n=setInterval(function s(){return(()=>{CA(this,void 0,void 0,(function*(){try{const i=yield RA(e,t);$E(i)||(clearInterval(n),r(i))}catch(e){clearInterval(n),i(e)}}))})(),s}(),t)})),n]}function LA(e,t){return CA(this,void 0,void 0,(function*(){return IA(e,t)[0]}))}function kA(e,t){let n;const r=new Promise(((r,i)=>{n=setTimeout((()=>{i(t)}),e)}));return[n,r]}function OA(e,t){let n;const r=new Promise(((r,i)=>{n=setInterval((()=>{(()=>{CA(this,void 0,void 0,(function*(){const t=yield e();t&&(clearInterval(n),i(t))}))})()}),t)}));return[n,r]}const NA=()=>{const e=TA(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=uS(e);return[t.substring(2,10),t.substring(10,14),t.substring(14,18),t.substring(18,22),t.substring(22,34)].join("-")},DA=e=>{const t=e.error.code;return a_.has(t)||t>=-32099&&t<=-32e3},BA=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"result"in e&&$E(e.error)&&("number"==typeof e.id||"string"==typeof e.id),UA=e=>!Array.isArray(e)&&"2.0"===e.jsonrpc&&!!e&&$E(e.result)&&"error"in e&&("number"==typeof e.id||"string"==typeof e.id),FA=e=>!(Array.isArray(e)||!e||"2.0"!==e.jsonrpc||$E(e.params)||$E(e.method)),zA=e=>!Array.isArray(e)&&!!e&&"2.0"===e.jsonrpc&&"id"in e&&"result"in e,HA=e=>BA(e)||UA(e),GA=e=>Array.isArray(e)?e.every(HA):HA(e),VA=e=>Array.isArray(e)&&e.length>0&&GA(e);let jA;const WA=e=>{jA=e},qA=e=>{var t,n,r,i;return void 0!==jA&&(jA+=1),{jsonrpc:null!==(t=e.jsonrpc)&&void 0!==t?t:"2.0",id:null!==(r=null!==(n=e.id)&&void 0!==n?n:jA)&&void 0!==r?r:NA(),method:e.method,params:null!==(i=e.params)&&void 0!==i?i:void 0}},XA=e=>e.map((e=>qA(e))),ZA=e=>Array.isArray(e)&&e.length>0;var YA,KA=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class QA{constructor({timeout:e,eagerStart:t,timeoutMessage:n}={timeout:0,eagerStart:!1,timeoutMessage:"DeferredPromise timed out"}){this[YA]="Promise",this._state="pending",this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._timeoutMessage=n,this._timeoutInterval=e,t&&this.startTimer()}get state(){return this._state}then(e,t){return KA(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return KA(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return KA(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}resolve(e){this._resolve(e),this._state="fulfilled",this._clearTimeout()}reject(e){this._reject(e),this._state="rejected",this._clearTimeout()}startTimer(){this._timeoutInterval&&this._timeoutInterval>0&&(this._timeoutId=setTimeout(this._checkTimeout.bind(this),this._timeoutInterval))}_checkTimeout(){"pending"===this._state&&this._timeoutId&&this.reject(new Xy(this._timeoutMessage))}_clearTimeout(){this._timeoutId&&clearTimeout(this._timeoutId)}}YA=Symbol.toStringTag;class JA{constructor(e,t){this.eventEmitter=e,this.autoReconnect=t}clearQueues(){"function"==typeof this._clearQueues&&this._clearQueues()}onError(e){this._clearQueues=e}parseResponse(e){const t=[];return e.replace(/\}[\n\r]?\{/g,"}|--|{").replace(/\}\][\n\r]?\[\{/g,"}]|--|[{").replace(/\}[\n\r]?\[\{/g,"}|--|[{").replace(/\}\][\n\r]?\{/g,"}]|--|{").split("|--|").forEach((e=>{let n,r=e;this.lastChunk&&(r=this.lastChunk+r);try{n=JSON.parse(r)}catch(e){return this.lastChunk=r,this.lastChunkTimeout&&clearTimeout(this.lastChunkTimeout),void(this.lastChunkTimeout=setTimeout((()=>{this.autoReconnect||(this.clearQueues(),this.eventEmitter.emit("error",new e_({id:1,jsonrpc:"2.0",error:{code:2,message:"Chunk timeout"}})))}),15e3))}clearTimeout(this.lastChunkTimeout),this.lastChunk=void 0,n&&t.push(n)})),t}}var $A=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class eT extends HE{constructor(){super(...arguments),this._eventEmitter=new NS.EventEmitter,this._chainId="",this._accounts=[]}_getChainId(){var e;return $A(this,void 0,void 0,(function*(){const t=yield this.request(qA({method:"eth_chainId",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:""}))}_getAccounts(){var e;return $A(this,void 0,void 0,(function*(){const t=yield this.request(qA({method:"eth_accounts",params:[]}));return null!==(e=null==t?void 0:t.result)&&void 0!==e?e:[]}))}_onConnect(){Promise.all([this._getChainId().then((e=>{e!==this._chainId&&(this._chainId=e,this._eventEmitter.emit("chainChanged",this._chainId))})).catch((e=>{console.error(e)})),this._getAccounts().then((e=>{this._accounts.length===e.length&&e.every((t=>e.includes(t)))||(this._accounts=e,this._onAccountsChanged())})).catch((e=>{console.error(e)}))]).then((()=>this._eventEmitter.emit("connect",{chainId:this._chainId}))).catch((e=>{console.error(e)}))}_onDisconnect(e,t){this._eventEmitter.emit("disconnect",new o_(e,t))}_onAccountsChanged(){this._eventEmitter.emit("accountsChanged",this._accounts)}}var tT=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const nT={autoReconnect:!0,delay:5e3,maxAttempts:5};class rT extends eT{constructor(e,t,n){if(super(),this._connectionStatus="connecting",this._onMessageHandler=this._onMessage.bind(this),this._onOpenHandler=this._onConnect.bind(this),this._onCloseHandler=this._onCloseEvent.bind(this),this._onErrorHandler=this._onError.bind(this),!this._validateProviderPath(e))throw new Jy(e);this._socketPath=e,this._socketOptions=t,this._reconnectOptions=Object.assign(Object.assign({},nT),null!=n?n:{}),this._pendingRequestsQueue=new Map,this._sentRequestsQueue=new Map,this._init(),this.connect(),this.chunkResponseParser=new JA(this._eventEmitter,this._reconnectOptions.autoReconnect),this.chunkResponseParser.onError((()=>{this._clearQueues()})),this.isReconnecting=!1}get SocketConnection(){return this._socketConnection}_init(){this._reconnectAttempts=0}connect(){try{this._openSocketConnection(),this._connectionStatus="connecting",this._addSocketListeners()}catch(e){if(!this.isReconnecting)throw this._connectionStatus="disconnected",e&&e.message?new Ly(`Error while connecting to ${this._socketPath}. Reason: ${e.message}`):new Jy(this._socketPath);setImmediate((()=>{this._reconnect()}))}}_validateProviderPath(e){return!!e}getPendingRequestQueueSize(){return this._pendingRequestsQueue.size}getSentRequestsQueueSize(){return this._sentRequestsQueue.size}supportsSubscriptions(){return!0}on(e,t){this._eventEmitter.on(e,t)}once(e,t){this._eventEmitter.once(e,t)}removeListener(e,t){this._eventEmitter.removeListener(e,t)}_onDisconnect(e,t){this._connectionStatus="disconnected",super._onDisconnect(e,t)}disconnect(e,t){const n=null!=e?e:1e3;this._removeSocketListeners(),"disconnected"!==this.getStatus()&&this._closeSocketConnection(n,t),this._onDisconnect(n,t)}safeDisconnect(e,t,n=!1,r=1e3){return tT(this,void 0,void 0,(function*(){let i=0;yield(()=>tT(this,void 0,void 0,(function*(){return new Promise((e=>{const t=setInterval((()=>{n&&5===i&&this.clearQueues(),0===this.getPendingRequestQueueSize()&&0===this.getSentRequestsQueueSize()&&(clearInterval(t),e(!0)),i+=1}),r)}))})))(),this.disconnect(e,t)}))}removeAllListeners(e){this._eventEmitter.removeAllListeners(e)}_onError(e){this.isReconnecting?this._reconnect():this._eventEmitter.emit("error",e)}reset(){this._sentRequestsQueue.clear(),this._pendingRequestsQueue.clear(),this._init(),this._removeSocketListeners(),this._addSocketListeners()}_reconnect(){this.isReconnecting||(this.isReconnecting=!0,this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((e,t)=>{e.deferredPromise.reject(new Ny),this._sentRequestsQueue.delete(t)})),this._reconnectAttempts<this._reconnectOptions.maxAttempts?(this._reconnectAttempts+=1,setTimeout((()=>{this._removeSocketListeners(),this.connect(),this.isReconnecting=!1}),this._reconnectOptions.delay)):(this.isReconnecting=!1,this._clearQueues(),this._removeSocketListeners(),this._eventEmitter.emit("error",new Oy(this._reconnectOptions.maxAttempts))))}request(e){return tT(this,void 0,void 0,(function*(){if(QS(this._socketConnection))throw new Error("Connection is undefined");"disconnected"===this.getStatus()&&this.connect();const t=ZA(e)?e[0].id:e.id;if(!t)throw new eb("Request Id not defined");if(this._sentRequestsQueue.has(t))throw new Dy(t);const n=new QA;n.catch((e=>{this._eventEmitter.emit("error",e)}));const r={payload:e,deferredPromise:n};if("connecting"===this.getStatus())return this._pendingRequestsQueue.set(t,r),r.deferredPromise;this._sentRequestsQueue.set(t,r);try{this._sendToSocket(r.payload)}catch(e){this._sentRequestsQueue.delete(t),this._eventEmitter.emit("error",e)}return n}))}_onConnect(){this._connectionStatus="connected",this._reconnectAttempts=0,super._onConnect(),this._sendPendingRequests()}_sendPendingRequests(){for(const[e,t]of this._pendingRequestsQueue.entries())this._sendToSocket(t.payload),this._pendingRequestsQueue.delete(e),this._sentRequestsQueue.set(e,t)}_onMessage(e){const t=this._parseResponses(e);if(!QS(t)&&0!==t.length)for(const e of t){if(FA(e)&&e.method.endsWith("_subscription"))return void this._eventEmitter.emit("message",e);const t=VA(e)?e[0].id:e.id,n=this._sentRequestsQueue.get(t);if(!n)return;(VA(e)||BA(e)||UA(e))&&(this._eventEmitter.emit("message",e),n.deferredPromise.resolve(e)),this._sentRequestsQueue.delete(t)}}clearQueues(e){this._clearQueues(e)}_clearQueues(e){this._pendingRequestsQueue.size>0&&this._pendingRequestsQueue.forEach(((t,n)=>{t.deferredPromise.reject(new ky(e)),this._pendingRequestsQueue.delete(n)})),this._sentRequestsQueue.size>0&&this._sentRequestsQueue.forEach(((t,n)=>{t.deferredPromise.reject(new ky(e)),this._sentRequestsQueue.delete(n)})),this._removeSocketListeners()}}class iT{constructor(){this._emitter=new US}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,t){this._emitter.emit(e,t)}listenerCount(e){return this._emitter.listenerCount(e)}listeners(e){return this._emitter.listeners(e)}eventNames(){return this._emitter.eventNames()}removeAllListeners(){return this._emitter.removeAllListeners()}setMaxListenerWarningThreshold(e){this._emitter.setMaxListeners(e)}getMaxListeners(){return this._emitter.getMaxListeners()}}var sT;!function(e){e.CONFIG_CHANGE="CONFIG_CHANGE"}(sT||(sT={}));class oT extends iT{constructor(e){super(),this.config={handleRevert:!1,defaultAccount:void 0,defaultBlock:"latest",transactionBlockTimeout:50,transactionConfirmationBlocks:24,transactionPollingInterval:1e3,transactionPollingTimeout:75e4,transactionReceiptPollingInterval:void 0,transactionSendTimeout:75e4,transactionConfirmationPollingInterval:void 0,blockHeaderTimeout:10,maxListenersWarningThreshold:100,contractDataInputFill:"data",defaultNetworkId:void 0,defaultChain:"mainnet",defaultHardfork:"london",defaultCommon:void 0,defaultTransactionType:"0x2",defaultMaxPriorityFeePerGas:CS(25e8),enableExperimentalFeatures:{useSubscriptionWhenCheckingBlockTimeout:!1,useRpcCallSpecification:!1},transactionBuilder:void 0,transactionTypeParser:void 0},this.setConfig(null!=e?e:{})}setConfig(e){const t=Object.keys(e);for(const n of t)this._triggerConfigChange(n,e[n]);Object.assign(this.config,e)}get handleRevert(){return this.config.handleRevert}set handleRevert(e){this._triggerConfigChange("handleRevert",e),this.config.handleRevert=e}get contractDataInputFill(){return this.config.contractDataInputFill}set contractDataInputFill(e){this._triggerConfigChange("contractDataInputFill",e),this.config.contractDataInputFill=e}get defaultAccount(){return this.config.defaultAccount}set defaultAccount(e){this._triggerConfigChange("defaultAccount",e),this.config.defaultAccount=e}get defaultBlock(){return this.config.defaultBlock}set defaultBlock(e){this._triggerConfigChange("defaultBlock",e),this.config.defaultBlock=e}get transactionSendTimeout(){return this.config.transactionSendTimeout}set transactionSendTimeout(e){this._triggerConfigChange("transactionSendTimeout",e),this.config.transactionSendTimeout=e}get transactionBlockTimeout(){return this.config.transactionBlockTimeout}set transactionBlockTimeout(e){this._triggerConfigChange("transactionBlockTimeout",e),this.config.transactionBlockTimeout=e}get transactionConfirmationBlocks(){return this.config.transactionConfirmationBlocks}set transactionConfirmationBlocks(e){this._triggerConfigChange("transactionConfirmationBlocks",e),this.config.transactionConfirmationBlocks=e}get transactionPollingInterval(){return this.config.transactionPollingInterval}set transactionPollingInterval(e){this._triggerConfigChange("transactionPollingInterval",e),this.config.transactionPollingInterval=e,this.transactionReceiptPollingInterval=e,this.transactionConfirmationPollingInterval=e}get transactionPollingTimeout(){return this.config.transactionPollingTimeout}set transactionPollingTimeout(e){this._triggerConfigChange("transactionPollingTimeout",e),this.config.transactionPollingTimeout=e}get transactionReceiptPollingInterval(){return this.config.transactionReceiptPollingInterval}set transactionReceiptPollingInterval(e){this._triggerConfigChange("transactionReceiptPollingInterval",e),this.config.transactionReceiptPollingInterval=e}get transactionConfirmationPollingInterval(){return this.config.transactionConfirmationPollingInterval}set transactionConfirmationPollingInterval(e){this._triggerConfigChange("transactionConfirmationPollingInterval",e),this.config.transactionConfirmationPollingInterval=e}get blockHeaderTimeout(){return this.config.blockHeaderTimeout}set blockHeaderTimeout(e){this._triggerConfigChange("blockHeaderTimeout",e),this.config.blockHeaderTimeout=e}get enableExperimentalFeatures(){return this.config.enableExperimentalFeatures}set enableExperimentalFeatures(e){this._triggerConfigChange("enableExperimentalFeatures",e),this.config.enableExperimentalFeatures=e}get maxListenersWarningThreshold(){return this.config.maxListenersWarningThreshold}set maxListenersWarningThreshold(e){this._triggerConfigChange("maxListenersWarningThreshold",e),this.setMaxListenerWarningThreshold(e),this.config.maxListenersWarningThreshold=e}get defaultNetworkId(){return this.config.defaultNetworkId}set defaultNetworkId(e){this._triggerConfigChange("defaultNetworkId",e),this.config.defaultNetworkId=e}get defaultChain(){return this.config.defaultChain}set defaultChain(e){if(!QS(this.config.defaultCommon)&&!QS(this.config.defaultCommon.baseChain)&&e!==this.config.defaultCommon.baseChain)throw new n_(this.config.defaultChain,e);this._triggerConfigChange("defaultChain",e),this.config.defaultChain=e}get defaultHardfork(){return this.config.defaultHardfork}set defaultHardfork(e){if(!QS(this.config.defaultCommon)&&!QS(this.config.defaultCommon.hardfork)&&e!==this.config.defaultCommon.hardfork)throw new t_(this.config.defaultCommon.hardfork,e);this._triggerConfigChange("defaultHardfork",e),this.config.defaultHardfork=e}get defaultCommon(){return this.config.defaultCommon}set defaultCommon(e){if(!QS(this.config.defaultHardfork)&&!QS(e)&&!QS(e.hardfork)&&this.config.defaultHardfork!==e.hardfork)throw new t_(this.config.defaultHardfork,e.hardfork);if(!QS(this.config.defaultChain)&&!QS(e)&&!QS(e.baseChain)&&this.config.defaultChain!==e.baseChain)throw new n_(this.config.defaultChain,e.baseChain);this._triggerConfigChange("defaultCommon",e),this.config.defaultCommon=e}get defaultTransactionType(){return this.config.defaultTransactionType}set defaultTransactionType(e){this._triggerConfigChange("defaultTransactionType",e),this.config.defaultTransactionType=e}get defaultMaxPriorityFeePerGas(){return this.config.defaultMaxPriorityFeePerGas}set defaultMaxPriorityFeePerGas(e){this._triggerConfigChange("defaultMaxPriorityFeePerGas",e),this.config.defaultMaxPriorityFeePerGas=e}get transactionBuilder(){return this.config.transactionBuilder}set transactionBuilder(e){this._triggerConfigChange("transactionBuilder",e),this.config.transactionBuilder=e}get transactionTypeParser(){return this.config.transactionTypeParser}set transactionTypeParser(e){this._triggerConfigChange("transactionTypeParser",e),this.config.transactionTypeParser=e}_triggerConfigChange(e,t){this.emit(sT.CONFIG_CHANGE,{name:e,oldValue:this.config[e],newValue:t})}}var aT=i(98);class lT extends HE{constructor(e,t){if(super(),!lT.validateClientUrl(e))throw new Jy(e);this.clientUrl=e,this.httpProviderOptions=t}static validateClientUrl(e){return"string"==typeof e&&/^http(s)?:\/\//i.test(e)}getStatus(){throw new qy}supportsSubscriptions(){return!1}request(e,t){var n,r,i,s,o;return r=this,i=void 0,o=function*(){const r=Object.assign(Object.assign({},null===(n=this.httpProviderOptions)||void 0===n?void 0:n.providerOptions),t),i=yield aT(this.clientUrl,Object.assign(Object.assign({},r),{method:"POST",headers:Object.assign(Object.assign({},r.headers),{"Content-Type":"application/json"}),body:JSON.stringify(e)}));if(!i.ok)throw new $b(yield i.json());return yield i.json()},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,a)}l((o=o.apply(r,i||[])).next())}))}on(){throw new qy}removeListener(){throw new qy}once(){throw new qy}removeAllListeners(){throw new qy}connect(){throw new qy}disconnect(){throw new qy}reset(){throw new qy}reconnect(){throw new qy}}var cT=null;"undefined"!=typeof WebSocket?cT=WebSocket:"undefined"!=typeof MozWebSocket?cT=MozWebSocket:void 0!==i.g?cT=i.g.WebSocket||i.g.MozWebSocket:"undefined"!=typeof window?cT=window.WebSocket||window.MozWebSocket:"undefined"!=typeof self&&(cT=self.WebSocket||self.MozWebSocket);const uT=cT,dT=e=>HE.isWeb3Provider(e),hT=e=>"string"!=typeof e&&"request"in e&&"Function"===e.request.constructor.name,fT=e=>"string"!=typeof e&&"request"in e&&"AsyncFunction"===e.request.constructor.name,pT=e=>"string"!=typeof e&&"send"in e,mT=e=>"string"!=typeof e&&"sendAsync"in e,gT=e=>e&&(dT(e)||fT(e)||hT(e)||mT(e)||pT(e));var vT,yT=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};!function(e){e.PROVIDER_CHANGED="PROVIDER_CHANGED",e.BEFORE_PROVIDER_CHANGE="BEFORE_PROVIDER_CHANGE"}(vT||(vT={}));const bT={HttpProvider:lT,WebsocketProvider:class extends rT{constructor(e,t,n){super(e,t,n)}_validateProviderPath(e){return"string"==typeof e&&/^ws(s)?:\/\//i.test(e)}getStatus(){if(this._socketConnection&&!QS(this._socketConnection))switch(this._socketConnection.readyState){case this._socketConnection.CONNECTING:return"connecting";case this._socketConnection.OPEN:return"connected";default:return"disconnected"}return"disconnected"}_openSocketConnection(){this._socketConnection=new uT(this._socketPath,void 0,this._socketOptions&&0===Object.keys(this._socketOptions).length?void 0:this._socketOptions)}_closeSocketConnection(e,t){var n;null===(n=this._socketConnection)||void 0===n||n.close(e,t)}_sendToSocket(e){var t;if("disconnected"===this.getStatus())throw new ky;null===(t=this._socketConnection)||void 0===t||t.send(JSON.stringify(e))}_parseResponses(e){return this.chunkResponseParser.parseResponse(e.data)}_addSocketListeners(){var e,t,n,r;null===(e=this._socketConnection)||void 0===e||e.addEventListener("open",this._onOpenHandler),null===(t=this._socketConnection)||void 0===t||t.addEventListener("message",this._onMessageHandler),null===(n=this._socketConnection)||void 0===n||n.addEventListener("close",(e=>this._onCloseHandler(e))),null===(r=this._socketConnection)||void 0===r||r.addEventListener("error",this._onErrorHandler)}_removeSocketListeners(){var e,t,n;null===(e=this._socketConnection)||void 0===e||e.removeEventListener("message",this._onMessageHandler),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("open",this._onOpenHandler),null===(n=this._socketConnection)||void 0===n||n.removeEventListener("close",this._onCloseHandler)}_onCloseEvent(e){var t;!this._reconnectOptions.autoReconnect||[1e3,1001].includes(e.code)&&e.wasClean?(this._clearQueues(e),this._removeSocketListeners(),this._onDisconnect(e.code,e.reason),null===(t=this._socketConnection)||void 0===t||t.removeEventListener("error",this._onErrorHandler)):this._reconnect()}}};class _T extends iT{constructor(e,t){super(),QS(e)||this.setProvider(e),this.useRpcCallSpecification=t}static get providers(){return bT}get provider(){return this._provider}get providers(){return bT}setProvider(e){let t;if(e&&"string"==typeof e&&this.providers)if(/^http(s)?:\/\//i.test(e))t=new this.providers.HttpProvider(e);else{if(!/^ws(s)?:\/\//i.test(e))throw new Qy(`Can't autodetect provider for "${e}"`);t=new this.providers.WebsocketProvider(e)}else t=QS(e)?void 0:e;return this.emit(vT.BEFORE_PROVIDER_CHANGE,this._provider),this._provider=t,this.emit(vT.PROVIDER_CHANGED,this._provider),!0}send(e){return yT(this,void 0,void 0,(function*(){const t=yield this._sendRequest(e);if(BA(t))return t.result;throw new $b(t)}))}sendBatch(e){return yT(this,void 0,void 0,(function*(){return yield this._sendRequest(e)}))}_sendRequest(e){return yT(this,void 0,void 0,(function*(){const{provider:t}=this;if(QS(t))throw new Qy("Provider not available. Use `.setProvider` or `.provider=` to initialize the provider.");const n=ZA(e)?XA(e):qA(e);if(dT(t)){let e;try{e=yield t.request(n)}catch(t){e=t}return this._processJsonRpcResponse(n,e,{legacy:!1,error:!1})}if(fT(t))return t.request(n).then((e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!0})));if(hT(t))return new Promise(((e,r)=>{const i=e=>r(this._processJsonRpcResponse(n,e,{legacy:!0,error:!0})),s=t=>e(this._processJsonRpcResponse(n,t,{legacy:!0,error:!1})),o=t.request(n,((e,t)=>e?i(e):s(t)));PA(o)&&o.then(s).catch(i)}));if(pT(t))return new Promise(((e,r)=>{t.send(n,((t,i)=>{if(t)return r(this._processJsonRpcResponse(n,t,{legacy:!0,error:!0}));if(QS(i))throw new $b("",'Got a "nullish" response from provider.');return e(this._processJsonRpcResponse(n,i,{legacy:!0,error:!1}))}))}));if(mT(t))return t.sendAsync(n).then((e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!1}))).catch((e=>this._processJsonRpcResponse(n,e,{legacy:!0,error:!0})));throw new Qy("Provider does not have a request or send method to use.")}))}_processJsonRpcResponse(e,t,{legacy:n,error:r}){if(QS(t))return this._buildResponse(e,null,r);if(UA(t)){if(this.useRpcCallSpecification&&DA(t)){const e=t;if(a_.get(e.error.code))throw new(0,a_.get(e.error.code).error)(e);throw new s_(e)}if(!_T._isReverted(t))throw new e_(t,e)}if(BA(t))return t;if(t instanceof Error)throw _T._isReverted(t),t;if(!n&&ZA(e)&&VA(t))return t;if(n&&!r&&ZA(e))return t;if(n&&r&&ZA(e))throw t;if(n&&!UA(t)&&!BA(t))return this._buildResponse(e,t,r);if(ZA(e)&&!Array.isArray(t))throw new $b(t,"Got normal response for a batch request.");if(!ZA(e)&&Array.isArray(t))throw new $b(t,"Got batch response for a normal request.");if((UA(t)||BA(t))&&!ZA(e)&&t.id&&e.id!==t.id)throw new e_(t);throw new $b(t,"Invalid response")}static _isReverted(e){let t;if(UA(e)?t=e.error:e instanceof Error&&(t=e),null==t?void 0:t.message.includes("revert"))throw new zy(t);return!1}_buildResponse(e,t,n){const r={jsonrpc:"2.0",id:ZA(e)?e[0].id:"id"in e?e.id:null};return n?Object.assign(Object.assign({},r),{error:t}):Object.assign(Object.assign({},r),{result:t})}}var xT=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class wT{constructor(e,t,n=!1){this.requestManager=e,this.registeredSubscriptions=t,this.tolerateUnlinkedSubscription=n,this._subscriptions=new Map,this.requestManager.on(vT.BEFORE_PROVIDER_CHANGE,(()=>xT(this,void 0,void 0,(function*(){yield this.unsubscribe()})))),this.requestManager.on(vT.PROVIDER_CHANGED,(()=>{this.clear(),this.listenToProviderEvents()})),this.listenToProviderEvents()}listenToProviderEvents(){const e=this.requestManager.provider;this.requestManager.provider&&("function"!=typeof(null==e?void 0:e.supportsSubscriptions)||(null==e?void 0:e.supportsSubscriptions()))&&"function"==typeof this.requestManager.provider.on&&("function"==typeof this.requestManager.provider.request?this.requestManager.provider.on("message",(e=>this.messageListener(e))):e.on("data",(e=>this.messageListener(e))))}messageListener(e){var t,n,r;if(!e)throw new $y("Should not call messageListener with no data. Type was");const i=(null===(t=e.params)||void 0===t?void 0:t.subscription)||(null===(n=e.data)||void 0===n?void 0:n.subscription)||(null===(r=e.id)||void 0===r?void 0:r.toString(16));if(i){const t=this._subscriptions.get(i);null==t||t.processSubscriptionData(e)}}subscribe(e,t,n=kE){return xT(this,void 0,void 0,(function*(){const r=this.registeredSubscriptions[e];if(!r)throw new $y("Invalid subscription type");const i=new r(null!=t?t:void 0,{subscriptionManager:this,returnFormat:n});return yield this.addSubscription(i),i}))}get subscriptions(){return this._subscriptions}addSubscription(e){return xT(this,void 0,void 0,(function*(){if(!this.requestManager.provider)throw new Qy("Provider not available");if(!this.supportsSubscriptions())throw new $y("The current provider does not support subscriptions");if(e.id&&this._subscriptions.has(e.id))throw new $y(`Subscription with id "${e.id}" already exists`);if(yield e.sendSubscriptionRequest(),QS(e.id))throw new $y("Subscription is not subscribed yet.");return this._subscriptions.set(e.id,e),e.id}))}removeSubscription(e){return xT(this,void 0,void 0,(function*(){const{id:t}=e;if(QS(t))throw new $y("Subscription is not subscribed yet. Or, had already been unsubscribed but not through the Subscription Manager.");if(!this._subscriptions.has(t)&&!this.tolerateUnlinkedSubscription)throw new $y(`Subscription with id "${t.toString()}" does not exists`);return yield e.sendUnsubscribeRequest(),this._subscriptions.delete(t),t}))}unsubscribe(e){return xT(this,void 0,void 0,(function*(){const t=[];for(const[n,r]of this.subscriptions.entries())(!e||"function"==typeof e&&e({id:n,sub:r}))&&t.push(this.removeSubscription(r));return Promise.all(t)}))}clear(){this._subscriptions.clear()}supportsSubscriptions(){return!QS(this.requestManager.provider)&&((e=this.requestManager.provider)&&"supportsSubscriptions"in e?e.supportsSubscriptions():!(!e||"string"==typeof e||!("on"in e)));var e}}var ET=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class ST extends iT{constructor(e,t){var n;super(),this.args=e;const{requestManager:r}=t,{subscriptionManager:i}=t;if(r&&i)throw new $y("Only requestManager or subscriptionManager should be provided at Subscription constructor");if(!r&&!i)throw new $y("Either requestManager or subscriptionManager should be provided at Subscription constructor");this._subscriptionManager=r?new wT(r,{},!0):i,this._returnFormat=null!==(n=null==t?void 0:t.returnFormat)&&void 0!==n?n:kE}get id(){return this._id}get lastBlock(){return this._lastBlock}subscribe(){return ET(this,void 0,void 0,(function*(){return this._subscriptionManager.addSubscription(this)}))}processSubscriptionData(e){var t,n;(null==e?void 0:e.data)?this._processSubscriptionResult(null!==(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)&&void 0!==n?n:null==e?void 0:e.data):e&&FA(e)&&this._processSubscriptionResult(null==e?void 0:e.params.result)}sendSubscriptionRequest(){return ET(this,void 0,void 0,(function*(){return this._id=yield this._subscriptionManager.requestManager.send({method:"eth_subscribe",params:this._buildSubscriptionParams()}),this.emit("connected",this._id),this._id}))}get returnFormat(){return this._returnFormat}get subscriptionManager(){return this._subscriptionManager}resubscribe(){return ET(this,void 0,void 0,(function*(){yield this.unsubscribe(),yield this.subscribe()}))}unsubscribe(){return ET(this,void 0,void 0,(function*(){this.id&&(yield this._subscriptionManager.removeSubscription(this))}))}sendUnsubscribeRequest(){return ET(this,void 0,void 0,(function*(){yield this._subscriptionManager.requestManager.send({method:"eth_unsubscribe",params:[this.id]}),this._id=void 0}))}formatSubscriptionResult(e){return e}_processSubscriptionResult(e){this.emit("data",this.formatSubscriptionResult(e))}_processSubscriptionError(e){this.emit("error",e)}_buildSubscriptionParams(){throw new Error("Implement in the child class")}}var AT=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class TT extends GE{constructor(){super(...arguments),this._addressMap=new Map,this._defaultKeyName="web3js_wallet"}static getStorage(){let e;try{e=window.localStorage;const t="__storage_test__";return e.setItem(t,t),e.removeItem(t),e}catch(t){return!t||22!==t.code&&1014!==t.code&&"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||$E(e)||0===e.length?void 0:e}}create(e){for(let t=0;t<e;t+=1)this.add(this._accountProvider.create());return this}add(e){var t;if("string"==typeof e)return this.add(this._accountProvider.privateKeyToAccount(e));let n=this.length;return this.get(e.address)&&(console.warn(`Account ${e.address.toLowerCase()} already exists.`),n=null!==(t=this._addressMap.get(e.address.toLowerCase()))&&void 0!==t?t:n),this._addressMap.set(e.address.toLowerCase(),n),this[n]=e,this}get(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return $E(t)?void 0:this[t]}return this[e]}remove(e){if("string"==typeof e){const t=this._addressMap.get(e.toLowerCase());return!$E(t)&&(this._addressMap.delete(e.toLowerCase()),this.splice(t,1),!0)}return!!this[e]&&(this.splice(e,1),!0)}clear(){return this._addressMap.clear(),this.length=0,this}encrypt(e,t){return AT(this,void 0,void 0,(function*(){return Promise.all(this.map((n=>AT(this,void 0,void 0,(function*(){return n.encrypt(e,t)})))))}))}decrypt(e,t,n){return AT(this,void 0,void 0,(function*(){const r=yield Promise.all(e.map((e=>AT(this,void 0,void 0,(function*(){return this._accountProvider.decrypt(e,t,n)})))));for(const e of r)this.add(e);return this}))}save(e,t){return AT(this,void 0,void 0,(function*(){const n=TT.getStorage();if(!n)throw new Error("Local storage not available.");return n.setItem(null!=t?t:this._defaultKeyName,JSON.stringify(yield this.encrypt(e))),!0}))}load(e,t){return AT(this,void 0,void 0,(function*(){const n=TT.getStorage();if(!n)throw new Error("Local storage not available.");const r=n.getItem(null!=t?t:this._defaultKeyName);return r&&(yield this.decrypt(JSON.parse(r)||[],e)),this}))}}const MT={web:v_};function CT(e,t,n){if(!n.startsWith("aes-"))throw new Error(`AES submodule doesn't support mode ${n}`);if(16!==t.length)throw new Error("AES: wrong IV length");if(n.startsWith("aes-128")&&16!==e.length||n.startsWith("aes-256")&&32!==e.length)throw new Error("AES: wrong key length")}async function PT(e,t,n){if(!MT.web)throw new Error("Browser crypto not available.");let r;if(["aes-128-cbc","aes-256-cbc"].includes(e)&&(r="cbc"),["aes-128-ctr","aes-256-ctr"].includes(e)&&(r="ctr"),!r)throw new Error("AES: unsupported mode");return[await MT.web.subtle.importKey("raw",t,{name:`AES-${r.toUpperCase()}`,length:8*t.length},!0,["encrypt","decrypt"]),{name:`aes-${r}`,iv:n,counter:n,length:128}]}async function RT(e,t,n,r="aes-128-ctr",i=!0){if(CT(t,n,r),MT.web){const[s,o]=await PT(r,t,n),a=await MT.web.subtle.encrypt(o,s,e);let l=new Uint8Array(a);return i||"aes-cbc"!==o.name||e.length%16||(l=l.slice(0,-16)),l}if(MT.node){const s=MT.node.createCipheriv(r,t,n);return s.setAutoPadding(i),S_(s.update(e),s.final())}throw new Error("The environment doesn't have AES module")}class IT extends A_{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,d_.hash(e);const n=E_(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return d_.exists(this),this.iHash.update(e),this}digestInto(e){d_.exists(this),d_.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const LT=(e,t,n)=>new IT(e,t).update(n).digest();function kT(e,t,n,r){const{c:i,dkLen:s,DK:o,PRF:a,PRFSalt:l}=function(e,t,n,r){d_.hash(e);const i=M_({dkLen:32,asyncTick:10},r),{c:s,dkLen:o,asyncTick:a}=i;if(d_.number(s),d_.number(o),d_.number(a),s<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=E_(t),c=E_(n),u=new Uint8Array(o),d=LT.create(e,l),h=d._cloneInto().update(c);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:h}}(e,t,n,r);let c;const u=new Uint8Array(4),d=__(u),h=new Uint8Array(a.outputLen);for(let e=1,t=0;t<s;e++,t+=a.outputLen){const n=o.subarray(t,t+a.outputLen);d.setInt32(0,e,!1),(c=l._cloneInto(c)).update(u).digestInto(h),n.set(h.subarray(0,n.length));for(let e=1;e<i;e++){a._cloneInto(c).update(h).digestInto(h);for(let e=0;e<n.length;e++)n[e]^=h[e]}}return function(e,t,n,r,i){return e.destroy(),t.destroy(),r&&r.destroy(),i.fill(0),n}(a,l,o,c,h)}LT.create=(e,t)=>new IT(e,t);class OT extends A_{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=__(this.buffer)}update(e){d_.exists(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=E_(e)).length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);if(o!==r)n.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===r&&(this.process(t,0),this.pos=0);else{const t=__(e);for(;r<=i-s;s+=r)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){d_.exists(this),d_.output(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let e=s;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(n>>i&s),a=Number(n&s),l=r?4:0,c=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+c,a,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const o=__(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,c[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:o}=this;return e.length=r,e.pos=o,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}}const NT=(e,t,n)=>e&t^~e&n,DT=(e,t,n)=>e&t^e&n^t&n,BT=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),UT=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),FT=new Uint32Array(64);class zT extends OT{constructor(){super(64,32,8,!1),this.A=0|UT[0],this.B=0|UT[1],this.C=0|UT[2],this.D=0|UT[3],this.E=0|UT[4],this.F=0|UT[5],this.G=0|UT[6],this.H=0|UT[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:o,H:a}=this;return[e,t,n,r,i,s,o,a]}set(e,t,n,r,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)FT[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=FT[e-15],n=FT[e-2],r=x_(t,7)^x_(t,18)^t>>>3,i=x_(n,17)^x_(n,19)^n>>>10;FT[e]=i+FT[e-7]+r+FT[e-16]|0}let{A:n,B:r,C:i,D:s,E:o,F:a,G:l,H:c}=this;for(let e=0;e<64;e++){const t=c+(x_(o,6)^x_(o,11)^x_(o,25))+NT(o,a,l)+BT[e]+FT[e]|0,u=(x_(n,2)^x_(n,13)^x_(n,22))+DT(n,r,i)|0;c=l,l=a,a=o,o=s+t|0,s=i,i=r,r=n,n=t+u|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,i,s,o,a,l,c)}roundClean(){FT.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class HT extends zT{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const GT=C_((()=>new zT)),[VT,jT]=(C_((()=>new HT)),g_.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e))))),WT=new Uint32Array(80),qT=new Uint32Array(80);class XT extends OT{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:s,Dh:o,Dl:a,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:m}=this;return[e,t,n,r,i,s,o,a,l,c,u,d,h,f,p,m]}set(e,t,n,r,i,s,o,a,l,c,u,d,h,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let n=0;n<16;n++,t+=4)WT[n]=e.getUint32(t),qT[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|WT[e-15],n=0|qT[e-15],r=g_.rotrSH(t,n,1)^g_.rotrSH(t,n,8)^g_.shrSH(t,n,7),i=g_.rotrSL(t,n,1)^g_.rotrSL(t,n,8)^g_.shrSL(t,n,7),s=0|WT[e-2],o=0|qT[e-2],a=g_.rotrSH(s,o,19)^g_.rotrBH(s,o,61)^g_.shrSH(s,o,6),l=g_.rotrSL(s,o,19)^g_.rotrBL(s,o,61)^g_.shrSL(s,o,6),c=g_.add4L(i,l,qT[e-7],qT[e-16]),u=g_.add4H(c,r,a,WT[e-7],WT[e-16]);WT[e]=0|u,qT[e]=0|c}let{Ah:n,Al:r,Bh:i,Bl:s,Ch:o,Cl:a,Dh:l,Dl:c,Eh:u,El:d,Fh:h,Fl:f,Gh:p,Gl:m,Hh:g,Hl:v}=this;for(let e=0;e<80;e++){const t=g_.rotrSH(u,d,14)^g_.rotrSH(u,d,18)^g_.rotrBH(u,d,41),y=g_.rotrSL(u,d,14)^g_.rotrSL(u,d,18)^g_.rotrBL(u,d,41),b=u&h^~u&p,_=d&f^~d&m,x=g_.add5L(v,y,_,jT[e],qT[e]),w=g_.add5H(x,g,t,b,VT[e],WT[e]),E=0|x,S=g_.rotrSH(n,r,28)^g_.rotrBH(n,r,34)^g_.rotrBH(n,r,39),A=g_.rotrSL(n,r,28)^g_.rotrBL(n,r,34)^g_.rotrBL(n,r,39),T=n&i^n&o^i&o,M=r&s^r&a^s&a;g=0|p,v=0|m,p=0|h,m=0|f,h=0|u,f=0|d,({h:u,l:d}=g_.add(0|l,0|c,0|w,0|E)),l=0|o,c=0|a,o=0|i,a=0|s,i=0|n,s=0|r;const C=g_.add3L(E,A,M);n=g_.add3H(C,w,S,T),r=0|C}({h:n,l:r}=g_.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:s}=g_.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=g_.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:c}=g_.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:d}=g_.add(0|this.Eh,0|this.El,0|u,0|d)),({h,l:f}=g_.add(0|this.Fh,0|this.Fl,0|h,0|f)),({h:p,l:m}=g_.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:v}=g_.add(0|this.Hh,0|this.Hl,0|g,0|v)),this.set(n,r,i,s,o,a,l,c,u,d,h,f,p,m,g,v)}roundClean(){WT.fill(0),qT.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class ZT extends XT{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class YT extends XT{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class KT extends XT{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const QT=C_((()=>new XT));function JT(e,t,n,r,i){if(!["sha256","sha512"].includes(i))throw new Error("Only sha256 and sha512 are supported");return K_(e),K_(t),kT("sha256"===i?GT:QT,e,t,{c:n,dkLen:r})}C_((()=>new ZT)),C_((()=>new YT)),C_((()=>new KT));const $T=(e,t)=>e<<t|e>>>32-t;function eM(e,t,n,r,i,s){let o=e[t++]^n[r++],a=e[t++]^n[r++],l=e[t++]^n[r++],c=e[t++]^n[r++],u=e[t++]^n[r++],d=e[t++]^n[r++],h=e[t++]^n[r++],f=e[t++]^n[r++],p=e[t++]^n[r++],m=e[t++]^n[r++],g=e[t++]^n[r++],v=e[t++]^n[r++],y=e[t++]^n[r++],b=e[t++]^n[r++],_=e[t++]^n[r++],x=e[t++]^n[r++],w=o,E=a,S=l,A=c,T=u,M=d,C=h,P=f,R=p,I=m,L=g,k=v,O=y,N=b,D=_,B=x;for(let e=0;e<8;e+=2)T^=$T(w+O|0,7),R^=$T(T+w|0,9),O^=$T(R+T|0,13),w^=$T(O+R|0,18),I^=$T(M+E|0,7),N^=$T(I+M|0,9),E^=$T(N+I|0,13),M^=$T(E+N|0,18),D^=$T(L+C|0,7),S^=$T(D+L|0,9),C^=$T(S+D|0,13),L^=$T(C+S|0,18),A^=$T(B+k|0,7),P^=$T(A+B|0,9),k^=$T(P+A|0,13),B^=$T(k+P|0,18),E^=$T(w+A|0,7),S^=$T(E+w|0,9),A^=$T(S+E|0,13),w^=$T(A+S|0,18),C^=$T(M+T|0,7),P^=$T(C+M|0,9),T^=$T(P+C|0,13),M^=$T(T+P|0,18),k^=$T(L+I|0,7),R^=$T(k+L|0,9),I^=$T(R+k|0,13),L^=$T(I+R|0,18),O^=$T(B+D|0,7),N^=$T(O+B|0,9),D^=$T(N+O|0,13),B^=$T(D+N|0,18);i[s++]=o+w|0,i[s++]=a+E|0,i[s++]=l+S|0,i[s++]=c+A|0,i[s++]=u+T|0,i[s++]=d+M|0,i[s++]=h+C|0,i[s++]=f+P|0,i[s++]=p+R|0,i[s++]=m+I|0,i[s++]=g+L|0,i[s++]=v+k|0,i[s++]=y+O|0,i[s++]=b+N|0,i[s++]=_+D|0,i[s++]=x+B|0}function tM(e,t,n,r,i){let s=r+0,o=r+16*i;for(let r=0;r<16;r++)n[o+r]=e[t+16*(2*i-1)+r];for(let r=0;r<i;r++,s+=16,t+=16)eM(n,o,e,t,n,s),r>0&&(o+=16),eM(n,s,e,t+=16,n,o)}function nM(e,t,n,r,i,s,o){return K_(e),K_(t),function(e,t,n){const{N:r,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:c,B:u,tmp:d,blockMixCb:h}=function(e,t,n){const r=M_({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:i,r:s,p:o,dkLen:a,asyncTick:l,maxmem:c,onProgress:u}=r;if(d_.number(i),d_.number(s),d_.number(o),d_.number(a),d_.number(l),d_.number(c),void 0!==u&&"function"!=typeof u)throw new Error("progressCb should be function");const d=128*s,h=d/4;if(i<=1||0!=(i&i-1)||i>=2**(d/8)||i>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(o<0||o>137438953440/d)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(a<0||a>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");const f=d*(i+o);if(f>c)throw new Error(`Scrypt: parameters too large, ${f} (128 * r * (N + p)) > ${c} (maxmem)`);const p=kT(GT,e,t,{c:1,dkLen:d*o}),m=b_(p),g=b_(new Uint8Array(d*i)),v=b_(new Uint8Array(d));let y=()=>{};if(u){const e=2*i*o,t=Math.max(Math.floor(e/1e4),1);let n=0;y=()=>{n++,!u||n%t&&n!==e||u(n/e)}}return{N:i,r:s,p:o,dkLen:a,blockSize32:h,V:g,B32:m,B:p,tmp:v,blockMixCb:y,asyncTick:l}}(e,t,n);for(let e=0;e<s;e++){const t=a*e;for(let e=0;e<a;e++)l[e]=c[t+e];for(let e=0,t=0;e<r-1;e++)tM(l,t,l,t+=a,i),h();tM(l,(r-1)*a,c,t,i),h();for(let e=0;e<r;e++){const e=c[t+a-16]%r;for(let n=0;n<a;n++)d[n]=c[t+n]^l[e*a+n];tM(d,0,c,t,i),h()}}return function(e,t,n,r,i){const s=kT(GT,e,n,{c:1,dkLen:t});return n.fill(0),r.fill(0),i.fill(0),s}(e,o,u,l,d)}(e,t,{N:n,r:i,p:r,dkLen:s,onProgress:o})}BigInt(0);const rM=BigInt(1),iM=BigInt(2),sM=e=>e instanceof Uint8Array,oM=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function aM(e){if(!sM(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=oM[e[n]];return t}function lM(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function cM(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let t=0;t<n.length;t++){const r=2*t,i=e.slice(r,r+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[t]=s}return n}function uM(e){return lM(aM(e))}function dM(e){if(!sM(e))throw new Error("Uint8Array expected");return lM(aM(Uint8Array.from(e).reverse()))}function hM(e,t){return cM(e.toString(16).padStart(2*t,"0"))}function fM(e,t){return hM(e,t).reverse()}function pM(e,t,n){let r;if("string"==typeof t)try{r=cM(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!sM(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r}function mM(...e){const t=new Uint8Array(e.reduce(((e,t)=>e+t.length),0));let n=0;return e.forEach((e=>{if(!sM(e))throw new Error("Uint8Array expected");t.set(e,n),n+=e.length})),t}const gM=e=>(iM<<BigInt(e-1))-rM,vM=e=>new Uint8Array(e),yM=e=>Uint8Array.from(e);function bM(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=vM(e),i=vM(e),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},a=(...e)=>n(i,r,...e),l=(e=vM())=>{i=a(yM([0]),e),r=a(),0!==e.length&&(i=a(yM([1]),e),r=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return mM(...n)};return(e,t)=>{let n;for(o(),l(e);!(n=t(c()));)l();return o(),n}}const _M={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function xM(e,t,n={}){const r=(t,n,r)=>{const i=_M[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);const s=e[t];if(!(r&&void 0===s||i(s,e)))throw new Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}const wM=BigInt(0),EM=BigInt(1),SM=BigInt(2),AM=BigInt(3),TM=BigInt(4),MM=BigInt(5),CM=BigInt(8);function PM(e,t){const n=e%t;return n>=wM?n:t+n}function RM(e,t,n){if(n<=wM||t<wM)throw new Error("Expected power/modulo > 0");if(n===EM)return wM;let r=EM;for(;t>wM;)t&EM&&(r=r*e%n),e=e*e%n,t>>=EM;return r}function IM(e,t,n){let r=e;for(;t-- >wM;)r*=r,r%=n;return r}function LM(e,t){if(e===wM||t<=wM)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=PM(e,t),r=t,i=wM,s=EM,o=EM,a=wM;for(;n!==wM;){const e=r/n,t=r%n,l=i-o*e,c=s-a*e;r=n,n=t,i=o,s=a,o=l,a=c}if(r!==EM)throw new Error("invert: does not exist");return PM(i,t)}BigInt(9),BigInt(16);const kM=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function OM(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}const NM=BigInt(0),DM=BigInt(1);function BM(e){return xM(e.Fp,kM.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),xM(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...OM(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}const{bytesToNumberBE:UM,hexToBytes:FM}=r,zM={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=zM;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:UM(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=zM,n="string"==typeof e?FM(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=zM._parseInt(n.subarray(2)),{d:o,l:a}=zM._parseInt(s);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,o=i.length/2,a=n(s),l=n(o);return`30${n(o+s+4)}02${l}${i}02${a}${r}`}},HM=BigInt(0),GM=BigInt(1),VM=(BigInt(2),BigInt(3));function jM(e){const t=function(e){const t=BM(e);return xM(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function o(e){return PM(e,r)}function a(e){return LM(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:d}=function(e){const t=function(e){const t=BM(e);xM(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return mM(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function s(e){const{a:r,b:i}=t,s=n.sqr(e),o=n.mul(s,e);return n.add(n.add(o,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"==typeof e&&HM<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=t;if(n&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=aM(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let o;try{o="bigint"==typeof e?e:uM(pM("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return i&&(o=PM(o,s)),a(o),o}const c=new Map;function u(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?d.ZERO:new d(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(i(pM("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),o=s(e);if(!n.eql(i,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:i}=this,{px:s,py:o,pz:a}=e,l=n.eql(n.mul(t,a),n.mul(s,i)),c=n.eql(n.mul(r,a),n.mul(o,i));return l&&c}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,VM),{px:s,py:o,pz:a}=this;let l=n.ZERO,c=n.ZERO,u=n.ZERO,h=n.mul(s,s),f=n.mul(o,o),p=n.mul(a,a),m=n.mul(s,o);return m=n.add(m,m),u=n.mul(s,a),u=n.add(u,u),l=n.mul(e,u),c=n.mul(i,p),c=n.add(l,c),l=n.sub(f,c),c=n.add(f,c),c=n.mul(l,c),l=n.mul(m,l),u=n.mul(i,u),p=n.mul(e,p),m=n.sub(h,p),m=n.mul(e,m),m=n.add(m,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,m),c=n.add(c,h),p=n.mul(o,a),p=n.add(p,p),h=n.mul(p,m),l=n.sub(l,h),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new d(l,c,u)}add(e){u(e);const{px:r,py:i,pz:s}=this,{px:o,py:a,pz:l}=e;let c=n.ZERO,h=n.ZERO,f=n.ZERO;const p=t.a,m=n.mul(t.b,VM);let g=n.mul(r,o),v=n.mul(i,a),y=n.mul(s,l),b=n.add(r,i),_=n.add(o,a);b=n.mul(b,_),_=n.add(g,v),b=n.sub(b,_),_=n.add(r,s);let x=n.add(o,l);return _=n.mul(_,x),x=n.add(g,y),_=n.sub(_,x),x=n.add(i,s),c=n.add(a,l),x=n.mul(x,c),c=n.add(v,y),x=n.sub(x,c),f=n.mul(p,_),c=n.mul(m,y),f=n.add(c,f),c=n.sub(v,f),f=n.add(v,f),h=n.mul(c,f),v=n.add(g,g),v=n.add(v,g),y=n.mul(p,y),_=n.mul(m,_),v=n.add(v,y),y=n.sub(g,y),y=n.mul(p,y),_=n.add(_,y),g=n.mul(v,_),h=n.add(h,g),g=n.mul(x,_),c=n.mul(b,c),c=n.sub(c,g),g=n.mul(b,v),f=n.mul(x,f),f=n.add(f,g),new d(c,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return f.wNAFCached(this,c,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(d.fromAffine)}))}multiplyUnsafe(e){const r=d.ZERO;if(e===HM)return r;if(a(e),e===GM)return this;const{endo:i}=t;if(!i)return f.unsafeLadder(this,e);let{k1neg:s,k1:o,k2neg:l,k2:c}=i.splitScalar(e),u=r,h=r,p=this;for(;o>HM||c>HM;)o&GM&&(u=u.add(p)),c&GM&&(h=h.add(p)),p=p.double(),o>>=GM,c>>=GM;return s&&(u=u.negate()),l&&(h=h.negate()),h=new d(n.mul(h.px,i.beta),h.py,h.pz),u.add(h)}multiply(e){a(e);let r,i,s=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:l}=o.splitScalar(s);let{p:c,f:u}=this.wNAF(t),{p:h,f:p}=this.wNAF(l);c=f.constTimeNegate(e,c),h=f.constTimeNegate(a,h),h=new d(n.mul(h.px,o.beta),h.py,h.pz),r=c.add(h),i=u.add(p)}else{const{p:e,f:t}=this.wNAF(s);r=e,i=t}return d.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=d.BASE,i=(e,t)=>t!==HM&&t!==GM&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,n));return s.is0()?void 0:s}toAffine(e){const{px:t,py:r,pz:i}=this,s=this.is0();null==e&&(e=s?n.ONE:n.inv(i));const o=n.mul(t,e),a=n.mul(r,e),l=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===GM)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===GM?this:n?n(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),r(d,this,e)}toHex(e=!0){return aM(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>NM;)n&DM&&(r=r.add(i)),i=i.double(),n>>=DM;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(t,i,s){const{windows:o,windowSize:a}=r(t);let l=e.ZERO,c=e.BASE;const u=BigInt(2**t-1),d=2**t,h=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let r=Number(s&u);s>>=h,r>a&&(r-=d,s+=DM);const o=t,f=t+Math.abs(r)-1,p=e%2!=0,m=r<0;0===r?c=c.add(n(p,i[o])):l=l.add(n(m,i[f]))}return{p:l,f:c}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,r(s))),this.wNAF(i,s,n)}}}(d,t.endo?Math.ceil(h/2):h);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}({...t,toBytes(e,t,r){const i=t.toAffine(),s=n.toBytes(i.x),o=mM;return r?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===s&&4===r)return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}{const e=uM(o);if(!(HM<(a=e)&&a<n.ORDER))throw new Error("Point is not on curve");const t=u(e);let i=n.sqrt(t);return 1==(1&r)!=((i&GM)===GM)&&(i=n.neg(i)),{x:e,y:i}}var a}}),h=e=>aM(hM(e,t.nByteLength));function f(e){return e>r>>GM}const p=(e,t,n)=>uM(e.slice(t,n));class m{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=pM("compactSignature",e,2*n),new m(p(e,0,n),p(e,n,2*n))}static fromDER(e){const{r:t,s:n}=zM.toSig(pM("DER",e));return new m(t,n)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new m(this.r,this.s,e)}recoverPublicKey(e){const{r,s:i,recovery:s}=this,c=b(pM("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const u=2===s||3===s?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=0==(1&s)?"02":"03",f=l.fromHex(d+h(u)),p=a(u),m=o(-c*p),g=o(i*p),v=l.BASE.multiplyAndAddUnsafe(f,m,g);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return cM(this.toDERHex())}toDERHex(){return zM.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return cM(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const g={isValidPrivateKey(e){try{return c(e),!0}catch(e){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>hM(function(e,t,n=!1){const r=(e=pM("privateHash",e)).length,i=OM(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return PM(n?dM(e):uM(e),t-EM)+EM}(t.randomBytes(n.BYTES+8),r),t.nByteLength),precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function v(e){const t=e instanceof Uint8Array,n="string"==typeof e,r=(t||n)&&e.length;return t?r===i||r===s:n?r===2*i||r===2*s:e instanceof l}const y=t.bits2int||function(e){const n=uM(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},b=t.bits2int_modN||function(e){return o(y(e))},_=gM(t.nBitLength);function x(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(HM<=e&&e<_))throw new Error(`bigint expected < 2^${t.nBitLength}`);return hM(e,t.nByteLength)}const w={lowS:t.lowS,prehash:!1},E={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(v(e))throw new Error("first arg must be private key");if(!v(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(n)},sign:function(e,r,i=w){const{seed:s,k2sig:u}=function(e,r,i=w){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:u}=t;let{lowS:h,prehash:p,extraEntropy:g}=i;null==h&&(h=!0),e=pM("msgHash",e),p&&(e=pM("prehashed msgHash",s(e)));const v=b(e),_=c(r),E=[x(_),x(v)];if(null!=g){const e=!0===g?u(n.BYTES):g;E.push(pM("extraEntropy",e,n.BYTES))}const S=mM(...E),A=v;return{seed:S,k2sig:function(e){const t=y(e);if(!d(t))return;const n=a(t),r=l.BASE.multiply(t).toAffine(),i=o(r.x);if(i===HM)return;const s=o(n*o(A+i*_));if(s===HM)return;let c=(r.x===i?0:2)|Number(r.y&GM),u=s;return h&&f(s)&&(u=function(e){return f(e)?o(-e):e}(s),c^=1),new m(i,u,c)}}}(e,r,i),h=t;return bM(h.hash.outputLen,h.nByteLength,h.hmac)(s,u)},verify:function(e,n,r,i=E){const s=e;if(n=pM("msgHash",n),r=pM("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=i;let d,h;try{if("string"==typeof s||s instanceof Uint8Array)try{d=m.fromDER(s)}catch(e){if(!(e instanceof zM.Err))throw e;d=m.fromCompact(s)}else{if("object"!=typeof s||"bigint"!=typeof s.r||"bigint"!=typeof s.s)throw new Error("PARSE");{const{r:e,s:t}=s;d=new m(e,t)}}h=l.fromHex(r)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&d.hasHighS())return!1;u&&(n=t.hash(n));const{r:f,s:p}=d,g=b(n),v=a(p),y=o(g*v),_=o(f*v),x=l.BASE.multiplyAndAddUnsafe(h,y,_)?.toAffine();return!!x&&o(x.x)===f},ProjectivePoint:l,Signature:m,utils:g}}function WM(e){return{hash:e,hmac:(t,...n)=>LT(e,t,S_(...n)),randomBytes:P_}}BigInt(4);const qM=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),XM=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ZM=BigInt(1),YM=BigInt(2),KM=(e,t)=>(e+t/YM)/t;const QM=function(e,t,n=!1,r={}){if(e<=wM)throw new Error(`Expected Fp ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:s}=OM(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=function(e){if(e%TM===AM){const t=(e+EM)/TM;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%CM===MM){const t=(e-MM)/CM;return function(e,n){const r=e.mul(n,SM),i=e.pow(r,t),s=e.mul(n,i),o=e.mul(e.mul(s,SM),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-EM)/SM;let n,r,i;for(n=e-EM,r=0;n%SM===wM;n/=SM,r++);for(i=SM;i<e&&RM(i,t,e)!==e-EM;i++);if(1===r){const t=(e+EM)/TM;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+EM)/SM;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,l=e.pow(e.mul(e.ONE,i),n),c=e.pow(o,s),u=e.pow(o,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(l,EM<<BigInt(a-t-1));l=e.sqr(n),c=e.mul(c,n),u=e.mul(u,l),a=t}return c}}(e)}(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:gM(i),ZERO:wM,ONE:EM,create:t=>PM(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return wM<=t&&t<e},is0:e=>e===wM,isOdd:e=>(e&EM)===EM,neg:t=>PM(-t,e),eql:(e,t)=>e===t,sqr:t=>PM(t*t,e),add:(t,n)=>PM(t+n,e),sub:(t,n)=>PM(t-n,e),mul:(t,n)=>PM(t*n,e),pow:(e,t)=>function(e,t,n){if(n<wM)throw new Error("Expected power > 0");if(n===wM)return e.ONE;if(n===EM)return t;let r=e.ONE,i=t;for(;n>wM;)n&EM&&(r=e.mul(r,i)),i=e.sqr(i),n>>=EM;return r}(a,e,t),div:(t,n)=>PM(t*LM(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>LM(t,e),sqrt:r.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce(((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r))),e.ONE),i=e.inv(r);return t.reduceRight(((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))),i),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?fM(e,s):hM(e,s),fromBytes:e=>{if(e.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return n?dM(e):uM(e)}});return Object.freeze(a)}(qM,void 0,void 0,{sqrt:function(e){const t=qM,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,d=IM(u,n,t)*u%t,h=IM(d,n,t)*u%t,f=IM(h,YM,t)*c%t,p=IM(f,i,t)*f%t,m=IM(p,s,t)*p%t,g=IM(m,a,t)*m%t,v=IM(g,l,t)*g%t,y=IM(v,a,t)*m%t,b=IM(y,n,t)*u%t,_=IM(b,o,t)*p%t,x=IM(_,r,t)*c%t,w=IM(x,YM,t);if(!QM.eql(QM.sqr(w),e))throw new Error("Cannot find square root");return w}}),JM=function(e,t){const n=t=>jM({...e,...WM(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:QM,n:XM,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=XM,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ZM*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,o=BigInt("0x100000000000000000000000000000000"),a=KM(s*e,t),l=KM(-r*e,t);let c=PM(e-a*n-l*i,t),u=PM(-a*r-l*s,t);const d=c>o,h=u>o;if(d&&(c=t-c),h&&(u=t-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:c,k2neg:h,k2:u}}}},GT);var $M;BigInt(0),JM.ProjectivePoint;const eC=null!==($M=JM)&&void 0!==$M?$M:s,tC=BigInt("0xffffffffffffffff"),nC=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),rC=eC.CURVE.n/BigInt(2),iC={type:"object",required:["crypto","id","version","address"],properties:{crypto:{type:"object",required:["cipher","ciphertext","cipherparams","kdf","kdfparams","mac"],properties:{cipher:{type:"string"},ciphertext:{type:"string"},cipherparams:{type:"object"},kdf:{type:"string"},kdfparams:{type:"object"},salt:{type:"string"},mac:{type:"string"}}},id:{type:"string"},version:{type:"number"},address:{type:"string"}}};var sC,oC,aC,lC,cC,uC;!function(e){e[e.Mainnet=1]="Mainnet",e[e.Goerli=5]="Goerli",e[e.Sepolia=11155111]="Sepolia"}(sC||(sC={})),function(e){e.Chainstart="chainstart",e.Homestead="homestead",e.Dao="dao",e.TangerineWhistle="tangerineWhistle",e.SpuriousDragon="spuriousDragon",e.Byzantium="byzantium",e.Constantinople="constantinople",e.Petersburg="petersburg",e.Istanbul="istanbul",e.MuirGlacier="muirGlacier",e.Berlin="berlin",e.London="london",e.ArrowGlacier="arrowGlacier",e.GrayGlacier="grayGlacier",e.MergeForkIdTransition="mergeForkIdTransition",e.Merge="merge",e.Shanghai="shanghai",e.ShardingForkDev="shardingFork"}(oC||(oC={})),function(e){e.ProofOfStake="pos",e.ProofOfWork="pow",e.ProofOfAuthority="poa"}(aC||(aC={})),function(e){e.Ethash="ethash",e.Clique="clique",e.Casper="casper"}(lC||(lC={})),function(e){e.PolygonMainnet="polygon-mainnet",e.PolygonMumbai="polygon-mumbai",e.ArbitrumRinkebyTestnet="arbitrum-rinkeby-testnet",e.ArbitrumOne="arbitrum-one",e.xDaiChain="x-dai-chain",e.OptimisticKovan="optimistic-kovan",e.OptimisticEthereum="optimistic-ethereum"}(cC||(cC={})),function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Uint8Array=2]="Uint8Array",e[e.PrefixedHexString=3]="PrefixedHexString"}(uC||(uC={}));const dC=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return pE(e)?e.slice(2):e},hC=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};function fC(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}const pC=function(e){if(null==e)return new Uint8Array;if(e instanceof Uint8Array)return e;if(Array.isArray(e))return Uint8Array.from(e);if("string"==typeof e){if(!hE(e))throw new Error(`Cannot convert string to Uint8Array. only supports 0x-prefixed hex strings and this string was given: ${e}`);return dS(fC(dC(e)))}if("number"==typeof e)return pC(pS(e));if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${e}`);let t=e.toString(16);return t.length%2&&(t=`0${t}`),pC(`0x${t}`)}if(e.toArray)return Uint8Array.from(e.toArray());throw new Error("invalid type")};function mC(e){const t=uS(e);return"0x"===t?BigInt(0):BigInt(t)}const gC=function(e){return new Uint8Array(e).fill(0)};function vC(e){if(!(e instanceof Uint8Array))throw new Error(`This method only supports Uint8Array but input was: ${e}`)}const yC=function(e,t){return vC(e),function(e,t,n){const r=gC(t);return e.length<t?(r.set(e,t-e.length),r):e.subarray(-t)}(e,t)},bC=function(e){return vC(e),function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e}(e)},_C=e=>`0x${e.toString(16)}`;function xC(e){return bC(pC(`0x${e.toString(16)}`))}const wC=function(e,t,n,r,i){const s=function(e,t){return e===BigInt(0)||e===BigInt(1)?e:void 0===t?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}(t,i);if(!function(e){return e===BigInt(0)||e===BigInt(1)}(s))throw new Error("Invalid signature v value");return new eC.Signature(mC(n),mC(r)).addRecoveryBit(Number(s)).recoverPublicKey(e).toRawBytes(!1).slice(1)};function EC(e,t){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!hE(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const n=pC(e);switch(t){case uC.Uint8Array:return n;case uC.BigInt:return mC(n);case uC.Number:{const e=mC(n);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case uC.PrefixedHexString:return uS(n);default:throw new Error("unknown outputType")}}var SC=i(507),AC=i(606);const TC={name:"goerli",chainId:5,networkId:5,defaultHardfork:"merge",consensus:{type:"poa",algorithm:"clique",clique:{period:15,epoch:3e4}},comment:"Cross-client PoA test network",url:"https://github.com/goerli/testnet",genesis:{timestamp:"0x5c51a607",gasLimit:10485760,difficulty:1,nonce:"0x0000000000000000",extraData:"0x22466c6578692069732061207468696e6722202d204166726900000000000000e0a2bd4258d2768837baa26a28fe71dc079f84c70000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},hardforks:[{name:"chainstart",block:0,forkHash:"0xa3f5ab08"},{name:"homestead",block:0,forkHash:"0xa3f5ab08"},{name:"tangerineWhistle",block:0,forkHash:"0xa3f5ab08"},{name:"spuriousDragon",block:0,forkHash:"0xa3f5ab08"},{name:"byzantium",block:0,forkHash:"0xa3f5ab08"},{name:"constantinople",block:0,forkHash:"0xa3f5ab08"},{name:"petersburg",block:0,forkHash:"0xa3f5ab08"},{name:"istanbul",block:1561651,forkHash:"0xc25efa5c"},{name:"berlin",block:4460644,forkHash:"0x757a1c47"},{name:"london",block:5062605,forkHash:"0xb8c6299d"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://goerli.etherscan.io/block/7382818",name:"merge",ttd:"10790000",block:7382819,forkHash:"0xb8c6299d"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.goerli.ethdisco.net"]},MC={name:"mainnet",chainId:1,networkId:1,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"The Ethereum main chain",url:"https://ethstats.net/",genesis:{gasLimit:5e3,difficulty:17179869184,nonce:"0x0000000000000042",extraData:"0x11bbe8db4e347b4e8c937c1c8370e4b5ed33adb3db69cbdb7a38e1e50b1b82fa"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfc64ec04"},{name:"homestead",block:115e4,forkHash:"0x97c2c34c"},{name:"dao",block:192e4,forkHash:"0x91d1f948"},{name:"tangerineWhistle",block:2463e3,forkHash:"0x7a64da13"},{name:"spuriousDragon",block:2675e3,forkHash:"0x3edd5b10"},{name:"byzantium",block:437e4,forkHash:"0xa00bc324"},{name:"constantinople",block:728e4,forkHash:"0x668db0af"},{name:"petersburg",block:728e4,forkHash:"0x668db0af"},{name:"istanbul",block:9069e3,forkHash:"0x879d6e30"},{name:"muirGlacier",block:92e5,forkHash:"0xe029e991"},{name:"berlin",block:12244e3,forkHash:"0x0eb440f6"},{name:"london",block:12965e3,forkHash:"0xb715077d"},{name:"arrowGlacier",block:13773e3,forkHash:"0x20c327fc"},{name:"grayGlacier",block:1505e4,forkHash:"0xf0afd0e3"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://etherscan.io/block/15537393",name:"merge",ttd:"58750000000000000000000",block:15537394,forkHash:"0xf0afd0e3"},{name:"mergeForkIdTransition",block:null,forkHash:null},{name:"shanghai",block:null,forkHash:null}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.mainnet.ethdisco.net"]},CC={name:"sepolia",chainId:11155111,networkId:11155111,defaultHardfork:"merge",consensus:{type:"pow",algorithm:"ethash",ethash:{}},comment:"PoW test network to replace Ropsten",url:"https://github.com/ethereum/go-ethereum/pull/23730",genesis:{timestamp:"0x6159af19",gasLimit:3e7,difficulty:131072,nonce:"0x0000000000000000",extraData:"0x5365706f6c69612c20417468656e732c204174746963612c2047726565636521"},hardforks:[{name:"chainstart",block:0,forkHash:"0xfe3366e7"},{name:"homestead",block:0,forkHash:"0xfe3366e7"},{name:"tangerineWhistle",block:0,forkHash:"0xfe3366e7"},{name:"spuriousDragon",block:0,forkHash:"0xfe3366e7"},{name:"byzantium",block:0,forkHash:"0xfe3366e7"},{name:"constantinople",block:0,forkHash:"0xfe3366e7"},{name:"petersburg",block:0,forkHash:"0xfe3366e7"},{name:"istanbul",block:0,forkHash:"0xfe3366e7"},{name:"muirGlacier",block:0,forkHash:"0xfe3366e7"},{name:"berlin",block:0,forkHash:"0xfe3366e7"},{name:"london",block:0,forkHash:"0xfe3366e7"},{"//_comment":"The forkHash will remain same as mergeForkIdTransition is post merge, terminal block: https://sepolia.etherscan.io/block/1450408",name:"merge",ttd:"17000000000000000",block:1450409,forkHash:"0xfe3366e7"},{name:"mergeForkIdTransition",block:1735371,forkHash:"0xb96cbd13"},{name:"shanghai",block:null,timestamp:"1677557088",forkHash:"0xf7f9bc08"}],bootstrapNodes:[],dnsNetworks:["enrtree://AKA3AM6LPBYEUDMVNU3BSVQJ5AD45Y7YPOHJLEF6W26QOE4VTUDPE@all.sepolia.ethdisco.net"]},PC={1153:{name:"EIP-1153",number:1153,comment:"Transient Storage",url:"https://eips.ethereum.org/EIPS/eip-1153",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{tstore:{v:100,d:"Base fee of the TSTORE opcode"},tload:{v:100,d:"Base fee of the TLOAD opcode"}},vm:{},pow:{}},1559:{name:"EIP-1559",number:1559,comment:"Fee market change for ETH 1.0 chain",url:"https://eips.ethereum.org/EIPS/eip-1559",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2930],gasConfig:{baseFeeMaxChangeDenominator:{v:8,d:"Maximum base fee change denominator"},elasticityMultiplier:{v:2,d:"Maximum block gas target elasticity"},initialBaseFee:{v:1e9,d:"Initial base fee on first EIP1559 block"}},gasPrices:{},vm:{},pow:{}},2315:{name:"EIP-2315",number:2315,comment:"Simple subroutines for the EVM",url:"https://eips.ethereum.org/EIPS/eip-2315",status:"Draft",minimumHardfork:"istanbul",gasConfig:{},gasPrices:{beginsub:{v:2,d:"Base fee of the BEGINSUB opcode"},returnsub:{v:5,d:"Base fee of the RETURNSUB opcode"},jumpsub:{v:10,d:"Base fee of the JUMPSUB opcode"}},vm:{},pow:{}},2537:{name:"EIP-2537",number:2537,comment:"BLS12-381 precompiles",url:"https://eips.ethereum.org/EIPS/eip-2537",status:"Draft",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{Bls12381G1AddGas:{v:600,d:"Gas cost of a single BLS12-381 G1 addition precompile-call"},Bls12381G1MulGas:{v:12e3,d:"Gas cost of a single BLS12-381 G1 multiplication precompile-call"},Bls12381G2AddGas:{v:4500,d:"Gas cost of a single BLS12-381 G2 addition precompile-call"},Bls12381G2MulGas:{v:55e3,d:"Gas cost of a single BLS12-381 G2 multiplication precompile-call"},Bls12381PairingBaseGas:{v:115e3,d:"Base gas cost of BLS12-381 pairing check"},Bls12381PairingPerPairGas:{v:23e3,d:"Per-pair gas cost of BLS12-381 pairing check"},Bls12381MapG1Gas:{v:5500,d:"Gas cost of BLS12-381 map field element to G1"},Bls12381MapG2Gas:{v:11e4,d:"Gas cost of BLS12-381 map field element to G2"},Bls12381MultiExpGasDiscount:{v:[[1,1200],[2,888],[3,764],[4,641],[5,594],[6,547],[7,500],[8,453],[9,438],[10,423],[11,408],[12,394],[13,379],[14,364],[15,349],[16,334],[17,330],[18,326],[19,322],[20,318],[21,314],[22,310],[23,306],[24,302],[25,298],[26,294],[27,289],[28,285],[29,281],[30,277],[31,273],[32,269],[33,268],[34,266],[35,265],[36,263],[37,262],[38,260],[39,259],[40,257],[41,256],[42,254],[43,253],[44,251],[45,250],[46,248],[47,247],[48,245],[49,244],[50,242],[51,241],[52,239],[53,238],[54,236],[55,235],[56,233],[57,232],[58,231],[59,229],[60,228],[61,226],[62,225],[63,223],[64,222],[65,221],[66,220],[67,219],[68,219],[69,218],[70,217],[71,216],[72,216],[73,215],[74,214],[75,213],[76,213],[77,212],[78,211],[79,211],[80,210],[81,209],[82,208],[83,208],[84,207],[85,206],[86,205],[87,205],[88,204],[89,203],[90,202],[91,202],[92,201],[93,200],[94,199],[95,199],[96,198],[97,197],[98,196],[99,196],[100,195],[101,194],[102,193],[103,193],[104,192],[105,191],[106,191],[107,190],[108,189],[109,188],[110,188],[111,187],[112,186],[113,185],[114,185],[115,184],[116,183],[117,182],[118,182],[119,181],[120,180],[121,179],[122,179],[123,178],[124,177],[125,176],[126,176],[127,175],[128,174]],d:"Discount gas costs of calls to the MultiExp precompiles with `k` (point, scalar) pair"}},vm:{},pow:{}},2565:{name:"EIP-2565",number:2565,comment:"ModExp gas cost",url:"https://eips.ethereum.org/EIPS/eip-2565",status:"Final",minimumHardfork:"byzantium",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:3,d:"Gquaddivisor from modexp precompile for gas calculation"}},vm:{},pow:{}},2718:{name:"EIP-2718",comment:"Typed Transaction Envelope",url:"https://eips.ethereum.org/EIPS/eip-2718",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{},vm:{},pow:{}},2929:{name:"EIP-2929",comment:"Gas cost increases for state access opcodes",url:"https://eips.ethereum.org/EIPS/eip-2929",status:"Final",minimumHardfork:"chainstart",gasConfig:{},gasPrices:{coldsload:{v:2100,d:"Gas cost of the first read of storage from a given location (per transaction)"},coldaccountaccess:{v:2600,d:"Gas cost of the first read of a given address (per transaction)"},warmstorageread:{v:100,d:"Gas cost of reading storage locations which have already loaded 'cold'"},sstoreCleanGasEIP2200:{v:2900,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreNoopGasEIP2200:{v:100,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:100,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitRefundEIP2200:{v:19900,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanRefundEIP2200:{v:4900,d:"Once per SSTORE operation for resetting to the original non-zero value"},call:{v:0,d:"Base fee of the CALL opcode"},callcode:{v:0,d:"Base fee of the CALLCODE opcode"},delegatecall:{v:0,d:"Base fee of the DELEGATECALL opcode"},staticcall:{v:0,d:"Base fee of the STATICCALL opcode"},balance:{v:0,d:"Base fee of the BALANCE opcode"},extcodesize:{v:0,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:0,d:"Base fee of the EXTCODECOPY opcode"},extcodehash:{v:0,d:"Base fee of the EXTCODEHASH opcode"},sload:{v:0,d:"Base fee of the SLOAD opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"}},vm:{},pow:{}},2930:{name:"EIP-2930",comment:"Optional access lists",url:"https://eips.ethereum.org/EIPS/eip-2930",status:"Final",minimumHardfork:"istanbul",requiredEIPs:[2718,2929],gasConfig:{},gasPrices:{accessListStorageKeyCost:{v:1900,d:"Gas cost per storage key in an Access List transaction"},accessListAddressCost:{v:2400,d:"Gas cost per storage key in an Access List transaction"}},vm:{},pow:{}},3198:{name:"EIP-3198",number:3198,comment:"BASEFEE opcode",url:"https://eips.ethereum.org/EIPS/eip-3198",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{basefee:{v:2,d:"Gas cost of the BASEFEE opcode"}},vm:{},pow:{}},3529:{name:"EIP-3529",comment:"Reduction in refunds",url:"https://eips.ethereum.org/EIPS/eip-3529",status:"Final",minimumHardfork:"berlin",requiredEIPs:[2929],gasConfig:{maxRefundQuotient:{v:5,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{selfdestructRefund:{v:0,d:"Refunded following a selfdestruct operation"},sstoreClearRefundEIP2200:{v:4800,d:"Once per SSTORE operation for clearing an originally existing storage slot"}},vm:{},pow:{}},3540:{name:"EIP-3540",number:3540,comment:"EVM Object Format (EOF) v1",url:"https://eips.ethereum.org/EIPS/eip-3540",status:"Review",minimumHardfork:"london",requiredEIPs:[3541],gasConfig:{},gasPrices:{},vm:{},pow:{}},3541:{name:"EIP-3541",comment:"Reject new contracts starting with the 0xEF byte",url:"https://eips.ethereum.org/EIPS/eip-3541",status:"Final",minimumHardfork:"berlin",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3554:{name:"EIP-3554",comment:"Reduction in refunds",url:"Difficulty Bomb Delay to December 1st 2021",status:"Final",minimumHardfork:"muirGlacier",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:95e5,d:"the amount of blocks to delay the difficulty bomb with"}}},3607:{name:"EIP-3607",number:3607,comment:"Reject transactions from senders with deployed code",url:"https://eips.ethereum.org/EIPS/eip-3607",status:"Final",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3651:{name:"EIP-3651",number:3198,comment:"Warm COINBASE",url:"https://eips.ethereum.org/EIPS/eip-3651",status:"Review",minimumHardfork:"london",requiredEIPs:[2929],gasConfig:{},gasPrices:{},vm:{},pow:{}},3670:{name:"EIP-3670",number:3670,comment:"EOF - Code Validation",url:"https://eips.ethereum.org/EIPS/eip-3670",status:"Review",minimumHardfork:"london",requiredEIPs:[3540],gasConfig:{},gasPrices:{},vm:{},pow:{}},3675:{name:"EIP-3675",number:3675,comment:"Upgrade consensus to Proof-of-Stake",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Final",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},3855:{name:"EIP-3855",number:3855,comment:"PUSH0 instruction",url:"https://eips.ethereum.org/EIPS/eip-3855",status:"Review",minimumHardfork:"chainstart",requiredEIPs:[],gasConfig:{},gasPrices:{push0:{v:2,d:"Base fee of the PUSH0 opcode"}},vm:{},pow:{}},3860:{name:"EIP-3860",number:3860,comment:"Limit and meter initcode",url:"https://eips.ethereum.org/EIPS/eip-3860",status:"Review",minimumHardfork:"spuriousDragon",requiredEIPs:[],gasConfig:{},gasPrices:{initCodeWordCost:{v:2,d:"Gas to pay for each word (32 bytes) of initcode when creating a contract"}},vm:{maxInitCodeSize:{v:49152,d:"Maximum length of initialization code when creating a contract"}},pow:{}},4345:{name:"EIP-4345",number:4345,comment:"Difficulty Bomb Delay to June 2022",url:"https://eips.ethereum.org/EIPS/eip-4345",status:"Final",minimumHardfork:"london",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:107e5,d:"the amount of blocks to delay the difficulty bomb with"}}},4399:{name:"EIP-4399",number:4399,comment:"Supplant DIFFICULTY opcode with PREVRANDAO",url:"https://eips.ethereum.org/EIPS/eip-4399",status:"Review",minimumHardfork:"london",requiredEIPs:[],gasConfig:{},gasPrices:{},vm:{},pow:{}},5133:{name:"EIP-5133",number:5133,comment:"Delaying Difficulty Bomb to mid-September 2022",url:"https://eips.ethereum.org/EIPS/eip-5133",status:"Draft",minimumHardfork:"grayGlacier",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:114e5,d:"the amount of blocks to delay the difficulty bomb with"}}}},RC={chainstart:{name:"chainstart",comment:"Start of the Ethereum main chain",url:"",status:"",gasConfig:{minGasLimit:{v:5e3,d:"Minimum the gas limit may ever be"},gasLimitBoundDivisor:{v:1024,d:"The bound divisor of the gas limit, used in update calculations"},maxRefundQuotient:{v:2,d:"Maximum refund quotient; max tx refund is min(tx.gasUsed/maxRefundQuotient, tx.gasRefund)"}},gasPrices:{base:{v:2,d:"Gas base cost, used e.g. for ChainID opcode (Istanbul)"},tierStep:{v:[0,2,3,5,8,10,20],d:"Once per operation, for a selection of them"},exp:{v:10,d:"Base fee of the EXP opcode"},expByte:{v:10,d:"Times ceil(log256(exponent)) for the EXP instruction"},sha3:{v:30,d:"Base fee of the SHA3 opcode"},sha3Word:{v:6,d:"Once per word of the SHA3 operation's data"},sload:{v:50,d:"Base fee of the SLOAD opcode"},sstoreSet:{v:2e4,d:"Once per SSTORE operation if the zeroness changes from zero"},sstoreReset:{v:5e3,d:"Once per SSTORE operation if the zeroness does not change from zero"},sstoreRefund:{v:15e3,d:"Once per SSTORE operation if the zeroness changes to zero"},jumpdest:{v:1,d:"Base fee of the JUMPDEST opcode"},log:{v:375,d:"Base fee of the LOG opcode"},logData:{v:8,d:"Per byte in a LOG* operation's data"},logTopic:{v:375,d:"Multiplied by the * of the LOG*, per LOG transaction. e.g. LOG0 incurs 0 * c_txLogTopicGas, LOG4 incurs 4 * c_txLogTopicGas"},create:{v:32e3,d:"Base fee of the CREATE opcode"},call:{v:40,d:"Base fee of the CALL opcode"},callStipend:{v:2300,d:"Free gas given at beginning of call"},callValueTransfer:{v:9e3,d:"Paid for CALL when the value transfor is non-zero"},callNewAccount:{v:25e3,d:"Paid for CALL when the destination address didn't exist prior"},selfdestructRefund:{v:24e3,d:"Refunded following a selfdestruct operation"},memory:{v:3,d:"Times the address of the (highest referenced byte in memory + 1). NOTE: referencing happens on read, write and in instructions such as RETURN and CALL"},quadCoeffDiv:{v:512,d:"Divisor for the quadratic particle of the memory cost equation"},createData:{v:200,d:""},tx:{v:21e3,d:"Per transaction. NOTE: Not payable on data of calls between transactions"},txCreation:{v:32e3,d:"The cost of creating a contract via tx"},txDataZero:{v:4,d:"Per byte of data attached to a transaction that equals zero. NOTE: Not payable on data of calls between transactions"},txDataNonZero:{v:68,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},copy:{v:3,d:"Multiplied by the number of 32-byte words that are copied (round up) for any *COPY operation and added"},ecRecover:{v:3e3,d:""},sha256:{v:60,d:""},sha256Word:{v:12,d:""},ripemd160:{v:600,d:""},ripemd160Word:{v:120,d:""},identity:{v:15,d:""},identityWord:{v:3,d:""},stop:{v:0,d:"Base fee of the STOP opcode"},add:{v:3,d:"Base fee of the ADD opcode"},mul:{v:5,d:"Base fee of the MUL opcode"},sub:{v:3,d:"Base fee of the SUB opcode"},div:{v:5,d:"Base fee of the DIV opcode"},sdiv:{v:5,d:"Base fee of the SDIV opcode"},mod:{v:5,d:"Base fee of the MOD opcode"},smod:{v:5,d:"Base fee of the SMOD opcode"},addmod:{v:8,d:"Base fee of the ADDMOD opcode"},mulmod:{v:8,d:"Base fee of the MULMOD opcode"},signextend:{v:5,d:"Base fee of the SIGNEXTEND opcode"},lt:{v:3,d:"Base fee of the LT opcode"},gt:{v:3,d:"Base fee of the GT opcode"},slt:{v:3,d:"Base fee of the SLT opcode"},sgt:{v:3,d:"Base fee of the SGT opcode"},eq:{v:3,d:"Base fee of the EQ opcode"},iszero:{v:3,d:"Base fee of the ISZERO opcode"},and:{v:3,d:"Base fee of the AND opcode"},or:{v:3,d:"Base fee of the OR opcode"},xor:{v:3,d:"Base fee of the XOR opcode"},not:{v:3,d:"Base fee of the NOT opcode"},byte:{v:3,d:"Base fee of the BYTE opcode"},address:{v:2,d:"Base fee of the ADDRESS opcode"},balance:{v:20,d:"Base fee of the BALANCE opcode"},origin:{v:2,d:"Base fee of the ORIGIN opcode"},caller:{v:2,d:"Base fee of the CALLER opcode"},callvalue:{v:2,d:"Base fee of the CALLVALUE opcode"},calldataload:{v:3,d:"Base fee of the CALLDATALOAD opcode"},calldatasize:{v:2,d:"Base fee of the CALLDATASIZE opcode"},calldatacopy:{v:3,d:"Base fee of the CALLDATACOPY opcode"},codesize:{v:2,d:"Base fee of the CODESIZE opcode"},codecopy:{v:3,d:"Base fee of the CODECOPY opcode"},gasprice:{v:2,d:"Base fee of the GASPRICE opcode"},extcodesize:{v:20,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:20,d:"Base fee of the EXTCODECOPY opcode"},blockhash:{v:20,d:"Base fee of the BLOCKHASH opcode"},coinbase:{v:2,d:"Base fee of the COINBASE opcode"},timestamp:{v:2,d:"Base fee of the TIMESTAMP opcode"},number:{v:2,d:"Base fee of the NUMBER opcode"},difficulty:{v:2,d:"Base fee of the DIFFICULTY opcode"},gaslimit:{v:2,d:"Base fee of the GASLIMIT opcode"},pop:{v:2,d:"Base fee of the POP opcode"},mload:{v:3,d:"Base fee of the MLOAD opcode"},mstore:{v:3,d:"Base fee of the MSTORE opcode"},mstore8:{v:3,d:"Base fee of the MSTORE8 opcode"},sstore:{v:0,d:"Base fee of the SSTORE opcode"},jump:{v:8,d:"Base fee of the JUMP opcode"},jumpi:{v:10,d:"Base fee of the JUMPI opcode"},pc:{v:2,d:"Base fee of the PC opcode"},msize:{v:2,d:"Base fee of the MSIZE opcode"},gas:{v:2,d:"Base fee of the GAS opcode"},push:{v:3,d:"Base fee of the PUSH opcode"},dup:{v:3,d:"Base fee of the DUP opcode"},swap:{v:3,d:"Base fee of the SWAP opcode"},callcode:{v:40,d:"Base fee of the CALLCODE opcode"},return:{v:0,d:"Base fee of the RETURN opcode"},invalid:{v:0,d:"Base fee of the INVALID opcode"},selfdestruct:{v:0,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{stackLimit:{v:1024,d:"Maximum size of VM stack allowed"},callCreateDepth:{v:1024,d:"Maximum depth of call/create stack"},maxExtraDataSize:{v:32,d:"Maximum size extra data may be after Genesis"}},pow:{minimumDifficulty:{v:131072,d:"The minimum that the difficulty may ever be"},difficultyBoundDivisor:{v:2048,d:"The bound divisor of the difficulty, used in the update calculations"},durationLimit:{v:13,d:"The decision boundary on the blocktime duration used to determine whether difficulty should go up or not"},epochDuration:{v:3e4,d:"Duration between proof-of-work epochs"},timebombPeriod:{v:1e5,d:"Exponential difficulty timebomb period"},minerReward:{v:"5000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:0,d:"the amount of blocks to delay the difficulty bomb with"}}},homestead:{name:"homestead",comment:"Homestead hardfork with protocol and network changes",url:"https://eips.ethereum.org/EIPS/eip-606",status:"Final",gasConfig:{},gasPrices:{delegatecall:{v:40,d:"Base fee of the DELEGATECALL opcode"}},vm:{},pow:{}},dao:{name:"dao",comment:"DAO rescue hardfork",url:"https://eips.ethereum.org/EIPS/eip-779",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{}},tangerineWhistle:{name:"tangerineWhistle",comment:"Hardfork with gas cost changes for IO-heavy operations",url:"https://eips.ethereum.org/EIPS/eip-608",status:"Final",gasConfig:{},gasPrices:{sload:{v:200,d:"Once per SLOAD operation"},call:{v:700,d:"Once per CALL operation & message call transaction"},extcodesize:{v:700,d:"Base fee of the EXTCODESIZE opcode"},extcodecopy:{v:700,d:"Base fee of the EXTCODECOPY opcode"},balance:{v:400,d:"Base fee of the BALANCE opcode"},delegatecall:{v:700,d:"Base fee of the DELEGATECALL opcode"},callcode:{v:700,d:"Base fee of the CALLCODE opcode"},selfdestruct:{v:5e3,d:"Base fee of the SELFDESTRUCT opcode"}},vm:{},pow:{}},spuriousDragon:{name:"spuriousDragon",comment:"HF with EIPs for simple replay attack protection, EXP cost increase, state trie clearing, contract code size limit",url:"https://eips.ethereum.org/EIPS/eip-607",status:"Final",gasConfig:{},gasPrices:{expByte:{v:50,d:"Times ceil(log256(exponent)) for the EXP instruction"}},vm:{maxCodeSize:{v:24576,d:"Maximum length of contract code"}},pow:{}},byzantium:{name:"byzantium",comment:"Hardfork with new precompiles, instructions and other protocol changes",url:"https://eips.ethereum.org/EIPS/eip-609",status:"Final",gasConfig:{},gasPrices:{modexpGquaddivisor:{v:20,d:"Gquaddivisor from modexp precompile for gas calculation"},ecAdd:{v:500,d:"Gas costs for curve addition precompile"},ecMul:{v:4e4,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:1e5,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:8e4,d:"Gas costs regarding curve pairing precompile input length"},revert:{v:0,d:"Base fee of the REVERT opcode"},staticcall:{v:700,d:"Base fee of the STATICCALL opcode"},returndatasize:{v:2,d:"Base fee of the RETURNDATASIZE opcode"},returndatacopy:{v:3,d:"Base fee of the RETURNDATACOPY opcode"}},vm:{},pow:{minerReward:{v:"3000000000000000000",d:"the amount a miner get rewarded for mining a block"},difficultyBombDelay:{v:3e6,d:"the amount of blocks to delay the difficulty bomb with"}}},constantinople:{name:"constantinople",comment:"Postponed hardfork including EIP-1283 (SSTORE gas metering changes)",url:"https://eips.ethereum.org/EIPS/eip-1013",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:200,d:"Once per SSTORE operation if the value doesn't change"},netSstoreInitGas:{v:2e4,d:"Once per SSTORE operation from clean zero"},netSstoreCleanGas:{v:5e3,d:"Once per SSTORE operation from clean non-zero"},netSstoreDirtyGas:{v:200,d:"Once per SSTORE operation from dirty"},netSstoreClearRefund:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},netSstoreResetRefund:{v:4800,d:"Once per SSTORE operation for resetting to the original non-zero value"},netSstoreResetClearRefund:{v:19800,d:"Once per SSTORE operation for resetting to the original zero value"},shl:{v:3,d:"Base fee of the SHL opcode"},shr:{v:3,d:"Base fee of the SHR opcode"},sar:{v:3,d:"Base fee of the SAR opcode"},extcodehash:{v:400,d:"Base fee of the EXTCODEHASH opcode"},create2:{v:32e3,d:"Base fee of the CREATE2 opcode"}},vm:{},pow:{minerReward:{v:"2000000000000000000",d:"The amount a miner gets rewarded for mining a block"},difficultyBombDelay:{v:5e6,d:"the amount of blocks to delay the difficulty bomb with"}}},petersburg:{name:"petersburg",comment:"Aka constantinopleFix, removes EIP-1283, activate together with or after constantinople",url:"https://eips.ethereum.org/EIPS/eip-1716",status:"Final",gasConfig:{},gasPrices:{netSstoreNoopGas:{v:null,d:"Removed along EIP-1283"},netSstoreInitGas:{v:null,d:"Removed along EIP-1283"},netSstoreCleanGas:{v:null,d:"Removed along EIP-1283"},netSstoreDirtyGas:{v:null,d:"Removed along EIP-1283"},netSstoreClearRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetRefund:{v:null,d:"Removed along EIP-1283"},netSstoreResetClearRefund:{v:null,d:"Removed along EIP-1283"}},vm:{},pow:{}},istanbul:{name:"istanbul",comment:"HF targeted for December 2019 following the Constantinople/Petersburg HF",url:"https://eips.ethereum.org/EIPS/eip-1679",status:"Final",gasConfig:{},gasPrices:{blake2Round:{v:1,d:"Gas cost per round for the Blake2 F precompile"},ecAdd:{v:150,d:"Gas costs for curve addition precompile"},ecMul:{v:6e3,d:"Gas costs for curve multiplication precompile"},ecPairing:{v:45e3,d:"Base gas costs for curve pairing precompile"},ecPairingWord:{v:34e3,d:"Gas costs regarding curve pairing precompile input length"},txDataNonZero:{v:16,d:"Per byte of data attached to a transaction that is not equal to zero. NOTE: Not payable on data of calls between transactions"},sstoreSentryGasEIP2200:{v:2300,d:"Minimum gas required to be present for an SSTORE call, not consumed"},sstoreNoopGasEIP2200:{v:800,d:"Once per SSTORE operation if the value doesn't change"},sstoreDirtyGasEIP2200:{v:800,d:"Once per SSTORE operation if a dirty value is changed"},sstoreInitGasEIP2200:{v:2e4,d:"Once per SSTORE operation from clean zero to non-zero"},sstoreInitRefundEIP2200:{v:19200,d:"Once per SSTORE operation for resetting to the original zero value"},sstoreCleanGasEIP2200:{v:5e3,d:"Once per SSTORE operation from clean non-zero to something else"},sstoreCleanRefundEIP2200:{v:4200,d:"Once per SSTORE operation for resetting to the original non-zero value"},sstoreClearRefundEIP2200:{v:15e3,d:"Once per SSTORE operation for clearing an originally existing storage slot"},balance:{v:700,d:"Base fee of the BALANCE opcode"},extcodehash:{v:700,d:"Base fee of the EXTCODEHASH opcode"},chainid:{v:2,d:"Base fee of the CHAINID opcode"},selfbalance:{v:5,d:"Base fee of the SELFBALANCE opcode"},sload:{v:800,d:"Base fee of the SLOAD opcode"}},vm:{},pow:{}},muirGlacier:{name:"muirGlacier",comment:"HF to delay the difficulty bomb",url:"https://eips.ethereum.org/EIPS/eip-2384",status:"Final",gasConfig:{},gasPrices:{},vm:{},pow:{difficultyBombDelay:{v:9e6,d:"the amount of blocks to delay the difficulty bomb with"}}},berlin:{name:"berlin",comment:"HF targeted for July 2020 following the Muir Glacier HF",url:"https://eips.ethereum.org/EIPS/eip-2070",status:"Final",eips:[2565,2929,2718,2930]},london:{name:"london",comment:"HF targeted for July 2021 following the Berlin fork",url:"https://github.com/ethereum/eth1.0-specs/blob/master/network-upgrades/mainnet-upgrades/london.md",status:"Final",eips:[1559,3198,3529,3541]},shanghai:{name:"shanghai",comment:"Next feature hardfork after the merge hardfork having withdrawals, warm coinbase, push0, limit/meter initcode",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/shanghai.md",status:"Final",eips:[3651,3855,3860,4895]},arrowGlacier:{name:"arrowGlacier",comment:"HF to delay the difficulty bomb",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/arrow-glacier.md",status:"Final",eips:[4345],gasConfig:{},gasPrices:{},vm:{},pow:{}},grayGlacier:{name:"grayGlacier",comment:"Delaying the difficulty bomb to Mid September 2022",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/gray-glacier.md",status:"Draft",eips:[5133],gasConfig:{},gasPrices:{},vm:{},pow:{}},mergeForkIdTransition:{name:"mergeForkIdTransition",comment:"Pre-merge hardfork to fork off non-upgraded clients",url:"https://eips.ethereum.org/EIPS/eip-3675",status:"Draft",eips:[]},merge:{name:"merge",comment:"Hardfork to upgrade the consensus mechanism to Proof-of-Stake",url:"https://github.com/ethereum/execution-specs/blob/master/network-upgrades/mainnet-upgrades/merge.md",status:"Final",consensus:{type:"pos",algorithm:"casper",casper:{}},eips:[3675,4399]}},{buf:IC}=AC;class LC extends US{constructor(e){var t,n;super(),this._eips=[],this._customChains=null!==(t=e.customChains)&&void 0!==t?t:[],this._chainParams=this.setChain(e.chain),this.DEFAULT_HARDFORK=null!==(n=this._chainParams.defaultHardfork)&&void 0!==n?n:oC.Merge,this.HARDFORK_CHANGES=this.hardforks().map((e=>[e.name,RC[e.name]])),this._hardfork=this.DEFAULT_HARDFORK,void 0!==e.hardfork&&this.setHardfork(e.hardfork),e.eips&&this.setEIPs(e.eips)}static custom(e,t={}){var n;const r=null!==(n=t.baseChain)&&void 0!==n?n:"mainnet",i=Object.assign({},LC._getChainParams(r));if(i.name="custom-chain","string"!=typeof e)return new LC(Object.assign({chain:Object.assign(Object.assign({},i),e)},t));if(e===cC.PolygonMainnet)return LC.custom({name:cC.PolygonMainnet,chainId:137,networkId:137},t);if(e===cC.PolygonMumbai)return LC.custom({name:cC.PolygonMumbai,chainId:80001,networkId:80001},t);if(e===cC.ArbitrumRinkebyTestnet)return LC.custom({name:cC.ArbitrumRinkebyTestnet,chainId:421611,networkId:421611},t);if(e===cC.ArbitrumOne)return LC.custom({name:cC.ArbitrumOne,chainId:42161,networkId:42161},t);if(e===cC.xDaiChain)return LC.custom({name:cC.xDaiChain,chainId:100,networkId:100},t);if(e===cC.OptimisticKovan)return LC.custom({name:cC.OptimisticKovan,chainId:69,networkId:69},Object.assign({hardfork:oC.Berlin},t));if(e===cC.OptimisticEthereum)return LC.custom({name:cC.OptimisticEthereum,chainId:10,networkId:10},Object.assign({hardfork:oC.Berlin},t));throw new Error(`Custom chain ${e} not supported`)}static fromGethGenesis(e,{chain:t,eips:n,genesisHash:r,hardfork:i,mergeForkIdPostMerge:s}){var o;const a=function(e,t,n){try{if(["config","difficulty","gasLimit","alloc"].some((t=>!(t in e))))throw new Error("Invalid format, expected geth genesis fields missing");return void 0!==t&&(e.name=t),function(e,t=!0){var n,r;const{name:i,config:s,difficulty:o,mixHash:a,gasLimit:l,coinbase:c,baseFeePerGas:u}=e;let{extraData:d,timestamp:h,nonce:f}=e;const p=Number(h),{chainId:m}=s;if(""===d&&(d="0x"),pE(h)||(h=hC(parseInt(h))),18!==f.length&&(f=function(e){return e&&"0x0"!==e?pE(e)?`0x${dC(e).padStart(16,"0")}`:`0x${e.padStart(16,"0")}`:"0x0000000000000000"}(f)),s.eip155Block!==s.eip158Block)throw new Error("EIP155 block number must equal EIP 158 block number since both are part of SpuriousDragon hardfork and the client only supports activating the full hardfork");const g={name:i,chainId:m,networkId:m,genesis:{timestamp:h,gasLimit:parseInt(l),difficulty:parseInt(o),nonce:f,extraData:d,mixHash:a,coinbase:c,baseFeePerGas:u},hardfork:void 0,hardforks:[],bootstrapNodes:[],consensus:void 0!==s.clique?{type:"poa",algorithm:"clique",clique:{period:null!==(n=s.clique.period)&&void 0!==n?n:s.clique.blockperiodseconds,epoch:null!==(r=s.clique.epoch)&&void 0!==r?r:s.clique.epochlength}}:{type:"pow",algorithm:"ethash",ethash:{}}},v={[oC.Homestead]:{name:"homesteadBlock"},[oC.Dao]:{name:"daoForkBlock"},[oC.TangerineWhistle]:{name:"eip150Block"},[oC.SpuriousDragon]:{name:"eip155Block"},[oC.Byzantium]:{name:"byzantiumBlock"},[oC.Constantinople]:{name:"constantinopleBlock"},[oC.Petersburg]:{name:"petersburgBlock"},[oC.Istanbul]:{name:"istanbulBlock"},[oC.MuirGlacier]:{name:"muirGlacierBlock"},[oC.Berlin]:{name:"berlinBlock"},[oC.London]:{name:"londonBlock"},[oC.MergeForkIdTransition]:{name:"mergeForkBlock",postMerge:t},[oC.Shanghai]:{name:"shanghaiTime",postMerge:!0,isTimestamp:!0},[oC.ShardingForkDev]:{name:"shardingForkTime",postMerge:!0,isTimestamp:!0}},y=Object.keys(v).reduce(((e,t)=>(e[v[t].name]=t,e)),{}),b=Object.keys(s).filter((e=>void 0!==y[e]&&void 0!==s[e]&&null!==s[e]));if(g.hardforks=b.map((e=>({name:y[e],block:!0===v[y[e]].isTimestamp||"number"!=typeof s[e]?null:s[e],timestamp:!0===v[y[e]].isTimestamp&&"number"==typeof s[e]?s[e]:void 0}))).filter((e=>null!==e.block||void 0!==e.timestamp)),g.hardforks.sort(((e,t)=>{var n,r;return(null!==(n=e.block)&&void 0!==n?n:1/0)-(null!==(r=t.block)&&void 0!==r?r:1/0)})),g.hardforks.sort(((e,t)=>{var n,r;return(null!==(n=e.timestamp)&&void 0!==n?n:p)-(null!==(r=t.timestamp)&&void 0!==r?r:p)})),void 0!==s.terminalTotalDifficulty){const e={name:oC.Merge,ttd:s.terminalTotalDifficulty,block:null},t=g.hardforks.findIndex((e=>{var t;return!0===(null===(t=v[e.name])||void 0===t?void 0:t.postMerge)}));-1!==t?g.hardforks.splice(t,0,e):g.hardforks.push(e)}const _=g.hardforks.length>0?g.hardforks.slice(-1)[0]:void 0;return g.hardfork=null==_?void 0:_.name,g.hardforks.unshift({name:oC.Chainstart,block:0}),g}(e,n)}catch(e){throw new Error(`Error parsing parameters file: ${e.message}`)}}(e,t,s),l=new LC({chain:null!==(o=a.name)&&void 0!==o?o:"custom",customChains:[a],eips:n,hardfork:null!=i?i:a.hardfork});return void 0!==r&&l.setForkHashes(r),l}static isSupportedChainId(e){const t=this._getInitializedChains();return Boolean(t.names[e.toString()])}static _getChainParams(e,t){let n=e;const r=this._getInitializedChains(t);if("number"==typeof n||"bigint"==typeof n){if(n=n.toString(),r.names[n])return r[r.names[n]];throw new Error(`Chain with ID ${n} not supported`)}if(void 0!==r[n])return r[n];throw new Error(`Chain with name ${n} not supported`)}setChain(e){if("number"==typeof e||"bigint"==typeof e||"string"==typeof e)this._chainParams=LC._getChainParams(e,this._customChains);else{if("object"!=typeof e)throw new Error("Wrong input format");{if(this._customChains.length>0)throw new Error("Chain must be a string, number, or bigint when initialized with customChains passed in");const t=["networkId","genesis","hardforks","bootstrapNodes"];for(const n of t)if(!(n in e))throw new Error(`Missing required chain parameter: ${n}`);this._chainParams=e}}for(const e of this.hardforks())if(void 0===e.block)throw new Error("Hardfork cannot have undefined block number");return this._chainParams}setHardfork(e){let t=!1;for(const n of this.HARDFORK_CHANGES)n[0]===e&&(this._hardfork!==e&&(this._hardfork=e,this.emit("hardforkChanged",e)),t=!0);if(!t)throw new Error(`Hardfork with name ${e} not supported`)}getHardforkByBlockNumber(e,t,n){const r=EC(e,uC.BigInt),i=EC(t,uC.BigInt),s=EC(n,uC.Number),o=this.hardforks().filter((e=>null!==e.block||null!==e.ttd&&void 0!==e.ttd||void 0!==e.timestamp)),a=o.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(o.slice(a+1).findIndex((e=>null!==e.ttd&&void 0!==e.ttd))>=0)throw Error("More than one merge hardforks found with ttd specified");let l=o.findIndex((e=>null!==e.block&&e.block>r||void 0!==s&&Number(e.timestamp)>s));if(-1===l)l=o.length;else if(0===l)throw Error("Must have at least one hardfork at block 0");if(void 0===s&&(l-=o.slice(0,l).reverse().findIndex((e=>null!==e.block||void 0!==e.ttd))),l-=1,null===o[l].block&&void 0===o[l].timestamp)(null==i||BigInt(o[l].ttd)>i)&&(l-=1);else if(a>=0&&null!=i){if(l>=a&&BigInt(o[a].ttd)>i)throw Error("Maximum HF determined by total difficulty is lower than the block number HF");if(l<a&&BigInt(o[a].ttd)<=i)throw Error("HF determined by block number is lower than the minimum total difficulty HF")}const c=l;for(;l<o.length-1&&o[l].block===o[l+1].block&&o[l].timestamp===o[l+1].timestamp;l+=1);if(s){const e=o.slice(0,c).reduce(((e,t)=>{var n;return Math.max(Number(null!==(n=t.timestamp)&&void 0!==n?n:"0"),e)}),0);if(e>s)throw Error("Maximum HF determined by timestamp is lower than the block number/ttd HF");const t=o.slice(l+1).reduce(((e,t)=>{var n;return Math.min(Number(null!==(n=t.timestamp)&&void 0!==n?n:s),e)}),s);if(t<s)throw Error("Maximum HF determined by block number/ttd is lower than timestamp HF")}return o[l].name}setHardforkByBlockNumber(e,t,n){const r=this.getHardforkByBlockNumber(e,t,n);return this.setHardfork(r),r}_getHardfork(e){const t=this.hardforks();for(const n of t)if(n.name===e)return n;return null}setEIPs(e=[]){for(const t of e){if(!(t in PC))throw new Error(`${t} not supported`);const n=this.gteHardfork(PC[t].minimumHardfork);if(!n)throw new Error(`${t} cannot be activated on hardfork ${this.hardfork()}, minimumHardfork: ${n}`);if(void 0!==PC[t].requiredEIPs)for(const n of PC[t].requiredEIPs)if(!e.includes(n)&&!this.isActivatedEIP(n))throw new Error(`${t} requires EIP ${n}, but is not included in the EIP list`)}this._eips=e}param(e,t){let n;for(const r of this._eips)if(n=this.paramByEIP(e,t,r),void 0!==n)return n;return this.paramByHardfork(e,t,this._hardfork)}paramByHardfork(e,t,n){let r=null;for(const i of this.HARDFORK_CHANGES){if("eips"in i[1]){const n=i[1].eips;for(const i of n){const n=this.paramByEIP(e,t,i);r="bigint"==typeof n?n:r}}else{if(void 0===i[1][e])throw new Error(`Topic ${e} not defined`);void 0!==i[1][e][t]&&(r=i[1][e][t].v)}if(i[0]===n)break}return BigInt(null!=r?r:0)}paramByEIP(e,t,n){if(!(n in PC))throw new Error(`${n} not supported`);const r=PC[n];if(!(e in r))throw new Error(`Topic ${e} not defined`);if(void 0===r[e][t])return;const i=r[e][t].v;return BigInt(i)}paramByBlock(e,t,n,r,i){const s=this.getHardforkByBlockNumber(n,r,i);return this.paramByHardfork(e,t,s)}isActivatedEIP(e){if(this.eips().includes(e))return!0;for(const t of this.HARDFORK_CHANGES){const n=t[1];if(this.gteHardfork(n.name)&&"eips"in n&&n.eips.includes(e))return!0}return!1}hardforkIsActiveOnBlock(e,t){const n=EC(t,uC.BigInt),r=null!=e?e:this._hardfork,i=this.hardforkBlock(r);return"bigint"==typeof i&&i!==BigInt(0)&&n>=i}activeOnBlock(e){return this.hardforkIsActiveOnBlock(null,e)}hardforkGteHardfork(e,t){const n=null!=e?e:this._hardfork,r=this.hardforks();let i=-1,s=-1,o=0;for(const e of r)e.name===n&&(i=o),e.name===t&&(s=o),o+=1;return i>=s&&-1!==s}gteHardfork(e){return this.hardforkGteHardfork(null,e)}hardforkBlock(e){var t;const n=null!=e?e:this._hardfork,r=null===(t=this._getHardfork(n))||void 0===t?void 0:t.block;return null==r?null:BigInt(r)}hardforkTimestamp(e){var t;const n=null!=e?e:this._hardfork,r=null===(t=this._getHardfork(n))||void 0===t?void 0:t.timestamp;return null==r?null:BigInt(r)}eipBlock(e){for(const t of this.HARDFORK_CHANGES){const n=t[1];if("eips"in n&&n.eips.includes(e))return this.hardforkBlock("number"==typeof t[0]?String(t[0]):t[0])}return null}hardforkTTD(e){var t;const n=null!=e?e:this._hardfork,r=null===(t=this._getHardfork(n))||void 0===t?void 0:t.ttd;return null==r?null:BigInt(r)}isHardforkBlock(e,t){const n=EC(e,uC.BigInt),r=null!=t?t:this._hardfork,i=this.hardforkBlock(r);return"bigint"==typeof i&&i!==BigInt(0)&&i===n}nextHardforkBlockOrTimestamp(e){var t,n;const r=null!=e?e:this._hardfork,i=this.hardforks();let s=i.findIndex((e=>e.name===r));if(r===oC.Merge&&(s-=1),s<0)return null;let o=null!==(t=i[s].timestamp)&&void 0!==t?t:i[s].block;o=null!=o?Number(o):null;const a=i.slice(s+1).find((e=>{var t;let n=null!==(t=e.timestamp)&&void 0!==t?t:e.block;return n=null!=n?Number(n):null,e.name!==oC.Merge&&null!=n&&n!==o}));if(void 0===a)return null;const l=null!==(n=a.timestamp)&&void 0!==n?n:a.block;return null==l?null:BigInt(l)}nextHardforkBlock(e){const t=null!=e?e:this._hardfork;let n=this.hardforkBlock(t);if(null===n&&t===oC.Merge){const e=this.hardforks(),t=e.findIndex((e=>null!==e.ttd&&void 0!==e.ttd));if(t<0)throw Error("Merge hardfork should have been found");n=this.hardforkBlock(e[t-1].name)}return null===n?null:this.hardforks().reduce(((e,t)=>{const r=BigInt(null===t.block||void 0!==t.ttd&&null!==t.ttd?0:t.block);return r>n&&null===e?r:e}),null)}isNextHardforkBlock(e,t){const n=EC(e,uC.BigInt),r=null!=t?t:this._hardfork,i=this.nextHardforkBlock(r);return null!==i&&i===n}_calcForkHash(e,t){let n=new Uint8Array,r=0;for(const t of this.hardforks()){const{block:i,timestamp:s,name:o}=t;let a=null!=s?s:i;if(a=null!==a?Number(a):null,"number"==typeof a&&0!==a&&a!==r&&o!==oC.Merge&&(n=oA(n,dS(a.toString(16).padStart(16,"0"))),r=a),t.name===e)break}const i=oA(t,n),s=uS(function(e){const t=hC(e);return dS(`0x${fC(t.slice(2))}`)}(IC(i)>>>0));return s}forkHash(e,t){const n=null!=e?e:this._hardfork,r=this._getHardfork(n);if(null===r||null===(null==r?void 0:r.block)&&void 0===(null==r?void 0:r.timestamp)&&void 0===(null==r?void 0:r.ttd))throw new Error("No fork hash calculation possible for future hardfork");if(null!==(null==r?void 0:r.forkHash)&&void 0!==(null==r?void 0:r.forkHash))return r.forkHash;if(!t)throw new Error("genesisHash required for forkHash calculation");return this._calcForkHash(n,t)}hardforkForForkHash(e){const t=this.hardforks().filter((t=>t.forkHash===e));return t.length>=1?t[t.length-1]:null}setForkHashes(e){var t;for(const n of this.hardforks()){const r=null!==(t=n.timestamp)&&void 0!==t?t:n.block;null!==n.forkHash&&void 0!==n.forkHash||null==r&&void 0===n.ttd||(n.forkHash=this.forkHash(n.name,e))}}genesis(){return this._chainParams.genesis}hardforks(){return this._chainParams.hardforks}bootstrapNodes(){return this._chainParams.bootstrapNodes}dnsNetworks(){return this._chainParams.dnsNetworks}hardfork(){return this._hardfork}chainId(){return BigInt(this._chainParams.chainId)}chainName(){return this._chainParams.name}networkId(){return BigInt(this._chainParams.networkId)}eips(){return this._eips}consensusType(){const e=this.hardfork();let t;for(const n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(t=n[1].consensus.type),n[0]===e)break;return null!=t?t:this._chainParams.consensus.type}consensusAlgorithm(){const e=this.hardfork();let t;for(const n of this.HARDFORK_CHANGES)if("consensus"in n[1]&&(t=n[1].consensus.algorithm),n[0]===e)break;return null!=t?t:this._chainParams.consensus.algorithm}consensusConfig(){var e;const t=this.hardfork();let n;for(const e of this.HARDFORK_CHANGES)if("consensus"in e[1]&&(n=e[1].consensus[e[1].consensus.algorithm]),e[0]===t)break;return null!==(e=null!=n?n:this._chainParams.consensus[this.consensusAlgorithm()])&&void 0!==e?e:{}}copy(){const e=Object.assign(Object.create(Object.getPrototypeOf(this)),this);return e.removeAllListeners(),e}static _getInitializedChains(e){const t={};for(const[e,n]of Object.entries(sC))t[n]=e.toLowerCase();const n={mainnet:MC,goerli:TC,sepolia:CC};if(e)for(const r of e){const{name:e}=r;t[r.chainId.toString()]=e,n[e]=r}return n.names=t,n}}var kC;!function(e){e[e.EIP155ReplayProtection=155]="EIP155ReplayProtection",e[e.EIP1559FeeMarket=1559]="EIP1559FeeMarket",e[e.EIP2718TypedTransaction=2718]="EIP2718TypedTransaction",e[e.EIP2930AccessLists=2930]="EIP2930AccessLists"}(kC||(kC={}));class OC{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new OC(gC(20))}equals(e){return aA(this.buf,e.buf)}isZero(){return this.equals(OC.zero())}toString(){return uS(this.buf)}toArray(){return this.buf}static publicToAddress(e,t=!1){let n=e;if(vC(n),t&&64!==n.length&&(n=eC.ProjectivePoint.fromHex(n).toRawBytes(!1).slice(1)),64!==n.length)throw new Error("Expected pubKey to be of length 64");return $_(n).slice(-20)}}const NC=e=>{let t,n;if(function(e){if(0===e.length)return!0;const t=e[0];return!!Array.isArray(t)}(e)){n=null!=e?e:[];const r=[];for(let e=0;e<n.length;e+=1){const t=n[e],i=uS(t[0]),s=[];for(let e=0;e<t[1].length;e+=1)s.push(uS(t[1][e]));const o={address:i,storageKeys:s};r.push(o)}t=r}else{t=e;const r=[];for(let t=0;t<e.length;t+=1){const n=e[t],i=pC(n.address),s=[];for(let e=0;e<n.storageKeys.length;e+=1)s.push(pC(n.storageKeys[e]));r.push([i,s])}n=r}return{AccessListJSON:t,accessList:n}},DC=e=>{for(let t=0;t<e.length;t+=1){const n=e[t],r=n[0],i=n[1];if(void 0!==n[2])throw new Error("Access list item cannot have 3 elements. It can only have an address, and an array of storage slots.");if(20!==r.length)throw new Error("Invalid EIP-2930 transaction: address length should be 20 bytes");for(let e=0;e<i.length;e+=1)if(32!==i[e].length)throw new Error("Invalid EIP-2930 transaction: storage slot length should be 32 bytes")}},BC=e=>{const t=[];for(let n=0;n<e.length;n+=1){const r=e[n],i={address:uS(yC(r[0],20)),storageKeys:[]},s=r&&r[1];for(let e=0;e<s.length;e+=1){const t=s[e];i.storageKeys.push(uS(yC(t,32)))}t.push(i)}return t},UC=(e,t)=>{const n=t.param("gasPrices","accessListStorageKeyCost"),r=t.param("gasPrices","accessListAddressCost");let i=0;for(let t=0;t<e.length;t+=1)i+=e[t][1].length;return e.length*Number(r)+i*Number(n)};class FC{constructor(e,t){var n,r;this.cache={hash:void 0,dataFee:void 0},this.activeCapabilities=[],this.DEFAULT_CHAIN=sC.Mainnet,this.DEFAULT_HARDFORK=oC.Merge;const{nonce:i,gasLimit:s,to:o,value:a,data:l,v:c,r:u,s:d,type:h}=e;this._type=Number(mC(pC(h))),this.txOptions=t;const f=pC(""===o?"0x":o),p=pC(""===c?"0x":c),m=pC(""===u?"0x":u),g=pC(""===d?"0x":d);this.nonce=mC(pC(""===i?"0x":i)),this.gasLimit=mC(pC(""===s?"0x":s)),this.to=f.length>0?new OC(f):void 0,this.value=mC(pC(""===a?"0x":a)),this.data=pC(""===l?"0x":l),this.v=p.length>0?mC(p):void 0,this.r=m.length>0?mC(m):void 0,this.s=g.length>0?mC(g):void 0,this._validateCannotExceedMaxInteger({value:this.value,r:this.r,s:this.s}),this._validateCannotExceedMaxInteger({gasLimit:this.gasLimit},64),this._validateCannotExceedMaxInteger({nonce:this.nonce},64,!0);const v=void 0===this.to||null===this.to,y=null!==(n=t.allowUnlimitedInitCodeSize)&&void 0!==n&&n,b=null!==(r=t.common)&&void 0!==r?r:this._getCommon();v&&b.isActivatedEIP(3860)&&!y&&((e,t)=>{const n=e.param("vm","maxInitCodeSize");if(n&&BigInt(t)>n)throw new Error(`the initcode size of this transaction is too large: it is ${t} while the max is ${e.param("vm","maxInitCodeSize")}`)})(b,this.data.length)}get type(){return this._type}supports(e){return this.activeCapabilities.includes(e)}validate(e=!1){const t=[];return this.getBaseFee()>this.gasLimit&&t.push(`gasLimit is too low. given ${this.gasLimit}, need at least ${this.getBaseFee()}`),this.isSigned()&&!this.verifySignature()&&t.push("Invalid Signature"),e?t:0===t.length}_validateYParity(){const{v:e}=this;if(void 0!==e&&e!==BigInt(0)&&e!==BigInt(1)){const e=this._errorMsg("The y-parity of the transaction should either be 0 or 1");throw new Error(e)}}_validateHighS(){const{s:e}=this;if(this.common.gteHardfork("homestead")&&void 0!==e&&e>rC){const e=this._errorMsg("Invalid Signature: s-values greater than secp256k1n/2 are considered invalid");throw new Error(e)}}getBaseFee(){const e=this.common.param("gasPrices","tx");let t=this.getDataFee();if(e&&(t+=e),this.common.gteHardfork("homestead")&&this.toCreationAddress()){const e=this.common.param("gasPrices","txCreation");e&&(t+=e)}return t}getDataFee(){const e=this.common.param("gasPrices","txDataZero"),t=this.common.param("gasPrices","txDataNonZero");let n=BigInt(0);for(let r=0;r<this.data.length;r+=1)0===this.data[r]?n+=e:n+=t;if((void 0===this.to||null===this.to)&&this.common.isActivatedEIP(3860)){const e=BigInt(Math.ceil(this.data.length/32));n+=this.common.param("gasPrices","initCodeWordCost")*e}return n}toCreationAddress(){return void 0===this.to||0===this.to.buf.length}isSigned(){const{v:e,r:t,s:n}=this;return void 0!==e&&void 0!==t&&void 0!==n}verifySignature(){try{const e=this.getSenderPublicKey();return 0!==bC(e).length}catch(e){return!1}}getSenderAddress(){return new OC(OC.publicToAddress(this.getSenderPublicKey()))}sign(e){if(32!==e.length){const e=this._errorMsg("Private key must be 32 bytes in length.");throw new Error(e)}let t=!1;0===this.type&&this.common.gteHardfork("spuriousDragon")&&!this.supports(kC.EIP155ReplayProtection)&&(this.activeCapabilities.push(kC.EIP155ReplayProtection),t=!0);const n=this.getMessageToSign(!0),{v:r,r:i,s}=this._ecsign(n,e),o=this._processSignature(r,i,s);if(t){const e=this.activeCapabilities.indexOf(kC.EIP155ReplayProtection);e>-1&&this.activeCapabilities.splice(e,1)}return o}_getCommon(e,t){var n;if(void 0!==t){const n=mC(pC(t));if(e){if(e.chainId()!==n){const e=this._errorMsg("The chain ID does not match the chain ID of Common");throw new Error(e)}return e.copy()}return LC.isSupportedChainId(n)?new LC({chain:n,hardfork:this.DEFAULT_HARDFORK}):LC.custom({name:"custom-chain",networkId:n,chainId:n},{baseChain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}return null!==(n=null==e?void 0:e.copy())&&void 0!==n?n:new LC({chain:this.DEFAULT_CHAIN,hardfork:this.DEFAULT_HARDFORK})}_validateCannotExceedMaxInteger(e,t=256,n=!1){for(const[r,i]of Object.entries(e))switch(t){case 64:if(n){if(void 0!==i&&i>=tC){const e=this._errorMsg(`${r} cannot equal or exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}}else if(void 0!==i&&i>tC){const e=this._errorMsg(`${r} cannot exceed MAX_UINT64 (2^64-1), given ${i}`);throw new Error(e)}break;case 256:if(n){if(void 0!==i&&i>=nC){const e=this._errorMsg(`${r} cannot equal or exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}}else if(void 0!==i&&i>nC){const e=this._errorMsg(`${r} cannot exceed MAX_INTEGER (2^256-1), given ${i}`);throw new Error(e)}break;default:{const e=this._errorMsg("unimplemented bits value");throw new Error(e)}}}static _validateNotArray(e){const t=["nonce","gasPrice","gasLimit","to","value","data","v","r","s","type","baseFee","maxFeePerGas","chainId"];for(const[n,r]of Object.entries(e))if(t.includes(n)&&Array.isArray(r))throw new Error(`${n} cannot be an array`)}_getSharedErrorPostfix(){let e="";try{e=this.isSigned()?uS(this.hash()):"not available (unsigned)"}catch(t){e="error"}let t="";try{t=this.isSigned().toString()}catch(t){e="error"}let n="";try{n=this.common.hardfork()}catch(e){n="error"}let r=`tx type=${this.type} hash=${e} nonce=${this.nonce} value=${this.value} `;return r+=`signed=${t} hf=${n}`,r}_ecsign(e,t,n){const r=eC.sign(e,t),i=r.toCompactRawBytes();return{r:i.subarray(0,32),s:i.subarray(32,64),v:void 0===n?BigInt(r.recovery+27):BigInt(r.recovery+35)+BigInt(n)*BigInt(2)}}static fromSerializedTx(e,t={}){}static fromTxData(e,t={}){}}const zC=dS(2..toString(16).padStart(2,"0"));class HC extends FC{constructor(e,t={}){var n;super(Object.assign(Object.assign({},e),{type:2}),t),this.DEFAULT_HARDFORK="london";const{chainId:r,accessList:i,maxFeePerGas:s,maxPriorityFeePerGas:o}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(1559))throw new Error("EIP-1559 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([1559,2718,2930]);const a=NC(null!=i?i:[]);if(this.accessList=a.accessList,this.AccessListJSON=a.AccessListJSON,DC(this.accessList),this.maxFeePerGas=mC(pC(""===s?"0x":s)),this.maxPriorityFeePerGas=mC(pC(""===o?"0x":o)),this._validateCannotExceedMaxInteger({maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas}),FC._validateNotArray(e),this.gasLimit*this.maxFeePerGas>nC){const e=this._errorMsg("gasLimit * maxFeePerGas cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}if(this.maxFeePerGas<this.maxPriorityFeePerGas){const e=this._errorMsg("maxFeePerGas cannot be less than maxPriorityFeePerGas (The total must be the larger of the two)");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(n=null==t?void 0:t.freeze)||void 0===n||n)&&Object.freeze(this)}static fromTxData(e,t={}){return new HC(e,t)}static fromSerializedTx(e,t={}){if(!aA(e.subarray(0,1),zC))throw new Error(`Invalid serialized tx input: not an EIP-1559 transaction (wrong tx type, expected: 2, received: ${uS(e.subarray(0,1))}`);const n=SC.yH.decode(e.subarray(1));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return HC.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(9!==e.length&&12!==e.length)throw new Error("Invalid EIP-1559 transaction. Only expecting 9 values (for unsigned tx) or 12 values (for signed tx).");const[n,r,i,s,o,a,l,c,u,d,h,f]=e;return this._validateNotArray({chainId:n,v:d}),mE({nonce:r,maxPriorityFeePerGas:i,maxFeePerGas:s,gasLimit:o,value:l,v:d,r:h,s:f}),new HC({chainId:mC(n),nonce:r,maxPriorityFeePerGas:i,maxFeePerGas:s,gasLimit:o,to:a,value:l,data:c,accessList:null!=u?u:[],v:void 0!==d?mC(d):void 0,r:h,s:f},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(UC(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(e=BigInt(0)){const t=this.maxPriorityFeePerGas,n=this.maxFeePerGas-e,r=(t<n?t:n)+e;return this.gasLimit*r+this.value}raw(){return[xC(this.chainId),xC(this.nonce),xC(this.maxPriorityFeePerGas),xC(this.maxFeePerGas),xC(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),xC(this.value),this.data,this.accessList,void 0!==this.v?xC(this.v):Uint8Array.from([]),void 0!==this.r?xC(this.r):Uint8Array.from([]),void 0!==this.s?xC(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return oA(zC,SC.yH.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,9),n=oA(zC,SC.yH.encode(t));return e?$_(n):n}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=$_(this.serialize())),this.cache.hash):$_(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:n,s:r}=this;this._validateHighS();try{return wC(e,t+BigInt(27),xC(n),xC(r))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,n){const r=Object.assign(Object.assign({},this.txOptions),{common:this.common});return HC.fromTxData({chainId:this.chainId,nonce:this.nonce,maxPriorityFeePerGas:this.maxPriorityFeePerGas,maxFeePerGas:this.maxFeePerGas,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:mC(t),s:mC(n)},r)}toJSON(){const e=BC(this.accessList);return{chainId:_C(this.chainId),nonce:_C(this.nonce),maxPriorityFeePerGas:_C(this.maxPriorityFeePerGas),maxFeePerGas:_C(this.maxFeePerGas),gasLimit:_C(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:_C(this.value),data:uS(this.data),accessList:e,v:void 0!==this.v?_C(this.v):void 0,r:void 0!==this.r?_C(this.r):void 0,s:void 0!==this.s?_C(this.s):void 0}}errorStr(){let e=this._getSharedErrorPostfix();return e+=` maxFeePerGas=${this.maxFeePerGas} maxPriorityFeePerGas=${this.maxPriorityFeePerGas}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const GC=dS(1..toString(16).padStart(2,"0"));class VC extends FC{constructor(e,t={}){var n;super(Object.assign(Object.assign({},e),{type:1}),t),this.DEFAULT_HARDFORK="berlin";const{chainId:r,accessList:i,gasPrice:s}=e;if(this.common=this._getCommon(t.common,r),this.chainId=this.common.chainId(),!this.common.isActivatedEIP(2930))throw new Error("EIP-2930 not enabled on Common");this.activeCapabilities=this.activeCapabilities.concat([2718,2930]);const o=NC(null!=i?i:[]);if(this.accessList=o.accessList,this.AccessListJSON=o.AccessListJSON,DC(this.accessList),this.gasPrice=mC(pC(""===s?"0x":s)),this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),FC._validateNotArray(e),this.gasPrice*this.gasLimit>nC){const e=this._errorMsg("gasLimit * gasPrice cannot exceed MAX_INTEGER");throw new Error(e)}this._validateYParity(),this._validateHighS(),(null===(n=null==t?void 0:t.freeze)||void 0===n||n)&&Object.freeze(this)}static fromTxData(e,t={}){return new VC(e,t)}static fromSerializedTx(e,t={}){if(!aA(e.subarray(0,1),GC))throw new Error(`Invalid serialized tx input: not an EIP-2930 transaction (wrong tx type, expected: 1, received: ${uS(e.subarray(0,1))}`);const n=SC.yH.decode(Uint8Array.from(e.subarray(1)));if(!Array.isArray(n))throw new Error("Invalid serialized tx input: must be array");return VC.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(8!==e.length&&11!==e.length)throw new Error("Invalid EIP-2930 transaction. Only expecting 8 values (for unsigned tx) or 11 values (for signed tx).");const[n,r,i,s,o,a,l,c,u,d,h]=e;return this._validateNotArray({chainId:n,v:u}),mE({nonce:r,gasPrice:i,gasLimit:s,value:a,v:u,r:d,s:h}),new VC({chainId:mC(n),nonce:r,gasPrice:i,gasLimit:s,to:o,value:a,data:l,accessList:null!=c?c:[],v:void 0!==u?mC(u):void 0,r:d,s:h},t)}getDataFee(){if(this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork())return this.cache.dataFee.value;let e=super.getDataFee();return e+=BigInt(UC(this.accessList,this.common)),Object.isFrozen(this)&&(this.cache.dataFee={value:e,hardfork:this.common.hardfork()}),e}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}raw(){return[xC(this.chainId),xC(this.nonce),xC(this.gasPrice),xC(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),xC(this.value),this.data,this.accessList,void 0!==this.v?xC(this.v):Uint8Array.from([]),void 0!==this.r?xC(this.r):Uint8Array.from([]),void 0!==this.s?xC(this.s):Uint8Array.from([])]}serialize(){const e=this.raw();return oA(GC,SC.yH.encode(e))}getMessageToSign(e=!0){const t=this.raw().slice(0,8),n=oA(GC,SC.yH.encode(t));return e?$_(n):n}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=$_(this.serialize())),this.cache.hash):$_(this.serialize())}getMessageToVerifySignature(){return this.getMessageToSign()}getSenderPublicKey(){if(!this.isSigned()){const e=this._errorMsg("Cannot call this method if transaction is not signed");throw new Error(e)}const e=this.getMessageToVerifySignature(),{v:t,r:n,s:r}=this;this._validateHighS();try{return wC(e,t+BigInt(27),xC(n),xC(r))}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,n){const r=Object.assign(Object.assign({},this.txOptions),{common:this.common});return VC.fromTxData({chainId:this.chainId,nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,accessList:this.accessList,v:e-BigInt(27),r:mC(t),s:mC(n)},r)}toJSON(){const e=BC(this.accessList);return{chainId:_C(this.chainId),nonce:_C(this.nonce),gasPrice:_C(this.gasPrice),gasLimit:_C(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:_C(this.value),data:uS(this.data),accessList:e,v:void 0!==this.v?_C(this.v):void 0,r:void 0!==this.r?_C(this.r):void 0,s:void 0!==this.s?_C(this.s):void 0}}errorStr(){var e,t;let n=this._getSharedErrorPostfix();return n+=` gasPrice=${this.gasPrice} accessListCount=${null!==(t=null===(e=this.accessList)||void 0===e?void 0:e.length)&&void 0!==t?t:0}`,n}_errorMsg(e){return`${e} (${this.errorStr()})`}}function jC(e,t){const n=Number(e),r=2*Number(t);return n===r+35||n===r+36}class WC extends FC{constructor(e,t={}){var n;if(super(Object.assign(Object.assign({},e),{type:0}),t),this.common=this._validateTxV(this.v,t.common),this.gasPrice=mC(pC(""===e.gasPrice?"0x":e.gasPrice)),this.gasPrice*this.gasLimit>nC){const e=this._errorMsg("gas limit * gasPrice cannot exceed MAX_INTEGER (2^256-1)");throw new Error(e)}this._validateCannotExceedMaxInteger({gasPrice:this.gasPrice}),FC._validateNotArray(e),this.common.gteHardfork("spuriousDragon")&&(this.isSigned()?jC(this.v,this.common.chainId())&&this.activeCapabilities.push(kC.EIP155ReplayProtection):this.activeCapabilities.push(kC.EIP155ReplayProtection)),(null===(n=null==t?void 0:t.freeze)||void 0===n||n)&&Object.freeze(this)}static fromTxData(e,t={}){return new WC(e,t)}static fromSerializedTx(e,t={}){const n=SC.yH.decode(e);if(!Array.isArray(n))throw new Error("Invalid serialized tx input. Must be array");return this.fromValuesArray(n,t)}static fromValuesArray(e,t={}){if(6!==e.length&&9!==e.length)throw new Error("Invalid transaction. Only expecting 6 values (for unsigned tx) or 9 values (for signed tx).");const[n,r,i,s,o,a,l,c,u]=e;return mE({nonce:n,gasPrice:r,gasLimit:i,value:o,v:l,r:c,s:u}),new WC({nonce:n,gasPrice:r,gasLimit:i,to:s,value:o,data:a,v:l,r:c,s:u},t)}raw(){return[xC(this.nonce),xC(this.gasPrice),xC(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),xC(this.value),this.data,void 0!==this.v?xC(this.v):Uint8Array.from([]),void 0!==this.r?xC(this.r):Uint8Array.from([]),void 0!==this.s?xC(this.s):Uint8Array.from([])]}serialize(){return SC.yH.encode(this.raw())}_getMessageToSign(){const e=[xC(this.nonce),xC(this.gasPrice),xC(this.gasLimit),void 0!==this.to?this.to.buf:Uint8Array.from([]),xC(this.value),this.data];return this.supports(kC.EIP155ReplayProtection)&&(e.push(pC(this.common.chainId())),e.push(bC(pC(0))),e.push(bC(pC(0)))),e}getMessageToSign(e=!0){const t=this._getMessageToSign();return e?$_(SC.yH.encode(t)):t}getDataFee(){return this.cache.dataFee&&this.cache.dataFee.hardfork===this.common.hardfork()?this.cache.dataFee.value:(Object.isFrozen(this)&&(this.cache.dataFee={value:super.getDataFee(),hardfork:this.common.hardfork()}),super.getDataFee())}getUpfrontCost(){return this.gasLimit*this.gasPrice+this.value}hash(){if(!this.isSigned()){const e=this._errorMsg("Cannot call hash method if transaction is not signed");throw new Error(e)}return Object.isFrozen(this)?(this.cache.hash||(this.cache.hash=$_(SC.yH.encode(this.raw()))),this.cache.hash):$_(SC.yH.encode(this.raw()))}getMessageToVerifySignature(){if(!this.isSigned()){const e=this._errorMsg("This transaction is not signed");throw new Error(e)}const e=this._getMessageToSign();return $_(SC.yH.encode(e))}getSenderPublicKey(){const e=this.getMessageToVerifySignature(),{v:t,r:n,s:r}=this;this._validateHighS();try{return wC(e,t,xC(n),xC(r),this.supports(kC.EIP155ReplayProtection)?this.common.chainId():void 0)}catch(e){const t=this._errorMsg("Invalid Signature");throw new Error(t)}}_processSignature(e,t,n){let r=e;this.supports(kC.EIP155ReplayProtection)&&(r+=this.common.chainId()*BigInt(2)+BigInt(8));const i=Object.assign(Object.assign({},this.txOptions),{common:this.common});return WC.fromTxData({nonce:this.nonce,gasPrice:this.gasPrice,gasLimit:this.gasLimit,to:this.to,value:this.value,data:this.data,v:r,r:mC(t),s:mC(n)},i)}toJSON(){return{nonce:_C(this.nonce),gasPrice:_C(this.gasPrice),gasLimit:_C(this.gasLimit),to:void 0!==this.to?this.to.toString():void 0,value:_C(this.value),data:uS(this.data),v:void 0!==this.v?_C(this.v):void 0,r:void 0!==this.r?_C(this.r):void 0,s:void 0!==this.s?_C(this.s):void 0}}_validateTxV(e,t){let n;const r=void 0!==e?Number(e):void 0;if(void 0!==r&&r<37&&27!==r&&28!==r)throw new Error(`Legacy txs need either v = 27/28 or v >= 37 (EIP-155 replay protection), got v = ${r}`);if(void 0!==r&&0!==r&&(!t||t.gteHardfork("spuriousDragon"))&&27!==r&&28!==r)if(t){if(!jC(BigInt(r),t.chainId()))throw new Error(`Incompatible EIP155-based V ${r} and chain id ${t.chainId()}. See the Common parameter of the Transaction constructor to set the chain id.`)}else{let e;e=(r-35)%2==0?35:36,n=BigInt(r-e)/BigInt(2)}return this._getCommon(t,n)}errorStr(){let e=this._getSharedErrorPostfix();return e+=` gasPrice=${this.gasPrice}`,e}_errorMsg(e){return`${e} (${this.errorStr()})`}}const qC=new Map;class XC{constructor(){}static typeToInt(e){return Number(mC(pC(e)))}static registerTransactionType(e,t){const n=XC.typeToInt(e);qC.set(n,t)}static fromTxData(e,t={}){if(!("type"in e)||void 0===e.type)return WC.fromTxData(e,t);const n=XC.typeToInt(e.type);if(0===n)return WC.fromTxData(e,t);if(1===n)return VC.fromTxData(e,t);if(2===n)return HC.fromTxData(e,t);const r=qC.get(n);if(null==r?void 0:r.fromTxData)return r.fromTxData(e,t);throw new Error(`Tx instantiation with type ${n} not supported`)}static fromSerializedData(e,t={}){if(!(e[0]<=127))return WC.fromSerializedTx(e,t);switch(e[0]){case 1:return VC.fromSerializedTx(e,t);case 2:return HC.fromSerializedTx(e,t);default:{const n=qC.get(Number(e[0]));if(null==n?void 0:n.fromSerializedTx)return n.fromSerializedTx(e,t);throw new Error(`TypedTransaction with ID ${e[0]} unknown`)}}}static fromBlockBodyData(e,t={}){if(e instanceof Uint8Array)return this.fromSerializedData(e,t);if(Array.isArray(e))return WC.fromValuesArray(e,t);throw new Error("Cannot decode transaction: unknown type input")}}var ZC=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const YC=(e,t)=>{let n;if(!t&&"string"==typeof e&&dE(e)&&66!==e.length)throw new Ey;try{n=e instanceof Uint8Array?e:lS(e)}catch(e){throw new Sy}if(!t&&32!==n.byteLength)throw new Ey;return n},KC=e=>{const t=dE(e)?e:vS(e),n=dS(t),r=oA(dS(yS(`Ethereum Signed Message:\n${n.byteLength}`)),n);return gA(r)},QC=(e,t)=>{const n=YC(t),r=KC(e),i=eC.sign(r.substring(2),n),s=i.toCompactRawBytes(),o=i.r.toString(16).padStart(64,"0"),a=i.s.toString(16).padStart(64,"0"),l=i.recovery+27;return{message:e,messageHash:r,v:pS(l),r:`0x${o}`,s:`0x${a}`,signature:`${uS(s)}${l.toString(16)}`}},JC=e=>{if($E(e))throw new ob;const t=XC.fromSerializedData(dS(e));return kS(t.getSenderAddress().toString())},$C=(e,t,n,r,i)=>{if("object"==typeof e){const t=`${e.r}${e.s.slice(2)}${e.v.slice(2)}`;return $C(e.messageHash,t,n)}if("string"==typeof t&&"string"==typeof n&&!$E(r)){const s=`${n}${r.slice(2)}${t.slice(2)}`;return $C(e,s,i)}if($E(t))throw new Ay("signature string undefined");const s=n?e:KC(e);let o=parseInt(t.substring(130),16);o>26&&(o-=27);const a=eC.Signature.fromCompact(t.slice(2,130)).addRecoveryBit(o).recoverPublicKey(s.replace("0x","")).toRawBytes(!1),l=gA(a.subarray(1));return kS(`0x${l.slice(-40)}`)},eP=e=>{const t=YC(e),n=eC.getPublicKey(t,!1),r=gA(n.slice(1)).slice(-40);return kS(`0x${r}`)},tP=(e,t)=>{const n=YC(e);return`0x${uS(eC.getPublicKey(n,t)).slice(4)}`},nP=(e,t,n)=>ZC(void 0,void 0,void 0,(function*(){var r,i,s,o,a,l,c;const u=YC(e);let d;if(d=(null==n?void 0:n.salt)?"string"==typeof n.salt?dS(n.salt):n.salt:TA(32),!(uE(t)||t instanceof Uint8Array))throw new Py;const h="string"==typeof t?dS(vS(t)):t;let f;if(null==n?void 0:n.iv){if(f="string"==typeof n.iv?dS(n.iv):n.iv,16!==f.length)throw new Ry}else f=TA(16);const p=null!==(r=null==n?void 0:n.kdf)&&void 0!==r?r:"scrypt";let m,g;if("pbkdf2"===p){if(g={dklen:null!==(i=null==n?void 0:n.dklen)&&void 0!==i?i:32,salt:uS(d).replace("0x",""),c:null!==(s=null==n?void 0:n.c)&&void 0!==s?s:262144,prf:"hmac-sha256"},g.c<1e3)throw new Iy;m=JT(h,d,g.c,g.dklen,"sha256")}else{if("scrypt"!==p)throw new Ty;g={n:null!==(o=null==n?void 0:n.n)&&void 0!==o?o:8192,r:null!==(a=null==n?void 0:n.r)&&void 0!==a?a:8,p:null!==(l=null==n?void 0:n.p)&&void 0!==l?l:1,dklen:null!==(c=null==n?void 0:n.dklen)&&void 0!==c?c:32,salt:uS(d).replace("0x","")},m=nM(h,d,g.n,g.p,g.r,g.dklen)}const v=yield RT(u,m.slice(0,16),f,"aes-128-ctr"),y=uS(v).slice(2),b=gA(oA(m.slice(16,32),v)).replace("0x","");return{version:3,id:NA(),address:eP(u).toLowerCase().replace("0x",""),crypto:{ciphertext:y,cipherparams:{iv:uS(f).replace("0x","")},cipher:"aes-128-ctr",kdf:p,kdfparams:g,mac:b}}})),rP=(e,t)=>{const n=YC(e,t);return{address:eP(n),privateKey:uS(n),signTransaction:e=>{throw new Bb("Do not have network access to sign the transaction")},sign:e=>QC("string"==typeof e?e:JSON.stringify(e),n),encrypt:(e,t)=>ZC(void 0,void 0,void 0,(function*(){return nP(n,e,t)}))}};var iP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class sP{constructor(e){this._requestManager=e,this._requests=new Map}get requests(){return[...this._requests.values()].map((e=>e.payload))}add(e){const t=qA(e),n=new QA;return this._requests.set(t.id,{payload:t,promise:n}),n}execute(e){var t;return iP(this,void 0,void 0,(function*(){if(0===this.requests.length)return Promise.resolve([]);const n=new QA({timeout:null!==(t=null==e?void 0:e.timeout)&&void 0!==t?t:1e3,eagerStart:!0,timeoutMessage:"Batch request timeout"});return this._processBatchRequest(n).catch((e=>n.reject(e))),n.catch((e=>{e instanceof Xy&&this._abortAllRequests("Batch request timeout"),n.reject(e)})),n}))}_processBatchRequest(e){var t,n;return iP(this,void 0,void 0,(function*(){const r=yield this._requestManager.sendBatch([...this._requests.values()].map((e=>e.payload)));if(r.length!==this._requests.size)throw this._abortAllRequests("Invalid batch response"),new $b(r,`Batch request size mismatch the results size. Requests: ${this._requests.size}, Responses: ${r.length}`);const i=this.requests.map((e=>e.id)).map(Number).sort(((e,t)=>e-t)),s=r.map((e=>e.id)).map(Number).sort(((e,t)=>e-t));if(JSON.stringify(i)!==JSON.stringify(s))throw this._abortAllRequests("Invalid batch response"),new $b(r,`Batch request mismatch the results. Requests: [${i.join()}], Responses: [${s.join()}]`);for(const e of r)BA(e)?null===(t=this._requests.get(e.id))||void 0===t||t.promise.resolve(e.result):UA(e)&&(null===(n=this._requests.get(e.id))||void 0===n||n.promise.reject(e.error));e.resolve(r)}))}_abortAllRequests(e){for(const{promise:t}of this._requests.values())t.reject(new Zy(e))}}class oP extends oT{constructor(e){var t;if(super(),this.providers=_T.providers,QS(e)||"string"==typeof e&&""!==e.trim()||gT(e))return this._requestManager=new _T(e),void(this._subscriptionManager=new wT(this._requestManager,{}));const{config:n,provider:r,requestManager:i,subscriptionManager:s,registeredSubscriptions:o,accountProvider:a,wallet:l}=e;this.setConfig(null!=n?n:{}),this._requestManager=null!=i?i:new _T(r,null===(t=null==n?void 0:n.enableExperimentalFeatures)||void 0===t?void 0:t.useSubscriptionWhenCheckingBlockTimeout),this._subscriptionManager=s||new wT(this.requestManager,null!=o?o:{}),a&&(this._accountProvider=a),l&&(this._wallet=l)}get requestManager(){return this._requestManager}get subscriptionManager(){return this._subscriptionManager}get wallet(){return this._wallet}get accountProvider(){return this._accountProvider}static fromContextObject(...e){return new this(...e.reverse())}getContextObject(){var e;return{config:this.config,provider:this.provider,requestManager:this.requestManager,subscriptionManager:this.subscriptionManager,registeredSubscriptions:null===(e=this.subscriptionManager)||void 0===e?void 0:e.registeredSubscriptions,providers:this.providers,wallet:this.wallet,accountProvider:this.accountProvider}}use(e,...t){const n=new e(...[...t,this.getContextObject()]);return this.on(sT.CONFIG_CHANGE,(e=>{n.setConfig({[e.name]:e.newValue})})),n}link(e){this.setConfig(e.config),this._requestManager=e.requestManager,this.provider=e.provider,this._subscriptionManager=e.subscriptionManager,this._wallet=e.wallet,this._accountProvider=e._accountProvider,e.on(sT.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}registerPlugin(e){if(void 0!==this[e.pluginNamespace])throw new Ky(e.pluginNamespace);const t={[e.pluginNamespace]:e};t[e.pluginNamespace].link(this),Object.assign(this,t)}get provider(){return this.currentProvider}set provider(e){this.requestManager.setProvider(e)}get currentProvider(){return this.requestManager.provider}set currentProvider(e){this.requestManager.setProvider(e)}get givenProvider(){return oP.givenProvider}setProvider(e){return this.provider=e,!0}get BatchRequest(){return sP.bind(void 0,this._requestManager)}extend(e){var t;return e.property&&!this[e.property]&&(this[e.property]={}),null===(t=e.methods)||void 0===t||t.forEach((t=>{const n=(...e)=>{return n=this,r=void 0,s=function*(){return this.requestManager.send({method:t.call,params:e})},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{l(s.next(e))}catch(e){t(e)}}function a(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(o,a)}l((s=s.apply(n,r||[])).next())}));var n,r,i,s};e.property?this[e.property][t.name]=n:this[t.name]=n})),this}}oP.providers=_T.providers;class aP{constructor(e){if(this.toAddress=()=>{if(this.isDirect()){const e=this._iban.slice(4),t=aP._parseInt(e,36),n=rA(t,40);return kS(n)}throw new Error("Iban is indirect and cannot be converted. Must be length of 34 or 35")},!aP.isIndirect(e)&&!aP.isDirect(e))throw new Error("Invalid IBAN was provided");this._iban=e}static isDirect(e){return 34===e.length||35===e.length}isDirect(){return aP.isDirect(this._iban)}static isIndirect(e){return 20===e.length}isIndirect(){return aP.isIndirect(this._iban)}static isValid(e){return/^XE[0-9]{2}(ETH[0-9A-Z]{13}|[0-9A-Z]{30,31})$/.test(e)&&1===aP._mod9710(aP._iso13616Prepare(e))}isValid(){return aP.isValid(this._iban)}static fromBban(e){const t=`0${(98-this._mod9710(this._iso13616Prepare(`XE00${e}`))).toString()}`.slice(-2);return new aP(`XE${t}${e}`)}static createIndirect(e){return aP.fromBban(`ETH${e.institution}${e.identifier}`)}static fromAddress(e){if(!RE(e))throw new Gb(e);const t=BigInt(hS(e)).toString(36),n=rA(t,15);return aP.fromBban(n.toUpperCase())}static toIban(e){return aP.fromAddress(e).toString()}client(){return this.isIndirect()?this._iban.slice(11):""}checksum(){return this._iban.slice(2,4)}institution(){return this.isIndirect()?this._iban.slice(7,11):""}toString(){return this._iban}}aP._iso13616Prepare=e=>{const t="A".charCodeAt(0),n="Z".charCodeAt(0),r=e.toUpperCase();return`${r.slice(4)}${r.slice(0,4)}`.split("").map((e=>{const r=e.charCodeAt(0);return r>=t&&r<=n?r-t+10:e})).join("")},aP._parseInt=(e,t)=>[...e].reduce(((e,n)=>BigInt(parseInt(n,t))+BigInt(t)*e),BigInt(0)),aP._mod9710=e=>{let t,n=e;for(;n.length>2;)t=n.slice(0,9),n=`${(parseInt(t,10)%97).toString()}${n.slice(t.length)}`;return parseInt(n,10)%97},aP.toAddress=e=>new aP(e).toAddress();var lP,cP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class uP extends iT{constructor(e){super(),this[lP]="Promise",this._promise=new Promise(e)}then(e,t){return cP(this,void 0,void 0,(function*(){return this._promise.then(e,t)}))}catch(e){return cP(this,void 0,void 0,(function*(){return this._promise.catch(e)}))}finally(e){return cP(this,void 0,void 0,(function*(){return this._promise.finally(e)}))}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}}lP=Symbol.toStringTag,i(889);var dP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};function hP(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_syncing",params:[]})}))}function fP(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["hex"],[t]),e.send({method:"eth_sendRawTransaction",params:[t]})}))}function pP(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag","bool"],[t,n]),e.send({method:"eth_getBlockByNumber",params:[t,n]})}))}var mP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))},gP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const vP={type:"object",properties:{accessList:{type:"null"},maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},yP={type:"object",properties:{maxFeePerGas:{type:"null"},maxPriorityFeePerGas:{type:"null"}}},bP={type:"object",properties:{gasPrice:{type:"null"}}},_P=(e,t,n)=>{try{oS.validateJSONSchema(e,t)}catch(e){if(e instanceof aE)throw new Fb(e.errors,n);throw e}},xP=e=>{var t,n;const r=e;if(!$E(r.type)){let e;switch(r.type){case"0x0":e=vP;break;case"0x1":e=yP;break;case"0x2":e=bP;break;default:return fA({format:"uint"},r.type,OE)}return _P(e,r,r.type),fA({format:"uint"},r.type,OE)}if(!$E(r.maxFeePerGas)||!$E(r.maxPriorityFeePerGas))return _P(bP,r,"0x2"),"0x2";if(!$E(r.accessList))return _P(yP,r,"0x1"),"0x1";const i=null!==(t=r.hardfork)&&void 0!==t?t:null===(n=r.common)||void 0===n?void 0:n.hardfork;if(!$E(i)){const e=Object.keys(DE).indexOf(i);if(e>=Object.keys(DE).indexOf("london"))return $E(r.gasPrice)?"0x2":"0x0";if(e===Object.keys(DE).indexOf("berlin"))return"0x0"}return $E(r.gasPrice)?void 0:(_P(vP,r,"0x0"),"0x0")},wP=(e,t)=>{var n;return(null!==(n=null==t?void 0:t.transactionTypeParser)&&void 0!==n?n:xP)(e)},EP=e=>e[0]>127?"0x0":CS(e[0]),SP={type:"array",items:Object.assign({},{type:"object",properties:{address:{format:"address"},storageKeys:{type:"array",items:{format:"bytes32"}}}})},AP={type:"object",properties:{accessList:Object.assign({},SP),gasUsed:{type:"string"}}},TP={type:"string",enum:["goerli","kovan","mainnet","rinkeby","ropsten","sepolia"]},MP={type:"string",enum:["arrowGlacier","berlin","byzantium","chainstart","constantinople","dao","homestead","istanbul","london","merge","muirGlacier","petersburg","shanghai","spuriousDragon","tangerineWhistle"]},CP={type:"object",properties:{from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},SP),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},chain:Object.assign({},TP),hardfork:Object.assign({},MP),chainId:{format:"uint"},networkId:{format:"uint"},common:{type:"object",properties:{customChain:Object.assign({},{type:"object",properties:{name:{format:"string"},networkId:{format:"uint"},chainId:{format:"uint"}}}),baseChain:Object.assign({},TP),hardfork:Object.assign({},MP)}},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}}},PP={type:"object",properties:Object.assign(Object.assign({},CP.properties),{blockHash:{format:"bytes32"},blockNumber:{format:"uint"},hash:{format:"bytes32"},transactionIndex:{format:"uint"},from:{format:"address"},to:{oneOf:[{format:"address"},{type:"null"}]},value:{format:"uint"},gas:{format:"uint"},gasPrice:{format:"uint"},effectiveGasPrice:{format:"uint"},type:{format:"uint"},maxFeePerGas:{format:"uint"},maxPriorityFeePerGas:{format:"uint"},accessList:Object.assign({},SP),data:{format:"bytes"},input:{format:"bytes"},nonce:{format:"uint"},gasLimit:{format:"uint"},v:{format:"uint"},r:{format:"bytes32"},s:{format:"bytes32"}})},RP={type:"object",properties:{parentHash:{format:"bytes32"},sha3Uncles:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},receiptsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},mixHash:{format:"bytes32"},nonce:{format:"uint"},totalDifficulty:{format:"uint"},baseFeePerGas:{format:"uint"},size:{format:"uint"},transactions:{oneOf:[{type:"array",items:Object.assign({},PP)},{type:"array",items:{format:"bytes32"}}]},uncles:{type:"array",items:{format:"bytes32"}},hash:{format:"bytes32"}}},IP={type:"object",properties:{author:{format:"bytes32"},hash:{format:"bytes32"},parentHash:{format:"bytes32"},receiptsRoot:{format:"bytes32"},miner:{format:"bytes"},stateRoot:{format:"bytes32"},transactionsRoot:{format:"bytes32"},withdrawalsRoot:{format:"bytes32"},logsBloom:{format:"bytes256"},difficulty:{format:"uint"},totalDifficulty:{format:"uint"},number:{format:"uint"},gasLimit:{format:"uint"},gasUsed:{format:"uint"},timestamp:{format:"uint"},extraData:{format:"bytes"},nonce:{format:"uint"},sha3Uncles:{format:"bytes32"},size:{format:"uint"},baseFeePerGas:{format:"uint"},excessDataGas:{format:"uint"},mixHash:{format:"bytes32"},transactions:{type:"array",items:{format:"bytes32"}},uncles:{type:"array",items:{format:"bytes32"}},withdrawals:{type:"array",items:Object.assign({},{type:"object",properties:{index:{format:"uint"},validatorIndex:{format:"uint"},address:{format:"address"},amount:{format:"uint"}}})}}},LP={type:"object",properties:{removed:{format:"bool"},logIndex:{format:"uint"},transactionIndex:{format:"uint"},transactionHash:{format:"bytes32"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},address:{format:"address"},data:{format:"bytes"},topics:{type:"array",items:{format:"bytes32"}}}},kP={type:"object",properties:{startingBlock:{format:"string"},currentBlock:{format:"string"},highestBlock:{format:"string"},knownStates:{format:"string"},pulledStates:{format:"string"}}},OP={type:"object",properties:{transactionHash:{format:"bytes32"},transactionIndex:{format:"uint"},blockHash:{format:"bytes32"},blockNumber:{format:"uint"},from:{format:"address"},to:{format:"address"},cumulativeGasUsed:{format:"uint"},gasUsed:{format:"uint"},effectiveGasPrice:{format:"uint"},contractAddress:{format:"address"},logs:{type:"array",items:Object.assign({},LP)},logsBloom:{format:"bytes"},root:{format:"bytes"},status:{format:"uint"},type:{format:"uint"}}},NP={type:"object",properties:{messageHash:{format:"bytes"},r:{format:"bytes32"},s:{format:"bytes32"},v:{format:"bytes"},message:{format:"bytes"},signature:{format:"bytes"}}},DP={type:"object",properties:{oldestBlock:{format:"uint"},baseFeePerGas:{type:"array",items:{format:"uint"}},reward:{type:"array",items:{type:"array",items:{format:"uint"}}},gasUsedRatio:{type:"array",items:{type:"number"}}}},BP={type:"object",properties:{balance:{format:"uint"},codeHash:{format:"bytes32"},nonce:{format:"uint"},storageHash:{format:"bytes32"},accountProof:{type:"array",items:{format:"bytes32"}},storageProof:{type:"array",items:Object.assign({},{type:"object",properties:{key:{format:"bytes32"},value:{format:"uint"},proof:{type:"array",items:{format:"bytes32"}}}})}}};function UP(e,t=kE,n={transactionSchema:PP,fillInputAndData:!1}){var r,i;let s=$S({},e);if($E(null==e?void 0:e.common)||(s.common=Object.assign({},e.common),$E(null===(r=e.common)||void 0===r?void 0:r.customChain)||(s.common.customChain=Object.assign({},e.common.customChain))),s=fA(null!==(i=n.transactionSchema)&&void 0!==i?i:PP,s,t),!$E(s.data)&&!$E(s.input)&&CS(s.data)!==CS(s.input))throw new Rb({data:uS(s.data),input:uS(s.input)});return n.fillInputAndData&&($E(s.data)?$E(s.input)||(s.data=s.input):s.input=s.data),$E(s.gasLimit)||(s.gas=s.gasLimit,delete s.gasLimit),s}var FP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};function zP(e,t){return FP(this,void 0,void 0,(function*(){const n=yield function(e){return mP(this,void 0,void 0,(function*(){return e.send({method:"net_version",params:[]})}))}(e.requestManager);return fA({format:"uint"},n,t)}))}const HP=e=>FP(void 0,void 0,void 0,(function*(){return function(e){return mP(this,void 0,void 0,(function*(){return e.send({method:"net_listening",params:[]})}))}(e.requestManager)}));var GP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class VP extends oP{getId(e=kE){return GP(this,void 0,void 0,(function*(){return zP(this,e)}))}getPeerCount(e=kE){return GP(this,void 0,void 0,(function*(){return function(e,t){return FP(this,void 0,void 0,(function*(){const n=yield function(e){return mP(this,void 0,void 0,(function*(){return e.send({method:"net_peerCount",params:[]})}))}(e.requestManager);return fA({format:"uint"},n,t)}))}(this,e)}))}isListening(){return GP(this,void 0,void 0,(function*(){return HP(this)}))}}const jP="ALLEVENTS",WP={name:jP,signature:"",type:"event",inputs:[]},qP={bytes:LE.HEX,number:IE.NUMBER};var XP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};function ZP(e,t,n){return XP(this,void 0,void 0,(function*(){const r=QP(e,t);if(!$E(r)){if(r.startsWith("-"))throw new Pb(r);if(Number(r)<0||Number(r)>127)throw new Pb(r);if($E(e.gasPrice)&&("0x0"===r||"0x1"===r))return{gasPrice:yield wI(t,n),maxPriorityFeePerGas:void 0,maxFeePerGas:void 0};if("0x2"===r)return Object.assign({gasPrice:void 0},yield function(e,t,n){var r,i,s;return XP(this,void 0,void 0,(function*(){const o=yield SI(t,t.defaultBlock,!1,n);if($E(o.baseFeePerGas))throw new Cb;if(!$E(e.gasPrice)){const t=fA({format:"uint"},e.gasPrice,n);return{maxPriorityFeePerGas:t,maxFeePerGas:t}}return{maxPriorityFeePerGas:fA({format:"uint"},null!==(r=e.maxPriorityFeePerGas)&&void 0!==r?r:t.defaultMaxPriorityFeePerGas,n),maxFeePerGas:fA({format:"uint"},null!==(i=e.maxFeePerGas)&&void 0!==i?i:BigInt(o.baseFeePerGas)*BigInt(2)+BigInt(null!==(s=e.maxPriorityFeePerGas)&&void 0!==s?s:t.defaultMaxPriorityFeePerGas),n)}}))}(e,t,n))}}))}var YP=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const KP=(e,t,n,r)=>{if(void 0!==n&&e in n&&void 0!==n[e]){if("string"==typeof n[e]&&RE(n[e]))return n[e];if(!dE(n[e])&&qE(n[e])){if(t.wallet){const r=t.wallet.get(fA({format:"uint"},n[e],qP));if(!$E(r))return r.address;throw new Ub}throw new Ub}throw"from"===e?new lb(n.from):new cb(n.to)}if("from"===e){if(!$E(r))return eP(r);if(!$E(t.defaultAccount))return t.defaultAccount}},QP=(e,t)=>{const n=wP(e,t);return $E(n)?$E(t.defaultTransactionType)?void 0:fA({format:"uint"},t.defaultTransactionType,OE):n};function JP(e){var t,n;return YP(this,void 0,void 0,(function*(){let r=fA(CP,e.transaction,kE);if($E(r.from)&&(r.from=KP("from",e.web3Context,void 0,e.privateKey)),$E(r.nonce)&&(r.nonce=yield((e,t,n=kE)=>YP(void 0,void 0,void 0,(function*(){if($E(t))throw new Mb;return TI(e,t,e.defaultBlock,n)})))(e.web3Context,r.from,OE)),$E(r.value)&&(r.value="0x0"),$E(r.data))$E(r.input)?r.input="0x":r.input.startsWith("0x")||(r.input=`0x${r.input}`);else{if(!$E(r.input)&&r.data!==r.input)throw new Rb({data:uS(r.data),input:uS(r.input)});r.data.startsWith("0x")||(r.data=`0x${r.data}`)}if($E(r.common)){if(e.web3Context.defaultCommon){const t=e.web3Context.defaultCommon,n=t.customChain.chainId,i=t.customChain.networkId,s=t.customChain.name;r.common=Object.assign(Object.assign({},t),{customChain:{chainId:n,networkId:i,name:s}})}$E(r.chain)&&(r.chain=e.web3Context.defaultChain),$E(r.hardfork)&&(r.hardfork=e.web3Context.defaultHardfork)}if($E(r.chainId)&&$E(null===(t=r.common)||void 0===t?void 0:t.customChain.chainId)&&(r.chainId=yield II(e.web3Context,OE)),$E(r.networkId)&&(r.networkId=null!==(n=e.web3Context.defaultNetworkId)&&void 0!==n?n:yield zP(e.web3Context,OE)),$E(r.gasLimit)&&!$E(r.gas)&&(r.gasLimit=r.gas),r.type=QP(r,e.web3Context),!$E(r.accessList)||"0x1"!==r.type&&"0x2"!==r.type||(r.accessList=[]),e.fillGasPrice&&(r=Object.assign(Object.assign({},r),yield ZP(r,e.web3Context,OE))),$E(r.gas)&&$E(r.gasLimit)&&e.fillGasLimit){const t=yield PI(e.web3Context,r,"latest",OE);r=Object.assign(Object.assign({},r),{gas:fA({format:"uint"},t,OE)})}return r}))}var $P=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};function eR(e,t,n){const r=e.transactionPollingInterval,[i,s]=OA((()=>$P(this,void 0,void 0,(function*(){let r;try{r=yield EI(e,qP)}catch(e){return void console.warn("An error happen while trying to get the block number",e)}const i=r-t;if(i>=e.transactionBlockTimeout)return new Ob({starterBlockNumber:t,numberOfBlocks:i,transactionHash:n})}))),r);return[s,{clean:()=>{clearInterval(i)}}]}function tR(e,t){var n,r;return $P(this,void 0,void 0,(function*(){const{provider:i}=e.requestManager;let s;const o=yield EI(e,qP);return s=(null===(r=(n=i).supportsSubscriptions)||void 0===r?void 0:r.call(n))&&e.enableExperimentalFeatures.useSubscriptionWhenCheckingBlockTimeout?yield function(e,t,n){var r;return $P(this,void 0,void 0,(function*(){let i,s,o=!0;function a(r,i){i&&console.warn("error happened at subscription. So revert to polling...",i),s.clean(),o=!1;const[a,l]=eR(e,t,n);s.clean=l.clean,a.catch((e=>r(e)))}try{i=yield null===(r=e.subscriptionManager)||void 0===r?void 0:r.subscribe("newHeads"),s={clean:()=>{var t;i.id&&(null===(t=e.subscriptionManager)||void 0===t||t.removeSubscription(i).then((()=>{})).catch((()=>{})))}}}catch(r){return eR(e,t,n)}return[new Promise(((r,s)=>{try{i.on("data",(r=>{if(o=!1,!(null==r?void 0:r.number))return;const i=Number(BigInt(r.number)-BigInt(t));i>=e.transactionBlockTimeout&&s(new Ob({starterBlockNumber:t,numberOfBlocks:i,transactionHash:n}))})),i.on("error",(e=>{a(s,e)}))}catch(e){a(s,e)}setTimeout((()=>{o&&a(s)}),1e3*e.blockHeaderTimeout)})),s]}))}(e,o,t):eR(e,o,t),s}))}function nR(e,t,n){return r=this,i=void 0,o=function*(){const[r,i]=kA(e.transactionSendTimeout,new Ib({numberOfSeconds:e.transactionSendTimeout/1e3,transactionHash:n})),[s,o]=yield tR(e,n);try{return yield Promise.race([t(),i,s])}finally{clearTimeout(r),o.clean()}},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function a(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,a)}l((o=o.apply(r,i||[])).next())}));var r,i,s,o}var rR=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};function iR(e,t,n){var r;return rR(this,void 0,void 0,(function*(){const i=null!==(r=e.transactionReceiptPollingInterval)&&void 0!==r?r:e.transactionPollingInterval,[s,o]=IA((()=>rR(this,void 0,void 0,(function*(){try{return AI(e,t,n)}catch(e){return void console.warn("An error happen while trying to get the transaction receipt",e)}}))),i),[a,l]=kA(e.transactionPollingTimeout,new kb({numberOfSeconds:e.transactionPollingTimeout/1e3,transactionHash:t})),[c,u]=yield tR(e,t);try{return yield Promise.race([s,l,c])}finally{a&&clearTimeout(a),o&&clearInterval(o),u.clean()}}))}const sR=({web3Context:e,transactionReceipt:t,transactionPromiEvent:n,returnFormat:r})=>{var i;let s=1;const o=setInterval((()=>{var i,a,l,c;i=void 0,a=void 0,c=function*(){s>=e.transactionConfirmationBlocks&&clearInterval(o);const i=yield pP(e.requestManager,pS(BigInt(t.blockNumber)+BigInt(s)),!1);(null==i?void 0:i.hash)&&(s+=1,n.emit("confirmation",{confirmations:fA({format:"uint"},s,r),receipt:fA(OP,t,r),latestBlockHash:fA({format:"bytes32"},i.hash,r)}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{s(c.next(e))}catch(e){t(e)}}function r(e){try{s(c.throw(e))}catch(e){t(e)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof l?i:new l((function(e){e(i)}))).then(n,r)}s((c=c.apply(i,a||[])).next())}))}),null!==(i=e.transactionReceiptPollingInterval)&&void 0!==i?i:e.transactionPollingInterval)};var oR=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const aR=e=>!QS(e)&&"object"==typeof e&&!QS(e.type)&&"error"===e.type,lR=e=>!QS(e)&&"object"==typeof e&&!QS(e.type)&&"event"===e.type,cR=e=>!QS(e)&&"object"==typeof e&&!QS(e.type)&&"function"===e.type,uR=e=>e.includes("[]")?{type:"tuple[]",name:e.slice(0,-2)}:{type:"tuple",name:e},dR=e=>{const t=[];for(const n of Object.keys(e)){const r=e[n];"object"==typeof r?t.push(Object.assign(Object.assign({},uR(n)),{components:dR(r)})):t.push({name:n,type:e[n]})}return t},hR=(e,t)=>{const n=[];return t.forEach((t=>{if("object"==typeof t.components){if(!t.type.startsWith("tuple"))throw new Yy(`Invalid value given "${t.type}". Error: components found but type is not tuple.`);const r=t.type.indexOf("["),i=r>=0?t.type.substring(r):"",s=hR(e,t.components);Array.isArray(s)&&e?n.push(`tuple(${s.join(",")})${i}`):e?n.push(`(${s.join()})`):n.push(`(${s.join(",")})${i}`)}else n.push(t.type)})),n},fR=e=>{var t,n,r,i;return aR(e)||lR(e)||cR(e)?(null===(t=e.name)||void 0===t?void 0:t.includes("("))?e.name:`${null!==(n=e.name)&&void 0!==n?n:""}(${hR(!1,null!==(r=e.inputs)&&void 0!==r?r:[]).join(",")})`:`(${hR(!1,null!==(i=e.inputs)&&void 0!==i?i:[]).join(",")})`},pR=e=>{if("string"!=typeof e&&!lR(e))throw new Yy("Invalid parameter value in encodeEventSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:fR(e),gA(t)};function mR(e,t){const n=e.exec(t);return n?.groups}var gR=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,vR=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,yR=/^\(.+?\).*?$/,bR=Object.defineProperty,_R=(e,t,n)=>(((e,t,n)=>{t in e?bR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n),xR=class extends Error{constructor(e,t={}){const n=t.cause instanceof xR?t.cause.details:t.cause?.message?t.cause.message:t.details,r=t.cause instanceof xR&&t.cause.docsPath||t.docsPath;super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...r?[`Docs: https://abitype.dev${r}`]:[],...n?[`Details: ${n}`]:[],"Version: abitype@0.7.1"].join("\n")),_R(this,"details"),_R(this,"docsPath"),_R(this,"metaMessages"),_R(this,"shortMessage"),_R(this,"name","AbiTypeError"),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=r,this.metaMessages=t.metaMessages,this.shortMessage=e}},wR=/^struct (?<name>[a-zA-Z0-9_]+) \{(?<properties>.*?)\}$/;function ER(e){return wR.test(e)}function SR(e){return mR(wR,e)}var AR=new Set(["memory","indexed","storage","calldata"]),TR=new Set(["calldata","memory","storage"]),MR=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]),CR=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,PR=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z0-9_]+))?$/,RR=/^u?int$/;function IR(e,t){const n=function(e,t){return t?`${t}:${e}`:e}(e,t?.type);if(MR.has(n))return MR.get(n);const r=yR.test(e),i=mR(r?PR:CR,e);if(!i)throw new xR("Invalid ABI parameter.",{details:e});if(i.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||gR.test(e)||vR.test(e)||OR.test(e)}(i.name))throw new xR("Invalid ABI parameter.",{details:e,metaMessages:[`"${i.name}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]});const s=i.name?{name:i.name}:{},o="indexed"===i.modifier?{indexed:!0}:{},a=t?.structs??{};let l,c={};if(r){l="tuple";const e=LR(i.type),t=[],n=e.length;for(let r=0;r<n;r++)t.push(IR(e[r],{structs:a}));c={components:t}}else if(i.type in a)l="tuple",c={components:a[i.type]};else if(RR.test(i.type))l=`${i.type}256`;else if(l=i.type,"struct"!==t?.type&&!kR(l))throw new xR("Unknown type.",{metaMessages:[`Type "${l}" is not a valid ABI type.`]});if(i.modifier){if(!t?.modifiers?.has?.(i.modifier))throw new xR("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`]});if(TR.has(i.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(l,!!i.array))throw new xR("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${i.modifier}" not allowed${t?.type?` in "${t.type}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${i.modifier}" was given.`]})}const u={type:`${l}${i.array??""}`,...s,...o,...c};return MR.set(n,u),u}function LR(e,t=[],n="",r=0){if(""===e){if(""===n)return t;if(0!==r)throw new xR("Unbalanced parentheses.",{metaMessages:[`"${n.trim()}" has too many ${r>0?"opening":"closing"} parentheses.`],details:`Depth "${r}"`});return[...t,n.trim()]}const i=e.length;for(let s=0;s<i;s++){const i=e[s],o=e.slice(s+1);switch(i){case",":return 0===r?LR(o,[...t,n.trim()]):LR(o,t,`${n}${i}`,r);case"(":return LR(o,t,`${n}${i}`,r+1);case")":return LR(o,t,`${n}${i}`,r-1);default:return LR(o,t,`${n}${i}`,r)}}return[]}function kR(e){return"address"===e||"bool"===e||"function"===e||"string"===e||gR.test(e)||vR.test(e)}var OR=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;var NR=/^(?<type>[a-zA-Z0-9_]+?)(?<array>(?:\[\d*?\])+?)?$/;function DR(e,t,n=new Set){const r=[],i=e.length;for(let s=0;s<i;s++){const i=e[s];if(yR.test(i.type))r.push(i);else{const e=mR(NR,i.type);if(!e?.type)throw new xR("Invalid ABI parameter.",{details:JSON.stringify(i,null,2),metaMessages:["ABI parameter type is invalid."]});const{array:s,type:o}=e;if(o in t){if(n.has(o))throw new xR("Circular reference detected.",{metaMessages:[`Struct "${o}" is a circular reference.`]});r.push({...i,type:`tuple${s??""}`,components:DR(t[o]??[],t,new Set([...n,o]))})}else{if(!kR(o))throw new xR("Unknown type.",{metaMessages:[`Type "${o}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]});r.push(i)}}}return r}const BR=32;function UR(e=0){var t;if(void 0!==(null===(t=globalThis.Buffer)||void 0===t?void 0:t.alloc)){const t=globalThis.Buffer.alloc(e);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}return new Uint8Array(e)}function FR(e){var t,n;return Object.assign(Object.assign({},e),{name:null!==(t=e.name)&&void 0!==t?t:"",components:null===(n=e.components)||void 0===n?void 0:n.map((e=>FR(e)))})}function zR(e){return e.map((e=>{var t,n,r;if(!QS(n=e)&&"object"==typeof n&&!QS(n.type)&&"string"==typeof n.type)return e;if("string"==typeof e)return FR(function(e){let t;if("string"==typeof e)t=IR(e,{modifiers:AR});else{const n=function(e){const t={},n=e.length;for(let r=0;r<n;r++){const n=e[r];if(!ER(n))continue;const i=SR(n);if(!i)throw new xR("Invalid struct signature.",{details:n});const s=i.properties.split(";"),o=[],a=s.length;for(let e=0;e<a;e++){const t=s[e].trim();if(!t)continue;const n=IR(t,{type:"struct"});o.push(n)}if(!o.length)throw new xR("Invalid struct signature.",{details:n,metaMessages:["No properties exist."]});t[i.name]=o}const r={},i=Object.entries(t),s=i.length;for(let e=0;e<s;e++){const[n,s]=i[e];r[n]=DR(s,t)}return r}(e),r=e.length;for(let i=0;i<r;i++){const r=e[i];if(!ER(r)){t=IR(r,{modifiers:AR,structs:n});break}}}if(!t)throw new xR("Failed to parse ABI parameter.",{details:`parseAbiParameter(${JSON.stringify(e,null,2)})`,docsPath:"/api/human.html#parseabiparameter-1"});return t}(e.replace(/tuple/,"")));if("object"==typeof(r=e)&&void 0===r.components&&void 0===r.name){const n=Object.keys(e)[0],r=uR(n);return r.name=null!==(t=r.name)&&void 0!==t?t:"",Object.assign(Object.assign({},r),{components:dR(e[n])})}throw new Yy("Invalid abi")}))}function HR(e){const t=e.type.lastIndexOf("["),n=e.type.substring(0,t),r=e.type.substring(t);let i=-1;if("[]"!==r&&(i=Number(r.slice(1,-1)),isNaN(i)))throw new Yy("Invalid fixed array size",{size:r});return{param:{type:n,name:"",components:e.components},size:i}}function GR(e){var t,n;return!("string"!==e.type&&"bytes"!==e.type&&!e.type.endsWith("[]"))||("tuple"===e.type?null!==(n=null===(t=e.components)||void 0===t?void 0:t.some(GR))&&void 0!==n&&n:!!e.type.endsWith("]")&&GR(HR(e).param))}const VR=20,jR=BR-VR,WR=new Map;let qR=BigInt(256);for(let e=8;e<=256;e+=8)WR.set(`uint${e}`,{min:BigInt(0),max:qR-BigInt(1)}),WR.set(`int${e}`,{min:-qR/BigInt(2),max:qR/BigInt(2)-BigInt(1)}),qR*=BigInt(256);WR.set("int",WR.get("int256")),WR.set("uint",WR.get("uint256"));const XR=BigInt(1)<<BigInt(256);function ZR(e,t=BR){let n;return n=e<0?(XR+e).toString(16):e.toString(16),n=eA(n,2*t),CE(n)}function YR(e,t){let n;try{n=RS(t)}catch(n){throw new Yy("provided input is not number value",{type:e.type,value:t,name:e.name})}const r=WR.get(e.type);if(!r)throw new Yy("provided abi contains invalid number datatype",{type:e.type});if(n<r.min)throw new Yy("provided input is less then minimum for given type",{type:e.type,value:t,name:e.name,minimum:r.min.toString()});if(n>r.max)throw new Yy("provided input is greater then maximum for given type",{type:e.type,value:t,name:e.name,maximum:r.max.toString()});return{dynamic:!1,encoded:ZR(n)}}function KR(e,t){if(t.length<BR)throw new Yy("Not enough bytes left to decode",{param:e,bytesLeft:t.length});const n=t.subarray(0,BR),r=WR.get(e.type);if(!r)throw new Yy("provided abi contains invalid number datatype",{type:e.type});const i=function(e,t){const n=ME(e),r=BigInt(n);return r<=t?r:r-XR}(n,r.max);if(i<r.min)throw new Yy("decoded value is less then minimum for given type",{type:e.type,value:i,name:e.name,minimum:r.min.toString()});if(i>r.max)throw new Yy("decoded value is greater then maximum for given type",{type:e.type,value:i,name:e.name,maximum:r.max.toString()});return{result:i,encoded:t.subarray(BR),consumed:BR}}const QR=32;function JR(e,t){if("string"==typeof t&&t.length%2!=0&&(t+="0"),!JE(t))throw new Yy("provided input is not valid bytes value",{type:e.type,value:t,name:e.name});const n=lS(t),[,r]=e.type.split("bytes");if(r){if(Number(r)>QR||Number(r)<1)throw new Yy("invalid bytes type. Static byte type can have between 1 and 32 bytes",{type:e.type});if(Number(r)<n.length)throw new Yy("provided input size is different than type size",{type:e.type,value:t,name:e.name});const i=UR(BR);return i.set(n),{dynamic:!1,encoded:i}}const i=Math.ceil(n.length/BR),s=UR(BR+i*BR);return s.set(YR({type:"uint32",name:""},n.length).encoded),s.set(n,BR),{dynamic:!0,encoded:s}}function $R(e,t){const[,n]=e.type.split("bytes");let r=Number(n),i=t,s=1,o=0;if(!r){const e=KR({type:"uint32",name:""},i);r=Number(e.result),o+=e.consumed,i=e.encoded,s=Math.ceil(r/BR)}if(r>t.length)throw new Yy("there is not enough data to decode",{type:e.type,encoded:t,size:r});return{result:uS(i.subarray(0,r)),encoded:i.subarray(s*BR),consumed:o+s*BR}}function eI(e){let t=0,n=0;const r=[],i=[];for(const n of e)n.dynamic?t+=BR:t+=n.encoded.length;for(const s of e)s.dynamic?(r.push(YR({type:"uint256",name:""},t+n)),i.push(s),n+=s.encoded.length):r.push(s);return oA(...r.map((e=>e.encoded)),...i.map((e=>e.encoded)))}function tI(e,t){if("string"===e.type)return function(e,t){if("string"!=typeof t)throw new Yy("invalid input, should be string",{input:t});return JR({type:"bytes",name:""},wS(t))}(0,t);if("bool"===e.type)return function(e,t){let n;try{n=OS(t)}catch(n){if(n instanceof Xb)throw new Yy("provided input is not valid boolean value",{type:e.type,value:t,name:e.name})}return YR({type:"uint8",name:""},Number(n))}(e,t);if("address"===e.type)return function(e,t){if("string"!=typeof t)throw new Yy("address type expects string as input type",{value:t,name:e.name,type:e.type});let n=t.toLowerCase();if(n.startsWith("0x")||(n=`0x${n}`),!RE(n))throw new Yy("provided input is not valid address",{value:t,name:e.name,type:e.type});const r=CE(n),i=UR(BR);return i.set(r,jR),{dynamic:!1,encoded:i}}(e,t);if("tuple"===e.type)return rI(e,t);if(e.type.endsWith("]"))return function(e,t){if(!Array.isArray(t))throw new Yy("Expected value to be array",{abi:e,values:t});const{size:n,param:r}=HR(e),i=t.map((e=>tI(r,e))),s=-1===n,o=i.length>0&&i[0].dynamic;if(!s&&t.length!==n)throw new Yy("Given arguments count doesn't match array length",{arrayLength:n,argumentsLength:t.length});if(s||o){const e=eI(i);if(s){const t=YR({type:"uint256",name:""},i.length).encoded;return{dynamic:!0,encoded:i.length>0?oA(t,e):t}}return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:oA(...i.map((e=>e.encoded)))}}(e,t);if(e.type.startsWith("bytes"))return JR(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return YR(e,t);throw new Error("Unsupported")}function nI(e,t){if("string"===e.type)return function(e,t){const n=$R({type:"bytes",name:""},t);return{result:_S(n.result),encoded:n.encoded,consumed:n.consumed}}(0,t);if("bool"===e.type)return function(e,t){const n=KR({type:"uint8",name:""},t);if(n.result>1||n.result<0)throw new Yy("Invalid boolean value encoded",{boolBytes:t.subarray(0,BR),numberResult:n});return{result:n.result===BigInt(1),encoded:n.encoded,consumed:BR}}(0,t);if("address"===e.type)return function(e,t){const n=t.subarray(jR,BR);if(n.length!==VR)throw new Yy("Invalid decoding input, not enough bytes to decode address",{bytes:t});const r=ME(n);return{result:kS(r),encoded:t.subarray(BR),consumed:BR}}(0,t);if("tuple"===e.type)return iI(e,t);if(e.type.endsWith("]"))return function(e,t){let{size:n,param:r}=HR(e),i=0;const s=[];let o=t;if(-1===n){const e=KR({type:"uint32",name:""},t);n=Number(e.result),i=e.consumed,o=e.encoded}if(GR(r)){for(let e=0;e<n;e+=1){const t=KR({type:"uint32",name:""},o.subarray(e*BR));i+=t.consumed;const n=nI(r,o.subarray(Number(t.result)));i+=n.consumed,s.push(n.result)}return{result:s,encoded:o.subarray(i),consumed:i}}for(let e=0;e<n;e+=1){const e=nI(r,t.subarray(i));i+=e.consumed,s.push(e.result)}return{result:s,encoded:t.subarray(i),consumed:i}}(e,t);if(e.type.startsWith("bytes"))return $R(e,t);if(e.type.startsWith("uint")||e.type.startsWith("int"))return KR(e,t);throw new Error("Unsupported")}function rI(e,t){var n,r,i;let s=!1;if(!Array.isArray(t)&&"object"!=typeof t)throw new Yy("param must be either Array or Object",{param:e,input:t});const o=t,a=[];for(let l=0;l<(null!==(r=null===(n=e.components)||void 0===n?void 0:n.length)&&void 0!==r?r:0);l+=1){const n=e.components[l];let r;if(Array.isArray(o)){if(l>=o.length)throw new Yy("input param length missmatch",{param:e,input:t});r=tI(n,o[l])}else{const s=o[null!==(i=n.name)&&void 0!==i?i:""];if(null==s)throw new Yy("missing input defined in abi",{param:e,input:t,paramName:n.name});r=tI(n,s)}r.dynamic&&(s=!0),a.push(r)}return s?{dynamic:!0,encoded:eI(a)}:{dynamic:!1,encoded:oA(...a.map((e=>e.encoded)))}}function iI(e,t){const n={__length__:0};let r=0;if(!e.components)return{result:n,encoded:t,consumed:r};let i=0;for(const[s,o]of e.components.entries()){let e;if(GR(o)){const n=KR({type:"uint32",name:""},t.subarray(r));e=nI(o,t.subarray(Number(n.result))),r+=n.consumed,i+=e.consumed}else e=nI(o,t.subarray(r)),r+=e.consumed;n.__length__+=1,n[s]=e.result,o.name&&""!==o.name&&(n[o.name]=e.result)}return{encoded:t.subarray(r+i),result:n,consumed:r+i}}const sI=(e,t)=>function(e,t){if(e.length!==t.length)throw new Yy("Invalid number of values received for given ABI",{expected:e.length,received:t.length});return ME(rI({type:"tuple",name:"",components:zR(e)},t).encoded)}(e,t),oI=(e,t)=>sI([e],[t]),aI=(e,t,n)=>{try{if(e.length>0&&(!t||"0x"===t||"0X"===t))throw new Yy("Returned values aren't valid, did it run Out of Gas? You might also see this error if you are not using the correct ABI for the contract you are retrieving data from, requesting data from a block number that does not exist, or querying a node which is not fully synced.");return function(e,t,n){return iI({type:"tuple",name:"",components:zR(e)},CE(t)).result}(e,`0x${t.replace(/0x/i,"")}`)}catch(e){throw new Yy(`Parameter decoding error: ${e.message}`,{internalErr:e})}},lI=(e,t)=>aI(e,t),cI=(e,t)=>lI([e],t)[0],uI=e=>{if("string"!=typeof e&&!cR(e))throw new Yy("Invalid parameter value in encodeFunctionSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:fR(e),gA(t).slice(0,10)},dI=["bool","string","int","uint","address","fixed","ufixed"],hI=(e,t,n)=>{const r=Array.isArray(n)?n:[n],i={},s={};for(const[t,n]of e.entries())n.indexed?i[t]=n:s[t]=n;const o=t?aI(Object.values(s),t):{__length__:0},a=r.length-Object.keys(i).length,l=Object.values(i).map(((e,t)=>{return dI.some((t=>e.type.startsWith(t)))?(n=e.type,i=r[t+a],"string"===n?i:cI(n,i)):r[t+a];var n,i})),c={__length__:0};let u=0,d=0;for(const[t,n]of e.entries())c[t]="string"===n.type?"":void 0,i[t]&&(c[t]=l[u],u+=1),s[t]&&(c[t]=o[String(d)],d+=1),n.name&&(c[n.name]=c[t]),c.__length__+=1;return c},fI=(e,t)=>{if(null==t?void 0:t.data){let n,r,i;try{const s=t.data.slice(0,10),o=e.find((e=>(e=>{if("string"!=typeof e&&!aR(e))throw new Yy("Invalid parameter value in encodeErrorSignature");let t;return t=!e||"function"!=typeof e&&"object"!=typeof e?e:fR(e),gA(t)})(e).startsWith(s)));(null==o?void 0:o.inputs)&&(n=o.name,r=fR(o),i=lI([...o.inputs],t.data.substring(10)))}catch(e){console.error(e)}n&&t.setDecodedProperties(n,r,i)}};var pI=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const mI=(e,t)=>{var n,r,i,s;if(e instanceof zy&&e.innerError instanceof Fy){if(void 0!==t){const i=t.filter((e=>aR(e)));return fI(i,e.innerError),{reason:e.innerError.message,signature:null===(n=e.innerError.data)||void 0===n?void 0:n.slice(0,10),data:null===(r=e.innerError.data)||void 0===r?void 0:r.substring(10),customErrorName:e.innerError.errorName,customErrorDecodedSignature:e.innerError.errorSignature,customErrorArguments:e.innerError.errorArgs}}return{reason:e.innerError.message,signature:null===(i=e.innerError.data)||void 0===i?void 0:i.slice(0,10),data:null===(s=e.innerError.data)||void 0===s?void 0:s.substring(10)}}if(e instanceof e_&&!Array.isArray(e.innerError)&&void 0!==e.innerError)return e.innerError.message;throw e};function gI(e,t,n,r=kE){return pI(this,void 0,void 0,(function*(){try{return void(yield CI(e,t,e.defaultBlock,r))}catch(e){return mI(e,n)}}))}function vI(e,t,n,r,i,s){return o=this,a=void 0,c=function*(){let o,a=s;if(void 0===a&&(void 0!==r?a=mI(r):e.handleRevert&&void 0!==t&&(a=yield gI(e,t,i))),void 0===a)o=new sb(n);else if("string"==typeof a)o=new rb(a,void 0,n);else if(void 0!==a.customErrorName&&void 0!==a.customErrorDecodedSignature&&void 0!==a.customErrorArguments){const e=a;o=new ib(e.reason,e.customErrorName,e.customErrorDecodedSignature,e.customErrorArguments,e.signature,n,e.data)}else o=new rb(a.reason,a.signature,n,a.data);return o},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function r(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof l?i:new l((function(e){e(i)}))).then(n,r)}i((c=c.apply(o,a||[])).next())}));var o,a,l,c}const yI=(e,t,n,r=kE)=>{var i,s,o,a,l;let c=Object.assign({},e);const u=fA(LP,t,r);if([jP,"allEvents"].includes(c.name)){c=n.find((e=>e.signature===t.topics[0]))||{anonymous:!0}}if(c.inputs=null!==(s=null!==(i=c.inputs)&&void 0!==i?i:e.inputs)&&void 0!==s?s:[],!c.anonymous){let e=0;(null!==(o=c.inputs)&&void 0!==o?o:[]).forEach((t=>{t.indexed&&(e+=1)})),e>0&&(null==t?void 0:t.topics)&&(null==t?void 0:t.topics.length)!==e+1&&(c=Object.assign(Object.assign({},c),{anonymous:!0,inputs:[]}))}const d=c.anonymous?t.topics:(null!==(a=t.topics)&&void 0!==a?a:[]).slice(1);return Object.assign(Object.assign({},u),{returnValues:hI([...null!==(l=c.inputs)&&void 0!==l?l:[]],t.data,d),event:c.name,signature:!c.anonymous&&t.topics&&0!==t.topics.length&&t.topics[0]?t.topics[0]:void 0,raw:{data:t.data,topics:t.topics}})};var bI=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class _I{constructor({options:e,web3Context:t,promiEvent:n,returnFormat:r}){this.options={checkRevertBeforeSending:!0},this.options=e,this.web3Context=t,this.promiEvent=n,this.returnFormat=r}getReceiptWithEvents(e){var t,n;const r=Object.assign({},null!=e?e:{});if((null===(t=this.options)||void 0===t?void 0:t.contractAbi)&&r.logs&&r.logs.length>0){r.events={};for(const e of r.logs){const t=yI(WP,e,null===(n=this.options)||void 0===n?void 0:n.contractAbi,this.returnFormat);t.event&&(r.events[t.event]=t)}}return r}checkRevertBeforeSending(e){return bI(this,void 0,void 0,(function*(){if(!1!==this.options.checkRevertBeforeSending){const t=yield gI(this.web3Context,e,this.options.contractAbi);if(void 0!==t)throw yield vI(this.web3Context,e,void 0,void 0,this.options.contractAbi,t)}}))}emitSending(e){this.promiEvent.listenerCount("sending")>0&&this.promiEvent.emit("sending",e)}populateGasPrice({transactionFormatted:e,transaction:t}){var n;return bI(this,void 0,void 0,(function*(){let r=e;return!(null===(n=this.options)||void 0===n?void 0:n.ignoreGasPricing)&&$E(e.gasPrice)&&($E(t.maxPriorityFeePerGas)||$E(t.maxFeePerGas))&&(r=Object.assign(Object.assign({},e),yield ZP(e,this.web3Context,OE))),r}))}signAndSend({wallet:e,tx:t}){return bI(this,void 0,void 0,(function*(){if(e){const n=yield e.signTransaction(t);return nR(this.web3Context,(()=>bI(this,void 0,void 0,(function*(){return fP(this.web3Context.requestManager,n.rawTransaction)}))),n.transactionHash)}return nR(this.web3Context,(()=>bI(this,void 0,void 0,(function*(){return function(e,t){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_sendTransaction",params:[t]})}))}(this.web3Context.requestManager,t)}))))}))}emitSent(e){this.promiEvent.listenerCount("sent")>0&&this.promiEvent.emit("sent",e)}emitTransactionHash(e){this.promiEvent.listenerCount("transactionHash")>0&&this.promiEvent.emit("transactionHash",e)}emitReceipt(e){this.promiEvent.listenerCount("receipt")>0&&this.promiEvent.emit("receipt",e)}handleError({error:e,tx:t}){var n;return bI(this,void 0,void 0,(function*(){let r=e;return r instanceof zy&&this.web3Context.handleRevert&&(r=yield vI(this.web3Context,t,void 0,void 0,null===(n=this.options)||void 0===n?void 0:n.contractAbi)),(r instanceof e_||r instanceof zy||r instanceof ib||r instanceof sb||r instanceof rb)&&this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",r),r}))}emitConfirmation({receipt:e,transactionHash:t}){this.promiEvent.listenerCount("confirmation")>0&&function(e,t,n,r,i){if($E(n)||$E(n.blockHash))throw new Nb({receipt:n,blockHash:fA({format:"bytes32"},null==n?void 0:n.blockHash,i),transactionHash:fA({format:"bytes32"},r,i)});if(!n.blockNumber)throw new Db({receipt:n});t.emit("confirmation",{confirmations:fA({format:"uint"},1,i),receipt:fA(OP,n,i),latestBlockHash:fA({format:"bytes32"},n.blockHash,i)});const s=e.requestManager.provider;s&&"supportsSubscriptions"in s&&s.supportsSubscriptions()?(({web3Context:e,transactionReceipt:t,transactionPromiEvent:n,returnFormat:r})=>{let i,s=!0;setImmediate((()=>{var o;null===(o=e.subscriptionManager)||void 0===o||o.subscribe("newHeads").then((o=>{o.on("data",(a=>oR(void 0,void 0,void 0,(function*(){var l;if(s=!1,!(null==a?void 0:a.number)||i===(null==a?void 0:a.parentHash))return;i=null==a?void 0:a.parentHash;const c=BigInt(a.number)-BigInt(t.blockNumber)+BigInt(1);n.emit("confirmation",{confirmations:fA({format:"uint"},c,r),receipt:fA(OP,t,r),latestBlockHash:fA({format:"bytes32"},a.parentHash,r)}),c>=e.transactionConfirmationBlocks&&(yield null===(l=e.subscriptionManager)||void 0===l?void 0:l.removeSubscription(o))})))),o.on("error",(()=>oR(void 0,void 0,void 0,(function*(){var i;yield null===(i=e.subscriptionManager)||void 0===i?void 0:i.removeSubscription(o),s=!1,sR({web3Context:e,transactionReceipt:t,transactionPromiEvent:n,returnFormat:r})}))))})).catch((()=>{s=!1,sR({web3Context:e,transactionReceipt:t,transactionPromiEvent:n,returnFormat:r})}))})),setTimeout((()=>{s&&sR({web3Context:e,transactionReceipt:t,transactionPromiEvent:n,returnFormat:r})}),1e3*e.blockHeaderTimeout)})({web3Context:e,transactionReceipt:n,transactionPromiEvent:t,returnFormat:i}):sR({web3Context:e,transactionReceipt:n,transactionPromiEvent:t,returnFormat:i})}(this.web3Context,this.promiEvent,e,t,this.returnFormat)}handleResolve({receipt:e,tx:t}){var n,r,i;return bI(this,void 0,void 0,(function*(){if(null===(n=this.options)||void 0===n?void 0:n.transactionResolver)return null===(r=this.options)||void 0===r?void 0:r.transactionResolver(e);if(e.status===BigInt(0)){const n=yield vI(this.web3Context,t,e,void 0,null===(i=this.options)||void 0===i?void 0:i.contractAbi);throw this.promiEvent.listenerCount("error")>0&&this.promiEvent.emit("error",n),n}return e}))}}var xI=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};function wI(e,t){return xI(this,void 0,void 0,(function*(){const n=yield function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_gasPrice",params:[]})}))}(e.requestManager);return fA({format:"uint"},n,t)}))}function EI(e,t){return xI(this,void 0,void 0,(function*(){const n=yield function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_blockNumber",params:[]})}))}(e.requestManager);return fA({format:"uint"},n,t)}))}function SI(e,t=e.defaultBlock,n=!1,r){return xI(this,void 0,void 0,(function*(){let i;if(JE(t)){const r=fA({format:"bytes32"},t,OE);i=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes32","bool"],[t,n]),e.send({method:"eth_getBlockByHash",params:[t,n]})}))}(e.requestManager,r,n)}else{const r=ZE(t)?t:fA({format:"uint"},t,OE);i=yield pP(e.requestManager,r,n)}return fA(RP,i,r)}))}function AI(e,t,n){return xI(this,void 0,void 0,(function*(){const r=fA({format:"bytes32"},t,kE),i=yield function(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionReceipt",params:[t]})}))}(e.requestManager,r);return $E(i)?i:fA(OP,i,n)}))}function TI(e,t,n=e.defaultBlock,r){return xI(this,void 0,void 0,(function*(){const i=ZE(n)?n:fA({format:"uint"},n,OE),s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["address","blockNumberOrTag"],[t,n]),e.send({method:"eth_getTransactionCount",params:[t,n]})}))}(e.requestManager,t,i);return fA({format:"uint"},s,r)}))}function MI(e,t,n,r={checkRevertBeforeSending:!0}){const i=new uP(((s,o)=>{setImmediate((()=>{(()=>{xI(this,void 0,void 0,(function*(){const a=new _I({web3Context:e,promiEvent:i,options:r,returnFormat:n});let l=UP(Object.assign(Object.assign({},t),{from:KP("from",e,t),to:KP("to",e,t)}),OE);try{let r;l=yield a.populateGasPrice({transaction:t,transactionFormatted:l}),yield a.checkRevertBeforeSending(l),a.emitSending(l),e.wallet&&!$E(l.from)&&(r=e.wallet.get(l.from));const i=yield a.signAndSend({wallet:r,tx:l}),o=fA({format:"bytes32"},i,n);a.emitSent(l),a.emitTransactionHash(o);const c=yield iR(e,i,n),u=a.getReceiptWithEvents(fA(OP,c,n));a.emitReceipt(u),s(yield a.handleResolve({receipt:u,tx:l})),a.emitConfirmation({receipt:u,transactionHash:i})}catch(e){o(yield a.handleError({error:e,tx:l}))}}))})()}))}));return i}function CI(e,t,n=e.defaultBlock,r){return xI(this,void 0,void 0,(function*(){const i=ZE(n)?n:fA({format:"uint"},n,OE),s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag"],[n]),e.send({method:"eth_call",params:[t,n]})}))}(e.requestManager,UP(t,OE),i);return fA({format:"bytes"},s,r)}))}function PI(e,t,n=e.defaultBlock,r){return xI(this,void 0,void 0,(function*(){const i=UP(t,OE),s=ZE(n)?n:fA({format:"uint"},n,OE),o=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag"],[n]),e.send({method:"eth_estimateGas",params:[t,n]})}))}(e.requestManager,i,s);return fA({format:"uint"},o,r)}))}function RI(e,t,n){return xI(this,void 0,void 0,(function*(){let{toBlock:r,fromBlock:i}=t;$E(r)||"number"!=typeof r&&"bigint"!=typeof r||(r=pS(r)),$E(i)||"number"!=typeof i&&"bigint"!=typeof i||(i=pS(i));const s=Object.assign(Object.assign({},t),{fromBlock:i,toBlock:r}),o=yield function(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["filter"],[t]),e.send({method:"eth_getLogs",params:[t]})}))}(e.requestManager,s);return o.map((e=>"string"==typeof e?e:fA(LP,e,n)))}))}function II(e,t){return xI(this,void 0,void 0,(function*(){const n=yield function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_chainId",params:[]})}))}(e.requestManager);return fA({format:"uint"},n,t)}))}function LI(e,t,n=e.defaultBlock,r){return xI(this,void 0,void 0,(function*(){const i=ZE(n)?n:fA({format:"uint"},n,OE),s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag"],[n]),e.send({method:"eth_createAccessList",params:[t,n]})}))}(e.requestManager,UP(t,OE),i);return fA(AP,s,r)}))}class kI extends ST{_buildSubscriptionParams(){return["logs",this.args]}formatSubscriptionResult(e){return fA(LP,e,super.returnFormat)}}class OI extends ST{_buildSubscriptionParams(){return["newPendingTransactions"]}formatSubscriptionResult(e){return fA({format:"string"},e,super.returnFormat)}}class NI extends ST{_buildSubscriptionParams(){return["newHeads"]}formatSubscriptionResult(e){return fA(IP,e,super.returnFormat)}}class DI extends ST{_buildSubscriptionParams(){return["syncing"]}_processSubscriptionResult(e){if("boolean"==typeof e)this.emit("changed",e);else{const t=Object.fromEntries(Object.entries(e.status).map((([e,t])=>[e.charAt(0).toLowerCase()+e.substring(1),t])));this.emit("changed",e.syncing),this.emit("data",fA(kP,t,super.returnFormat))}}}var BI=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const UI={logs:kI,newPendingTransactions:OI,newHeads:NI,syncing:DI,pendingTransactions:OI,newBlockHeaders:NI};class FI extends oP{constructor(e){"string"==typeof e||gT(e)?super({provider:e,registeredSubscriptions:UI}):e.registeredSubscriptions?super(e):super(Object.assign(Object.assign({},e),{registeredSubscriptions:UI}))}getProtocolVersion(){return BI(this,void 0,void 0,(function*(){return function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_protocolVersion",params:[]})}))}(this.requestManager)}))}isSyncing(){return BI(this,void 0,void 0,(function*(){return hP(this.requestManager)}))}getCoinbase(){return BI(this,void 0,void 0,(function*(){return function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_coinbase",params:[]})}))}(this.requestManager)}))}isMining(){return BI(this,void 0,void 0,(function*(){return function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_mining",params:[]})}))}(this.requestManager)}))}getHashrate(e=kE){return BI(this,void 0,void 0,(function*(){return this.getHashRate(e)}))}getHashRate(e=kE){return BI(this,void 0,void 0,(function*(){return function(e,t){return xI(this,void 0,void 0,(function*(){const n=yield function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_hashrate",params:[]})}))}(e.requestManager);return fA({format:"uint"},n,t)}))}(this,e)}))}getGasPrice(e=kE){return BI(this,void 0,void 0,(function*(){return wI(this,e)}))}getAccounts(){var e;return BI(this,void 0,void 0,(function*(){return(null!==(e=yield function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_accounts",params:[]})}))}(this.requestManager))&&void 0!==e?e:[]).map((e=>kS(e)))}))}getBlockNumber(e=kE){return BI(this,void 0,void 0,(function*(){return EI(this,e)}))}getBalance(e,t=this.defaultBlock,n=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n=e.defaultBlock,r){return xI(this,void 0,void 0,(function*(){const i=ZE(n)?n:fA({format:"uint"},n,OE),s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["address","blockNumberOrTag"],[t,n]),e.send({method:"eth_getBalance",params:[t,n]})}))}(e.requestManager,t,i);return fA({format:"uint"},s,r)}))}(this,e,t,n)}))}getStorageAt(e,t,n=this.defaultBlock,r=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n,r=e.defaultBlock,i){return xI(this,void 0,void 0,(function*(){const s=fA({format:"uint"},n,OE),o=ZE(r)?r:fA({format:"uint"},r,OE),a=yield function(e,t,n,r){return dP(this,void 0,void 0,(function*(){return oS.validate(["address","hex","blockNumberOrTag"],[t,n,r]),e.send({method:"eth_getStorageAt",params:[t,n,r]})}))}(e.requestManager,t,s,o);return fA({format:"bytes"},a,i)}))}(this,e,t,n,r)}))}getCode(e,t=this.defaultBlock,n=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n=e.defaultBlock,r){return xI(this,void 0,void 0,(function*(){const i=ZE(n)?n:fA({format:"uint"},n,OE),s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["address","blockNumberOrTag"],[t,n]),e.send({method:"eth_getCode",params:[t,n]})}))}(e.requestManager,t,i);return fA({format:"bytes"},s,r)}))}(this,e,t,n)}))}getBlock(e=this.defaultBlock,t=!1,n=kE){return BI(this,void 0,void 0,(function*(){return SI(this,e,t,n)}))}getBlockTransactionCount(e=this.defaultBlock,t=kE){return BI(this,void 0,void 0,(function*(){return function(e,t=e.defaultBlock,n){return xI(this,void 0,void 0,(function*(){let r;if(JE(t)){const n=fA({format:"bytes32"},t,OE);r=yield function(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes32"],[t]),e.send({method:"eth_getBlockTransactionCountByHash",params:[t]})}))}(e.requestManager,n)}else{const n=ZE(t)?t:fA({format:"uint"},t,OE);r=yield function(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getBlockTransactionCountByNumber",params:[t]})}))}(e.requestManager,n)}return fA({format:"uint"},r,n)}))}(this,e,t)}))}getBlockUncleCount(e=this.defaultBlock,t=kE){return BI(this,void 0,void 0,(function*(){return function(e,t=e.defaultBlock,n){return xI(this,void 0,void 0,(function*(){let r;if(JE(t)){const n=fA({format:"bytes32"},t,OE);r=yield function(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes32"],[t]),e.send({method:"eth_getUncleCountByBlockHash",params:[t]})}))}(e.requestManager,n)}else{const n=ZE(t)?t:fA({format:"uint"},t,OE);r=yield function(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag"],[t]),e.send({method:"eth_getUncleCountByBlockNumber",params:[t]})}))}(e.requestManager,n)}return fA({format:"uint"},r,n)}))}(this,e,t)}))}getUncle(e=this.defaultBlock,t,n=kE){return BI(this,void 0,void 0,(function*(){return function(e,t=e.defaultBlock,n,r){return xI(this,void 0,void 0,(function*(){const i=fA({format:"uint"},n,OE);let s;if(JE(t)){const n=fA({format:"bytes32"},t,OE);s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes32","hex"],[t,n]),e.send({method:"eth_getUncleByBlockHashAndIndex",params:[t,n]})}))}(e.requestManager,n,i)}else{const n=ZE(t)?t:fA({format:"uint"},t,OE);s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag","hex"],[t,n]),e.send({method:"eth_getUncleByBlockNumberAndIndex",params:[t,n]})}))}(e.requestManager,n,i)}return fA(RP,s,r)}))}(this,e,t,n)}))}getTransaction(e,t=kE){return BI(this,void 0,void 0,(function*(){const n=yield function(e,t,n){return xI(this,void 0,void 0,(function*(){const r=fA({format:"bytes32"},t,kE),i=yield function(e,t){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes32"],[t]),e.send({method:"eth_getTransactionByHash",params:[t]})}))}(e.requestManager,r);return $E(i)?i:UP(i,n,{fillInputAndData:!0})}))}(this,e,t);if(!n)throw new ab;return n}))}getPendingTransactions(e=kE){return BI(this,void 0,void 0,(function*(){return function(e,t){return xI(this,void 0,void 0,(function*(){return(yield function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_pendingTransactions",params:[]})}))}(e.requestManager)).map((e=>UP(e,t,{fillInputAndData:!0})))}))}(this,e)}))}getTransactionFromBlock(e=this.defaultBlock,t,n=kE){return BI(this,void 0,void 0,(function*(){return function(e,t=e.defaultBlock,n,r){return xI(this,void 0,void 0,(function*(){const i=fA({format:"uint"},n,OE);let s;if(JE(t)){const n=fA({format:"bytes32"},t,OE);s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes32","hex"],[t,n]),e.send({method:"eth_getTransactionByBlockHashAndIndex",params:[t,n]})}))}(e.requestManager,n,i)}else{const n=ZE(t)?t:fA({format:"uint"},t,OE);s=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["blockNumberOrTag","hex"],[t,n]),e.send({method:"eth_getTransactionByBlockNumberAndIndex",params:[t,n]})}))}(e.requestManager,n,i)}return $E(s)?s:UP(s,r,{fillInputAndData:!0})}))}(this,e,t,n)}))}getTransactionReceipt(e,t=kE){return BI(this,void 0,void 0,(function*(){const n=yield AI(this,e,t);if(!n)throw new ab;return n}))}getTransactionCount(e,t=this.defaultBlock,n=kE){return BI(this,void 0,void 0,(function*(){return TI(this,e,t,n)}))}sendTransaction(e,t=kE,n){return MI(this,e,t,n)}sendSignedTransaction(e,t=kE,n){return function(e,t,n,r={checkRevertBeforeSending:!0}){const i=new uP(((s,o)=>{setImmediate((()=>{(()=>{xI(this,void 0,void 0,(function*(){const a=new _I({web3Context:e,promiEvent:i,options:r,returnFormat:n}),l=fA({format:"bytes"},t,OE),c=XC.fromSerializedData(lS(dS(l))),u=Object.assign(Object.assign({},c.toJSON()),{from:c.getSenderAddress().toString()});try{const{v:t,r,s:i}=u,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(u,["v","r","s"]);yield a.checkRevertBeforeSending(o),a.emitSending(l);const c=yield nR(e,(()=>xI(this,void 0,void 0,(function*(){return fP(e.requestManager,l)}))));a.emitSent(l);const d=fA({format:"bytes32"},c,n);a.emitTransactionHash(d);const h=yield iR(e,c,n),f=a.getReceiptWithEvents(fA(OP,h,n));a.emitReceipt(f),s(yield a.handleResolve({receipt:f,tx:u})),a.emitConfirmation({receipt:f,transactionHash:c})}catch(e){o(yield a.handleError({error:e,tx:u}))}}))})()}))}));return i}(this,e,t,n)}sign(e,t,n=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n,r){var i;return xI(this,void 0,void 0,(function*(){const s=fA({format:"bytes"},t,kE);if(null===(i=e.wallet)||void 0===i?void 0:i.get(n)){const t=e.wallet.get(n).sign(s);return fA(NP,t,r)}if("number"==typeof n)throw new tb(t,'RPC method "eth_sign" does not support index signatures');const o=yield function(e,t,n){return dP(this,void 0,void 0,(function*(){return oS.validate(["address","hex"],[t,n]),e.send({method:"eth_sign",params:[t,n]})}))}(e.requestManager,n,s);return fA({format:"bytes"},o,r)}))}(this,e,t,n)}))}signTransaction(e,t=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n){return xI(this,void 0,void 0,(function*(){const r=yield function(e,t){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_signTransaction",params:[t]})}))}(e.requestManager,UP(t,OE));return uE(r)?function(e,t,n={fillInputAndData:!1}){return{raw:fA({format:"bytes"},e,t),tx:UP(Object.assign(Object.assign({},XC.fromSerializedData(dS(e)).toJSON()),{hash:uS(vA(dS(e))),type:EP(dS(e))}),t,{fillInputAndData:n.fillInputAndData})}}(r,n,{fillInputAndData:!0}):{raw:fA({format:"bytes"},r.raw,n),tx:UP(r.tx,n,{fillInputAndData:!0})}}))}(this,e,t)}))}call(e,t=this.defaultBlock,n=kE){return BI(this,void 0,void 0,(function*(){return CI(this,e,t,n)}))}estimateGas(e,t=this.defaultBlock,n=kE){return BI(this,void 0,void 0,(function*(){return PI(this,e,t,n)}))}getPastLogs(e,t=kE){return BI(this,void 0,void 0,(function*(){return RI(this,e,t)}))}getWork(){return BI(this,void 0,void 0,(function*(){return function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_getWork",params:[]})}))}(this.requestManager)}))}submitWork(e,t,n){return BI(this,void 0,void 0,(function*(){return function(e,t,n,r){return dP(this,void 0,void 0,(function*(){return oS.validate(["bytes8","bytes32","bytes32"],[t,n,r]),e.send({method:"eth_submitWork",params:[t,n,r]})}))}(this.requestManager,e,t,n)}))}requestAccounts(){return BI(this,void 0,void 0,(function*(){return function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"eth_requestAccounts",params:[]})}))}(this.requestManager)}))}getChainId(e=kE){return BI(this,void 0,void 0,(function*(){return II(this,e)}))}getNodeInfo(){return BI(this,void 0,void 0,(function*(){return function(e){return dP(this,void 0,void 0,(function*(){return e.send({method:"web3_clientVersion",params:[]})}))}(this.requestManager)}))}getProof(e,t,n=this.defaultBlock,r=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n,r=e.defaultBlock,i){return xI(this,void 0,void 0,(function*(){const s=n.map((e=>fA({format:"bytes"},e,OE))),o=ZE(r)?r:fA({format:"uint"},r,OE),a=yield function(e,t,n,r){return dP(this,void 0,void 0,(function*(){return oS.validate(["address","bytes32[]","blockNumberOrTag"],[t,n,r]),e.send({method:"eth_getProof",params:[t,n,r]})}))}(e.requestManager,t,s,o);return fA(BP,a,i)}))}(this,e,t,n,r)}))}getFeeHistory(e,t=this.defaultBlock,n,r=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n=e.defaultBlock,r,i){return xI(this,void 0,void 0,(function*(){const s=fA({format:"uint"},t,OE),o=ZE(n)?n:fA({format:"uint"},n,OE),a=fA({type:"array",items:{format:"uint"}},r,qP),l=yield function(e,t,n,r){return dP(this,void 0,void 0,(function*(){oS.validate(["hex","blockNumberOrTag"],[t,n]);for(const e of r)oS.validate(["number"],[e]);return e.send({method:"eth_feeHistory",params:[t,n,r]})}))}(e.requestManager,s,o,a);return fA(DP,l,i)}))}(this,e,t,n,r)}))}createAccessList(e,t=this.defaultBlock,n=kE){return BI(this,void 0,void 0,(function*(){return LI(this,e,t,n)}))}signTypedData(e,t,n=!1,r=kE){return BI(this,void 0,void 0,(function*(){return function(e,t,n,r,i){return xI(this,void 0,void 0,(function*(){const s=yield function(e,t,n,r=!1){return dP(this,void 0,void 0,(function*(){return oS.validate(["address"],[t]),e.send({method:"eth_signTypedData"+(r?"":"_v4"),params:[t,n]})}))}(e.requestManager,t,n,r);return fA({format:"bytes"},s,i)}))}(this,e,t,n,r)}))}subscribe(e,t,n=kE){var r;return BI(this,void 0,void 0,(function*(){const i=yield null===(r=this.subscriptionManager)||void 0===r?void 0:r.subscribe(e,t,n);return i instanceof kI&&"logs"===e&&"object"==typeof t&&!QS(t.fromBlock)&&Number.isFinite(Number(t.fromBlock))&&setImmediate((()=>{this.getPastLogs(t).then((e=>{for(const t of e)i._processSubscriptionResult(t)})).catch((e=>{i._processSubscriptionError(e)}))})),i}))}static shouldClearSubscription({sub:e}){return!(e instanceof DI)}clearSubscriptions(e=!1){var t;return null===(t=this.subscriptionManager)||void 0===t?void 0:t.unsubscribe(e?FI.shouldClearSubscription:void 0)}}const zI=e=>{if($E(e.gas)||!jE(e.gas)||$E(e.gasPrice)||!jE(e.gasPrice))throw new xb({gas:e.gas,gasPrice:e.gasPrice});if(!$E(e.maxFeePerGas)||!$E(e.maxPriorityFeePerGas))throw new Sb({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas})},HI=e=>{if(!$E(e.gasPrice)&&"0x2"===e.type)throw new Eb(e.gasPrice);if("0x0"===e.type||"0x1"===e.type)throw new Sb({maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas});if($E(e.maxFeePerGas)||!jE(e.maxFeePerGas)||$E(e.maxPriorityFeePerGas)||!jE(e.maxPriorityFeePerGas))throw new wb({maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas})};const GI=(e,t,n,r=!1,i=!0)=>{return s=void 0,o=void 0,l=function*(){const s=yield(e=>YP(void 0,void 0,void 0,(function*(){var t;return(null!==(t=e.web3Context.transactionBuilder)&&void 0!==t?t:JP)(Object.assign(Object.assign({},e),{transaction:e.transaction}))})))({transaction:e,web3Context:t,privateKey:n,fillGasPrice:r,fillGasLimit:i}),o=UP(s,OE);return((e,t)=>{if(!$E(t))return void t(e);if("object"!=typeof e||$E(e))throw new Ab(e);(e=>{if(!$E(e.common)){if($E(e.common.customChain))throw new ub;if($E(e.common.customChain.chainId))throw new db;if(!$E(e.chainId)&&e.chainId!==e.common.customChain.chainId)throw new hb({txChainId:e.chainId,customChainId:e.common.customChain.chainId})}})(e),(e=>{if(!$E(e.common)&&!$E(e.chain)&&!$E(e.hardfork))throw new mb;if(!$E(e.chain)&&$E(e.hardfork)||!$E(e.hardfork)&&$E(e.chain))throw new gb({chain:e.chain,hardfork:e.hardfork})})(e),(e=>{if(!$E(e.common)&&!$E(e.common.baseChain)&&!$E(e.chain)&&e.chain!==e.common.baseChain)throw new fb({txChain:e.chain,baseChain:e.common.baseChain})})(e),(e=>{if(!$E(e.common)&&!$E(e.common.hardfork)&&!$E(e.hardfork)&&e.hardfork!==e.common.hardfork)throw new pb({txHardfork:e.hardfork,commonHardfork:e.common.hardfork})})(e);const n=UP(e,OE);if((e=>{const t=!$E(e.gas)||!$E(e.gasLimit),n=t&&!$E(e.gasPrice),r=t&&!$E(e.maxPriorityFeePerGas)&&!$E(e.maxFeePerGas);if(!n&&!r)throw new yb({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});if(n&&r)throw new _b({gas:e.gas,gasPrice:e.gasPrice,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas});(n?zI:HI)(e),(!$E(e.type)&&e.type>"0x1"?HI:zI)(e)})(n),$E(n.nonce)||$E(n.chainId)||n.nonce.startsWith("-")||n.chainId.startsWith("-"))throw new Tb({nonce:e.nonce,chainId:e.chainId})})(o),XC.fromTxData((e=>{var t,n;return{nonce:e.nonce,gasPrice:e.gasPrice,gasLimit:null!==(t=e.gasLimit)&&void 0!==t?t:e.gas,to:e.to,value:e.value,data:null!==(n=e.data)&&void 0!==n?n:e.input,type:e.type,chainId:e.chainId,accessList:e.accessList,maxPriorityFeePerGas:e.maxPriorityFeePerGas,maxFeePerGas:e.maxFeePerGas}})(o),((e,t)=>{var n,r,i,s,o,a,l,c,u,d,h,f,p,m,g,v,y,b;let _;if(($E(e.chain)||$E(e.hardfork))&&$E(e.common))t.defaultCommon?(_=t.defaultCommon,$E(_.hardfork)&&(_.hardfork=null!==(n=e.hardfork)&&void 0!==n?n:t.defaultHardfork),$E(_.baseChain)&&(_.baseChain=t.defaultChain)):_=LC.custom({name:"custom-network",chainId:PS(e.chainId),networkId:$E(e.networkId)?void 0:PS(e.networkId),defaultHardfork:null!==(r=e.hardfork)&&void 0!==r?r:t.defaultHardfork},{baseChain:t.defaultChain});else{const n=null!==(a=null!==(o=null===(s=null===(i=null==e?void 0:e.common)||void 0===i?void 0:i.customChain)||void 0===s?void 0:s.name)&&void 0!==o?o:e.chain)&&void 0!==a?a:"custom-network",r=PS(null!==(u=null===(c=null===(l=null==e?void 0:e.common)||void 0===l?void 0:l.customChain)||void 0===c?void 0:c.chainId)&&void 0!==u?u:null==e?void 0:e.chainId),x=PS(null!==(f=null===(h=null===(d=null==e?void 0:e.common)||void 0===d?void 0:d.customChain)||void 0===h?void 0:h.networkId)&&void 0!==f?f:null==e?void 0:e.networkId),w=null!==(g=null!==(m=null===(p=null==e?void 0:e.common)||void 0===p?void 0:p.hardfork)&&void 0!==m?m:null==e?void 0:e.hardfork)&&void 0!==g?g:t.defaultHardfork,E=null!==(b=null!==(y=null===(v=e.common)||void 0===v?void 0:v.baseChain)&&void 0!==y?y:e.chain)&&void 0!==b?b:t.defaultChain;r&&x&&n&&(_=LC.custom({name:n,chainId:r,networkId:x,defaultHardfork:w},{baseChain:E}))}return{common:_}})(o,t))},new((a=void 0)||(a=Promise))((function(e,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function r(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a((function(e){e(i)}))).then(n,r)}i((l=l.apply(s,o||[])).next())}));var s,o,a,l},VI=({address:e},t,n)=>{var r,i;const s=null==n?void 0:n.topics,o=null!==(r=null==n?void 0:n.filter)&&void 0!==r?r:{},a={};if(QS(null==n?void 0:n.fromBlock)||(a.fromBlock=fA(RP.properties.number,null==n?void 0:n.fromBlock,{number:IE.HEX,bytes:LE.HEX})),QS(null==n?void 0:n.toBlock)||(a.toBlock=fA(RP.properties.number,null==n?void 0:n.toBlock,{number:IE.HEX,bytes:LE.HEX})),s&&Array.isArray(s))a.topics=[...s];else if(a.topics=[],!t||t.anonymous||[jP,"allEvents"].includes(t.name)||a.topics.push(null!==(i=t.signature)&&void 0!==i?i:pR(fR(t))),![jP,"allEvents"].includes(t.name)&&t.inputs)for(const e of t.inputs){if(!e.indexed)continue;const t=o[e.name];t?Array.isArray(t)?a.topics.push(t.map((t=>oI(e.type,t)))):"string"===e.type?a.topics.push(vA(t)):a.topics.push(oI(e.type,t)):a.topics.push(null)}return a.topics.length||delete a.topics,e&&(a.address=e.toLowerCase()),a},jI=(e,t,n)=>{const r=Array.isArray(e.inputs)?e.inputs.length:0;if(r!==t.length)throw new By(`The number of arguments is not matching the methods required number. You need to pass ${r} arguments.`);const i=sI(Array.isArray(e.inputs)?e.inputs:[],t).replace("0x","");if(!QS(s=e)&&"object"==typeof s&&!QS(s.type)&&"constructor"===s.type){if(!n)throw new By("The contract has no contract data option set. This is necessary to append the constructor parameters.");return n.startsWith("0x")?`${n}${i}`:`0x${n}${i}`}var s;return`${uI(e)}${i}`};class WI extends ST{constructor(e,t){super(e,t),this.address=e.address,this.topics=e.topics,this.abi=e.abi,this.jsonInterface=e.jsonInterface}_buildSubscriptionParams(){return["logs",{address:this.address,topics:this.topics}]}formatSubscriptionResult(e){return yI(this.abi,e,this.jsonInterface,super.returnFormat)}}const qI=(e,t,n,r)=>{var i,s;const o={};return QS(e.data)&&"both"!==r||(o.data=jI(t,n,null!==(i=e.data)&&void 0!==i?i:e.input)),QS(e.input)&&"both"!==r||(o.input=jI(t,n,null!==(s=e.input)&&void 0!==s?s:e.data)),QS(o.input)&&QS(o.data)&&(o[r]=jI(t,n)),{data:o.data,input:o.input}},XI=({abi:e,params:t,options:n,contractOptions:r})=>{var i,s,o;if(!(null!==(o=null!==(s=null!==(i=null==n?void 0:n.input)&&void 0!==i?i:null==n?void 0:n.data)&&void 0!==s?s:r.input)&&void 0!==o?o:r.data)&&!(null==n?void 0:n.to)&&!r.address)throw new By("Contract address not specified");if(!(null==n?void 0:n.from)&&!r.from)throw new By('Contract "from" address not specified');let a=$S({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const l=qI(a,e,t,null==n?void 0:n.dataInputFill);return a=Object.assign(Object.assign({},a),{data:l.data,input:l.input}),a},ZI=e=>"object"==typeof e&&!QS(e)&&0!==Object.keys(e).length&&!KS(e);var YI=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const KI={logs:WI,newHeads:NI,newBlockHeaders:NI};class QI extends oP{constructor(e,t,n,r,i){var s,o,a;const l=KS(t)?t:KS(n)?n:void 0;let c,u;if(c=ZI(t)?t:ZI(n)?n:r,u="object"==typeof t&&"provider"in t?t.provider:"object"==typeof n&&"provider"in n?n.provider:"object"==typeof r&&"provider"in r?r.provider:QI.givenProvider,super(Object.assign(Object.assign({},c),{provider:u,registeredSubscriptions:KI})),this.syncWithContext=!1,this._functions={},!$E(l)&&!$E(l.data)&&!$E(l.input)&&"both"!==this.config.contractDataInputFill)throw new Hy({data:l.data,input:l.input});this._overloadedMethodAbis=new Map;const d=cA(r)?r:cA(n)?n:null!=i?i:kE,h="string"==typeof t?t:void 0;this.config.contractDataInputFill=null!==(s=null==l?void 0:l.dataInputFill)&&void 0!==s?s:this.config.contractDataInputFill,this._parseAndSetJsonInterface(e,d),$E(h)||this._parseAndSetAddress(h,d),this.options={address:h,jsonInterface:this._jsonInterface,gas:null!==(o=null==l?void 0:l.gas)&&void 0!==o?o:null==l?void 0:l.gasLimit,gasPrice:null==l?void 0:l.gasPrice,from:null==l?void 0:l.from,input:null==l?void 0:l.input,data:null==l?void 0:l.data},this.syncWithContext=null!==(a=null==l?void 0:l.syncWithContext)&&void 0!==a&&a,c instanceof oP&&this.subscribeToContextEvents(c),Object.defineProperty(this.options,"address",{set:e=>this._parseAndSetAddress(e,d),get:()=>this._address}),Object.defineProperty(this.options,"jsonInterface",{set:e=>this._parseAndSetJsonInterface(e,d),get:()=>this._jsonInterface}),c instanceof oP&&c.on(sT.CONFIG_CHANGE,(e=>{this.setConfig({[e.name]:e.newValue})}))}get events(){return this._events}get methods(){return this._methods}clone(){let e;return e=this.options.address?new QI([...this._jsonInterface,...this._errorsInterface],this.options.address,{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()):new QI([...this._jsonInterface,...this._errorsInterface],{gas:this.options.gas,gasPrice:this.options.gasPrice,from:this.options.from,input:this.options.input,data:this.options.data,provider:this.currentProvider,syncWithContext:this.syncWithContext,dataInputFill:this.config.contractDataInputFill},this.getContextObject()),this.context&&e.subscribeToContextEvents(this.context),e}deploy(e){var t,n,r;let i=this._jsonInterface.find((e=>"constructor"===e.type));i||(i={type:"constructor",inputs:[],stateMutability:""});const s=fA({format:"bytes"},null!==(t=null==e?void 0:e.input)&&void 0!==t?t:this.options.input,kE),o=fA({format:"bytes"},null!==(n=null==e?void 0:e.data)&&void 0!==n?n:this.options.data,kE);if(!(s&&"0x"!==s.trim()||o&&"0x"!==o.trim()))throw new By("contract creation without any data provided.");const a=null!==(r=null==e?void 0:e.arguments)&&void 0!==r?r:[],l=Object.assign(Object.assign({},this.options),{input:s,data:o}),c=null!=s?s:o;return{arguments:a,send:e=>{const t=Object.assign({},e);return this._contractMethodDeploySend(i,a,t,l)},estimateGas:(e,t=kE)=>YI(this,void 0,void 0,(function*(){const n=Object.assign({},e);return this._contractMethodEstimateGas({abi:i,params:a,returnFormat:t,options:n,contractOptions:l})})),encodeABI:()=>jI(i,a,fA({format:"bytes"},c,kE))}}getPastEvents(e,t,n){var r;return YI(this,void 0,void 0,(function*(){const i="string"==typeof e?e:jP,s="string"==typeof e||cA(e)?cA(t)?{}:t:e,o=cA(e)?e:cA(t)?t:null!=n?n:kE,a="allEvents"===i||i===jP?WP:this._jsonInterface.find((e=>"name"in e&&e.name===i));if(!a)throw new By(`Event ${i} not found.`);const{fromBlock:l,toBlock:c,topics:u,address:d}=VI(this.options,a,null!=s?s:{}),h=(yield RI(this,{fromBlock:l,toBlock:c,topics:u,address:d},o)).map((e=>"string"==typeof e?e:yI(a,e,this._jsonInterface,o))),f=null!==(r=null==s?void 0:s.filter)&&void 0!==r?r:{},p=Object.keys(f);return p.length>0?h.filter((e=>"string"==typeof e||p.every((t=>{var n;if(Array.isArray(f[t]))return f[t].some((n=>String(e.returnValues[t]).toUpperCase()===String(n).toUpperCase()));const r=null===(n=a.inputs)||void 0===n?void 0:n.filter((e=>e.name===t))[0];return!(!(null==r?void 0:r.indexed)||"string"!==r.type||vA(f[t])!==String(e.returnValues[t]))||String(e.returnValues[t]).toUpperCase()===String(f[t]).toUpperCase()})))):h}))}_parseAndSetAddress(e,t=kE){this._address=e?kS(fA({format:"address"},e,t)):e}_parseAndSetJsonInterface(e,t=kE){var n,r,i,s,o;this._functions={},this._methods={},this._events={};let a=[];const l=e.filter((e=>"error"!==e.type)),c=e.filter((e=>aR(e)));for(const e of l){const l=Object.assign(Object.assign({},e),{signature:""});if(cR(l)){const e=fR(l),t=uI(e);l.signature=t,l.constant=null!==(r=null!==(n="view"===l.stateMutability)&&void 0!==n?n:"pure"===l.stateMutability)&&void 0!==r?r:l.constant,l.payable=null!==(i="payable"===l.stateMutability)&&void 0!==i?i:l.payable,this._overloadedMethodAbis.set(l.name,[...null!==(s=this._overloadedMethodAbis.get(l.name))&&void 0!==s?s:[],l]);const a=null!==(o=this._overloadedMethodAbis.get(l.name))&&void 0!==o?o:[],u=this._createContractMethod(a,c);this._functions[e]={signature:t,method:u},this._methods[l.name]=this._functions[e].method,this._methods[e]=this._functions[e].method,this._methods[t]=this._functions[e].method}else if(lR(l)){const e=fR(l),n=pR(e),r=this._createContractEvent(l,t);l.signature=n,e in this._events&&"bound"!==l.name||(this._events[e]=r),this._events[l.name]=r,this._events[n]=r}a=[...a,l]}this._events.allEvents=this._createContractEvent(WP,t),this._jsonInterface=[...a],this._errorsInterface=c}_getAbiParams(e,t){var n;try{return wE(null!==(n=e.inputs)&&void 0!==n?n:[],t)}catch(t){throw new By(`Invalid parameters for method ${e.name}: ${t.message}`)}}_createContractMethod(e,t){const n=e[e.length-1];return(...e)=>{var r,i;let s;const o=null!==(r=this._overloadedMethodAbis.get(n.name))&&void 0!==r?r:[];let a=o[0];const l=t,c=o.filter((t=>{var n;return(null!==(n=t.inputs)&&void 0!==n?n:[]).length===e.length}));if(1===o.length||0===c.length)s=this._getAbiParams(a,e),oS.validate(null!==(i=n.inputs)&&void 0!==i?i:[],s);else{const t=[];for(const n of c)try{s=this._getAbiParams(n,e),oS.validate(n.inputs,s),a=n;break}catch(e){t.push(e)}if(t.length===c.length)throw new aE(t)}const u={arguments:s,call:(e,t)=>YI(this,void 0,void 0,(function*(){return this._contractMethodCall(a,s,l,e,t)})),send:e=>this._contractMethodSend(a,s,l,e),estimateGas:(e,t=kE)=>YI(this,void 0,void 0,(function*(){return this._contractMethodEstimateGas({abi:a,params:s,returnFormat:t,options:e})})),encodeABI:()=>jI(a,s),createAccessList:(e,t)=>YI(this,void 0,void 0,(function*(){return this._contractMethodCreateAccessList(a,s,l,e,t)}))};return a.stateMutability,u}}_contractMethodCall(e,t,n,r,i){var s;return YI(this,void 0,void 0,(function*(){const o=(({abi:e,params:t,options:n,contractOptions:r})=>{if(!(null==n?void 0:n.to)&&!r.address)throw new By("Contract address not specified");let i=$S({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const s=qI(i,e,t,null==n?void 0:n.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(s=this.options.from)&&void 0!==s?s:this.config.defaultAccount})});try{const t=yield CI(this,o,i,kE);return((e,t)=>{if("constructor"===e.type)return t;if(!t)return null;const n=t.length>=2?t.slice(2):t;if(!e.outputs)return null;const r=lI([...e.outputs],n);return 1===r.__length__?r[0]:r})(e,t)}catch(e){throw e instanceof zy&&fI(n,e.innerError),e}}))}_contractMethodCreateAccessList(e,t,n,r,i){var s;return YI(this,void 0,void 0,(function*(){const o=(({abi:e,params:t,options:n,contractOptions:r})=>{if(!(null==n?void 0:n.to)&&!r.address)throw new By("Contract address not specified");if(!(null==n?void 0:n.from)&&!r.from)throw new By('Contract "from" address not specified');let i=$S({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,maxPriorityFeePerGas:r.maxPriorityFeePerGas,maxFeePerGas:r.maxFeePerGas,data:r.data},n);const s=qI(i,e,t,null==n?void 0:n.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:Object.assign(Object.assign({},this.options),{from:null!==(s=this.options.from)&&void 0!==s?s:this.config.defaultAccount})});try{return LI(this,o,i,kE)}catch(e){throw e instanceof zy&&fI(n,e.innerError),e}}))}_contractMethodSend(e,t,n,r,i){var s,o;let a=null!=i?i:this.options;a=Object.assign(Object.assign({},a),{input:void 0,from:null!==(o=null!==(s=a.from)&&void 0!==s?s:this.defaultAccount)&&void 0!==o?o:void 0});const l=MI(this,XI({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:a}),kE,{checkRevertBeforeSending:!1,contractAbi:this._jsonInterface});return l.on("error",(e=>{e instanceof zy&&fI(n,e.innerError)})),l}_contractMethodDeploySend(e,t,n,r){var i,s;let o=null!=r?r:this.options;return o=Object.assign(Object.assign({},o),{from:null!==(s=null!==(i=o.from)&&void 0!==i?i:this.defaultAccount)&&void 0!==s?s:void 0}),MI(this,XI({abi:e,params:t,options:Object.assign(Object.assign({},n),{dataInputFill:this.config.contractDataInputFill}),contractOptions:o}),kE,{transactionResolver:e=>{if(e.status===BigInt(0))throw new By("code couldn't be stored",e);const t=this.clone();return t.options.address=e.contractAddress,t},contractAbi:this._jsonInterface,checkRevertBeforeSending:!1})}_contractMethodEstimateGas({abi:e,params:t,returnFormat:n,options:r,contractOptions:i}){return YI(this,void 0,void 0,(function*(){const s=(({abi:e,params:t,options:n,contractOptions:r})=>{let i=$S({to:r.address,gas:r.gas,gasPrice:r.gasPrice,from:r.from,input:r.input,data:r.data},n);const s=qI(i,e,t,null==n?void 0:n.dataInputFill);return i=Object.assign(Object.assign({},i),{data:s.data,input:s.input}),i})({abi:e,params:t,options:Object.assign(Object.assign({},r),{dataInputFill:this.config.contractDataInputFill}),contractOptions:null!=i?i:this.options});return PI(this,s,NE.LATEST,n)}))}_createContractEvent(e,t=kE){return(...n)=>{var r;const{topics:i,fromBlock:s}=VI(this.options,e,n[0]),o=new WI({address:this.options.address,topics:i,abi:e,jsonInterface:this._jsonInterface},{subscriptionManager:this.subscriptionManager,returnFormat:t});return $E(s)||this.getPastEvents(e.name,{fromBlock:s,topics:i},t).then((e=>{e.forEach((e=>o.emit("data",e)))})).catch((e=>{o.emit("error",new $y("Failed to get past events.",e))})),null===(r=this.subscriptionManager)||void 0===r||r.addSubscription(o).catch((e=>{o.emit("error",new $y("Failed to subscribe.",e))})),o}}subscribeToContextEvents(e){const t=this;this.context=e,t.syncWithContext&&e.on(sT.CONFIG_CHANGE,(e=>{t.setConfig({[e.name]:e.newValue})}))}}const JI=QI,$I={addr:"0x3b3b57de",name:"0x691f3431",abi:"0x2203ab56",pubkey:"0xc8690233",text:"0x59d1d43c",contenthash:"0xbc1c58d1"},eL={main:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",goerli:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},tL={"0x1":"main","0x5":"goerli"},nL=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes32",name:"label",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"NewOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"resolver",type:"address"}],name:"NewResolver",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"owner",type:"address"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"recordExists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"resolver",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"ttl",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"}],rL=[{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"address",name:"a",type:"address"}],name:"AddrChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"coinType",type:"uint256"},{indexed:!1,internalType:"bytes",name:"newAddress",type:"bytes"}],name:"AddressChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"hash",type:"bytes"}],name:"ContenthashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"},{indexed:!1,internalType:"bytes",name:"record",type:"bytes"}],name:"DNSRecordChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"name",type:"bytes"},{indexed:!1,internalType:"uint16",name:"resource",type:"uint16"}],name:"DNSRecordDeleted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"}],name:"DNSZoneCleared",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"lastzonehash",type:"bytes"},{indexed:!1,internalType:"bytes",name:"zonehash",type:"bytes"}],name:"DNSZonehashChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"bytes4",name:"interfaceID",type:"bytes4"},{indexed:!1,internalType:"address",name:"implementer",type:"address"}],name:"InterfaceChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"string",name:"name",type:"string"}],name:"NameChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"x",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"y",type:"bytes32"}],name:"PubkeyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"node",type:"bytes32"},{indexed:!0,internalType:"string",name:"indexedKey",type:"string"},{indexed:!1,internalType:"string",name:"key",type:"string"}],name:"TextChanged",type:"event"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"contentTypes",type:"uint256"}],name:"ABI",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"addr",outputs:[{internalType:"address payable",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"uint256",name:"coinType",type:"uint256"}],name:"addr",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"contenthash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"},{internalType:"uint16",name:"resource",type:"uint16"}],name:"dnsRecord",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes32",name:"name",type:"bytes32"}],name:"hasDNSRecords",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"interfaceImplementer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"pubkey",outputs:[{internalType:"bytes32",name:"x",type:"bytes32"},{internalType:"bytes32",name:"y",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"},{internalType:"string",name:"key",type:"string"}],name:"text",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"node",type:"bytes32"}],name:"zonehash",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"}];var iL="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const sL=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function oL(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),i=1,s=[0,1];for(let e=1;e<r;e++)s.push(i+=n());let o=n(),a=t;t+=o;let l=0,c=0;function u(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}const d=2**31,h=d>>>1,f=d-1;let p=0;for(let e=0;e<31;e++)p=p<<1|u();let m=[],g=0,v=d;for(;;){let e=Math.floor(((p-g+1)*i-1)/v),t=0,n=r;for(;n-t>1;){let r=t+n>>>1;e<s[r]?n=r:t=r}if(0==t)break;m.push(t);let o=g+Math.floor(v*s[t]/i),a=g+Math.floor(v*s[t+1]/i)-1;for(;0==((o^a)&h);)p=p<<1&f|u(),o=o<<1&f,a=a<<1&f|1;for(;o&~a&536870912;)p=p&h|p<<1&f>>>1|u(),o=o<<1^h,a=(a^h)<<1|h|1;g=o,v=1+a-o}let y=r-4;return m.map((t=>{switch(t-y){case 3:return y+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return y+256+(e[a++]<<8|e[a++]);case 1:return y+e[a++];default:return t-1}}))}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach(((e,n)=>t[e.charCodeAt(0)]=n));let n=e.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,o=0,a=0;i<n;i++)a=a<<6|t[e.charCodeAt(i)],o+=6,o>=8&&(r[s++]=a>>(o-=8));return r}(e)))}function aL(e){return 1&e?~e>>1:e>>1}function lL(e,t){let n=Array(e);for(let r=0,i=0;r<e;r++)n[r]=i+=aL(t());return n}function cL(e,t=0){let n=[];for(;;){let r=e(),i=e();if(!i)break;t+=r;for(let e=0;e<i;e++)n.push(t+e);t+=i+1}return n}function uL(e){return hL((()=>{let t=cL(e);if(t.length)return t}))}function dL(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(pL(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(mL(n,e))}return t.flat()}function hL(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function fL(e,t,n){let r=Array(e).fill().map((()=>[]));for(let i=0;i<t;i++)lL(e,n).forEach(((e,t)=>r[t].push(e)));return r}function pL(e,t){let n=1+t(),r=t(),i=hL(t);return fL(i.length,1+e,t).flatMap(((e,t)=>{let[s,...o]=e;return Array(i[t]).fill().map(((e,t)=>{let i=t*r;return[s+t*n,o.map((e=>e+i))]}))}))}function mL(e,t){return fL(1+t(),1+e,t).map((e=>[e[0],e.slice(1)]))}function gL(e){return`{${function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e)}}`}function vL(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let r=0;r<t;)n.push(String.fromCodePoint(...e.slice(r,r+=4096)));return n.join("")}function yL(e,t){let n=e.length,r=n-t.length;for(let i=0;0==r&&i<n;i++)r=e[i]-t[i];return r}var bL="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const _L=44032,xL=4352,wL=4449,EL=4519,SL=28,AL=21*SL,TL=_L+19*AL,ML=xL+19,CL=wL+21,PL=EL+SL;function RL(e){return e>>24&255}function IL(e){return 16777215&e}let LL,kL,OL,NL;function DL(e){return e>=_L&&e<TL}function BL(e,t){if(e>=xL&&e<ML&&t>=wL&&t<CL)return _L+(e-xL)*AL+(t-wL)*SL;if(DL(e)&&t>EL&&t<PL&&(e-_L)%SL==0)return e+(t-EL);{let n=NL.get(e);return n&&(n=n.get(t),n)?n:-1}}function UL(e){LL||function(){let e=oL(bL);LL=new Map(uL(e).flatMap(((e,t)=>e.map((e=>[e,t+1<<24]))))),kL=new Set(cL(e)),OL=new Map,NL=new Map;for(let[t,n]of dL(e)){if(!kL.has(t)&&2==n.length){let[e,r]=n,i=NL.get(e);i||(i=new Map,NL.set(e,i)),i.set(r,t)}OL.set(t,n.reverse())}}();let t=[],n=[],r=!1;function i(e){let n=LL.get(e);n&&(r=!0,e|=n),t.push(e)}for(let r of e)for(;;){if(r<128)t.push(r);else if(DL(r)){let e=r-_L,t=e%AL/SL|0,n=e%SL;i(xL+(e/AL|0)),i(wL+t),n>0&&i(EL+n)}else{let e=OL.get(r);e?n.push(...e):i(r)}if(!n.length)break;r=n.pop()}if(r&&t.length>1){let e=RL(t[0]);for(let n=1;n<t.length;n++){let r=RL(t[n]);if(0==r||e<=r){e=r;continue}let i=n-1;for(;;){let n=t[i+1];if(t[i+1]=t[i],t[i]=n,!i)break;if(e=RL(t[--i]),e<=r)break}e=RL(t[n])}}return t}function FL(e){return UL(e).map(IL)}function zL(e){return function(e){let t=[],n=[],r=-1,i=0;for(let s of e){let e=RL(s),o=IL(s);if(-1==r)0==e?r=o:t.push(o);else if(i>0&&i>=e)0==e?(t.push(r,...n),n.length=0,r=o):n.push(o),i=e;else{let s=BL(r,o);s>=0?r=s:0==i&&0==e?(t.push(r),r=o):(n.push(o),i=e)}}return r>=0&&t.push(r,...n),t}(UL(e))}const HL=65039,GL=1,VL=e=>Array.from(e);function jL(e,t){return e.P.has(t)||e.Q.has(t)}class WL extends Array{get is_emoji(){return!0}}let qL,XL,ZL,YL,KL,QL,JL,$L,ek,tk,nk,rk;function ik(){if(qL)return;let e=oL(iL);const t=()=>cL(e),n=()=>new Set(t());qL=new Map(dL(e)),XL=n(),ZL=t(),YL=new Set(t().map((e=>ZL[e]))),ZL=new Set(ZL),KL=n(),QL=n();let r=uL(e),i=e();const s=()=>new Set(t().flatMap((e=>r[e])).concat(t()));JL=hL((t=>{let n=hL(e).map((e=>e+96));if(n.length){let r=t>=i;return n[0]-=32,n=vL(n),r&&(n=`Restricted[${n}]`),{N:n,P:s(),Q:s(),M:!e(),R:r}}})),$L=n(),ek=new Map;let o=t().concat(VL($L)).sort(((e,t)=>e-t));o.forEach(((t,n)=>{let r=e(),i=o[n]=r?o[n-r]:{V:[],M:new Map};i.V.push(t),$L.has(t)||ek.set(t,i)}));for(let{V:e,M:t}of new Set(ek.values())){let n=[];for(let t of e){let e=JL.filter((e=>jL(e,t))),r=n.find((({G:t})=>e.some((e=>t.has(e)))));r||(r={G:new Set,V:[]},n.push(r)),r.V.push(t),e.forEach((e=>r.G.add(e)))}let r=n.flatMap((e=>VL(e.G)));for(let{G:e,V:i}of n){let n=new Set(r.filter((t=>!e.has(t))));for(let e of i)t.set(e,n)}}let a=new Set,l=new Set;const c=e=>a.has(e)?l.add(e):a.add(e);for(let e of JL){for(let t of e.P)c(t);for(let t of e.Q)c(t)}for(let e of a)ek.has(e)||l.has(e)||ek.set(e,GL);tk=new Set(VL(a).concat(VL(FL(a)))),nk=function(e){let t=[],n=cL(e);return function e({S:n,B:r},i,s){if(!(4&n&&s===i[i.length-1])){2&n&&(s=i[i.length-1]),1&n&&t.push(i);for(let t of r)for(let n of t.Q)e(t,[...i,n],s)}}(function t(r){let i=e(),s=hL((()=>{let r=cL(e).map((e=>n[e]));if(r.length)return t(r)}));return{S:i,B:s,Q:r}}([]),[]),t}(e).map((e=>WL.from(e))).sort(yL),rk=new Map;for(let e of nk){let t=[rk];for(let n of e){let e=t.map((e=>{let t=e.get(n);return t||(t=new Map,e.set(n,t)),t}));n===HL?t.push(...e):t=e}for(let n of t)n.V=e}}function sk(e){return(lk(e)?"":`${ok(ak([e]))} `)+gL(e)}function ok(e){return`"${e}"`}function ak(e,t=gL){let n=[];var r;r=e[0],ik(),ZL.has(r)&&n.push("");let i=0,s=e.length;for(let r=0;r<s;r++){let s=e[r];lk(s)&&(n.push(vL(e.slice(i,r))),n.push(t(s)),i=r+1)}return n.push(vL(e.slice(i,s))),n.join("")}function lk(e){return ik(),KL.has(e)}function ck(e,t,n){if(!e)return[];ik();let r=0;return e.split(".").map((e=>{let i=function(e){let t=[];for(let n=0,r=e.length;n<r;){let r=e.codePointAt(n);n+=r<65536?1:2,t.push(r)}return t}(e),s={input:i,offset:r};r+=i.length+1;try{let e,r=s.tokens=function(e,t,n){let r=[],i=[];for(e=e.slice().reverse();e.length;){let s=pk(e);if(s)i.length&&(r.push(t(i)),i=[]),r.push(n(s));else{let t=e.pop();if(tk.has(t))i.push(t);else{let e=qL.get(t);if(e)i.push(...e);else if(!XL.has(t))throw uk(t)}}}return i.length&&r.push(t(i)),r}(i,t,n),o=r.length;if(!o)throw new Error("empty label");let a=s.output=r.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(a),!(s.emoji=o>1||r[0].is_emoji)&&a.every((e=>e<128)))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error(`invalid label extension: "${vL(e.slice(0,4))}"`)}(a),e="ASCII";else{let t=r.flatMap((e=>e.is_emoji?[]:e));if(t.length){if(ZL.has(a[0]))throw hk("leading combining mark");for(let e=1;e<o;e++){let t=r[e];if(!t.is_emoji&&ZL.has(t[0]))throw hk(`emoji + combining mark: "${vL(r[e-1])} + ${ak([t[0]])}"`)}!function(e){let t=e[0],n=sL.get(t);if(n)throw hk(`leading ${n}`);let r=e.length,i=-1;for(let s=1;s<r;s++){t=e[s];let r=sL.get(t);if(r){if(i==s)throw hk(`${n} + ${r}`);i=s+1,n=r}}if(i==r)throw hk(`trailing ${n}`)}(a);let n=VL(new Set(t)),[i]=function(e){let t=JL;for(let n of e){let e=t.filter((e=>jL(e,n)));if(!e.length)throw JL.some((e=>jL(e,n)))?dk(t[0],n):uk(n);if(t=e,1==e.length)break}return t}(n);!function(e,t){for(let n of t)if(!jL(e,n))throw dk(e,n);if(e.M){let e=FL(t);for(let t=1,n=e.length;t<n;t++)if(YL.has(e[t])){let r=t+1;for(let i;r<n&&YL.has(i=e[r]);r++)for(let n=t;n<r;n++)if(e[n]==i)throw new Error(`duplicate non-spacing marks: ${sk(i)}`);if(r-t>4)throw new Error(`excessive non-spacing marks: ${ok(ak(e.slice(t-1,r)))} (${r-t}/4)`);t=r}}}(i,t),function(e,t){let n,r=[];for(let e of t){let t=ek.get(e);if(t===GL)return;if(t){let r=t.M.get(e);if(n=n?n.filter((e=>r.has(e))):VL(r),!n.length)return}else r.push(e)}if(n)for(let t of n)if(r.every((e=>jL(t,e))))throw new Error(`whole-script confusable: ${e.N}/${t.N}`)}(i,n),e=i.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s}))}function uk(e){return new Error(`disallowed character: ${sk(e)}`)}function dk(e,t){let n=sk(t),r=JL.find((e=>e.P.has(t)));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${e.N} + ${n}`)}function hk(e){return new Error(`illegal placement: ${e}`)}function fk(e){return e.filter((e=>e!=HL))}function pk(e,t){let n,r=rk,i=e.length;for(;i&&(r=r.get(e[--i]),r);){let{V:s}=r;s&&(n=s,t&&t.push(...e.slice(i).reverse()),e.length=i)}return n}const mk=e=>function(e){return(t=ck(e,zL,fk)).map((({input:e,error:n,output:r})=>{if(n){let r=n.message;throw new Error(1==t.length?r:`Invalid label ${ok(ak(e))}: ${r}`)}return vL(r)})).join(".");var t}(e),gk=e=>{let t="";for(let e=0;e<32;e+=1)t+="00";if(e){const n=mk(e).split(".");for(let e=n.length-1;e>=0;e-=1){const r=gA(n[e]).slice(2);t=gA(`0x${t}${r}`).slice(2)}}return`0x${t}`};var vk=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class yk{constructor(e,t){this.contract=new QI(nL,null!=t?t:eL.main,e),this.context=e}getOwner(e){return vk(this,void 0,void 0,(function*(){try{return this.contract.methods.owner(gk(e)).call()}catch(e){throw new Error}}))}getTTL(e){return vk(this,void 0,void 0,(function*(){try{return this.contract.methods.ttl(gk(e)).call()}catch(e){throw new Error}}))}recordExists(e){return vk(this,void 0,void 0,(function*(){try{return this.contract.methods.recordExists(gk(e)).call()}catch(e){throw new Error}}))}getResolver(e){return vk(this,void 0,void 0,(function*(){try{return this.contract.methods.resolver(gk(e)).call().then((e=>{if("string"==typeof e)return new QI(rL,e,this.context);throw new Error}))}catch(e){throw new Error}}))}get events(){return this.contract.events}}var bk=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class _k{constructor(e){this.registry=e}getResolverContractAdapter(e){return bk(this,void 0,void 0,(function*(){return this.registry.getResolver(e)}))}checkInterfaceSupport(e,t){var n,r;return bk(this,void 0,void 0,(function*(){if(QS($I[t]))throw new Uy(null!==(n=e.options.address)&&void 0!==n?n:"",t);if(!(yield e.methods.supportsInterface($I[t]).call()))throw new Uy(null!==(r=e.options.address)&&void 0!==r?r:"",t)}))}supportsInterface(e,t){var n;return bk(this,void 0,void 0,(function*(){const r=yield this.getResolverContractAdapter(e);let i=t;if(!dE(i)){if(i=null!==(n=mA(t))&&void 0!==n?n:"",""===t)throw new Error("Invalid interface Id");i=i.slice(0,10)}return r.methods.supportsInterface(i).call()}))}getAddress(e,t=60){return bk(this,void 0,void 0,(function*(){const n=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(n,"addr"),n.methods.addr(gk(e),t).call()}))}getPubkey(e){return bk(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"pubkey"),t.methods.pubkey(gk(e)).call()}))}getContenthash(e){return bk(this,void 0,void 0,(function*(){const t=yield this.getResolverContractAdapter(e);return yield this.checkInterfaceSupport(t,"contenthash"),t.methods.contenthash(gk(e)).call()}))}}var xk=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class wk extends oP{constructor(e,t){super(null!=t?t:""),this.registryAddress=null!=e?e:eL.main,this._registry=new yk(this.getContextObject(),e),this._resolver=new _k(this._registry)}getResolver(e){return xk(this,void 0,void 0,(function*(){return this._registry.getResolver(e)}))}recordExists(e){return xk(this,void 0,void 0,(function*(){return this._registry.recordExists(e)}))}getTTL(e){return xk(this,void 0,void 0,(function*(){return this._registry.getTTL(e)}))}getOwner(e){return xk(this,void 0,void 0,(function*(){return this._registry.getOwner(e)}))}getAddress(e,t=60){return xk(this,void 0,void 0,(function*(){return this._resolver.getAddress(e,t)}))}getPubkey(e){return xk(this,void 0,void 0,(function*(){return this._resolver.getPubkey(e)}))}getContenthash(e){return xk(this,void 0,void 0,(function*(){return this._resolver.getContenthash(e)}))}checkNetwork(){return xk(this,void 0,void 0,(function*(){const e=Date.now()/1e3;if(!this._lastSyncCheck||e-this._lastSyncCheck>3600){const n=yield(t=this,xI(void 0,void 0,void 0,(function*(){return hP(t.requestManager)})));if("boolean"!=typeof n||n)throw new Vy;this._lastSyncCheck=e}var t;if(this._detectedAddress)return this._detectedAddress;const n=yield zP(this,Object.assign(Object.assign({},kE),{number:IE.HEX})),r=eL[tL[n]];if(void 0===r)throw new Gy(n);return this._detectedAddress=r,this._detectedAddress}))}supportsInterface(e,t){return xk(this,void 0,void 0,(function*(){return this._resolver.supportsInterface(e,t)}))}get events(){return this._registry.events}}var Ek=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};var Sk=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};class Ak extends oP{getAccounts(){return Sk(this,void 0,void 0,(function*(){return e=this.requestManager,Ek(void 0,void 0,void 0,(function*(){const t=yield(e=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_listAccounts",params:[]})})))(e);return t.map(kS)}));var e}))}newAccount(e){return Sk(this,void 0,void 0,(function*(){return((e,t)=>Ek(void 0,void 0,void 0,(function*(){oS.validate(["string"],[t]);const n=yield((e,t)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_newAccount",params:[t]})})))(e,t);return kS(n)})))(this.requestManager,e)}))}unlockAccount(e,t,n){return Sk(this,void 0,void 0,(function*(){return((e,t,n,r)=>Ek(void 0,void 0,void 0,(function*(){return oS.validate(["address","string","uint"],[t,n,r]),((e,t,n,r)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_unlockAccount",params:[t,n,r]})})))(e,t,n,r)})))(this.requestManager,e,t,n)}))}lockAccount(e){return Sk(this,void 0,void 0,(function*(){return((e,t)=>Ek(void 0,void 0,void 0,(function*(){return oS.validate(["address"],[t]),((e,t)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_lockAccount",params:[t]})})))(e,t)})))(this.requestManager,e)}))}importRawKey(e,t){return Sk(this,void 0,void 0,(function*(){return((e,t,n)=>Ek(void 0,void 0,void 0,(function*(){return oS.validate(["string","string"],[t,n]),((e,t,n)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_importRawKey",params:[t,n]})})))(e,t,n)})))(this.requestManager,e,t)}))}sendTransaction(e,t){return Sk(this,void 0,void 0,(function*(){return((e,t,n)=>Ek(void 0,void 0,void 0,(function*(){const r=UP(t,OE);return((e,t,n)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sendTransaction",params:[t,n]})})))(e,r,n)})))(this.requestManager,e,t)}))}signTransaction(e,t){return Sk(this,void 0,void 0,(function*(){return((e,t,n)=>Ek(void 0,void 0,void 0,(function*(){const r=UP(t,OE);return((e,t,n)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_signTransaction",params:[t,n]})})))(e,r,n)})))(this.requestManager,e,t)}))}sign(e,t,n){return Sk(this,void 0,void 0,(function*(){return((e,t,n,r)=>Ek(void 0,void 0,void 0,(function*(){oS.validate(["string","address","string"],[t,n,r]);const i=dE(t)?t:vS(t);return((e,t,n,r)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_sign",params:[t,n,r]})})))(e,i,n,r)})))(this.requestManager,e,t,n)}))}ecRecover(e,t){return Sk(this,void 0,void 0,(function*(){return((e,t,n)=>Ek(void 0,void 0,void 0,(function*(){oS.validate(["string","string"],[t,n]);const r=dE(t)?t:vS(t);return((e,t,n)=>gP(void 0,void 0,void 0,(function*(){return e.send({method:"personal_ecRecover",params:[t,n]})})))(e,r,n)})))(this.requestManager,e,t)}))}}const Tk={encodeEventSignature:pR,encodeFunctionCall:(e,t)=>{var n;if(!cR(e))throw new Yy("Invalid parameter value in encodeFunctionCall");return`${uI(e)}${sI(null!==(n=e.inputs)&&void 0!==n?n:[],null!=t?t:[]).replace("0x","")}`},encodeFunctionSignature:uI,encodeParameter:oI,encodeParameters:sI,decodeParameter:cI,decodeParameters:lI,decodeLog:hI};var Mk=function(e,t,n,r){return new(n||(n=Promise))((function(i,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};const Ck=e=>{const t=(t,n)=>Mk(void 0,void 0,void 0,(function*(){return((e,t)=>ZC(void 0,void 0,void 0,(function*(){const n=e.sign(dS(t));if($E(n.v)||$E(n.r)||$E(n.s))throw new Bb("Signer Error");const r=n.validate(!0);if(r.length>0){let e="Signer Error ";for(const t of r)e+=`${e} ${t}.`;throw new Bb(e)}const i=uS(n.serialize()),s=gA(i);return{messageHash:uS(n.getMessageToSign(!0)),v:`0x${n.v.toString(16)}`,r:`0x${n.r.toString(16).padStart(64,"0")}`,s:`0x${n.s.toString(16).padStart(64,"0")}`,rawTransaction:i,transactionHash:uS(s)}})))(yield GI(t,e),fA({format:"bytes"},n,OE))})),n=e=>{const n=rP(e);return Object.assign(Object.assign({},n),{signTransaction:e=>Mk(void 0,void 0,void 0,(function*(){return t(e,n.privateKey)}))})},r=(e,n,r)=>Mk(void 0,void 0,void 0,(function*(){var i;const s=yield((e,t,n)=>ZC(void 0,void 0,void 0,(function*(){const r="object"==typeof e?e:JSON.parse(n?e.toLowerCase():e);if(oS.validateJSONSchema(iC,r),3!==r.version)throw new Cy;const i="string"==typeof t?dS(vS(t)):t;let s;if(oS.validate(["bytes"],[i]),"scrypt"===r.crypto.kdf){const e=r.crypto.kdfparams;s=nM(i,"string"==typeof e.salt?dS(e.salt):e.salt,e.n,e.p,e.r,e.dklen)}else{if("pbkdf2"!==r.crypto.kdf)throw new Ty;{const e=r.crypto.kdfparams;s=JT(i,"string"==typeof e.salt?dS(e.salt):e.salt,e.c,e.dklen,"sha256")}}const o=dS(r.crypto.ciphertext);if(gA(oA(s.slice(16,32),o)).replace("0x","")!==r.crypto.mac)throw new My;const a=yield async function(e,t,n,r="aes-128-ctr",i=!0){if(CT(t,n,r),MT.web){const[s,o]=await PT(r,t,n);if(!i&&"aes-cbc"===o.name){const i=await async function(e,t,n,r){const i=e.slice(-16);for(let e=0;e<16;e++)i[e]^=16^n[e];return(await RT(i,t,n,r)).slice(0,16)}(e,t,n,r);e=S_(e,i)}const a=await MT.web.subtle.decrypt(o,s,e),l=new Uint8Array(a);if("aes-cbc"===o.name&&!function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(await RT(l,t,n,r),e))throw new Error("AES: wrong padding");return l}if(MT.node){const s=MT.node.createDecipheriv(r,t,n);return s.setAutoPadding(i),S_(s.update(e),s.final())}throw new Error("The environment doesn't have AES module")}(dS(r.crypto.ciphertext),s.slice(0,16),dS(r.crypto.cipherparams.iv));return rP(a)})))(e,n,null===(i=null==r?void 0:r.nonStrict)||void 0===i||i);return Object.assign(Object.assign({},s),{signTransaction:e=>Mk(void 0,void 0,void 0,(function*(){return t(e,s.privateKey)}))})})),i=()=>{const e=(()=>{const e=eC.utils.randomPrivateKey();return rP(`${uS(e)}`)})();return Object.assign(Object.assign({},e),{signTransaction:n=>Mk(void 0,void 0,void 0,(function*(){return t(n,e.privateKey)}))})},s=new TT({create:i,privateKeyToAccount:n,decrypt:r});return{signTransaction:t,create:i,privateKeyToAccount:n,decrypt:r,recoverTransaction:JC,hashMessage:KC,sign:QC,recover:$C,encrypt:nP,wallet:s,privateKeyToAddress:eP,parseAndValidatePrivateKey:YC,privateKeyToPublicKey:tP}};class Pk extends oP{constructor(e){var t;(QS(e)||"string"==typeof e&&""===e.trim()||"string"!=typeof e&&!gT(e)&&!e.provider)&&console.warn("NOTE: web3.js is running without provider. You need to pass a provider in order to interact with the network!");let r={};"string"==typeof e||gT(e)?r.provider=e:r=e||{},r.registeredSubscriptions=Object.assign(Object.assign({},UI),null!==(t=r.registeredSubscriptions)&&void 0!==t?t:{}),super(r);const i=Ck(this);this._wallet=i.wallet,this._accountProvider=i,this.utils=n;const s=this,o=s.use(FI);this.eth=Object.assign(o,{ens:s.use(wk,eL.main),Iban:aP,net:s.use(VP),personal:s.use(Ak),Contract:class extends JI{constructor(e,t,n,r,i){if(KS(t)&&KS(n))throw new jy("Should not provide options at both 2nd and 3rd parameters");let o,a,l={},c=kE;if(!QS(t)&&"object"!=typeof t&&"string"!=typeof t)throw new jy;"string"==typeof t&&(o=t),l=KS(t)?t:KS(n)?n:{},a=t instanceof oP?t:n instanceof oP?n:r instanceof oP?r:s.getContextObject(),i?c=i:cA(n)?c=n:cA(r)&&(c=r),super(e,o,l,a,c),super.subscribeToContextEvents(s)}},abi:Tk,accounts:i})}}Pk.version="4.3.0",Pk.utils=n,Pk.modules={Web3Eth:FI,Iban:aP,Net:VP,ENS:wk,Personal:Ak};const Rk=Pk;var Ik="https://metamask.app.link/dapp/sale.vorpal.finance/",Lk="0x38",kk="Binance",Ok=18,Nk="BNB",Dk="https://bsc-dataseed.binance.org/",Bk={keepAlive:!0,withCredentials:!1,timeout:2e4,headers:[{name:"Access-Control-Allow-Origin",value:"*"}]};function Uk(e){return Uk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uk(e)}function Fk(){Fk=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof v?t:v,o=Object.create(s.prototype),a=new R(r||[]);return i(o,"_invoke",{value:T(e,n,a)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};c(_,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,o)&&(_=w);var E=b.prototype=v.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,s,o,a){var l=d(e[i],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Uk(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function T(t,n,r){var i=h;return function(s,o){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var l=M(a,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=d(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(Uk(t)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new A(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),c(E,l,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function zk(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function Hk(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){zk(s,r,i,o,a,"next",e)}function a(e){zk(s,r,i,o,a,"throw",e)}o(void 0)}))}}var Gk=window.ethereum;function Vk(){return Gk.chainId===Lk}function jk(){return Wk.apply(this,arguments)}function Wk(){return Wk=Hk(Fk().mark((function e(){return Fk().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Hk(Fk().mark((function e(t,n){var r;return Fk().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gk||(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(document.location.href=Ik),t("")),e.next=3,Gk.request({method:"eth_requestAccounts"},Bk);case 3:if(r=e.sent,Vk()){e.next=9;break}return e.next=7,Gk.request({method:"wallet_addEthereumChain",params:[{chainId:Lk,chainName:kk,nativeCurrency:{name:Nk,symbol:Nk,decimals:Ok},rpcUrls:[Dk]}]});case 7:e.next=10;break;case 9:t(r[0]);case 10:setTimeout((function(){console.log(Gk.chainId),Vk()?t(r[0]):n("User declined to switch network")}),1e3);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),Wk.apply(this,arguments)}new Rk(Dk);var qk=Symbol.for("immer-nothing"),Xk=Symbol.for("immer-draftable"),Zk=Symbol.for("immer-state");function Yk(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kk=Object.getPrototypeOf;function Qk(e){return!!e&&!!e[Zk]}function Jk(e){return!!e&&(eO(e)||Array.isArray(e)||!!e[Xk]||!!e.constructor?.[Xk]||sO(e)||oO(e))}var $k=Object.prototype.constructor.toString();function eO(e){if(!e||"object"!=typeof e)return!1;const t=Kk(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===$k}function tO(e,t){0===nO(e)?Object.entries(e).forEach((([n,r])=>{t(n,r,e)})):e.forEach(((n,r)=>t(r,n,e)))}function nO(e){const t=e[Zk];return t?t.type_:Array.isArray(e)?1:sO(e)?2:oO(e)?3:0}function rO(e,t){return 2===nO(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function iO(e,t,n){const r=nO(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function sO(e){return e instanceof Map}function oO(e){return e instanceof Set}function aO(e){return e.copy_||e.base_}function lO(e,t){if(sO(e))return new Map(e);if(oO(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&eO(e)){if(!Kk(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[Zk];let r=Reflect.ownKeys(n);for(let t=0;t<r.length;t++){const i=r[t],s=n[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Kk(e),n)}function cO(e,t=!1){return dO(e)||Qk(e)||!Jk(e)||(nO(e)>1&&(e.set=e.add=e.clear=e.delete=uO),Object.freeze(e),t&&tO(e,((e,t)=>cO(t,!0)))),e}function uO(){Yk(2)}function dO(e){return Object.isFrozen(e)}var hO,fO={};function pO(e){const t=fO[e];return t||Yk(0),t}function mO(){return hO}function gO(e,t){t&&(pO("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function vO(e){yO(e),e.drafts_.forEach(_O),e.drafts_=null}function yO(e){e===hO&&(hO=e.parent_)}function bO(e){return hO={drafts_:[],parent_:hO,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _O(e){const t=e[Zk];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function xO(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Zk].modified_&&(vO(t),Yk(4)),Jk(e)&&(e=wO(t,e),t.parent_||SO(t,e)),t.patches_&&pO("Patches").generateReplacementPatches_(n[Zk].base_,e,t.patches_,t.inversePatches_)):e=wO(t,n,[]),vO(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==qk?e:void 0}function wO(e,t,n){if(dO(t))return t;const r=t[Zk];if(!r)return tO(t,((i,s)=>EO(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return SO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),tO(i,((i,o)=>EO(e,r,t,i,o,n,s))),SO(e,t,!1),n&&e.patches_&&pO("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function EO(e,t,n,r,i,s,o){if(Qk(i)){const o=wO(e,i,s&&t&&3!==t.type_&&!rO(t.assigned_,r)?s.concat(r):void 0);if(iO(n,r,o),!Qk(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(Jk(i)&&!dO(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;wO(e,i),t&&t.scope_.parent_||SO(e,i)}}function SO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&cO(t,n)}var AO={get(e,t){if(t===Zk)return e;const n=aO(e);if(!rO(n,t))return function(e,t,n){const r=CO(t,n);return r?"value"in r?r.value:r.get?.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Jk(r)?r:r===MO(e.base_,t)?(RO(e),e.copy_[t]=IO(r,e)):r},has:(e,t)=>t in aO(e),ownKeys:e=>Reflect.ownKeys(aO(e)),set(e,t,n){const r=CO(aO(e),t);if(r?.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=MO(aO(e),t),i=r?.[Zk];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)&&(void 0!==n||rO(e.base_,t)))return!0;RO(e),PO(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==MO(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,RO(e),PO(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=aO(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Yk(11)},getPrototypeOf:e=>Kk(e.base_),setPrototypeOf(){Yk(12)}},TO={};function MO(e,t){const n=e[Zk];return(n?aO(n):e)[t]}function CO(e,t){if(!(t in e))return;let n=Kk(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Kk(n)}}function PO(e){e.modified_||(e.modified_=!0,e.parent_&&PO(e.parent_))}function RO(e){e.copy_||(e.copy_=lO(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function IO(e,t){const n=sO(e)?pO("MapSet").proxyMap_(e,t):oO(e)?pO("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:mO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=AO;n&&(i=[r],s=TO);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:mO()).drafts_.push(n),n}function LO(e){return Qk(e)||Yk(10),kO(e)}function kO(e){if(!Jk(e)||dO(e))return e;const t=e[Zk];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=lO(e,t.scope_.immer_.useStrictShallowCopy_)}else n=lO(e,!0);return tO(n,((e,t)=>{iO(n,e,kO(t))})),t&&(t.finalized_=!1),n}tO(AO,((e,t)=>{TO[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),TO.deleteProperty=function(e,t){return TO.set.call(this,e,t,void 0)},TO.set=function(e,t,n){return AO.set.call(this,e[0],t,n,e[0])};var OO=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,(e=>t.call(this,e,...i)))}}let r;if("function"!=typeof t&&Yk(6),void 0!==n&&"function"!=typeof n&&Yk(7),Jk(e)){const i=bO(this),s=IO(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?vO(i):yO(i)}return gO(i,n),xO(r,i)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===qk&&(r=void 0),this.autoFreeze_&&cO(r,!0),n){const t=[],i=[];pO("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Yk(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,r;return[this.produce(e,t,((e,t)=>{n=e,r=t})),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Jk(e)||Yk(8),Qk(e)&&(e=LO(e));const t=bO(this),n=IO(e,void 0);return n[Zk].isManual_=!0,yO(t),n}finishDraft(e,t){const n=e&&e[Zk];n&&n.isManual_||Yk(9);const{scope_:r}=n;return gO(r,t),xO(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=pO("Patches").applyPatches_;return Qk(e)?r(e,t):this.produce(e,(e=>r(e,t)))}};OO.produce;OO.produceWithPatches.bind(OO),OO.setAutoFreeze.bind(OO),OO.setUseStrictShallowCopy.bind(OO),OO.applyPatches.bind(OO),OO.createDraft.bind(OO),OO.finishDraft.bind(OO);var NO=e=>Array.isArray(e)?e:[e];Symbol(),Object.getPrototypeOf({});var DO="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},BO=0,UO=1;function FO(){return{s:BO,v:void 0,o:null,p:null}}function zO(e,t={}){let n=FO();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"==typeof n||"object"==typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=FO(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=FO(),e.set(n,t)):t=r}}const a=t;let l;if(t.s===UO?l=t.v:(l=e.apply(null,arguments),s++),a.s=UO,r){const e=i?.deref?.()??i;null!=e&&r(e,l)&&(l=e,0!==s&&s--),i="object"==typeof l&&null!==l||"function"==typeof l?new DO(l):l}return a.v=l,l}return o.clearCache=()=>{n=FO(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function HO(e,...t){const n="function"==typeof e?{memoize:e,memoizeOptions:t}:e,r=(...e)=>{let t,r=0,i=0,s={},o=e.pop();"object"==typeof o&&(s=o,o=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);const a={...n,...s},{memoize:l,memoizeOptions:c=[],argsMemoize:u=zO,argsMemoizeOptions:d=[],devModeChecks:h={}}=a,f=NO(c),p=NO(d),m=function(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every((e=>"function"==typeof e))){const n=e.map((e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e)).join(", ");throw new TypeError(`${t}[${n}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),g=l((function(){return r++,o.apply(null,arguments)}),...f),v=u((function(){i++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(m,arguments);return t=g.apply(null,e),t}),...p);return Object.assign(v,{resultFunc:o,memoizedResultFunc:g,dependencies:m,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>t,recomputations:()=>r,resetRecomputations:()=>{r=0},memoize:l,argsMemoize:u})};return Object.assign(r,{withTypes:()=>r}),r}var GO=HO(zO),VO=Object.assign(((e,t=GO)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const n=Object.keys(e);return t(n.map((t=>e[t])),((...e)=>e.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})))}),{withTypes:()=>VO});function jO(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var WO=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),qO=()=>Math.random().toString(36).substring(7).split("").join("."),XO={INIT:`@@redux/INIT${qO()}`,REPLACE:`@@redux/REPLACE${qO()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${qO()}`};function ZO(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function YO(e,t,n){if("function"!=typeof e)throw new Error(jO(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(jO(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(jO(1));return n(YO)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function c(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(l)throw new Error(jO(3));return i}function d(e){if("function"!=typeof e)throw new Error(jO(4));if(l)throw new Error(jO(5));let t=!0;c();const n=a++;return o.set(n,e),function(){if(t){if(l)throw new Error(jO(6));t=!1,c(),o.delete(n),s=null}}}function h(e){if(!ZO(e))throw new Error(jO(7));if(void 0===e.type)throw new Error(jO(8));if("string"!=typeof e.type)throw new Error(jO(17));if(l)throw new Error(jO(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=o).forEach((e=>{e()})),e}return h({type:XO.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(jO(10));r=e,h({type:XO.REPLACE})},[WO]:function(){const e=d;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(jO(11));function n(){const e=t;e.next&&e.next(u())}return n(),{unsubscribe:e(n)}},[WO](){return this}}}}}function KO(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if(void 0===n(void 0,{type:XO.INIT}))throw new Error(jO(12));if(void 0===n(void 0,{type:XO.PROBE_UNKNOWN_ACTION()}))throw new Error(jO(13))}))}(n)}catch(e){i=e}return function(e={},t){if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],l=n[a],c=e[a],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(jO(14));o[a]=u,s=s||u!==c}return s=s||r.length!==Object.keys(e).length,s?o:e}}function QO(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce(((e,t)=>(...n)=>e(t(...n))))}function JO(e){return({dispatch:t,getState:n})=>r=>i=>"function"==typeof i?i(t,n,e):r(i)}var $O=JO(),eN=JO,tN=(((...e)=>{HO(...e)})(zO),"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?QO:QO.apply(null,arguments)});function nN(e,t){function n(...n){if(t){let r=t(...n);if(!r)throw new Error(lN(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return ZO(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var rN=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};var iN=e=>t=>{setTimeout(t,e)},sN="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:iN(10);Symbol.for("rtk-slice-createasyncthunk");var{assign:oN}=Object,aN="listenerMiddleware";function lN(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}nN(`${aN}/add`),nN(`${aN}/removeAll`),nN(`${aN}/remove`),Symbol.for("rtk-state-proxy-original");var cN="AUTH",uN=nN(cN),dN=KO({account:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===cN?t.payload:e}});function hN(e){return hN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hN(e)}function fN(){fN=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var s=t&&t.prototype instanceof v?t:v,o=Object.create(s.prototype),a=new R(r||[]);return i(o,"_invoke",{value:T(e,n,a)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",g={};function v(){}function y(){}function b(){}var _={};c(_,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(I([])));w&&w!==n&&r.call(w,o)&&(_=w);var E=b.prototype=v.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,s,o,a){var l=d(e[i],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==hN(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,a)}),(function(e){n("throw",e,o,a)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,a)}))}a(l.arg)}var s;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return s=s?s.then(i,i):i()}})}function T(t,n,r){var i=h;return function(s,o){if(i===p)throw new Error("Generator is already running");if(i===m){if("throw"===s)throw o;return{value:e,done:!0}}for(r.method=s,r.arg=o;;){var a=r.delegate;if(a){var l=M(a,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var s=d(i,t.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,g;var o=s.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}throw new TypeError(hN(t)+" is not iterable")}return y.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(A.prototype),c(A.prototype,a,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,s){void 0===s&&(s=Promise);var o=new A(u(e,n,r,i),s);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),c(E,l,"Generator"),c(E,o,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function pN(e,t,n,r,i,s,o){try{var a=e[s](o),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,i)}function mN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const gN=function(){var e,t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mN(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(!1),2),n=t[0],r=t[1],i=Kv((function(e){return e})),s=iy(),a=function(){var e=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function o(e){pN(s,r,i,o,a,"next",e)}function a(e){pN(s,r,i,o,a,"throw",e)}o(void 0)}))}}(fN().mark((function e(){return fN().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}return r(!0),e.next=4,jk().then((function(e){s(uN(e))})).catch((function(e){console.log(e)}));case 4:r(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.createElement("div",{className:"header"},o.createElement("div",{className:"headerSection logoSection"},o.createElement(sy,{width:234,height:36})),o.createElement("div",{className:"headerSection menuSection"},o.createElement(ay,null)),o.createElement("div",{className:"headerSection authSection"},o.createElement(ly,{text:i.account?(e=i.account,e?`${e.substring(0,5)}...${e.substring(e.length-4)}`:""):"Connect wallet",onClick:a})))},vN=function(){return o.createElement("div",{className:"pageCtnr"},o.createElement("div",{className:"vorpalPage"},o.createElement(gN,null)))};var yN=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let s=new rN;return t&&(function(e){return"boolean"==typeof e}(t)?s.push($O):s.push(eN(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,l;if("function"==typeof n)a=n;else{if(!ZO(n))throw new Error(lN(1));a=KO(n)}l="function"==typeof r?r(t):t();let c=QO;i&&(c=tN({trace:!1,..."object"==typeof i&&i}));const u=function(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(jO(15))};const o={getState:i.getState,dispatch:(e,...t)=>s(e,...t)},a=e.map((e=>e(o)));return s=QO(...a)(i.dispatch),{...i,dispatch:s}}}(...l),d=(e=>function(t){const{autoBatch:n=!0}=t??{};let r=new rN(e);return n&&r.push(((e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?sN:"callback"===e.type?e.queueNotification:iN(e.timeout),c=()=>{o=!1,s&&(s=!1,a.forEach((e=>e())))};return Object.assign({},r,{subscribe(e){const t=r.subscribe((()=>i&&e()));return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{return i=!e?.meta?.RTK_autoBatch,s=!i,s&&(o||(o=!0,l(c))),r.dispatch(e)}finally{i=!0}}})})("object"==typeof n?n:void 0)),r})(u);return YO(a,s,c(..."function"==typeof o?o(d):d()))}({reducer:dN});const bN=yN;a.createRoot(document.getElementById("root")).render(o.createElement(o.StrictMode,null,o.createElement($v,{store:bN},o.createElement(Sv,null),o.createElement(vN,null))))})()})();